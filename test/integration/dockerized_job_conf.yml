---
runners:
  local:
    load: galaxy.jobs.runners.local:LocalJobRunner
    workers: 1

execution:
  default: local_docker
  environments:
    local_docker:
      runner: local
      env:
        - name: 'JOBCONF_ENV_VAR'
          value: 'YEAH'
        - execute: 'true' # just check that this does not confuse env setup
      docker_enabled: true
      docker_env_CONTAINER_ENV_VAR: "CONTAINER_VAR_VALUE"
      require_container: true
      tmp_dir: '$(mktemp -d)'
    local_docker_inline_container_resolvers:
      runner: local
      env:
        - name: 'JOBCONF_ENV_VAR'
          value: 'YEAH'
      docker_enabled: true
      container_resolvers:
        - type: fallback
          identifier: 'quay.io/biocontainers/bwa:0.7.15--0'
      require_container: true
    local_upload:
      runner: local

tools:
  - id: upload1
    environment: local_upload
  - id: mulled_example_broken_no_requirements_fallback
    environment: local_docker_inline_container_resolvers
