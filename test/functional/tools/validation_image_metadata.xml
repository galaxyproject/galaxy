<tool id="validation_image_metadata" name="validation_image_metadata" version="1.0">
    <macros>
        <!-- Tests are not executed if they have no output checks, thus define a dummy check -->
        <xml name="test-output">
            <output name="output">
                <assert_contents>
                    <has_size value="0" delta="0" />
                </assert_contents>
            </output>
        </xml>
   </macros>
    <command><![CDATA[
      cat /dev/null > testfile
    ]]></command>
    <inputs>
        <!-- Checks for "axes" metadata -->
        <param name="input_axes_yx" type="data" format="data" optional="true">
            <validator type="dataset_metadata_equal" metadata_name="axes" value="YX" />
        </param>
        <param name="input_axes_yxc" type="data" format="data" optional="true">
            <validator type="dataset_metadata_equal" metadata_name="axes" value="YXC" />
        </param>
        <param name="input_axes_zcyx" type="data" format="data" optional="true">
            <validator type="dataset_metadata_equal" metadata_name="axes" value="ZCYX" />
        </param>
        <!-- Checks for "dtype" metadata -->
        <param name="input_dtype_uint8" type="data" format="data" optional="true">
            <validator type="dataset_metadata_equal" metadata_name="dtype" value="uint8" />
        </param>
        <param name="input_dtype_uint16" type="data" format="data" optional="true">
            <validator type="dataset_metadata_equal" metadata_name="dtype" value="uint16" />
        </param>
        <param name="input_dtype_float64" type="data" format="data" optional="true">
            <validator type="dataset_metadata_equal" metadata_name="dtype" value="float64" />
        </param>
    </inputs>
    <outputs>
        <data name="output" format="data" />
    </outputs>
    <tests>
        <!-- Tests with TIFF files -->
        <test>
            <param name="input_axes_yx" value="im1_uint8.tif" />
            <param name="input_axes_zcyx" value="im6_uint8.tif" />
            <param name="input_dtype_uint8" value="im6_uint8.tif" />
            <param name="input_dtype_uint16" value="im8_uint16.tif" />
            <param name="input_dtype_float64" value="im4_float.tif" />
            <expand macro="test-output" />
        </test>
        <!-- Tests with PNG files -->
        <test>
            <param name="input_axes_yx" value="im1_uint8.png" />
            <param name="input_axes_yxc" value="im3_a.png" />
            <param name="input_dtype_uint8" value="im1_uint8.png" />
            <expand macro="test-output" />
        </test>
    </tests>
</tool>
