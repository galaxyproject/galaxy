{"version":3,"sources":["webpack:///nvd3_histogram_discrete.js","webpack:///webpack/bootstrap e3622d0033a89edad914?63f1*******","webpack:///./static/repository/visualizations/nvd3/histogram_discrete/wrapper.js","webpack:///./static/repository/utilities/utils.js?825c*****","webpack:///./static/repository/visualizations/utilities/tabular-utilities.js?ccb0*****","webpack:///./static/repository/visualizations/utilities/tabular-datasets.js?bf7b*****","webpack:///./~/css-loader/lib/css-base.js?da04*****","webpack:///./~/style-loader/addStyles.js?b980*****","webpack:///./static/repository/plugins/nvd3/nv.d3.css?e878","webpack:///./static/repository/plugins/nvd3/nv.d3.css?3f1e","webpack:///./static/repository/plugins/nvd3/nv.d3.js?7602","webpack:///./static/repository/visualizations/nvd3/common/wrapper.js?0443","webpack:///./static/repository/utilities/jobs.js?c47c*"],"names":["define","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","Utilities","Jobs","NVD3","Backbone","Model","extend","initialize","options","request","chart","buildJobDictionary","dataset","dataset_groups","Collection","groups","each","group","index","add","__data_columns","x","is_label","y","is_numeric","key","get","dataset_id","type","makeConfig","nvd3_model","showControls","process","reject","apply","undefined","clone","obj","JSON","parse","stringify","isJSON","text","test","replace","top","__utils__get__","cache_key","cache","success","window","console","debug","url","data","response","error","ajaxConfig","contentType","$","isEmptyObject","indexOf","param","dataType","ajax","done","jQuery","parseJSON","e","fail","response_text","responseText","always","complete","merge","optionsDefault","_","defaults","uid","__utils__uid__","Utils","Datasets","settings_string","columns_string","group_index","settings","attributes","settings_value","pair","RegExp","substring","length","data_columns","name","parseInt","tool_id","inputs","input","src","columns","panelHelper","render","targets","result","valid","state","resolve","err","getDomains","keys","_apply","operator","value","value_sub","d3","values","d","Math","min","max","makeSeries","plot_data","value_index","point","key_index","column_index","push","makeCategories","column_keys","array","value_dict","String","mapCategories","i","makeUniqueCategories","with_index","categories","counter","column_def","j","makeTickFormat","precision","formatter","d3format","prefix","formatPrefix","scale","toFixed","symbol","format","label","isNaN","addZoom","fixDomain","domain","boundary","scaleExtent","zoomed","yDomain","yScale","y_boundary","xDomain","xScale","x_boundary","redraw","unzoomed","d3zoom","translate","yAxis","xAxis","svg","slice","behavior","zoom","nice","on","_cache","column_list","column_name","column","block_id","_block_id","_fillFromCache","Galaxy","root","data_type","provider","indeces","toString","results","Array","row","v","limit","column_data","dict","list","this","item","join","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","parts","addStyle","listToStyles","newStyles","css","media","sourceMap","part","insertStyleElement","styleElement","head","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","Error","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","document","createElement","createLinkElement","linkElement","rel","update","remove","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","btoa","updateLink","href","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","setAttribute","unescape","encodeURIComponent","blob","oldSrc","memoize","fn","memo","arguments","isOldIE","navigator","userAgent","toLowerCase","getElementsByTagName","newList","mayRemove","textStore","replacement","filter","Boolean","content","locals","daysInMonth","month","year","Date","getDate","d3_time_range","floor","step","number","t0","t1","dt","time","times","date","nv","version","dev","tooltip","utils","models","charts","graphs","logs","dispatch","startTime","endTime","totalTime","log","Function","prototype","active","render_start","setTimeout","graph","queue","generate","callback","callee","render_end","addGraph","identity","strip","s","monthEnd","getFullYear","getMonth","monthEnds","setUTCDate","getUTCDate","setDate","interactiveGuideline","layer","selection","mouseHandler","d3mouse","mouse","mouseX","mouseY","subtractMargin","mouseOutAnyReason","isMSIE","event","offsetX","offsetY","target","tagName","className","baseVal","match","margin","left","availableWidth","availableHeight","relatedTarget","ownerSVGElement","nvPointerEventsClass","elementMouseout","renderGuideLine","pointXValue","invert","elementMousemove","elementDblclick","container","select","width","height","wrap","selectAll","wrapEnter","enter","append","attr","svgContainer","showGuideLine","line","NaNtoZero","exit","linear","interactiveBisect","searchVal","xAccessor","bisect","bisector","currentValue","nextIndex","nextValue","abs","nearestValueIndex","threshold","yDistMax","Infinity","indexToHighlight","forEach","delta","convertViewBoxRatio","chartContainer","node","viewBox","split","ratio","style","position","getTooltipContainer","newContent","body","classes","innerHTML","classed","nvtooltip","enabled","dataSeriesExists","fixedTop","contentGenerator","tooltipElem","svgComp","svgOffset","getBoundingClientRect","svgBound","chartBound","svgBoundTop","containerBound","offsetLeft","scrollLeft","offsetTop","scrollTop","snapDistance","calcTooltipPosition","gravity","distance","random","valueFormatter","headerFormatter","table","theadEnter","html","tbodyEnter","trowEnter","series","highlight","color","opacityScale","range","opacity","outerHTML","footer","show","pos","dist","parentContainer","findFirstNonSVGParent","Elem","findTotalOffsetTop","initialTop","offsetParent","findTotalOffsetLeft","initialLeft","offsetHeight","offsetWidth","windowWidth","windowSize","windowHeight","pageYOffset","pageXOffset","innerWidth","scrollWidth","innerHeight","scrollHeight","tooltipTop","tooltipLeft","tLeft","tTop","cleanup","tooltips","getElementsByClassName","purging","transitionDelay","removeMe","pop","size","compatMode","documentElement","windowResize","fun","oldresize","onresize","getColor","Object","defaultColor","colors","category20","customTheme","dictionary","getKey","defaultColors","defIndex","pjax","links","load","fragment","replaceChild","history","pushState","textContent","preventDefault","calcApproxTextWidth","svgTextElem","fontSize","textLength","n","optionsFunc","args","map","axis","g","ticks","orient","scale0","fmt","tickFormat","axisLabel","axisLabelText","w","showMaxMin","axisMaxMin","tickPadding","xLabelMargin","maxTextWidth","xTicks","rotateLabels","getBBox","sin","PI","isOrdinal","rangeBand","staggerLabels","rotateYLabel","right","axisLabelDistance","maxMinRange","highlightZero","parseFloat","round","__data__","copy","bottom","rebind","rangeBands","historicalBar","extent","getX","concat","forceX","padData","xRange","getY","forceY","yRange","defsEnter","gEnter","chartClick","clipEdge","bars","interactive","elementMouseover","pointIndex","seriesIndex","elementClick","stopPropagation","elementDblClick","rval","highlightPoint","isHoverOver","clearHighlights","bullet","rangez","ranges","sort","descending","markerz","markers","measurez","measures","rangeLabelz","rangeLabels","markerLabelz","markerLabels","measureLabelz","measureLabels","x1","reverse","__chart__","rangeMin","rangeMax","rangeAvg","w1","xp1","datum","h3","bulletChart","that","noDataText","noData","x0","title","subtitle","bulletWrap","transition","tick","tickEnter","tickUpdate","showTooltip","timer","flush","offsetElement","tooltipShow","tooltipHide","tooltipContent","cumulativeLineChart","dragStart","dragMove","dx","updateZero","dragEnd","stateChange","indexLine","oldDuration","transitionDuration","disabled","defaultState","indexDrag","drag","lines","rescaleY","seriesDomains","initialDomain","completeDomain","clamp","indexify","interactivePointerEvents","showLegend","legend","controlsData","controls","rightAlign","rightAlignYAxis","tempDisabled","useInteractiveGuideline","interactiveLayer","display","linesWrap","avgLineData","average","avgLines","getAvgLineY","yVal","showXAxis","tickSize","showYAxis","newState","singlePoint","pointXLocation","allData","yValue","domainExtent","xValue","indexValue","noErrorCheck","updateState","useVoronoi","discreteBar","seriesData","y0","showValues","hover","barsEnter","valueFormat","rectClass","ordinal","discreteBarChart","beforeUpdate","discretebar","barsWrap","distribution","naxis","distWrap","getData","functor","historicalBarChart","indentedTree","click","unshift","shiftKey","_values","hasChildren","icon","iconOpen","iconClose","folded","depth","tree","layout","children","childIndent","nodes","tableEnter","tableClass","header","thead","theadRow1","tbody","filterZero","nodeEnter","nodeName","getUrl","showCount","order","scatter","seriesEnter","legendMouseover","legendMouseout","legendClick","radioButtonMode","every","legendDblclick","align","seriesWidths","nodeTextLength","legendText","getComputedTextLength","seriesPerRow","legendWidth","columnWidths","k","reduce","prev","cur","xPositions","curX","ceil","xpos","ypos","newxpos","maxwidth","scatterWrap","areaPaths","isArea","area","interpolate","defined","y1","linePaths","sizeDomain","lineChart","linePlusBarChart","dataBars","bar","dataLines","y2","originalKey","y1Axis","y2Axis","lineWithFocusChart","resizePath","availableHeight2","updateBrushBG","brush","empty","brushExtent","brushBG","x2","leftWidth","rightWidth","onBrush","focusLinesWrap","availableHeight1","height2","margin2","lines2","focusEnter","contextEnter","contextLinesWrap","oldTransition","brushBGenter","gBrush","x2Axis","xTickFormat","yTickFormat","linePlusBarWithFocusChart","focusBarsWrap","y3","bars2","y4","series1","series2","bars2Wrap","lines2Wrap","y3Axis","y4Axis","multiBar","hideable","stacked","stack","offset","stackOffset","posBase","negBase","f","groupSpacing","barColor","rgb","darker","delay","multiBarChart","multibar","controlWidth","getTranslate","staggerUp","staggerDown","totalInBetweenTicks","reduceXTicks","multiBarHorizontal","valuePadding","showBarLabels","multiBarHorizontalChart","multiChart","dataLines1","dataLines2","dataBars1","dataBars2","dataStack1","dataStack2","lines1","bars1","stack1","stack2","lines1Wrap","bars1Wrap","stack1Wrap","stack2Wrap","extraValue1","a","b","aVal","extraValue2","yScale1","yDomain1","yScale2","yDomain2","yAxis1","yAxis2","stackedArea","ohlcBar","getLow","getHigh","getOpen","getClose","open","close","high","low","pie","radius","arcRadius","arc","outerRadius","startAngle","endAngle","donut","innerRadius","donutRatio","slices","pieLabels","ae","pageX","pageY","_current","showLabels","labelsArc","pieLabelsOutside","donutLabelsOutside","labelSunbeamLayout","rotateAngle","centroid","labelLocationHash","avgHeight","avgWidth","createHashKey","coordinates","center","hashKey","percent","labelTypes","labelThreshold","labelType","getDescription","description","pieChart","pieWrap","tooltipLabel","updateInteractiveLayer","vertices","groupIndex","pX","pY","pointArray","pointActive","clipVoronoi","pointClipsEnter","pointClips","clipRadius","bounds","geom","polygon","epsilon","voronoi","clip","pointPaths","mouseEventCallback","mDispatch","needsUpdate","getSize","padDataOuter","z","forceSize","sizeRange","z0","onlyCircles","points","pointKey","sqrt","getShape","clearTimeout","timeoutID","shape","notActive","zScale","scatterChart","updateFisheye","pauseFisheye","distortion","fisheye","focus","distX","distY","xPadding","yPadding","showDistX","showDistY","tooltipX","tooltipY","leftX","topX","leftY","topY","xVal","tooltipXContent","tooltipYContent","scatterPlusLineChart","regWrap","regLine","slope","intercept","sparkline","paths","yValues","maxPoint","lastIndexOf","minPoint","currentPoint","animate","sparklinePlus","updateValueLine","paused","hoverValue","hoverEnter","sparklineHover","getClosestIndex","closestIndex","sparklineWrap","valueWrap","rightAlignValue","alignValue","showValue","dataRaw","aseries","dataFiltered","out","yHeight","zeroArea","path","areaMouseover","areaMouseout","areaClick","d3_stackedOffset_stackPercent","stackData","o","stackedAreaChart","controlLabels","metaKey","stream","expanded","stack_percent","cData","stackedWrap","setTickFormat","yAxisTickFormat","tooltipValue","stackedValue","stackedY0","stackedY","View","self","canvas_id","d3chart","_makeAxes","definition","showmaxmin","canvas","zoomable","WAITTIME","parameters","set","dataset_id_job","wait","outputs","refreshHdas","job","save","message","previous","deleted","ready","currHistoryPanel","refreshContents"],"mappings":"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","file":"nvd3_histogram_discrete.js","sourcesContent":["define(function() { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(4), __webpack_require__(20), __webpack_require__(11) ], __WEBPACK_AMD_DEFINE_RESULT__ = function( Utilities, Jobs, NVD3 ) {\n\t    return Backbone.Model.extend({\n\t        initialize: function( options ) {\n\t            Jobs.request( options.chart, Utilities.buildJobDictionary( options.chart, 'histogramdiscrete' ), function( dataset ) {\n\t                var dataset_groups = new Backbone.Collection();\n\t                options.chart.groups.each( function( group, index ) {\n\t                    dataset_groups.add({\n\t                        __data_columns: { x: { is_label: true }, y: { is_numeric: true } },\n\t                        x     : 0,\n\t                        y     : index + 1,\n\t                        key   : group.get( 'key' )\n\t                    });\n\t                });\n\t                options.dataset_id = dataset.id;\n\t                options.dataset_groups = dataset_groups;\n\t                options.type = 'multiBarChart';\n\t                options.makeConfig = function( nvd3_model ) {\n\t                    nvd3_model.options( { showControls: true } );\n\t                };\n\t                new NVD3( options );\n\t            }, function() { options.process.reject() } );\n\t        }\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/** Useful helper functions */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t\n\t    /** Clone */\n\t    function clone( obj ) {\n\t        return JSON.parse( JSON.stringify( obj ) || null );\n\t    };\n\t\n\t    /**\n\t     * Check if a string is a json string\n\t     * @param{String}   text - Content to be validated\n\t     */\n\t    function isJSON(text) {\n\t        return /^[\\],:{}\\s]*$/.test(text.replace(/\\\\[\"\\\\\\/bfnrtu]/g, '@').\n\t            replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\n\t            replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''));\n\t    };\n\t\n\t    /**\n\t     * Request handler for GET\n\t     * @param{String}   url     - Url request is made to\n\t     * @param{Function} success - Callback on success\n\t     * @param{Function} error   - Callback on error\n\t     * @param{Boolean}  cache   - Use cached data if available\n\t     */\n\t    function get (options) {\n\t        top.__utils__get__ = top.__utils__get__ || {};\n\t        var cache_key = JSON.stringify( options );\n\t        if (options.cache && top.__utils__get__[cache_key]) {\n\t            options.success && options.success(top.__utils__get__[cache_key]);\n\t            window.console.debug('utils.js::get() - Fetching from cache [' + options.url + '].');\n\t        } else {\n\t            request({\n\t                url     : options.url,\n\t                data    : options.data,\n\t                success : function(response) {\n\t                    top.__utils__get__[cache_key] = response;\n\t                    options.success && options.success(response);\n\t                },\n\t                error : function(response) {\n\t                    options.error && options.error(response);\n\t                }\n\t            });\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Request handler\n\t     * @param{String}   method  - Request method ['GET', 'POST', 'DELETE', 'PUT']\n\t     * @param{String}   url     - Url request is made to\n\t     * @param{Object}   data    - Data send to url\n\t     * @param{Function} success - Callback on success\n\t     * @param{Function} error   - Callback on error\n\t     */\n\t    function request (options) {\n\t        var ajaxConfig = {\n\t            contentType : 'application/json',\n\t            type        : options.type || 'GET',\n\t            data        : options.data || {},\n\t            url         : options.url\n\t        }\n\t        if ( ajaxConfig.type == 'GET' || ajaxConfig.type == 'DELETE' ) {\n\t            if ( !$.isEmptyObject(ajaxConfig.data) ) {\n\t                ajaxConfig.url += ajaxConfig.url.indexOf('?') == -1 ? '?' : '&';\n\t                ajaxConfig.url += $.param(ajaxConfig.data, true);\n\t            }\n\t            ajaxConfig.data = null;\n\t        } else {\n\t            ajaxConfig.dataType = 'json';\n\t            ajaxConfig.url      = ajaxConfig.url;\n\t            ajaxConfig.data     = JSON.stringify( ajaxConfig.data );\n\t        }\n\t        $.ajax( ajaxConfig ).done( function( response ) {\n\t            if ( typeof response === 'string' && isJSON( response ) ) {\n\t                try {\n\t                    response = response.replace( 'Infinity,', '\"Infinity\",' );\n\t                    response = jQuery.parseJSON( response );\n\t                } catch ( e ) {\n\t                    console.debug( e );\n\t                }\n\t            }\n\t            options.success && options.success( response );\n\t        }).fail( function( response ) {\n\t            var response_text = null;\n\t            try {\n\t                response_text = jQuery.parseJSON( response.responseText );\n\t            } catch (e) {\n\t                response_text = response.responseText;\n\t            }\n\t            options.error && options.error( response_text, response );\n\t        }).always( function() {\n\t            options.complete && options.complete();\n\t        });\n\t    };\n\t\n\t    /**\n\t     * Safely merge to dictionaries\n\t     * @param{Object}   options         - Target dictionary\n\t     * @param{Object}   optionsDefault  - Source dictionary\n\t     */\n\t    function merge (options, optionsDefault) {\n\t        if (options) {\n\t            return _.defaults(options, optionsDefault);\n\t        } else {\n\t            return optionsDefault;\n\t        }\n\t    };\n\t\n\t    /** Create a unique id */\n\t    function uid(){\n\t        top.__utils__uid__ = top.__utils__uid__ || 0;\n\t        return 'uid-' + top.__utils__uid__++;\n\t    };\n\t\n\t    return {\n\t        get     : get,\n\t        merge   : merge,\n\t        uid     : uid,\n\t        request : request,\n\t        clone   : clone,\n\t        isJSON  : isJSON\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(1), __webpack_require__(5) ], __WEBPACK_AMD_DEFINE_RESULT__ = function( Utils, Datasets ) {\n\t    /** build job dictionary */\n\t    function buildJobDictionary( chart, module ) {\n\t        var settings_string = '';\n\t        var columns_string = '';\n\t        var group_index = 0;\n\t        for ( key in chart.settings.attributes ) {\n\t            var settings_value = chart.settings.get( key );\n\t            _.each( [ [ ' ', '&#32;' ], [ ',', '&#44;' ], [ ':', '&#58;' ] ], function( pair ) {\n\t                settings_value = settings_value.replace( new RegExp( pair[ 0 ], 'g' ), pair[ 1 ] );\n\t            });\n\t            settings_string += key + ':' + settings_value + ', ';\n\t        };\n\t        settings_string = settings_string.substring( 0, settings_string.length - 2 )\n\t        chart.groups.each( function( group ) {\n\t            group_index++;\n\t            _.each( group.get( '__data_columns' ), function( data_columns, name ) {\n\t                columns_string += name + '_' + group_index + ':' + ( parseInt( group.get( name ) ) + 1 ) + ', ';\n\t            });\n\t        });\n\t        columns_string = columns_string.substring( 0, columns_string.length - 2 );\n\t        return {\n\t                    'tool_id'       : 'charts',\n\t                    'inputs'        : {\n\t                        'input'     : {\n\t                            'id'    : chart.get( 'dataset_id' ),\n\t                            'src'   : 'hda'\n\t                        },\n\t                        'module'    : module,\n\t                        'columns'   : columns_string,\n\t                        'settings'  : settings_string\n\t                    }\n\t                }\n\t    };\n\t\n\t    /** Assists in assigning the viewport panels */\n\t    function panelHelper( options ) {\n\t        var self = this;\n\t        var process             = options.process;\n\t        var chart               = options.chart;\n\t        var render              = options.render;\n\t        var targets             = options.targets;\n\t        var dataset_id          = options.dataset_id || options.chart.get( 'dataset_id' );\n\t        var dataset_groups      = options.dataset_groups || options.chart.groups;\n\t        Datasets.request({\n\t            chart           : chart,\n\t            dataset_id      : dataset_id,\n\t            dataset_groups  : dataset_groups,\n\t            success         : function( result ) {\n\t                try {\n\t                    if ( targets.length == result.length ) {\n\t                        var valid = true;\n\t                        for ( var group_index in result ) {\n\t                            var group = result[ group_index ];\n\t                            if ( !render( targets[ group_index ], [ group ] ) ) {\n\t                                valid = false;\n\t                                break;\n\t                            }\n\t                        }\n\t                        if ( valid ) {\n\t                            chart.state( 'ok', 'Multi-panel chart drawn.' );\n\t                        }\n\t                    } else if ( targets.length == 1 ) {\n\t                        if ( render( targets[ 0 ], result ) ) {\n\t                            chart.state( 'ok', 'Chart drawn.' );\n\t                        }\n\t                    } else {\n\t                        chart.state( 'failed', 'Invalid panel count.' );\n\t                    }\n\t                    process.resolve();\n\t                } catch ( err ) {\n\t                    console.debug( 'FAILED: tabular-utilities::panelHelper() - ' + err );\n\t                    chart.state( 'failed', err );\n\t                    process.reject();\n\t                }\n\t            }\n\t        });\n\t    };\n\t\n\t    /** Get domain boundaries value */\n\t    function getDomains( groups, keys ) {\n\t        function _apply( operator, key ) {\n\t            var value = undefined;\n\t            for ( var group_index in groups ) {\n\t                var value_sub = d3[ operator ]( groups[ group_index ].values, function( d ) { return d[ key ] } );\n\t                value = value === undefined ? value_sub : Math[ operator ]( value, value_sub );\n\t            }\n\t            return value;\n\t        };\n\t        var result = {};\n\t        for( var index in keys ) {\n\t            var key = keys[ index ];\n\t            result[ key ] = {\n\t                min : _apply( 'min', key ),\n\t                max : _apply( 'max', key ),\n\t            };\n\t           \n\t        }\n\t        return result;\n\t    };\n\t\n\t    /** Default series maker */\n\t    function makeSeries( groups, keys ) {\n\t        var plot_data = [];\n\t        for ( var group_index in groups ) {\n\t            var group = groups[ group_index ];\n\t            var data = [];\n\t            for ( var value_index in group.values ) {\n\t                var point = [];\n\t                if ( keys ) {\n\t                    for ( var key_index in keys ) {\n\t                        var column_index = keys[ key_index ];\n\t                        point.push( group.values[ value_index ][ column_index ] );\n\t                    }\n\t                } else {\n\t                    for ( var column_index in group.values[ value_index ] ) {\n\t                        point.push( group.values[ value_index ][ column_index ] );\n\t                    }\n\t                }\n\t                data.push( point );\n\t            }\n\t            plot_data.push( data );\n\t        }\n\t        return plot_data;\n\t    };\n\t\n\t    /** Default category maker */\n\t    function makeCategories( groups, column_keys ) {\n\t        var array = {};\n\t        var data_columns = groups[ 0 ].__data_columns;\n\t        _.each( column_keys, function( key ) {\n\t            if ( data_columns[ key ].is_label ) {\n\t                array[ key ] = [];\n\t            }\n\t        });\n\t        if ( groups && groups[ 0 ] ) {\n\t            _.each( groups[ 0 ].values, function( value_dict ) {\n\t                for ( var key in array ) {\n\t                    array[ key ].push( String( value_dict[ key ] ) );\n\t                }\n\t            });\n\t        }\n\t        mapCategories( array, groups );\n\t        return { array : array }\n\t    };\n\t\n\t    /** Apply default mapping index all values contained in label columns (for all groups) */\n\t    function mapCategories( array, groups ) {\n\t        _.each( groups, function( group ) {\n\t            _.each( group.values, function( value_dict, i ) {\n\t                for ( var key in array ) {\n\t                    value_dict[ key ] = parseInt( i )\n\t                }\n\t            });\n\t        });\n\t    };\n\t\n\t    /** Category make for unique category labels */\n\t    function makeUniqueCategories( groups, with_index ) {\n\t        var categories  = {};\n\t        var array       = {};\n\t        var counter     = {};\n\t        var data_columns = groups[ 0 ].__data_columns;\n\t        _.each( data_columns, function( column_def, key ) {\n\t            if ( column_def.is_label ) {\n\t                categories[ key ] = {};\n\t                array[ key ]      = [];\n\t                counter[ key ]    = 0;\n\t            }\n\t        });\n\t        // index all values contained in label columns (for all groups)\n\t        for ( var i in groups ) {\n\t            var group = groups[ i ];\n\t            for ( var j in group.values ) {\n\t                var value_dict = group.values[ j ];\n\t                for ( var key in categories ) {\n\t                    var value = String( value_dict[ key ] );\n\t                    if ( categories[ key ][ value ] === undefined ) {\n\t                        categories[ key ][ value ] = counter[ key ];\n\t                        array[ key ].push( with_index ? [counter[key], value] : value );\n\t                        counter[ key ]++;\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        // convert group values into category indeces\n\t        for ( var i in groups ) {\n\t            var group = groups[ i ];\n\t            for ( var j in group.values ) {\n\t                var value_dict = group.values[ j ];\n\t                for ( var key in categories ) {\n\t                    var value = String( value_dict[ key ] );\n\t                    value_dict[ key ] = categories[ key ][ value ];\n\t                }\n\t            }\n\t        }\n\t        return {\n\t            categories  : categories,\n\t            array       : array,\n\t            counter     : counter\n\t        }\n\t    };\n\t\n\t    /** Make axis */\n\t    function makeTickFormat ( options ) {\n\t        var type        = options.type;\n\t        var precision   = options.precision;\n\t        var categories  = options.categories;\n\t        var formatter   = options.formatter;\n\t        if ( type == 'hide' ) {\n\t            formatter( function() { return '' } );\n\t        } else if ( type == 'auto' ) {\n\t            if ( categories ) {\n\t                formatter( function( value ) { return categories[ value ] || '' } );\n\t            }\n\t        } else {\n\t            var d3format = function( d ) {\n\t                switch ( type ) {\n\t                    case 's':\n\t                        var prefix = d3.formatPrefix( d );\n\t                        return prefix.scale( d ).toFixed() + prefix.symbol;\n\t                    default :\n\t                        return d3.format( '.' + precision + type )( d );\n\t                }\n\t            };\n\t            if ( categories ) {\n\t                formatter( function( value ) {\n\t                    var label = categories[ value ];\n\t                    if ( label ) {\n\t                        if ( isNaN( label ) ) {\n\t                            return label;\n\t                        } else {\n\t                            try {\n\t                                return d3format( label );\n\t                            } catch ( err ) {\n\t                                return label;\n\t                            }\n\t                        }\n\t                    } else {\n\t                        return '';\n\t                    }\n\t                });\n\t            } else {\n\t                formatter( function( value ) { return d3format( value ) } );\n\t            }\n\t        }\n\t    };\n\t\n\t    /** Add zoom handler */\n\t    function addZoom( options ) {\n\t        var scaleExtent = 100;\n\t        var yAxis       = options.yAxis;\n\t        var xAxis       = options.xAxis;\n\t        var xDomain     = options.xDomain || xAxis.scale().domain;\n\t        var yDomain     = options.yDomain || yAxis.scale().domain;\n\t        var redraw      = options.redraw;\n\t        var svg         = options.svg;\n\t        var xScale      = xAxis.scale();\n\t        var yScale      = yAxis.scale();\n\t        var x_boundary  = xScale.domain().slice();\n\t        var y_boundary  = yScale.domain().slice();\n\t        var d3zoom      = d3.behavior.zoom();\n\t        xScale.nice();\n\t        yScale.nice();\n\t        function fixDomain( domain, boundary ) {\n\t            domain[ 0 ] = Math.min( Math.max( domain[ 0 ], boundary[ 0 ] ), boundary[ 1 ] - boundary[ 1 ]/scaleExtent );\n\t            domain[ 1 ] = Math.max( boundary[ 0 ] + boundary[ 1 ] / scaleExtent, Math.min( domain[ 1 ], boundary[ 1 ] ) );\n\t            return domain;\n\t        };\n\t        function zoomed() {\n\t            yDomain( fixDomain( yScale.domain(), y_boundary ) );\n\t            xDomain( fixDomain( xScale.domain(), x_boundary ) );\n\t            redraw();\n\t        };\n\t        function unzoomed() {\n\t            xDomain( x_boundary );\n\t            yDomain( y_boundary );\n\t            redraw();\n\t            d3zoom.scale( 1 );\n\t            d3zoom.translate( [ 0 , 0 ] );\n\t        };\n\t        d3zoom.x( xScale )\n\t              .y( yScale )\n\t              .scaleExtent( [ 1, scaleExtent ] )\n\t              .on( 'zoom', zoomed );\n\t        svg.call( d3zoom ).on( 'dblclick.zoom', unzoomed );\n\t        return d3zoom;\n\t    };\n\t\n\t    return {\n\t        buildJobDictionary      : buildJobDictionary,\n\t        panelHelper             : panelHelper,\n\t        makeCategories          : makeCategories,\n\t        makeUniqueCategories    : makeUniqueCategories,\n\t        makeSeries              : makeSeries,\n\t        getDomains              : getDomains,\n\t        mapCategories           : mapCategories,\n\t        makeTickFormat          : makeTickFormat,\n\t        addZoom                 : addZoom\n\t    }\n\t\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/** This class handles, formats and caches datasets. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(1) ], __WEBPACK_AMD_DEFINE_RESULT__ = function( Utils ) {\n\t    /** Fills request dictionary with data from cache/response */\n\t    var _cache = {};\n\t    var request = function( options ) {\n\t        var groups      = options.dataset_groups;\n\t        var dataset_id  = options.dataset_id;\n\t        // identify columns needed to fulfill request\n\t        var column_list = [];\n\t        groups.each( function( group ) {\n\t            _.each( group.get( '__data_columns' ), function( column_def, column_name ) {\n\t                var column = group.get( column_name );\n\t                var block_id = _block_id( dataset_id, column );\n\t                if ( column_list.indexOf( column ) === -1 && !_cache[ block_id ] && column != 'auto' && column != 'zero' && column !== undefined ) {\n\t                    column_list.push( column );\n\t                }\n\t            });\n\t        });\n\t        if ( column_list.length == 0 ) {\n\t            _fillFromCache( options );\n\t            return;\n\t        }\n\t        // Fetch data columns into dataset object\n\t        Utils.get({\n\t            url     : Galaxy.root + 'api/datasets/' + dataset_id,\n\t            data    : {\n\t                data_type   : 'raw_data',\n\t                provider    : 'dataset-column',\n\t                indeces     : column_list.toString()\n\t            },\n\t            success : function( response ) {\n\t                var results = new Array( column_list.length );\n\t                for ( var i = 0; i < results.length; i++ ) {\n\t                    results[ i ] = [];\n\t                }\n\t                for ( var i in response.data ) {\n\t                    var row = response.data[ i ];\n\t                    for ( var j in row ) {\n\t                        var v = row[ j ];\n\t                        if ( v !== undefined && v != 2147483647 ) {\n\t                            results[ j ].push( v );\n\t                        }\n\t                    }\n\t                }\n\t                console.debug( 'tabular-datasets::_fetch() - Fetching complete.' );\n\t                for ( var i in results ) {\n\t                    var column = column_list[ i ];\n\t                    var block_id = _block_id( dataset_id, column );\n\t                    _cache[ block_id ] = results[ i ];\n\t                }\n\t                _fillFromCache( options );\n\t            }\n\t        });\n\t    };\n\t\n\t    /** Fill data from cache */\n\t    var _fillFromCache = function( options ) {\n\t        var groups      = options.dataset_groups;\n\t        var dataset_id  = options.dataset_id;\n\t        console.debug( 'tabular-datasets::_fillFromCache() - Filling request from cache.' );\n\t        var limit = 0;\n\t        groups.each( function( group ) {\n\t            _.each( group.get( '__data_columns' ), function( column_def, column_name ) {\n\t                var column = group.get( column_name );\n\t                var block_id = _block_id( dataset_id, column );\n\t                var column_data = _cache[ block_id ];\n\t                if ( column_data ) {\n\t                    limit = Math.max( limit, column_data.length );\n\t                }\n\t            });\n\t        });\n\t        if ( limit == 0 ) {\n\t            console.debug( 'tabular-datasets::_fillFromCache() - No data available.' );\n\t        }\n\t        var results = [];\n\t        groups.each( function( group, group_index ) {\n\t            var dict = Utils.merge( { key: ( group_index ) + ':' + group.get( 'key' ), values: [] }, group.attributes );\n\t            for ( var j = 0; j < limit; j++ ) {\n\t                dict.values[ j ] = { x : parseInt( j ) };\n\t            }\n\t            results.push( dict );\n\t        });\n\t        groups.each( function( group, group_index ) {\n\t            var values = results[ group_index ].values;\n\t            _.each( group.get( '__data_columns' ), function( column_def, column_name ) {\n\t                var column = group.get( column_name );\n\t                switch ( column ) {\n\t                    case 'auto':\n\t                        for ( var j = 0; j < limit; j++ ) {\n\t                            values[ j ][ column_name ] = parseInt( j );\n\t                        }\n\t                        break;\n\t                    case 'zero':\n\t                        for ( var j = 0; j < limit; j++ ) {\n\t                            values[ j ][ column_name ] = 0;\n\t                        }\n\t                        break;\n\t                    default:\n\t                        var block_id = _block_id( dataset_id, column );\n\t                        var column_data = _cache[ block_id ];\n\t                        for ( var j = 0; j < limit; j++ ) {\n\t                            var value = values[ j ];\n\t                            var v = column_data[ j ];\n\t                            if ( isNaN( v ) && !column_def.is_label ) {\n\t                                v = 0;\n\t                            }\n\t                            value[ column_name ] = v;\n\t                        }\n\t                }\n\t            });\n\t        });\n\t        options.success( results );\n\t    };\n\t\n\t    /** Get block id */\n\t    var _block_id = function ( dataset_id, column ) {\n\t        return dataset_id + '_' + '_' + column;\n\t    };\n\t\n\t    return { request: request };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\t// css base code, injected by the css-loader\r\n\tmodule.exports = function() {\r\n\t\tvar list = [];\r\n\t\r\n\t\t// return the list of modules as css string\r\n\t\tlist.toString = function toString() {\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar item = this[i];\r\n\t\t\t\tif(item[2]) {\r\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push(item[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result.join(\"\");\r\n\t\t};\r\n\t\r\n\t\t// import a list of modules into the list\r\n\t\tlist.i = function(modules, mediaQuery) {\r\n\t\t\tif(typeof modules === \"string\")\r\n\t\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\t\tvar alreadyImportedModules = {};\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar id = this[i][0];\r\n\t\t\t\tif(typeof id === \"number\")\r\n\t\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\t\tvar item = modules[i];\r\n\t\t\t\t// skip already imported module\r\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn list;\r\n\t};\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(6)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".chartWrap{margin:0;padding:0;overflow:hidden}.nvtooltip.with-3d-shadow,.with-3d-shadow .nvtooltip{box-shadow:0 5px 10px rgba(0,0,0,.2);border-radius:6px}.nvtooltip{position:absolute;background-color:#fff;padding:1px;border:1px solid rgba(0,0,0,.2);z-index:10000;font-family:Arial;font-size:13px;text-align:left;pointer-events:none;white-space:nowrap;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nvtooltip.with-transitions,.with-transitions .nvtooltip{transition:opacity .25s linear;-moz-transition:opacity .25s linear;-webkit-transition:opacity .25s linear;transition-delay:.25s;-moz-transition-delay:.25s;-webkit-transition-delay:.25s}.nvtooltip.x-nvtooltip,.nvtooltip.y-nvtooltip{padding:8px}.nvtooltip h3{margin:0;padding:4px 14px;line-height:18px;font-weight:400;background-color:hsla(0,0%,97%,.75);text-align:center;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.nvtooltip p{margin:0;padding:5px 14px;text-align:center}.nvtooltip span{display:inline-block;margin:2px 0}.nvtooltip table{margin:6px;border-spacing:0}.nvtooltip table td{padding:2px 9px 2px 0;vertical-align:middle}.nvtooltip table td.key{font-weight:400}.nvtooltip table td.value{text-align:right;font-weight:700}.nvtooltip table tr.highlight td{padding:1px 9px 1px 0;border-bottom-style:solid;border-bottom-width:1px;border-top-style:solid;border-top-width:1px}.nvtooltip table td.legend-color-guide div{width:8px;height:8px;vertical-align:middle}.nvtooltip .footer{padding:3px;text-align:center}.nvtooltip-pending-removal{position:absolute;pointer-events:none}svg{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;width:100%;height:100%}svg text{font:400 12px Arial}svg .title{font:700 14px Arial}.nvd3 .nv-background{fill:#fff;fill-opacity:0}.nvd3.nv-noData{font-size:18px;font-weight:700}.nv-brush .extent{fill-opacity:.125;shape-rendering:crispEdges}.nvd3 .nv-legend .nv-series{cursor:pointer}.nvd3 .nv-legend .disabled circle{fill-opacity:0}.nvd3 .nv-axis{pointer-events:none}.nvd3 .nv-axis path{fill:none;stroke:#000;stroke-opacity:.75;shape-rendering:crispEdges}.nvd3 .nv-axis path.domain{stroke-opacity:.75}.nvd3 .nv-axis.nv-x path.domain{stroke-opacity:0}.nvd3 .nv-axis text{font-size:11px}.nv-axis line{fill:none;stroke:#e5e5e5;shape-rendering:crispEdges}.nvd3 .nv-axis .zero line,.nvd3 .nv-axis line.zero{stroke-opacity:.75}.nvd3 .nv-axis .nv-axisMaxMin text{font-weight:700}.nvd3 .x2 .nv-axis .nv-axisMaxMin text,.nvd3 .x3 .nv-axis .nv-axisMaxMin text,.nvd3 .x .nv-axis .nv-axisMaxMin text{text-anchor:middle}.nv-brush .resize path{fill:#eee;stroke:#666}.nvd3 .nv-bars .negative rect{zfill:brown}.nvd3 .nv-bars rect{zfill:#4682b4;fill-opacity:.75;transition:fill-opacity .25s linear;-moz-transition:fill-opacity .25s linear;-webkit-transition:fill-opacity .25s linear}.nvd3 .nv-bars rect.hover{fill-opacity:1}.nvd3 .nv-bars .hover rect{fill:#add8e6}.nvd3 .nv-bars text{fill:transparent}.nvd3 .nv-bars .hover text{fill:#000}.nvd3 .nv-discretebar .nv-groups rect,.nvd3 .nv-multibar .nv-groups rect,.nvd3 .nv-multibarHorizontal .nv-groups rect{stroke-opacity:0;transition:fill-opacity .25s linear;-moz-transition:fill-opacity .25s linear;-webkit-transition:fill-opacity .25s linear}.nvd3 .nv-discretebar .nv-groups rect:hover,.nvd3 .nv-multibar .nv-groups rect:hover,.nvd3 .nv-multibarHorizontal .nv-groups rect:hover{fill-opacity:1}.nvd3 .nv-discretebar .nv-groups text,.nvd3 .nv-multibarHorizontal .nv-groups text{font-weight:700;fill:#000;stroke:transparent}.nvd3.nv-pie path{stroke-opacity:0;transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear;-moz-transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear;-webkit-transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-pie .nv-slice text{stroke:#000;stroke-width:0}.nvd3.nv-pie path{stroke:#fff;stroke-width:1px;stroke-opacity:1}.nvd3.nv-pie .hover path{fill-opacity:.7}.nvd3.nv-pie .nv-label{pointer-events:none}.nvd3.nv-pie .nv-label rect{fill-opacity:0;stroke-opacity:0}.nvd3 .nv-groups path.nv-line{fill:none;stroke-width:1.5px}.nvd3 .nv-groups path.nv-line.nv-thin-line{stroke-width:1px}.nvd3 .nv-groups path.nv-area{stroke:none}.nvd3 .nv-line.hover path{stroke-width:6px}.nvd3.nv-line .nvd3.nv-scatter .nv-groups .nv-point{fill-opacity:0;stroke-opacity:0}.nvd3.nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:.5!important;stroke-opacity:.5!important}.with-transitions .nvd3 .nv-groups .nv-point{transition:stroke-width .25s linear,stroke-opacity .25s linear;-moz-transition:stroke-width .25s linear,stroke-opacity .25s linear;-webkit-transition:stroke-width .25s linear,stroke-opacity .25s linear}.nvd3 .nv-groups .nv-point.hover,.nvd3.nv-scatter .nv-groups .nv-point.hover{stroke-width:7px;fill-opacity:.95!important;stroke-opacity:.95!important}.nvd3 .nv-point-paths path{stroke:#aaa;stroke-opacity:0;fill:#eee;fill-opacity:0}.nvd3 .nv-indexLine{cursor:ew-resize}.nvd3 .nv-distribution{pointer-events:none}.nvd3 .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nvd3 .nv-scatter .nv-point.hover{fill-opacity:1}.nvd3.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0;transition:fill-opacity .25s linear,stroke-opacity .25s linear;-moz-transition:fill-opacity .25s linear,stroke-opacity .25s linear;-webkit-transition:fill-opacity .25s linear,stroke-opacity .25s linear}.nvd3.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nvd3.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nvd3.nv-linePlusBar .nv-bar rect{fill-opacity:.75}.nvd3.nv-linePlusBar .nv-bar rect:hover{fill-opacity:1}.nvd3.nv-bullet{font:10px sans-serif}.nvd3.nv-bullet .nv-measure{fill-opacity:.8}.nvd3.nv-bullet .nv-measure:hover{fill-opacity:1}.nvd3.nv-bullet .nv-marker{stroke:#000;stroke-width:2px}.nvd3.nv-bullet .nv-markerTriangle{stroke:#000;fill:#fff;stroke-width:1.5px}.nvd3.nv-bullet .nv-tick line{stroke:#666;stroke-width:.5px}.nvd3.nv-bullet .nv-range.nv-s0{fill:#eee}.nvd3.nv-bullet .nv-range.nv-s1{fill:#ddd}.nvd3.nv-bullet .nv-range.nv-s2{fill:#ccc}.nvd3.nv-bullet .nv-title{font-size:14px;font-weight:700}.nvd3.nv-bullet .nv-subtitle{fill:#999}.nvd3.nv-bullet .nv-range{fill:#bababa;fill-opacity:.4}.nvd3.nv-bullet .nv-range:hover{fill-opacity:.7}.nvd3.nv-sparkline path{fill:none}.nvd3.nv-sparklineplus g.nv-hoverValue{pointer-events:none}.nvd3.nv-sparklineplus .nv-hoverValue line{stroke:#333;stroke-width:1.5px}.nvd3.nv-sparklineplus,.nvd3.nv-sparklineplus g{pointer-events:all}.nvd3 .nv-hoverArea{fill-opacity:0;stroke-opacity:0}.nvd3.nv-sparklineplus .nv-xValue,.nvd3.nv-sparklineplus .nv-yValue{stroke-width:0;font-size:.9em;font-weight:400}.nvd3.nv-sparklineplus .nv-yValue{stroke:#f66}.nvd3.nv-sparklineplus .nv-maxValue{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-sparklineplus .nv-minValue{stroke:#d62728;fill:#d62728}.nvd3.nv-sparklineplus .nv-currentValue{font-weight:700;font-size:1.1em}.nvd3.nv-ohlcBar .nv-ticks .nv-tick{stroke-width:2px}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.hover{stroke-width:4px}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.positive{stroke:#2ca02c}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.negative{stroke:#d62728}.nvd3.nv-historicalStockChart .nv-axis .nv-axislabel{font-weight:700}.nvd3.nv-historicalStockChart .nv-dragTarget{fill-opacity:0;stroke:none;cursor:move}.nvd3 .nv-brush .extent{fill-opacity:0!important}.nvd3 .nv-brushBackground rect{stroke:#000;stroke-width:.4;fill:#fff;fill-opacity:.7}.nvd3.nv-indentedtree .name{margin-left:5px}.nvd3.nv-indentedtree .clickable{color:#08c;cursor:pointer}.nvd3.nv-indentedtree span.clickable:hover{color:#005580;text-decoration:underline}.nvd3.nv-indentedtree .nv-childrenCount{display:inline-block;margin-left:5px}.nvd3.nv-indentedtree .nv-treeicon,.nvd3.nv-indentedtree .nv-treeicon.nv-folded{cursor:pointer}.nvd3 .background path{fill:none;stroke:#ccc;stroke-opacity:.4;shape-rendering:crispEdges}.nvd3 .foreground path{fill:none;stroke:#4682b4;stroke-opacity:.7}.nvd3 .brush .extent{fill-opacity:.3;stroke:#fff;shape-rendering:crispEdges}.axis path,.nvd3 .axis line{fill:none;stroke:#000;shape-rendering:crispEdges}.nvd3 .axis text{text-shadow:0 1px 0 #fff}.nvd3 .nv-interactiveGuideLine{pointer-events:none}.nvd3 line.nv-guideline{stroke:#ccc}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(8);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(7)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../../node_modules/css-loader/index.js!./nv.d3.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../../node_modules/css-loader/index.js!./nv.d3.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t(function(){\n\t\n\tvar nv = window.nv || {};\n\t\n\t\n\tnv.version = '1.1.15b';\n\tnv.dev = true //set false when in production\n\t\n\twindow.nv = nv;\n\t\n\tnv.tooltip = nv.tooltip || {}; // For the tooltip system\n\tnv.utils = nv.utils || {}; // Utility subsystem\n\tnv.models = nv.models || {}; //stores all the possible models/components\n\tnv.charts = {}; //stores all the ready to use charts\n\tnv.graphs = []; //stores all the graphs currently on the page\n\tnv.logs = {}; //stores some statistics and potential error messages\n\t\n\tnv.dispatch = d3.dispatch('render_start', 'render_end');\n\t\n\t// *************************************************************************\n\t//  Development render timers - disabled if dev = false\n\t\n\tif (nv.dev) {\n\t  nv.dispatch.on('render_start', function(e) {\n\t    nv.logs.startTime = +new Date();\n\t  });\n\t\n\t  nv.dispatch.on('render_end', function(e) {\n\t    nv.logs.endTime = +new Date();\n\t    nv.logs.totalTime = nv.logs.endTime - nv.logs.startTime;\n\t    nv.log('total', nv.logs.totalTime); // used for development, to keep track of graph generation times\n\t  });\n\t}\n\t\n\t// ********************************************\n\t//  Public Core NV functions\n\t\n\t// Logs all arguments, and returns the last so you can test things in place\n\t// Note: in IE8 console.log is an object not a function, and if modernizr is used\n\t// then calling Function.prototype.bind with with anything other than a function\n\t// causes a TypeError to be thrown.\n\tnv.log = function() {\n\t  if (nv.dev && console.log && console.log.apply)\n\t    console.log.apply(console, arguments)\n\t  else if (nv.dev && typeof console.log == \"function\" && Function.prototype.bind) {\n\t    var log = Function.prototype.bind.call(console.log, console);\n\t    log.apply(console, arguments);\n\t  }\n\t  return arguments[arguments.length - 1];\n\t};\n\t\n\t\n\tnv.render = function render(step) {\n\t  step = step || 1; // number of graphs to generate in each timeout loop\n\t\n\t  nv.render.active = true;\n\t  nv.dispatch.render_start();\n\t\n\t  setTimeout(function() {\n\t    var chart, graph;\n\t\n\t    for (var i = 0; i < step && (graph = nv.render.queue[i]); i++) {\n\t      chart = graph.generate();\n\t      if (typeof graph.callback == typeof(Function)) graph.callback(chart);\n\t      nv.graphs.push(chart);\n\t    }\n\t\n\t    nv.render.queue.splice(0, i);\n\t\n\t    if (nv.render.queue.length) setTimeout(arguments.callee, 0);\n\t    else {\n\t      nv.dispatch.render_end();\n\t      nv.render.active = false;\n\t    }\n\t  }, 0);\n\t};\n\t\n\tnv.render.active = false;\n\tnv.render.queue = [];\n\t\n\tnv.addGraph = function(obj) {\n\t  if (typeof arguments[0] === typeof(Function))\n\t    obj = {generate: arguments[0], callback: arguments[1]};\n\t\n\t  nv.render.queue.push(obj);\n\t\n\t  if (!nv.render.active) nv.render();\n\t};\n\t\n\tnv.identity = function(d) { return d; };\n\t\n\tnv.strip = function(s) { return s.replace(/(\\s|&)/g,''); };\n\t\n\tfunction daysInMonth(month,year) {\n\t  return (new Date(year, month+1, 0)).getDate();\n\t}\n\t\n\tfunction d3_time_range(floor, step, number) {\n\t  return function(t0, t1, dt) {\n\t    var time = floor(t0), times = [];\n\t    if (time < t0) step(time);\n\t    if (dt > 1) {\n\t      while (time < t1) {\n\t        var date = new Date(+time);\n\t        if ((number(date) % dt === 0)) times.push(date);\n\t        step(time);\n\t      }\n\t    } else {\n\t      while (time < t1) { times.push(new Date(+time)); step(time); }\n\t    }\n\t    return times;\n\t  };\n\t}\n\t\n\td3.time.monthEnd = function(date) {\n\t  return new Date(date.getFullYear(), date.getMonth(), 0);\n\t};\n\t\n\td3.time.monthEnds = d3_time_range(d3.time.monthEnd, function(date) {\n\t    date.setUTCDate(date.getUTCDate() + 1);\n\t    date.setDate(daysInMonth(date.getMonth() + 1, date.getFullYear()));\n\t  }, function(date) {\n\t    return date.getMonth();\n\t  }\n\t);\n\t\n\t/* Utility class to handle creation of an interactive layer.\n\tThis places a rectangle on top of the chart. When you mouse move over it, it sends a dispatch\n\tcontaining the X-coordinate. It can also render a vertical line where the mouse is located.\n\t\n\tdispatch.elementMousemove is the important event to latch onto.  It is fired whenever the mouse moves over\n\tthe rectangle. The dispatch is given one object which contains the mouseX/Y location.\n\tIt also has 'pointXValue', which is the conversion of mouseX to the x-axis scale.\n\t*/\n\tnv.interactiveGuideline = function() {\n\t\t\"use strict\";\n\t\tvar tooltip = nv.models.tooltip();\n\t\t//Public settings\n\t\tvar width = null\n\t\t, height = null\n\t    //Please pass in the bounding chart's top and left margins\n\t    //This is important for calculating the correct mouseX/Y positions.\n\t\t, margin = {left: 0, top: 0}\n\t\t, xScale = d3.scale.linear()\n\t\t, yScale = d3.scale.linear()\n\t\t, dispatch = d3.dispatch('elementMousemove', 'elementMouseout','elementDblclick')\n\t\t, showGuideLine = true\n\t\t, svgContainer = null  \n\t    //Must pass in the bounding chart's <svg> container.\n\t    //The mousemove event is attached to this container.\n\t\t;\n\t\n\t\t//Private variables\n\t\tvar isMSIE = navigator.userAgent.indexOf(\"MSIE\") !== -1  //Check user-agent for Microsoft Internet Explorer.\n\t\t;\n\t\n\t\n\t\tfunction layer(selection) {\n\t\t\tselection.each(function(data) {\n\t\t\t\t\tvar container = d3.select(this);\n\t\t\t\t\t\n\t\t\t\t\tvar availableWidth = (width || 960), availableHeight = (height || 400);\n\t\n\t\t\t\t\tvar wrap = container.selectAll(\"g.nv-wrap.nv-interactiveLineLayer\").data([data]);\n\t\t\t\t\tvar wrapEnter = wrap.enter()\n\t\t\t\t\t\t\t\t\t.append(\"g\").attr(\"class\", \" nv-wrap nv-interactiveLineLayer\");\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\twrapEnter.append(\"g\").attr(\"class\",\"nv-interactiveGuideLine\");\n\t\t\t\t\t\n\t\t\t\t\tif (!svgContainer) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t                function mouseHandler() {\n\t                      var d3mouse = d3.mouse(this);\n\t                      var mouseX = d3mouse[0];\n\t                      var mouseY = d3mouse[1];\n\t                      var subtractMargin = true;\n\t                      var mouseOutAnyReason = false;\n\t                      if (isMSIE) {\n\t                         /*\n\t                            D3.js (or maybe SVG.getScreenCTM) has a nasty bug in Internet Explorer 10.\n\t                            d3.mouse() returns incorrect X,Y mouse coordinates when mouse moving\n\t                            over a rect in IE 10.\n\t                            However, d3.event.offsetX/Y also returns the mouse coordinates\n\t                            relative to the triggering <rect>. So we use offsetX/Y on IE.  \n\t                         */\n\t                         mouseX = d3.event.offsetX;\n\t                         mouseY = d3.event.offsetY;\n\t\n\t                         /*\n\t                            On IE, if you attach a mouse event listener to the <svg> container,\n\t                            it will actually trigger it for all the child elements (like <path>, <circle>, etc).\n\t                            When this happens on IE, the offsetX/Y is set to where ever the child element\n\t                            is located.\n\t                            As a result, we do NOT need to subtract margins to figure out the mouse X/Y\n\t                            position under this scenario. Removing the line below *will* cause \n\t                            the interactive layer to not work right on IE.\n\t                         */\n\t                         if(d3.event.target.tagName !== \"svg\")\n\t                            subtractMargin = false;\n\t\n\t                         if (d3.event.target.className.baseVal.match(\"nv-legend\"))\n\t                         \tmouseOutAnyReason = true;\n\t                          \n\t                      }\n\t\n\t                      if(subtractMargin) {\n\t                         mouseX -= margin.left;\n\t                         mouseY -= margin.top;\n\t                      }\n\t\n\t                      /* If mouseX/Y is outside of the chart's bounds,\n\t                      trigger a mouseOut event.\n\t                      */\n\t                      if (mouseX < 0 || mouseY < 0 \n\t                        || mouseX > availableWidth || mouseY > availableHeight\n\t                        || (d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined)\n\t                        || mouseOutAnyReason\n\t                        ) \n\t                      {\n\t                      \t\tif (isMSIE) {\n\t                      \t\t\tif (d3.event.relatedTarget \n\t                      \t\t\t\t&& d3.event.relatedTarget.ownerSVGElement === undefined\n\t                      \t\t\t\t&& d3.event.relatedTarget.className.match(tooltip.nvPointerEventsClass)) {\n\t                      \t\t\t\treturn;\n\t                      \t\t\t}\n\t                      \t\t}\n\t                            dispatch.elementMouseout({\n\t                               mouseX: mouseX,\n\t                               mouseY: mouseY\n\t                            });\n\t                            layer.renderGuideLine(null); //hide the guideline\n\t                            return;\n\t                      }\n\t                      \n\t                      var pointXValue = xScale.invert(mouseX);\n\t                      dispatch.elementMousemove({\n\t                            mouseX: mouseX,\n\t                            mouseY: mouseY,\n\t                            pointXValue: pointXValue\n\t                      });\n\t\n\t                      //If user double clicks the layer, fire a elementDblclick dispatch.\n\t                      if (d3.event.type === \"dblclick\") {\n\t                        dispatch.elementDblclick({\n\t                            mouseX: mouseX,\n\t                            mouseY: mouseY,\n\t                            pointXValue: pointXValue\n\t                        });\n\t                      }\n\t                }\n\t\n\t\t\t\t\tsvgContainer\n\t\t\t\t\t      .on(\"mousemove\",mouseHandler, true)\n\t\t\t\t\t      .on(\"mouseout\" ,mouseHandler,true)\n\t                      .on(\"dblclick\" ,mouseHandler)\n\t\t\t\t\t      ;\n\t\n\t\t\t\t\t //Draws a vertical guideline at the given X postion.\n\t\t\t\t\tlayer.renderGuideLine = function(x) {\n\t\t\t\t\t \tif (!showGuideLine) return;\n\t\t\t\t\t \tvar line = wrap.select(\".nv-interactiveGuideLine\")\n\t\t\t\t\t \t      .selectAll(\"line\")\n\t\t\t\t\t \t      .data((x != null) ? [nv.utils.NaNtoZero(x)] : [], String);\n\t\n\t\t\t\t\t \tline.enter()\n\t\t\t\t\t \t\t.append(\"line\")\n\t\t\t\t\t \t\t.attr(\"class\", \"nv-guideline\")\n\t\t\t\t\t \t\t.attr(\"x1\", function(d) { return d;})\n\t\t\t\t\t \t\t.attr(\"x2\", function(d) { return d;})\n\t\t\t\t\t \t\t.attr(\"y1\", availableHeight)\n\t\t\t\t\t \t\t.attr(\"y2\",0)\n\t\t\t\t\t \t\t;\n\t\t\t\t\t \tline.exit().remove();\n\t\n\t\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tlayer.dispatch = dispatch;\n\t\tlayer.tooltip = tooltip;\n\t\n\t\tlayer.margin = function(_) {\n\t\t    if (!arguments.length) return margin;\n\t\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t\t    return layer;\n\t    };\n\t\n\t\tlayer.width = function(_) {\n\t\t\tif (!arguments.length) return width;\n\t\t\twidth = _;\n\t\t\treturn layer;\n\t\t};\n\t\n\t\tlayer.height = function(_) {\n\t\t\tif (!arguments.length) return height;\n\t\t\theight = _;\n\t\t\treturn layer;\n\t\t};\n\t\n\t\tlayer.xScale = function(_) {\n\t\t\tif (!arguments.length) return xScale;\n\t\t\txScale = _;\n\t\t\treturn layer;\n\t\t};\n\t\n\t\tlayer.showGuideLine = function(_) {\n\t\t\tif (!arguments.length) return showGuideLine;\n\t\t\tshowGuideLine = _;\n\t\t\treturn layer;\n\t\t};\n\t\n\t\tlayer.svgContainer = function(_) {\n\t\t\tif (!arguments.length) return svgContainer;\n\t\t\tsvgContainer = _;\n\t\t\treturn layer;\n\t\t};\n\t\n\t\n\t\treturn layer;\n\t};\n\t\n\t/* Utility class that uses d3.bisect to find the index in a given array, where a search value can be inserted.\n\tThis is different from normal bisectLeft; this function finds the nearest index to insert the search value.\n\t\n\tFor instance, lets say your array is [1,2,3,5,10,30], and you search for 28. \n\tNormal d3.bisectLeft will return 4, because 28 is inserted after the number 10.  But interactiveBisect will return 5\n\tbecause 28 is closer to 30 than 10.\n\t\n\tUnit tests can be found in: interactiveBisectTest.html\n\t\n\tHas the following known issues:\n\t   * Will not work if the data points move backwards (ie, 10,9,8,7, etc) or if the data points are in random order.\n\t   * Won't work if there are duplicate x coordinate values.\n\t*/\n\tnv.interactiveBisect = function (values, searchVal, xAccessor) {\n\t\t  \"use strict\";\n\t      if (! values instanceof Array) return null;\n\t      if (typeof xAccessor !== 'function') xAccessor = function(d,i) { return d.x;}\n\t\n\t      var bisect = d3.bisector(xAccessor).left;\n\t      var index = d3.max([0, bisect(values,searchVal) - 1]);\n\t      var currentValue = xAccessor(values[index], index);\n\t      if (typeof currentValue === 'undefined') currentValue = index;\n\t\n\t      if (currentValue === searchVal) return index;  //found exact match\n\t\n\t      var nextIndex = d3.min([index+1, values.length - 1]);\n\t      var nextValue = xAccessor(values[nextIndex], nextIndex);\n\t      if (typeof nextValue === 'undefined') nextValue = nextIndex;\n\t\n\t      if (Math.abs(nextValue - searchVal) >= Math.abs(currentValue - searchVal))\n\t          return index;\n\t      else\n\t          return nextIndex\n\t};\n\t\n\t/*\n\tReturns the index in the array \"values\" that is closest to searchVal.\n\tOnly returns an index if searchVal is within some \"threshold\".\n\tOtherwise, returns null.\n\t*/\n\tnv.nearestValueIndex = function (values, searchVal, threshold) {\n\t      \"use strict\";\n\t      var yDistMax = Infinity, indexToHighlight = null;\n\t      values.forEach(function(d,i) {\n\t         var delta = Math.abs(searchVal - d);\n\t         if ( delta <= yDistMax && delta < threshold) {\n\t            yDistMax = delta;\n\t            indexToHighlight = i;\n\t         }\n\t      });\n\t      return indexToHighlight;\n\t};/* Tooltip rendering model for nvd3 charts.\n\twindow.nv.models.tooltip is the updated,new way to render tooltips.\n\t\n\twindow.nv.tooltip.show is the old tooltip code.\n\twindow.nv.tooltip.* also has various helper methods.\n\t*/\n\t(function() {\n\t  \"use strict\";\n\t  window.nv.tooltip = {};\n\t\n\t  /* Model which can be instantiated to handle tooltip rendering.\n\t    Example usage: \n\t    var tip = nv.models.tooltip().gravity('w').distance(23)\n\t                .data(myDataObject);\n\t\n\t        tip();    //just invoke the returned function to render tooltip.\n\t  */\n\t  window.nv.models.tooltip = function() {\n\t        var content = null    //HTML contents of the tooltip.  If null, the content is generated via the data variable.\n\t        ,   data = null     /* Tooltip data. If data is given in the proper format, a consistent tooltip is generated.\n\t        Format of data:\n\t        {\n\t            key: \"Date\",\n\t            value: \"August 2009\", \n\t            series: [\n\t                    {\n\t                        key: \"Series 1\",\n\t                        value: \"Value 1\",\n\t                        color: \"#000\"\n\t                    },\n\t                    {\n\t                        key: \"Series 2\",\n\t                        value: \"Value 2\",\n\t                        color: \"#00f\"\n\t                    }\n\t            ]\n\t\n\t        }\n\t\n\t        */\n\t        ,   gravity = 'w'   //Can be 'n','s','e','w'. Determines how tooltip is positioned.\n\t        ,   distance = 50   //Distance to offset tooltip from the mouse location.\n\t        ,   snapDistance = 25   //Tolerance allowed before tooltip is moved from its current position (creates 'snapping' effect)\n\t        ,   fixedTop = null //If not null, this fixes the top position of the tooltip.\n\t        ,   classes = null  //Attaches additional CSS classes to the tooltip DIV that is created.\n\t        ,   chartContainer = null   //Parent DIV, of the SVG Container that holds the chart.\n\t        ,   tooltipElem = null  //actual DOM element representing the tooltip.\n\t        ,   position = {left: null, top: null}      //Relative position of the tooltip inside chartContainer.\n\t        ,   enabled = true  //True -> tooltips are rendered. False -> don't render tooltips.\n\t        //Generates a unique id when you create a new tooltip() object\n\t        ,   id = \"nvtooltip-\" + Math.floor(Math.random() * 100000)\n\t        ;\n\t\n\t        //CSS class to specify whether element should not have mouse events.\n\t        var  nvPointerEventsClass = \"nv-pointer-events-none\";\n\t\n\t        //Format function for the tooltip values column\n\t        var valueFormatter = function(d,i) {\n\t            return d;\n\t        };\n\t\n\t        //Format function for the tooltip header value.\n\t        var headerFormatter = function(d) {\n\t            return d;\n\t        };\n\t\n\t        //By default, the tooltip model renders a beautiful table inside a DIV.\n\t        //You can override this function if a custom tooltip is desired.\n\t        var contentGenerator = function(d) {\n\t            if (content != null) return content;\n\t\n\t            if (d == null) return '';\n\t\n\t            var table = d3.select(document.createElement(\"table\"));\n\t            var theadEnter = table.selectAll(\"thead\")\n\t                .data([d])\n\t                .enter().append(\"thead\");\n\t            theadEnter.append(\"tr\")\n\t                .append(\"td\")\n\t                .attr(\"colspan\",3)\n\t                .append(\"strong\")\n\t                    .classed(\"x-value\",true)\n\t                    .html(headerFormatter(d.value));\n\t\n\t            var tbodyEnter = table.selectAll(\"tbody\")\n\t                .data([d])\n\t                .enter().append(\"tbody\");\n\t            var trowEnter = tbodyEnter.selectAll(\"tr\")\n\t                .data(function(p) { return p.series})\n\t                .enter()\n\t                .append(\"tr\")\n\t                .classed(\"highlight\", function(p) { return p.highlight})\n\t                ;\n\t\n\t            trowEnter.append(\"td\")\n\t                .classed(\"legend-color-guide\",true)\n\t                .append(\"div\")\n\t                    .style(\"background-color\", function(p) { return p.color});\n\t            trowEnter.append(\"td\")\n\t                .classed(\"key\",true)\n\t                .html(function(p) {return p.key});\n\t            trowEnter.append(\"td\")\n\t                .classed(\"value\",true)\n\t                .html(function(p,i) { return valueFormatter(p.value,i) });\n\t\n\t\n\t            trowEnter.selectAll(\"td\").each(function(p) {\n\t                if (p.highlight) {\n\t                    var opacityScale = d3.scale.linear().domain([0,1]).range([\"#fff\",p.color]);\n\t                    var opacity = 0.6;\n\t                    d3.select(this)\n\t                        .style(\"border-bottom-color\", opacityScale(opacity))\n\t                        .style(\"border-top-color\", opacityScale(opacity))\n\t                        ;\n\t                }\n\t            });\n\t\n\t            var html = table.node().outerHTML;\n\t            if (d.footer !== undefined)\n\t                html += \"<div class='footer'>\" + d.footer + \"</div>\";\n\t            return html;\n\t\n\t        };\n\t\n\t        var dataSeriesExists = function(d) {\n\t            if (d && d.series && d.series.length > 0) return true;\n\t\n\t            return false;\n\t        };\n\t\n\t        //In situations where the chart is in a 'viewBox', re-position the tooltip based on how far chart is zoomed.\n\t        function convertViewBoxRatio() {\n\t            if (chartContainer) {\n\t              var svg = d3.select(chartContainer);\n\t              if (svg.node().tagName !== \"svg\") {\n\t                 svg = svg.select(\"svg\");\n\t              }\n\t              var viewBox = (svg.node()) ? svg.attr('viewBox') : null;\n\t              if (viewBox) {\n\t                viewBox = viewBox.split(' ');\n\t                var ratio = parseInt(svg.style('width')) / viewBox[2];\n\t                \n\t                position.left = position.left * ratio;\n\t                position.top  = position.top * ratio;\n\t              }\n\t            }\n\t        }\n\t\n\t        //Creates new tooltip container, or uses existing one on DOM.\n\t        function getTooltipContainer(newContent) {\n\t            var body;\n\t            if (chartContainer)\n\t                body = d3.select(chartContainer);\n\t            else\n\t                body = d3.select(\"body\");\n\t\n\t            var container = body.select(\".nvtooltip\");\n\t            if (container.node() === null) {\n\t                //Create new tooltip div if it doesn't exist on DOM.\n\t                container = body.append(\"div\")\n\t                    .attr(\"class\", \"nvtooltip \" + (classes? classes: \"xy-tooltip\"))\n\t                    .attr(\"id\",id)\n\t                    ;\n\t            }\n\t        \n\t\n\t            container.node().innerHTML = newContent;\n\t            container.style(\"top\",0).style(\"left\",0).style(\"opacity\",0);\n\t            container.selectAll(\"div, table, td, tr\").classed(nvPointerEventsClass,true)\n\t            container.classed(nvPointerEventsClass,true);\n\t            return container.node();\n\t        }\n\t\n\t        \n\t\n\t        //Draw the tooltip onto the DOM.\n\t        function nvtooltip() {\n\t            if (!enabled) return;\n\t            if (!dataSeriesExists(data)) return;\n\t\n\t            convertViewBoxRatio();\n\t\n\t            var left = position.left;\n\t            var top = (fixedTop != null) ? fixedTop : position.top;\n\t            var container = getTooltipContainer(contentGenerator(data));\n\t            tooltipElem = container;\n\t            if (chartContainer) {\n\t                var svgComp = chartContainer.getElementsByTagName(\"svg\")[0];\n\t                var boundRect = (svgComp) ? svgComp.getBoundingClientRect() : chartContainer.getBoundingClientRect();\n\t                var svgOffset = {left:0,top:0};\n\t                if (svgComp) {\n\t                    var svgBound = svgComp.getBoundingClientRect();\n\t                    var chartBound = chartContainer.getBoundingClientRect();\n\t                    var svgBoundTop = svgBound.top;\n\t                    \n\t                    //Defensive code. Sometimes, svgBoundTop can be a really negative\n\t                    //  number, like -134254. That's a bug. \n\t                    //  If such a number is found, use zero instead. FireFox bug only\n\t                    if (svgBoundTop < 0) {\n\t                        var containerBound = chartContainer.getBoundingClientRect();\n\t                        svgBoundTop = (Math.abs(svgBoundTop) > containerBound.height) ? 0 : svgBoundTop;\n\t                    } \n\t                    svgOffset.top = Math.abs(svgBoundTop - chartBound.top);\n\t                    svgOffset.left = Math.abs(svgBound.left - chartBound.left);\n\t                }\n\t                //If the parent container is an overflow <div> with scrollbars, subtract the scroll offsets.\n\t                //You need to also add any offset between the <svg> element and its containing <div>\n\t                //Finally, add any offset of the containing <div> on the whole page.\n\t                left += chartContainer.offsetLeft + svgOffset.left - 2*chartContainer.scrollLeft;\n\t                top += chartContainer.offsetTop + svgOffset.top - 2*chartContainer.scrollTop;\n\t            }\n\t\n\t            if (snapDistance && snapDistance > 0) {\n\t                top = Math.floor(top/snapDistance) * snapDistance;\n\t            }\n\t\n\t            nv.tooltip.calcTooltipPosition([left,top], gravity, distance, container);\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.nvPointerEventsClass = nvPointerEventsClass;\n\t        \n\t        nvtooltip.content = function(_) {\n\t            if (!arguments.length) return content;\n\t            content = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        //Returns tooltipElem...not able to set it.\n\t        nvtooltip.tooltipElem = function() {\n\t            return tooltipElem;\n\t        };\n\t\n\t        nvtooltip.contentGenerator = function(_) {\n\t            if (!arguments.length) return contentGenerator;\n\t            if (typeof _ === 'function') {\n\t                contentGenerator = _;\n\t            }\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.data = function(_) {\n\t            if (!arguments.length) return data;\n\t            data = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.gravity = function(_) {\n\t            if (!arguments.length) return gravity;\n\t            gravity = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.distance = function(_) {\n\t            if (!arguments.length) return distance;\n\t            distance = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.snapDistance = function(_) {\n\t            if (!arguments.length) return snapDistance;\n\t            snapDistance = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.classes = function(_) {\n\t            if (!arguments.length) return classes;\n\t            classes = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.chartContainer = function(_) {\n\t            if (!arguments.length) return chartContainer;\n\t            chartContainer = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.position = function(_) {\n\t            if (!arguments.length) return position;\n\t            position.left = (typeof _.left !== 'undefined') ? _.left : position.left;\n\t            position.top = (typeof _.top !== 'undefined') ? _.top : position.top;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.fixedTop = function(_) {\n\t            if (!arguments.length) return fixedTop;\n\t            fixedTop = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.enabled = function(_) {\n\t            if (!arguments.length) return enabled;\n\t            enabled = _;\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.valueFormatter = function(_) {\n\t            if (!arguments.length) return valueFormatter;\n\t            if (typeof _ === 'function') {\n\t                valueFormatter = _;\n\t            }\n\t            return nvtooltip;\n\t        };\n\t\n\t        nvtooltip.headerFormatter = function(_) {\n\t            if (!arguments.length) return headerFormatter;\n\t            if (typeof _ === 'function') {\n\t                headerFormatter = _;\n\t            }\n\t            return nvtooltip;\n\t        };\n\t\n\t        //id() is a read-only function. You can't use it to set the id.\n\t        nvtooltip.id = function() {\n\t            return id;\n\t        };\n\t\n\t\n\t        return nvtooltip;\n\t  };\n\t\n\t\n\t  //Original tooltip.show function. Kept for backward compatibility.\n\t  // pos = [left,top]\n\t  nv.tooltip.show = function(pos, content, gravity, dist, parentContainer, classes) {\n\t      \n\t        //Create new tooltip div if it doesn't exist on DOM.\n\t        var   container = document.createElement('div');\n\t        container.className = 'nvtooltip ' + (classes ? classes : 'xy-tooltip');\n\t\n\t        var body = parentContainer;\n\t        if ( !parentContainer || parentContainer.tagName.match(/g|svg/i)) {\n\t            //If the parent element is an SVG element, place tooltip in the <body> element.\n\t            body = document.getElementsByTagName('body')[0];\n\t        }\n\t   \n\t        container.style.left = 0;\n\t        container.style.top = 0;\n\t        container.style.opacity = 0;\n\t        container.innerHTML = content;\n\t        body.appendChild(container);\n\t        \n\t        //If the parent container is an overflow <div> with scrollbars, subtract the scroll offsets.\n\t        if (parentContainer) {\n\t           pos[0] = pos[0] - parentContainer.scrollLeft;\n\t           pos[1] = pos[1] - parentContainer.scrollTop;\n\t        }\n\t        nv.tooltip.calcTooltipPosition(pos, gravity, dist, container);\n\t  };\n\t\n\t  //Looks up the ancestry of a DOM element, and returns the first NON-svg node.\n\t  nv.tooltip.findFirstNonSVGParent = function(Elem) {\n\t            while(Elem.tagName.match(/^g|svg$/i) !== null) {\n\t                Elem = Elem.parentNode;\n\t            }\n\t            return Elem;\n\t  };\n\t\n\t  //Finds the total offsetTop of a given DOM element.\n\t  //Looks up the entire ancestry of an element, up to the first relatively positioned element.\n\t  nv.tooltip.findTotalOffsetTop = function ( Elem, initialTop ) {\n\t                var offsetTop = initialTop;\n\t                \n\t                do {\n\t                    if( !isNaN( Elem.offsetTop ) ) {\n\t                        offsetTop += (Elem.offsetTop);\n\t                    }\n\t                } while( Elem = Elem.offsetParent );\n\t                return offsetTop;\n\t  };\n\t\n\t  //Finds the total offsetLeft of a given DOM element.\n\t  //Looks up the entire ancestry of an element, up to the first relatively positioned element.\n\t  nv.tooltip.findTotalOffsetLeft = function ( Elem, initialLeft) {\n\t                var offsetLeft = initialLeft;\n\t                \n\t                do {\n\t                    if( !isNaN( Elem.offsetLeft ) ) {\n\t                        offsetLeft += (Elem.offsetLeft);\n\t                    }\n\t                } while( Elem = Elem.offsetParent );\n\t                return offsetLeft;\n\t  };\n\t\n\t  //Global utility function to render a tooltip on the DOM.\n\t  //pos = [left,top] coordinates of where to place the tooltip, relative to the SVG chart container.\n\t  //gravity = how to orient the tooltip\n\t  //dist = how far away from the mouse to place tooltip\n\t  //container = tooltip DIV\n\t  nv.tooltip.calcTooltipPosition = function(pos, gravity, dist, container) {\n\t\n\t            var height = parseInt(container.offsetHeight),\n\t                width = parseInt(container.offsetWidth),\n\t                windowWidth = nv.utils.windowSize().width,\n\t                windowHeight = nv.utils.windowSize().height,\n\t                scrollTop = window.pageYOffset,\n\t                scrollLeft = window.pageXOffset,\n\t                left, top;\n\t\n\t            windowHeight = window.innerWidth >= document.body.scrollWidth ? windowHeight : windowHeight - 16;\n\t            windowWidth = window.innerHeight >= document.body.scrollHeight ? windowWidth : windowWidth - 16;\n\t\n\t            gravity = gravity || 's';\n\t            dist = dist || 20;\n\t\n\t            var tooltipTop = function ( Elem ) {\n\t                return nv.tooltip.findTotalOffsetTop(Elem, top);\n\t            };\n\t\n\t            var tooltipLeft = function ( Elem ) {\n\t                return nv.tooltip.findTotalOffsetLeft(Elem,left);\n\t            };\n\t\n\t            switch (gravity) {\n\t              case 'e':\n\t                left = pos[0] - width - dist;\n\t                top = pos[1] - (height / 2);\n\t                var tLeft = tooltipLeft(container);\n\t                var tTop = tooltipTop(container);\n\t                if (tLeft < scrollLeft) left = pos[0] + dist > scrollLeft ? pos[0] + dist : scrollLeft - tLeft + left;\n\t                if (tTop < scrollTop) top = scrollTop - tTop + top;\n\t                if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\n\t                break;\n\t              case 'w':\n\t                left = pos[0] + dist;\n\t                top = pos[1] - (height / 2);\n\t                var tLeft = tooltipLeft(container);\n\t                var tTop = tooltipTop(container);\n\t                if (tLeft + width > windowWidth) left = pos[0] - width - dist;\n\t                if (tTop < scrollTop) top = scrollTop + 5;\n\t                if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\n\t                break;\n\t              case 'n':\n\t                left = pos[0] - (width / 2) - 5;\n\t                top = pos[1] + dist;\n\t                var tLeft = tooltipLeft(container);\n\t                var tTop = tooltipTop(container);\n\t                if (tLeft < scrollLeft) left = scrollLeft + 5;\n\t                if (tLeft + width > windowWidth) left = left - width/2 + 5;\n\t                if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\n\t                break;\n\t              case 's':\n\t                left = pos[0] - (width / 2);\n\t                top = pos[1] - height - dist;\n\t                var tLeft = tooltipLeft(container);\n\t                var tTop = tooltipTop(container);\n\t                if (tLeft < scrollLeft) left = scrollLeft + 5;\n\t                if (tLeft + width > windowWidth) left = left - width/2 + 5;\n\t                if (scrollTop > tTop) top = scrollTop;\n\t                break;\n\t              case 'none':\n\t                left = pos[0];\n\t                top = pos[1] - dist;\n\t                var tLeft = tooltipLeft(container);\n\t                var tTop = tooltipTop(container);\n\t                break;\n\t            }\n\t\n\t\n\t            container.style.left = left+'px';\n\t            container.style.top = top+'px';\n\t            container.style.opacity = 1;\n\t            container.style.position = 'absolute'; \n\t\n\t            return container;\n\t    };\n\t\n\t    //Global utility function to remove tooltips from the DOM.\n\t    nv.tooltip.cleanup = function() {\n\t\n\t              // Find the tooltips, mark them for removal by this class (so others cleanups won't find it)\n\t              var tooltips = document.getElementsByClassName('nvtooltip');\n\t              var purging = [];\n\t              while(tooltips.length) {\n\t                purging.push(tooltips[0]);\n\t                tooltips[0].style.transitionDelay = '0 !important';\n\t                tooltips[0].style.opacity = 0;\n\t                tooltips[0].className = 'nvtooltip-pending-removal';\n\t              }\n\t\n\t              setTimeout(function() {\n\t\n\t                  while (purging.length) {\n\t                     var removeMe = purging.pop();\n\t                      removeMe.parentNode.removeChild(removeMe);\n\t                  }\n\t            }, 500);\n\t    };\n\t\n\t})();\n\t\n\tnv.utils.windowSize = function() {\n\t    // Sane defaults\n\t    var size = {width: 640, height: 480};\n\t\n\t    // Earlier IE uses Doc.body\n\t    if (document.body && document.body.offsetWidth) {\n\t        size.width = document.body.offsetWidth;\n\t        size.height = document.body.offsetHeight;\n\t    }\n\t\n\t    // IE can use depending on mode it is in\n\t    if (document.compatMode=='CSS1Compat' &&\n\t        document.documentElement &&\n\t        document.documentElement.offsetWidth ) {\n\t        size.width = document.documentElement.offsetWidth;\n\t        size.height = document.documentElement.offsetHeight;\n\t    }\n\t\n\t    // Most recent browsers use\n\t    if (window.innerWidth && window.innerHeight) {\n\t        size.width = window.innerWidth;\n\t        size.height = window.innerHeight;\n\t    }\n\t    return (size);\n\t};\n\t\n\t\n\t\n\t// Easy way to bind multiple functions to window.onresize\n\t// TODO: give a way to remove a function after its bound, other than removing all of them\n\tnv.utils.windowResize = function(fun){\n\t  if (fun === undefined) return;\n\t  var oldresize = window.onresize;\n\t\n\t  window.onresize = function(e) {\n\t    if (typeof oldresize == 'function') oldresize(e);\n\t    fun(e);\n\t  }\n\t}\n\t\n\t// Backwards compatible way to implement more d3-like coloring of graphs.\n\t// If passed an array, wrap it in a function which implements the old default\n\t// behavior\n\tnv.utils.getColor = function(color) {\n\t    if (!arguments.length) return nv.utils.defaultColor(); //if you pass in nothing, get default colors back\n\t\n\t    if( Object.prototype.toString.call( color ) === '[object Array]' )\n\t        return function(d, i) { return d.color || color[i % color.length]; };\n\t    else\n\t        return color;\n\t        //can't really help it if someone passes rubbish as color\n\t}\n\t\n\t// Default color chooser uses the index of an object as before.\n\tnv.utils.defaultColor = function() {\n\t    var colors = d3.scale.category20().range();\n\t    return function(d, i) { return d.color || colors[i % colors.length] };\n\t}\n\t\n\t\n\t// Returns a color function that takes the result of 'getKey' for each series and\n\t// looks for a corresponding color from the dictionary,\n\tnv.utils.customTheme = function(dictionary, getKey, defaultColors) {\n\t  getKey = getKey || function(series) { return series.key }; // use default series.key if getKey is undefined\n\t  defaultColors = defaultColors || d3.scale.category20().range(); //default color function\n\t\n\t  var defIndex = defaultColors.length; //current default color (going in reverse)\n\t\n\t  return function(series, index) {\n\t    var key = getKey(series);\n\t\n\t    if (!defIndex) defIndex = defaultColors.length; //used all the default colors, start over\n\t\n\t    if (typeof dictionary[key] !== \"undefined\")\n\t      return (typeof dictionary[key] === \"function\") ? dictionary[key]() : dictionary[key];\n\t    else\n\t      return defaultColors[--defIndex]; // no match in dictionary, use default color\n\t  }\n\t}\n\t\n\t\n\t\n\t// From the PJAX example on d3js.org, while this is not really directly needed\n\t// it's a very cool method for doing pjax, I may expand upon it a little bit,\n\t// open to suggestions on anything that may be useful\n\tnv.utils.pjax = function(links, content) {\n\t  d3.selectAll(links).on(\"click\", function() {\n\t    history.pushState(this.href, this.textContent, this.href);\n\t    load(this.href);\n\t    d3.event.preventDefault();\n\t  });\n\t\n\t  function load(href) {\n\t    d3.html(href, function(fragment) {\n\t      var target = d3.select(content).node();\n\t      target.parentNode.replaceChild(d3.select(fragment).select(content).node(), target);\n\t      nv.utils.pjax(links, content);\n\t    });\n\t  }\n\t\n\t  d3.select(window).on(\"popstate\", function() {\n\t    if (d3.event.state) load(d3.event.state);\n\t  });\n\t}\n\t\n\t/* For situations where we want to approximate the width in pixels for an SVG:text element.\n\tMost common instance is when the element is in a display:none; container.\n\tForumla is : text.length * font-size * constant_factor\n\t*/\n\tnv.utils.calcApproxTextWidth = function (svgTextElem) {\n\t    if (typeof svgTextElem.style === 'function'\n\t        && typeof svgTextElem.text === 'function') {\n\t        var fontSize = parseInt(svgTextElem.style(\"font-size\").replace(\"px\",\"\"));\n\t        var textLength = svgTextElem.text().length;\n\t\n\t        return textLength * fontSize * 0.5;\n\t    }\n\t    return 0;\n\t};\n\t\n\t/* Numbers that are undefined, null or NaN, convert them to zeros.\n\t*/\n\tnv.utils.NaNtoZero = function(n) {\n\t    if (typeof n !== 'number'\n\t        || isNaN(n)\n\t        || n === null\n\t        || n === Infinity) return 0;\n\t\n\t    return n;\n\t};\n\t\n\t/*\n\tSnippet of code you can insert into each nv.models.* to give you the ability to\n\tdo things like:\n\tchart.options({\n\t  showXAxis: true,\n\t  tooltips: true\n\t});\n\t\n\tTo enable in the chart:\n\tchart.options = nv.utils.optionsFunc.bind(chart);\n\t*/\n\tnv.utils.optionsFunc = function(args) {\n\t    if (args) {\n\t      d3.map(args).forEach((function(key,value) {\n\t        if (typeof this[key] === \"function\") {\n\t           this[key](value);\n\t        }\n\t      }).bind(this));\n\t    }\n\t    return this;\n\t};nv.models.axis = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var axis = d3.svg.axis()\n\t    ;\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 75 //only used for tickLabel currently\n\t    , height = 60 //only used for tickLabel currently\n\t    , scale = d3.scale.linear()\n\t    , axisLabelText = null\n\t    , showMaxMin = true //TODO: showMaxMin should be disabled on all ordinal scaled axes\n\t    , highlightZero = true\n\t    , rotateLabels = 0\n\t    , rotateYLabel = true\n\t    , staggerLabels = false\n\t    , isOrdinal = false\n\t    , ticks = null\n\t    , axisLabelDistance = 12 //The larger this number is, the closer the axis label is to the axis.\n\t    ;\n\t\n\t  axis\n\t    .scale(scale)\n\t    .orient('bottom')\n\t    .tickFormat(function(d) { return d })\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var scale0;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-axis').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-axis');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g')\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      if (ticks !== null)\n\t        axis.ticks(ticks);\n\t      else if (axis.orient() == 'top' || axis.orient() == 'bottom')\n\t        axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100);\n\t\n\t\n\t      //TODO: consider calculating width/height based on whether or not label is added, for reference in charts using this component\n\t\n\t\n\t      g.call(axis);\n\t\n\t      scale0 = scale0 || axis.scale();\n\t\n\t      var fmt = axis.tickFormat();\n\t      if (fmt == null) {\n\t        fmt = scale0.tickFormat();\n\t      }\n\t\n\t      var axisLabel = g.selectAll('text.nv-axislabel')\n\t          .data([axisLabelText || null]);\n\t      axisLabel.exit().remove();\n\t      switch (axis.orient()) {\n\t        case 'top':\n\t          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n\t          var w = (scale.range().length==2) ? scale.range()[1] : (scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]));\n\t          axisLabel\n\t              .attr('text-anchor', 'middle')\n\t              .attr('y', 0)\n\t              .attr('x', w/2);\n\t          if (showMaxMin) {\n\t            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n\t                           .data(scale.domain());\n\t            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text');\n\t            axisMaxMin.exit().remove();\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(' + scale(d) + ',0)'\n\t                })\n\t              .select('text')\n\t                .attr('dy', '-0.5em')\n\t                .attr('y', -axis.tickPadding())\n\t                .attr('text-anchor', 'middle')\n\t                .text(function(d,i) {\n\t                  var v = fmt(d);\n\t                  return ('' + v).match('NaN') ? '' : v;\n\t                });\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(' + scale.range()[i] + ',0)'\n\t                });\n\t          }\n\t          break;\n\t        case 'bottom':\n\t          var xLabelMargin = 36;\n\t          var maxTextWidth = 30;\n\t          var xTicks = g.selectAll('g').select(\"text\");\n\t          if (rotateLabels%360) {\n\t            //Calculate the longest xTick width\n\t            xTicks.each(function(d,i){\n\t              var width = this.getBBox().width;\n\t              if(width > maxTextWidth) maxTextWidth = width;\n\t            });\n\t            //Convert to radians before calculating sin. Add 30 to margin for healthy padding.\n\t            var sin = Math.abs(Math.sin(rotateLabels*Math.PI/180));\n\t            var xLabelMargin = (sin ? sin*maxTextWidth : maxTextWidth)+30;\n\t            //Rotate all xTicks\n\t            xTicks\n\t              .attr('transform', function(d,i,j) { return 'rotate(' + rotateLabels + ' 0,0)' })\n\t              .style('text-anchor', rotateLabels%360 > 0 ? 'start' : 'end');\n\t          }\n\t          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n\t          var w = (scale.range().length==2) ? scale.range()[1] : (scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]));\n\t          axisLabel\n\t              .attr('text-anchor', 'middle')\n\t              .attr('y', xLabelMargin)\n\t              .attr('x', w/2);\n\t          if (showMaxMin) {\n\t          //if (showMaxMin && !isOrdinal) {\n\t            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n\t                           //.data(scale.domain())\n\t                           .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);\n\t            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text');\n\t            axisMaxMin.exit().remove();\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(' + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)'\n\t                })\n\t              .select('text')\n\t                .attr('dy', '.71em')\n\t                .attr('y', axis.tickPadding())\n\t                .attr('transform', function(d,i,j) { return 'rotate(' + rotateLabels + ' 0,0)' })\n\t                .style('text-anchor', rotateLabels ? (rotateLabels%360 > 0 ? 'start' : 'end') : 'middle')\n\t                .text(function(d,i) {\n\t                  var v = fmt(d);\n\t                  return ('' + v).match('NaN') ? '' : v;\n\t                });\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  //return 'translate(' + scale.range()[i] + ',0)'\n\t                  //return 'translate(' + scale(d) + ',0)'\n\t                  return 'translate(' + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)'\n\t                });\n\t          }\n\t          if (staggerLabels)\n\t            xTicks\n\t                .attr('transform', function(d,i) { return 'translate(0,' + (i % 2 == 0 ? '0' : '12') + ')' });\n\t\n\t          break;\n\t        case 'right':\n\t          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n\t          axisLabel\n\t              .style('text-anchor', rotateYLabel ? 'middle' : 'begin')\n\t              .attr('transform', rotateYLabel ? 'rotate(90)' : '')\n\t              .attr('y', rotateYLabel ? (-Math.max(margin.right,width) + 12) : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\n\t              .attr('x', rotateYLabel ? (scale.range()[0] / 2) : axis.tickPadding());\n\t          if (showMaxMin) {\n\t            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n\t                           .data(scale.domain());\n\t            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text')\n\t                .style('opacity', 0);\n\t            axisMaxMin.exit().remove();\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(0,' + scale(d) + ')'\n\t                })\n\t              .select('text')\n\t                .attr('dy', '.32em')\n\t                .attr('y', 0)\n\t                .attr('x', axis.tickPadding())\n\t                .style('text-anchor', 'start')\n\t                .text(function(d,i) {\n\t                  var v = fmt(d);\n\t                  return ('' + v).match('NaN') ? '' : v;\n\t                });\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(0,' + scale.range()[i] + ')'\n\t                })\n\t              .select('text')\n\t                .style('opacity', 1);\n\t          }\n\t          break;\n\t        case 'left':\n\t          /*\n\t          //For dynamically placing the label. Can be used with dynamically-sized chart axis margins\n\t          var yTicks = g.selectAll('g').select(\"text\");\n\t          yTicks.each(function(d,i){\n\t            var labelPadding = this.getBBox().width + axis.tickPadding() + 16;\n\t            if(labelPadding > width) width = labelPadding;\n\t          });\n\t          */\n\t          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n\t          axisLabel\n\t              .style('text-anchor', rotateYLabel ? 'middle' : 'end')\n\t              .attr('transform', rotateYLabel ? 'rotate(-90)' : '')\n\t              .attr('y', rotateYLabel ? (-Math.max(margin.left,width) + axisLabelDistance) : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\n\t              .attr('x', rotateYLabel ? (-scale.range()[0] / 2) : -axis.tickPadding());\n\t          if (showMaxMin) {\n\t            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n\t                           .data(scale.domain());\n\t            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text')\n\t                .style('opacity', 0);\n\t            axisMaxMin.exit().remove();\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(0,' + scale0(d) + ')'\n\t                })\n\t              .select('text')\n\t                .attr('dy', '.32em')\n\t                .attr('y', 0)\n\t                .attr('x', -axis.tickPadding())\n\t                .attr('text-anchor', 'end')\n\t                .text(function(d,i) {\n\t                  var v = fmt(d);\n\t                  return ('' + v).match('NaN') ? '' : v;\n\t                });\n\t            axisMaxMin\n\t                .attr('transform', function(d,i) {\n\t                  return 'translate(0,' + scale.range()[i] + ')'\n\t                })\n\t              .select('text')\n\t                .style('opacity', 1);\n\t          }\n\t          break;\n\t      }\n\t      axisLabel\n\t          .text(function(d) { return d });\n\t\n\t\n\t      if (showMaxMin && (axis.orient() === 'left' || axis.orient() === 'right')) {\n\t        //check if max and min overlap other values, if so, hide the values that overlap\n\t        g.selectAll('g') // the g's wrapping each tick\n\t            .each(function(d,i) {\n\t              d3.select(this).select('text').attr('opacity', 1);\n\t              if (scale(d) < scale.range()[1] + 10 || scale(d) > scale.range()[0] - 10) { // 10 is assuming text height is 16... if d is 0, leave it!\n\t                if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n\t                  d3.select(this).attr('opacity', 0);\n\t\n\t                d3.select(this).select('text').attr('opacity', 0); // Don't remove the ZERO line!!\n\t              }\n\t            });\n\t\n\t        //if Max and Min = 0 only show min, Issue #281\n\t        if (scale.domain()[0] == scale.domain()[1] && scale.domain()[0] == 0)\n\t          wrap.selectAll('g.nv-axisMaxMin')\n\t            .style('opacity', function(d,i) { return !i ? 1 : 0 });\n\t\n\t      }\n\t\n\t      if (showMaxMin && (axis.orient() === 'top' || axis.orient() === 'bottom')) {\n\t        var maxMinRange = [];\n\t        wrap.selectAll('g.nv-axisMaxMin')\n\t            .each(function(d,i) {\n\t              try {\n\t                  if (i) // i== 1, max position\n\t                      maxMinRange.push(scale(d) - this.getBBox().width - 4)  //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n\t                  else // i==0, min position\n\t                      maxMinRange.push(scale(d) + this.getBBox().width + 4)\n\t              }catch (err) {\n\t                  if (i) // i== 1, max position\n\t                      maxMinRange.push(scale(d) - 4)  //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n\t                  else // i==0, min position\n\t                      maxMinRange.push(scale(d) + 4)\n\t              }\n\t            });\n\t        g.selectAll('g') // the g's wrapping each tick\n\t            .each(function(d,i) {\n\t              if (scale(d) < maxMinRange[0] || scale(d) > maxMinRange[1]) {\n\t                if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n\t                  d3.select(this).remove();\n\t                else\n\t                  d3.select(this).select('text').remove(); // Don't remove the ZERO line!!\n\t              }\n\t            });\n\t      }\n\t\n\t\n\t      //highlight zero line ... Maybe should not be an option and should just be in CSS?\n\t      if (highlightZero)\n\t        g.selectAll('.tick')\n\t          .filter(function(d) { return !parseFloat(Math.round(d.__data__*100000)/1000000) && (d.__data__ !== undefined) }) //this is because sometimes the 0 tick is a very small fraction, TODO: think of cleaner technique\n\t            .classed('zero', true);\n\t\n\t      //store old scales for use in transitions on update\n\t      scale0 = scale.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.axis = axis;\n\t\n\t  d3.rebind(chart, axis, 'orient', 'tickValues', 'tickSubdivide', 'tickSize', 'tickPadding', 'tickFormat');\n\t  d3.rebind(chart, scale, 'domain', 'range', 'rangeBand', 'rangeBands'); //these are also accessible by chart.scale(), but added common ones directly for ease of use\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if(!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  }\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.ticks = function(_) {\n\t    if (!arguments.length) return ticks;\n\t    ticks = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.axisLabel = function(_) {\n\t    if (!arguments.length) return axisLabelText;\n\t    axisLabelText = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.showMaxMin = function(_) {\n\t    if (!arguments.length) return showMaxMin;\n\t    showMaxMin = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.highlightZero = function(_) {\n\t    if (!arguments.length) return highlightZero;\n\t    highlightZero = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.scale = function(_) {\n\t    if (!arguments.length) return scale;\n\t    scale = _;\n\t    axis.scale(scale);\n\t    isOrdinal = typeof scale.rangeBands === 'function';\n\t    d3.rebind(chart, scale, 'domain', 'range', 'rangeBand', 'rangeBands');\n\t    return chart;\n\t  }\n\t\n\t  chart.rotateYLabel = function(_) {\n\t    if(!arguments.length) return rotateYLabel;\n\t    rotateYLabel = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.rotateLabels = function(_) {\n\t    if(!arguments.length) return rotateLabels;\n\t    rotateLabels = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.staggerLabels = function(_) {\n\t    if (!arguments.length) return staggerLabels;\n\t    staggerLabels = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.axisLabelDistance = function(_) {\n\t    if (!arguments.length) return axisLabelDistance;\n\t    axisLabelDistance = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t//TODO: consider deprecating and using multibar with single series for this\n\tnv.models.historicalBar = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n\t    , x = d3.scale.linear()\n\t    , y = d3.scale.linear()\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , forceX = []\n\t    , forceY = [0]\n\t    , padData = false\n\t    , clipEdge = true\n\t    , color = nv.utils.defaultColor()\n\t    , xDomain\n\t    , yDomain\n\t    , xRange\n\t    , yRange\n\t    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n\t    , interactive = true\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x   .domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ))\n\t\n\t      if (padData)\n\t        x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n\t      else\n\t        x.range(xRange || [0, availableWidth]);\n\t\n\t      y   .domain(yDomain || d3.extent(data[0].values.map(getY).concat(forceY) ))\n\t          .range(yRange || [availableHeight, 0]);\n\t\n\t      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\t\n\t      if (x.domain()[0] === x.domain()[1])\n\t        x.domain()[0] ?\n\t            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n\t          : x.domain([-1,1]);\n\t\n\t      if (y.domain()[0] === y.domain()[1])\n\t        y.domain()[0] ?\n\t            y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n\t          : y.domain([-1,1]);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-historicalBar-' + id).data([data[0].values]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBar-' + id);\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-bars');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      container\n\t          .on('click', function(d,i) {\n\t            dispatch.chartClick({\n\t                data: d,\n\t                index: i,\n\t                pos: d3.event,\n\t                id: id\n\t            });\n\t          });\n\t\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-chart-clip-path-' + id)\n\t        .append('rect');\n\t\n\t      wrap.select('#nv-chart-clip-path-' + id + ' rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', availableHeight);\n\t\n\t      g   .attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\t\n\t\n\t\n\t      var bars = wrap.select('.nv-bars').selectAll('.nv-bar')\n\t          .data(function(d) { return d }, function(d,i) {return getX(d,i)});\n\t\n\t      bars.exit().remove();\n\t\n\t\n\t      var barsEnter = bars.enter().append('rect')\n\t          //.attr('class', function(d,i,j) { return (getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive') + ' nv-bar-' + j + '-' + i })\n\t          .attr('x', 0 )\n\t          .attr('y', function(d,i) {  return nv.utils.NaNtoZero(y(Math.max(0, getY(d,i)))) })\n\t          .attr('height', function(d,i) { return nv.utils.NaNtoZero(Math.abs(y(getY(d,i)) - y(0))) })\n\t          .attr('transform', function(d,i) { return 'translate(' + (x(getX(d,i)) - availableWidth / data[0].values.length * .45) + ',0)'; }) \n\t          .on('mouseover', function(d,i) {\n\t            if (!interactive) return;\n\t            d3.select(this).classed('hover', true);\n\t            dispatch.elementMouseover({\n\t                point: d,\n\t                series: data[0],\n\t                pos: [x(getX(d,i)), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n\t                pointIndex: i,\n\t                seriesIndex: 0,\n\t                e: d3.event\n\t            });\n\t\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t                if (!interactive) return;\n\t                d3.select(this).classed('hover', false);\n\t                dispatch.elementMouseout({\n\t                    point: d,\n\t                    series: data[0],\n\t                    pointIndex: i,\n\t                    seriesIndex: 0,\n\t                    e: d3.event\n\t                });\n\t          })\n\t          .on('click', function(d,i) {\n\t                if (!interactive) return;\n\t                dispatch.elementClick({\n\t                    //label: d[label],\n\t                    value: getY(d,i),\n\t                    data: d,\n\t                    index: i,\n\t                    pos: [x(getX(d,i)), y(getY(d,i))],\n\t                    e: d3.event,\n\t                    id: id\n\t                });\n\t              d3.event.stopPropagation();\n\t          })\n\t          .on('dblclick', function(d,i) {\n\t              if (!interactive) return;\n\t              dispatch.elementDblClick({\n\t                  //label: d[label],\n\t                  value: getY(d,i),\n\t                  data: d,\n\t                  index: i,\n\t                  pos: [x(getX(d,i)), y(getY(d,i))],\n\t                  e: d3.event,\n\t                  id: id\n\t              });\n\t              d3.event.stopPropagation();\n\t          });\n\t\n\t      bars\n\t          .attr('fill', function(d,i) { return color(d, i); })\n\t          .attr('class', function(d,i,j) { return (getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive') + ' nv-bar-' + j + '-' + i })\n\t          \n\t          .attr('transform', function(d,i) { return 'translate(' + (x(getX(d,i)) - availableWidth / data[0].values.length * .45) + ',0)'; }) \n\t           //TODO: better width calculations that don't assume always uniform data spacing;w\n\t          .attr('width', (availableWidth / data[0].values.length) * .9 );\n\t\n\t\n\t      bars\n\t          .attr('y', function(d,i) {\n\t            var rval = getY(d,i) < 0 ?\n\t                    y(0) :\n\t                    y(0) - y(getY(d,i)) < 1 ?\n\t                      y(0) - 1 :\n\t                      y(getY(d,i));\n\t            return nv.utils.NaNtoZero(rval);\n\t          })\n\t          .attr('height', function(d,i) { return nv.utils.NaNtoZero(Math.max(Math.abs(y(getY(d,i)) - y(0)),1)) });\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t  //Create methods to allow outside functions to highlight a specific bar.\n\t  chart.highlightPoint = function(pointIndex, isHoverOver) {\n\t      d3.select(\".nv-historicalBar-\" + id)\n\t        .select(\".nv-bars .nv-bar-0-\" + pointIndex)\n\t              .classed(\"hover\", isHoverOver)\n\t               ;\n\t  };\n\t\n\t  chart.clearHighlights = function() {\n\t      d3.select(\".nv-historicalBar-\" + id)\n\t        .select(\".nv-bars .nv-bar.hover\")\n\t              .classed(\"hover\", false)\n\t               ;\n\t  };\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceX = function(_) {\n\t    if (!arguments.length) return forceX;\n\t    forceX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceY = function(_) {\n\t    if (!arguments.length) return forceY;\n\t    forceY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.padData = function(_) {\n\t    if (!arguments.length) return padData;\n\t    padData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.clipEdge = function(_) {\n\t    if (!arguments.length) return clipEdge;\n\t    clipEdge = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.interactive = function(_) {\n\t    if(!arguments.length) return interactive;\n\t    interactive = false;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\t// Chart design based on the recommendations of Stephen Few. Implementation\n\t// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n\t// http://projects.instantcognition.com/protovis/bulletchart/\n\t\n\tnv.models.bullet = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , orient = 'left' // TODO top & bottom\n\t    , reverse = false\n\t    , ranges = function(d) { return d.ranges }\n\t    , markers = function(d) { return d.markers }\n\t    , measures = function(d) { return d.measures }\n\t    , rangeLabels = function(d) { return d.rangeLabels ? d.rangeLabels : [] }\n\t    , markerLabels = function(d) { return d.markerLabels ? d.markerLabels : []  }\n\t    , measureLabels = function(d) { return d.measureLabels ? d.measureLabels : []  }\n\t    , forceX = [0] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n\t    , width = 380\n\t    , height = 30\n\t    , tickFormat = null\n\t    , color = nv.utils.getColor(['#1f77b4'])\n\t    , dispatch = d3.dispatch('elementMouseover', 'elementMouseout')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(d, i) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t      var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\n\t          markerz = markers.call(this, d, i).slice().sort(d3.descending),\n\t          measurez = measures.call(this, d, i).slice().sort(d3.descending),\n\t          rangeLabelz = rangeLabels.call(this, d, i).slice(),\n\t          markerLabelz = markerLabels.call(this, d, i).slice(),\n\t          measureLabelz = measureLabels.call(this, d, i).slice();\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      // Compute the new x-scale.\n\t      var x1 = d3.scale.linear()\n\t          .domain( d3.extent(d3.merge([forceX, rangez])) )\n\t          .range(reverse ? [availableWidth, 0] : [0, availableWidth]);\n\t\n\t      // Retrieve the old x-scale, if this is an update.\n\t      var x0 = this.__chart__ || d3.scale.linear()\n\t          .domain([0, Infinity])\n\t          .range(x1.range());\n\t\n\t      // Stash the new scale.\n\t      this.__chart__ = x1;\n\t\n\t\n\t      var rangeMin = d3.min(rangez), //rangez[2]\n\t          rangeMax = d3.max(rangez), //rangez[0]\n\t          rangeAvg = rangez[1];\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-bullet').data([d]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bullet');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('rect').attr('class', 'nv-range nv-rangeMax');\n\t      gEnter.append('rect').attr('class', 'nv-range nv-rangeAvg');\n\t      gEnter.append('rect').attr('class', 'nv-range nv-rangeMin');\n\t      gEnter.append('rect').attr('class', 'nv-measure');\n\t      gEnter.append('path').attr('class', 'nv-markerTriangle');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      var w0 = function(d) { return Math.abs(x0(d) - x0(0)) }, // TODO: could optimize by precalculating x0(0) and x1(0)\n\t          w1 = function(d) { return Math.abs(x1(d) - x1(0)) };\n\t      var xp0 = function(d) { return d < 0 ? x0(d) : x0(0) },\n\t          xp1 = function(d) { return d < 0 ? x1(d) : x1(0) };\n\t\n\t\n\t      g.select('rect.nv-rangeMax')\n\t          .attr('height', availableHeight)\n\t          .attr('width', w1(rangeMax > 0 ? rangeMax : rangeMin))\n\t          .attr('x', xp1(rangeMax > 0 ? rangeMax : rangeMin))\n\t          .datum(rangeMax > 0 ? rangeMax : rangeMin)\n\t          /*\n\t          .attr('x', rangeMin < 0 ?\n\t                         rangeMax > 0 ?\n\t                             x1(rangeMin)\n\t                           : x1(rangeMax)\n\t                       : x1(0))\n\t                      */\n\t\n\t      g.select('rect.nv-rangeAvg')\n\t          .attr('height', availableHeight)\n\t          .attr('width', w1(rangeAvg))\n\t          .attr('x', xp1(rangeAvg))\n\t          .datum(rangeAvg)\n\t          /*\n\t          .attr('width', rangeMax <= 0 ?\n\t                             x1(rangeMax) - x1(rangeAvg)\n\t                           : x1(rangeAvg) - x1(rangeMin))\n\t          .attr('x', rangeMax <= 0 ?\n\t                         x1(rangeAvg)\n\t                       : x1(rangeMin))\n\t                      */\n\t\n\t      g.select('rect.nv-rangeMin')\n\t          .attr('height', availableHeight)\n\t          .attr('width', w1(rangeMax))\n\t          .attr('x', xp1(rangeMax))\n\t          .attr('width', w1(rangeMax > 0 ? rangeMin : rangeMax))\n\t          .attr('x', xp1(rangeMax > 0 ? rangeMin : rangeMax))\n\t          .datum(rangeMax > 0 ? rangeMin : rangeMax)\n\t          /*\n\t          .attr('width', rangeMax <= 0 ?\n\t                             x1(rangeAvg) - x1(rangeMin)\n\t                           : x1(rangeMax) - x1(rangeAvg))\n\t          .attr('x', rangeMax <= 0 ?\n\t                         x1(rangeMin)\n\t                       : x1(rangeAvg))\n\t                      */\n\t\n\t      g.select('rect.nv-measure')\n\t          .style('fill', color)\n\t          .attr('height', availableHeight / 3)\n\t          .attr('y', availableHeight / 3)\n\t          .attr('width', measurez < 0 ?\n\t                             x1(0) - x1(measurez[0])\n\t                           : x1(measurez[0]) - x1(0))\n\t          .attr('x', xp1(measurez))\n\t          .on('mouseover', function() {\n\t              dispatch.elementMouseover({\n\t                value: measurez[0],\n\t                label: measureLabelz[0] || 'Current',\n\t                pos: [x1(measurez[0]), availableHeight/2]\n\t              })\n\t          })\n\t          .on('mouseout', function() {\n\t              dispatch.elementMouseout({\n\t                value: measurez[0],\n\t                label: measureLabelz[0] || 'Current'\n\t              })\n\t          })\n\t\n\t      var h3 =  availableHeight / 6;\n\t      if (markerz[0]) {\n\t        g.selectAll('path.nv-markerTriangle')\n\t            .attr('transform', function(d) { return 'translate(' + x1(markerz[0]) + ',' + (availableHeight / 2) + ')' })\n\t            .attr('d', 'M0,' + h3 + 'L' + h3 + ',' + (-h3) + ' ' + (-h3) + ',' + (-h3) + 'Z')\n\t            .on('mouseover', function() {\n\t              dispatch.elementMouseover({\n\t                value: markerz[0],\n\t                label: markerLabelz[0] || 'Previous',\n\t                pos: [x1(markerz[0]), availableHeight/2]\n\t              })\n\t            })\n\t            .on('mouseout', function() {\n\t              dispatch.elementMouseout({\n\t                value: markerz[0],\n\t                label: markerLabelz[0] || 'Previous'\n\t              })\n\t            });\n\t      } else {\n\t        g.selectAll('path.nv-markerTriangle').remove();\n\t      }\n\t\n\t\n\t      wrap.selectAll('.nv-range')\n\t          .on('mouseover', function(d,i) {\n\t            var label = rangeLabelz[i] || (!i ? \"Maximum\" : i == 1 ? \"Mean\" : \"Minimum\");\n\t\n\t            dispatch.elementMouseover({\n\t              value: d,\n\t              label: label,\n\t              pos: [x1(d), availableHeight/2]\n\t            })\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t            var label = rangeLabelz[i] || (!i ? \"Maximum\" : i == 1 ? \"Mean\" : \"Minimum\");\n\t\n\t            dispatch.elementMouseout({\n\t              value: d,\n\t              label: label\n\t            })\n\t          })\n\t\n\t/* // THIS IS THE PREVIOUS BULLET IMPLEMENTATION, WILL REMOVE SHORTLY\n\t      // Update the range rects.\n\t      var range = g.selectAll('rect.nv-range')\n\t          .data(rangez);\n\t\n\t      range.enter().append('rect')\n\t          .attr('class', function(d, i) { return 'nv-range nv-s' + i; })\n\t          .attr('width', w0)\n\t          .attr('height', availableHeight)\n\t          .attr('x', reverse ? x0 : 0)\n\t          .on('mouseover', function(d,i) { \n\t              dispatch.elementMouseover({\n\t                value: d,\n\t                label: (i <= 0) ? 'Maximum' : (i > 1) ? 'Minimum' : 'Mean', //TODO: make these labels a variable\n\t                pos: [x1(d), availableHeight/2]\n\t              })\n\t          })\n\t          .on('mouseout', function(d,i) { \n\t              dispatch.elementMouseout({\n\t                value: d,\n\t                label: (i <= 0) ? 'Minimum' : (i >=1) ? 'Maximum' : 'Mean' //TODO: make these labels a variable\n\t              })\n\t          })\n\t\n\t      d3.transition(range)\n\t          .attr('x', reverse ? x1 : 0)\n\t          .attr('width', w1)\n\t          .attr('height', availableHeight);\n\t\n\t\n\t      // Update the measure rects.\n\t      var measure = g.selectAll('rect.nv-measure')\n\t          .data(measurez);\n\t\n\t      measure.enter().append('rect')\n\t          .attr('class', function(d, i) { return 'nv-measure nv-s' + i; })\n\t          .style('fill', function(d,i) { return color(d,i ) })\n\t          .attr('width', w0)\n\t          .attr('height', availableHeight / 3)\n\t          .attr('x', reverse ? x0 : 0)\n\t          .attr('y', availableHeight / 3)\n\t          .on('mouseover', function(d) { \n\t              dispatch.elementMouseover({\n\t                value: d,\n\t                label: 'Current', //TODO: make these labels a variable\n\t                pos: [x1(d), availableHeight/2]\n\t              })\n\t          })\n\t          .on('mouseout', function(d) { \n\t              dispatch.elementMouseout({\n\t                value: d,\n\t                label: 'Current' //TODO: make these labels a variable\n\t              })\n\t          })\n\t\n\t      d3.transition(measure)\n\t          .attr('width', w1)\n\t          .attr('height', availableHeight / 3)\n\t          .attr('x', reverse ? x1 : 0)\n\t          .attr('y', availableHeight / 3);\n\t\n\t\n\t\n\t      // Update the marker lines.\n\t      var marker = g.selectAll('path.nv-markerTriangle')\n\t          .data(markerz);\n\t\n\t      var h3 =  availableHeight / 6;\n\t      marker.enter().append('path')\n\t          .attr('class', 'nv-markerTriangle')\n\t          .attr('transform', function(d) { return 'translate(' + x0(d) + ',' + (availableHeight / 2) + ')' })\n\t          .attr('d', 'M0,' + h3 + 'L' + h3 + ',' + (-h3) + ' ' + (-h3) + ',' + (-h3) + 'Z')\n\t          .on('mouseover', function(d,i) {\n\t              dispatch.elementMouseover({\n\t                value: d,\n\t                label: 'Previous',\n\t                pos: [x1(d), availableHeight/2]\n\t              })\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t              dispatch.elementMouseout({\n\t                value: d,\n\t                label: 'Previous'\n\t              })\n\t          });\n\t\n\t      d3.transition(marker)\n\t          .attr('transform', function(d) { return 'translate(' + (x1(d) - x1(0)) + ',' + (availableHeight / 2) + ')' });\n\t\n\t      marker.exit().remove();\n\t*/\n\t\n\t    });\n\t\n\t    // d3.timer.flush();  // Not needed?\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  // left, right, top, bottom\n\t  chart.orient = function(_) {\n\t    if (!arguments.length) return orient;\n\t    orient = _;\n\t    reverse = orient == 'right' || orient == 'bottom';\n\t    return chart;\n\t  };\n\t\n\t  // ranges (bad, satisfactory, good)\n\t  chart.ranges = function(_) {\n\t    if (!arguments.length) return ranges;\n\t    ranges = _;\n\t    return chart;\n\t  };\n\t\n\t  // markers (previous, goal)\n\t  chart.markers = function(_) {\n\t    if (!arguments.length) return markers;\n\t    markers = _;\n\t    return chart;\n\t  };\n\t\n\t  // measures (actual, forecast)\n\t  chart.measures = function(_) {\n\t    if (!arguments.length) return measures;\n\t    measures = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceX = function(_) {\n\t    if (!arguments.length) return forceX;\n\t    forceX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.tickFormat = function(_) {\n\t    if (!arguments.length) return tickFormat;\n\t    tickFormat = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t};\n\t\n\t\n\t\n\t// Chart design based on the recommendations of Stephen Few. Implementation\n\t// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n\t// http://projects.instantcognition.com/protovis/bulletchart/\n\tnv.models.bulletChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var bullet = nv.models.bullet()\n\t    ;\n\t\n\t  var orient = 'left' // TODO top & bottom\n\t    , reverse = false\n\t    , margin = {top: 5, right: 40, bottom: 20, left: 120}\n\t    , ranges = function(d) { return d.ranges }\n\t    , markers = function(d) { return d.markers }\n\t    , measures = function(d) { return d.measures }\n\t    , width = null\n\t    , height = 55\n\t    , tickFormat = null\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + x + '</h3>' +\n\t               '<p>' + y + '</p>'\n\t      }\n\t    , noData = 'No Data Available.'\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ) + margin.left,\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0) + margin.top,\n\t        content = tooltip(e.key, e.label, e.value, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'e' : 'w', null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(d, i) {\n\t      var container = d3.select(this);\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          that = this;\n\t\n\t\n\t      chart.update = function() { chart(selection) };\n\t      chart.container = this;\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!d || !ranges.call(this, d, i)) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', 18 + margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\n\t          markerz = markers.call(this, d, i).slice().sort(d3.descending),\n\t          measurez = measures.call(this, d, i).slice().sort(d3.descending);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-bulletChart').data([d]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bulletChart');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-bulletWrap');\n\t      gEnter.append('g').attr('class', 'nv-titles');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      // Compute the new x-scale.\n\t      var x1 = d3.scale.linear()\n\t          .domain([0, Math.max(rangez[0], markerz[0], measurez[0])])  // TODO: need to allow forceX and forceY, and xDomain, yDomain\n\t          .range(reverse ? [availableWidth, 0] : [0, availableWidth]);\n\t\n\t      // Retrieve the old x-scale, if this is an update.\n\t      var x0 = this.__chart__ || d3.scale.linear()\n\t          .domain([0, Infinity])\n\t          .range(x1.range());\n\t\n\t      // Stash the new scale.\n\t      this.__chart__ = x1;\n\t\n\t      /*\n\t      // Derive width-scales from the x-scales.\n\t      var w0 = bulletWidth(x0),\n\t          w1 = bulletWidth(x1);\n\t\n\t      function bulletWidth(x) {\n\t        var x0 = x(0);\n\t        return function(d) {\n\t          return Math.abs(x(d) - x(0));\n\t        };\n\t      }\n\t\n\t      function bulletTranslate(x) {\n\t        return function(d) {\n\t          return 'translate(' + x(d) + ',0)';\n\t        };\n\t      }\n\t      */\n\t\n\t      var w0 = function(d) { return Math.abs(x0(d) - x0(0)) }, // TODO: could optimize by precalculating x0(0) and x1(0)\n\t          w1 = function(d) { return Math.abs(x1(d) - x1(0)) };\n\t\n\t\n\t      var title = gEnter.select('.nv-titles').append('g')\n\t          .attr('text-anchor', 'end')\n\t          .attr('transform', 'translate(-6,' + (height - margin.top - margin.bottom) / 2 + ')');\n\t      title.append('text')\n\t          .attr('class', 'nv-title')\n\t          .text(function(d) { return d.title; });\n\t\n\t      title.append('text')\n\t          .attr('class', 'nv-subtitle')\n\t          .attr('dy', '1em')\n\t          .text(function(d) { return d.subtitle; });\n\t\n\t\n\t\n\t      bullet\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t\n\t      var bulletWrap = g.select('.nv-bulletWrap');\n\t\n\t      d3.transition(bulletWrap).call(bullet);\n\t\n\t\n\t\n\t      // Compute the tick format.\n\t      var format = tickFormat || x1.tickFormat( availableWidth / 100 );\n\t\n\t      // Update the tick groups.\n\t      var tick = g.selectAll('g.nv-tick')\n\t          .data(x1.ticks( availableWidth / 50 ), function(d) {\n\t            return this.textContent || format(d);\n\t          });\n\t\n\t      // Initialize the ticks with the old scale, x0.\n\t      var tickEnter = tick.enter().append('g')\n\t          .attr('class', 'nv-tick')\n\t          .attr('transform', function(d) { return 'translate(' + x0(d) + ',0)' })\n\t          .style('opacity', 1e-6);\n\t\n\t      tickEnter.append('line')\n\t          .attr('y1', availableHeight)\n\t          .attr('y2', availableHeight * 7 / 6);\n\t\n\t      tickEnter.append('text')\n\t          .attr('text-anchor', 'middle')\n\t          .attr('dy', '1em')\n\t          .attr('y', availableHeight * 7 / 6)\n\t          .text(format);\n\t\n\t\n\t      // Transition the updating ticks to the new scale, x1.\n\t      var tickUpdate = d3.transition(tick)\n\t          .attr('transform', function(d) { return 'translate(' + x1(d) + ',0)' })\n\t          .style('opacity', 1);\n\t\n\t      tickUpdate.select('line')\n\t          .attr('y1', availableHeight)\n\t          .attr('y2', availableHeight * 7 / 6);\n\t\n\t      tickUpdate.select('text')\n\t          .attr('y', availableHeight * 7 / 6);\n\t\n\t      // Transition the exiting ticks to the new scale, x1.\n\t      d3.transition(tick.exit())\n\t          .attr('transform', function(d) { return 'translate(' + x1(d) + ',0)' })\n\t          .style('opacity', 1e-6)\n\t          .remove();\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        e.key = d.title;\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      //============================================================\n\t\n\t    });\n\t\n\t    d3.timer.flush();\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  bullet.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  bullet.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t  chart.bullet = bullet;\n\t\n\t  d3.rebind(chart, bullet, 'color');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  // left, right, top, bottom\n\t  chart.orient = function(x) {\n\t    if (!arguments.length) return orient;\n\t    orient = x;\n\t    reverse = orient == 'right' || orient == 'bottom';\n\t    return chart;\n\t  };\n\t\n\t  // ranges (bad, satisfactory, good)\n\t  chart.ranges = function(x) {\n\t    if (!arguments.length) return ranges;\n\t    ranges = x;\n\t    return chart;\n\t  };\n\t\n\t  // markers (previous, goal)\n\t  chart.markers = function(x) {\n\t    if (!arguments.length) return markers;\n\t    markers = x;\n\t    return chart;\n\t  };\n\t\n\t  // measures (actual, forecast)\n\t  chart.measures = function(x) {\n\t    if (!arguments.length) return measures;\n\t    measures = x;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(x) {\n\t    if (!arguments.length) return width;\n\t    width = x;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(x) {\n\t    if (!arguments.length) return height;\n\t    height = x;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.tickFormat = function(x) {\n\t    if (!arguments.length) return tickFormat;\n\t    tickFormat = x;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t};\n\t\n\t\n\t\n\tnv.models.cumulativeLineChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var lines = nv.models.line()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    , controls = nv.models.legend()\n\t    , interactiveLayer = nv.interactiveGuideline()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 30, bottom: 50, left: 60}\n\t    , color = nv.utils.defaultColor()\n\t    , width = null\n\t    , height = null\n\t    , showLegend = true\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , rightAlignYAxis = false\n\t    , tooltips = true\n\t    , showControls = true\n\t    , useInteractiveGuideline = false\n\t    , rescaleY = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>'\n\t      }\n\t    , x //can be accessed via chart.xScale()\n\t    , y //can be accessed via chart.yScale()\n\t    , id = lines.id()\n\t    , state = { index: 0, rescaleY: rescaleY }\n\t    , defaultState = null\n\t    , noData = 'No Data Available.'\n\t    , average = function(d) { return d.average }\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , transitionDuration = 0\n\t    , noErrorCheck = false  //if set to TRUE, will bypass an error check in the indexify function.\n\t    ;\n\t\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(7)\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    ;\n\t\n\t  //============================================================\n\t  controls.updateState(false);\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t   var dx = d3.scale.linear()\n\t     , index = {i: 0, x: 0}\n\t     ;\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, null, null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this).classed('nv-chart-' + id, true),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t\n\t      chart.update = function() { container.call(chart) };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      var indexDrag = d3.behavior.drag()\n\t                        .on('dragstart', dragStart)\n\t                        .on('drag', dragMove)\n\t                        .on('dragend', dragEnd);\n\t\n\t\n\t      function dragStart(d,i) {\n\t        d3.select(chart.container)\n\t            .style('cursor', 'ew-resize');\n\t      }\n\t\n\t      function dragMove(d,i) {\n\t        index.x = d3.event.x;\n\t        index.i = Math.round(dx.invert(index.x));\n\t        updateZero();\n\t      }\n\t\n\t      function dragEnd(d,i) {\n\t        d3.select(chart.container)\n\t            .style('cursor', 'auto');\n\t\n\t        // update state and send stateChange with new index\n\t        state.index = index.i;\n\t        dispatch.stateChange(state);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = lines.xScale();\n\t      y = lines.yScale();\n\t\n\t\n\t      if (!rescaleY) {\n\t        var seriesDomains = data\n\t          .filter(function(series) { return !series.disabled })\n\t          .map(function(series,i) {\n\t            var initialDomain = d3.extent(series.values, lines.y());\n\t\n\t            //account for series being disabled when losing 95% or more\n\t            if (initialDomain[0] < -.95) initialDomain[0] = -.95;\n\t\n\t            return [\n\t              (initialDomain[0] - initialDomain[1]) / (1 + initialDomain[1]),\n\t              (initialDomain[1] - initialDomain[0]) / (1 + initialDomain[0])\n\t            ];\n\t          });\n\t\n\t        var completeDomain = [\n\t          d3.min(seriesDomains, function(d) { return d[0] }),\n\t          d3.max(seriesDomains, function(d) { return d[1] })\n\t        ]\n\t\n\t        lines.yDomain(completeDomain);\n\t      } else {\n\t        lines.yDomain(null);\n\t      }\n\t\n\t\n\t      dx  .domain([0, data[0].values.length - 1]) //Assumes all series have same length\n\t          .range([0, availableWidth])\n\t          .clamp(true);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      var data = indexify(index.i, data);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t      var interactivePointerEvents = (useInteractiveGuideline) ? \"none\" : \"all\";\n\t      var wrap = container.selectAll('g.nv-wrap.nv-cumulativeLine').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-cumulativeLine').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-interactive');\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis').style(\"pointer-events\",\"none\");\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-background');\n\t      gEnter.append('g').attr('class', 'nv-linesWrap').style(\"pointer-events\",interactivePointerEvents);\n\t      gEnter.append('g').attr('class', 'nv-avgLinesWrap').style(\"pointer-events\",\"none\");\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width(availableWidth);\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Controls\n\t\n\t      if (showControls) {\n\t        var controlsData = [\n\t          { key: 'Re-scale y-axis', disabled: !rescaleY }\n\t        ];\n\t\n\t        controls\n\t            .width(140)\n\t            .color(['#444', '#444', '#444'])\n\t            .rightAlign(false)\n\t            .margin({top: 5, right: 0, bottom: 5, left: 20})\n\t            ;\n\t\n\t        g.select('.nv-controlsWrap')\n\t            .datum(controlsData)\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t            .call(controls);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      // Show error if series goes below 100%\n\t      var tempDisabled = data.filter(function(d) { return d.tempDisabled });\n\t\n\t      wrap.select('.tempDisabled').remove(); //clean-up and prevent duplicates\n\t      if (tempDisabled.length) {\n\t        wrap.append('text').attr('class', 'tempDisabled')\n\t            .attr('x', availableWidth / 2)\n\t            .attr('y', '-.71em')\n\t            .style('text-anchor', 'end')\n\t            .text(tempDisabled.map(function(d) { return d.key }).join(', ') + ' values cannot be calculated for this time period.');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      //------------------------------------------------------------\n\t      //Set up interactive layer\n\t      if (useInteractiveGuideline) {\n\t        interactiveLayer\n\t          .width(availableWidth)\n\t          .height(availableHeight)\n\t          .margin({left:margin.left,top:margin.top})\n\t          .svgContainer(container)\n\t          .xScale(x);\n\t        wrap.select(\".nv-interactive\").call(interactiveLayer);\n\t      }\n\t\n\t      gEnter.select('.nv-background')\n\t        .append('rect');\n\t\n\t      g.select('.nv-background rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', availableHeight);\n\t\n\t      lines\n\t        //.x(function(d) { return d.x })\n\t        .y(function(d) { return d.display.y })\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && !data[i].tempDisabled; }));\n\t\n\t\n\t\n\t      var linesWrap = g.select('.nv-linesWrap')\n\t          .datum(data.filter(function(d) { return  !d.disabled && !d.tempDisabled }));\n\t\n\t      //d3.transition(linesWrap).call(lines);\n\t      linesWrap.call(lines);\n\t\n\t      /*Handle average lines [AN-612] ----------------------------*/\n\t\n\t      //Store a series index number in the data array.\n\t      data.forEach(function(d,i) {\n\t            d.seriesIndex = i;\n\t      });\n\t\n\t      var avgLineData = data.filter(function(d) {\n\t          return !d.disabled && !!average(d);\n\t      });\n\t\n\t      var avgLines = g.select(\".nv-avgLinesWrap\").selectAll(\"line\")\n\t              .data(avgLineData, function(d) { return d.key; });\n\t\n\t      var getAvgLineY = function(d) {\n\t          //If average lines go off the svg element, clamp them to the svg bounds.\n\t          var yVal = y(average(d));\n\t          if (yVal < 0) return 0;\n\t          if (yVal > availableHeight) return availableHeight;\n\t          return yVal;\n\t      };\n\t\n\t      avgLines.enter()\n\t              .append('line')\n\t              .style('stroke-width',2)\n\t              .style('stroke-dasharray','10,10')\n\t              .style('stroke',function (d,i) {\n\t                  return lines.color()(d,d.seriesIndex);\n\t              })\n\t              .attr('x1',0)\n\t              .attr('x2',availableWidth)\n\t              .attr('y1', getAvgLineY)\n\t              .attr('y2', getAvgLineY);\n\t\n\t      avgLines\n\t              .style('stroke-opacity',function(d){\n\t                  //If average lines go offscreen, make them transparent\n\t                  var yVal = y(average(d));\n\t                  if (yVal < 0 || yVal > availableHeight) return 0;\n\t                  return 1;\n\t              })\n\t              .attr('x1',0)\n\t              .attr('x2',availableWidth)\n\t              .attr('y1', getAvgLineY)\n\t              .attr('y2', getAvgLineY);\n\t\n\t      avgLines.exit().remove();\n\t\n\t      //Create index line -----------------------------------------\n\t\n\t      var indexLine = linesWrap.selectAll('.nv-indexLine')\n\t          .data([index]);\n\t      indexLine.enter().append('rect').attr('class', 'nv-indexLine')\n\t          .attr('width', 3)\n\t          .attr('x', -2)\n\t          .attr('fill', 'red')\n\t          .attr('fill-opacity', .5)\n\t          .style(\"pointer-events\",\"all\")\n\t          .call(indexDrag)\n\t\n\t      indexLine\n\t          .attr('transform', function(d) { return 'translate(' + dx(d.i) + ',0)' })\n\t          .attr('height', availableHeight)\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t        xAxis\n\t          .scale(x)\n\t          //Suggest how many ticks based on the chart width and D3 should listen (70 is the optimal number for MM/DD/YY dates)\n\t          .ticks( Math.min(data[0].values.length,availableWidth/70) )\n\t          .tickSize(-availableHeight, 0);\n\t\n\t        g.select('.nv-x.nv-axis')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')');\n\t        d3.transition(g.select('.nv-x.nv-axis'))\n\t            .call(xAxis);\n\t      }\n\t\n\t\n\t      if (showYAxis) {\n\t        yAxis\n\t          .scale(y)\n\t          .ticks( availableHeight / 36 )\n\t          .tickSize( -availableWidth, 0);\n\t\n\t        d3.transition(g.select('.nv-y.nv-axis'))\n\t            .call(yAxis);\n\t      }\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t\n\t      function updateZero() {\n\t        indexLine\n\t          .data([index]);\n\t\n\t        //When dragging the index line, turn off line transitions.\n\t        // Then turn them back on when done dragging.\n\t        var oldDuration = chart.transitionDuration();\n\t        chart.transitionDuration(0);\n\t        chart.update();\n\t        chart.transitionDuration(oldDuration);\n\t      }\n\t\n\t      g.select('.nv-background rect')\n\t          .on('click', function() {\n\t            index.x = d3.mouse(this)[0];\n\t            index.i = Math.round(dx.invert(index.x));\n\t\n\t            // update state and send stateChange with new index\n\t            state.index = index.i;\n\t            dispatch.stateChange(state);\n\t\n\t            updateZero();\n\t          });\n\t\n\t      lines.dispatch.on('elementClick', function(e) {\n\t        index.i = e.pointIndex;\n\t        index.x = dx(index.i);\n\t\n\t        // update state and send stateChange with new index\n\t        state.index = index.i;\n\t        dispatch.stateChange(state);\n\t\n\t        updateZero();\n\t      });\n\t\n\t      controls.dispatch.on('legendClick', function(d,i) {\n\t        d.disabled = !d.disabled;\n\t        rescaleY = !d.disabled;\n\t\n\t        state.rescaleY = rescaleY;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t\n\t      legend.dispatch.on('stateChange', function(newState) {\n\t        state.disabled = newState.disabled;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      interactiveLayer.dispatch.on('elementMousemove', function(e) {\n\t          lines.clearHighlights();\n\t          var singlePoint, pointIndex, pointXLocation, allData = [];\n\t\n\t\n\t          data\n\t          .filter(function(series, i) {\n\t            series.seriesIndex = i;\n\t            return !series.disabled;\n\t          })\n\t          .forEach(function(series,i) {\n\t              pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n\t              lines.highlightPoint(i, pointIndex, true);\n\t              var point = series.values[pointIndex];\n\t              if (typeof point === 'undefined') return;\n\t              if (typeof singlePoint === 'undefined') singlePoint = point;\n\t              if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n\t              allData.push({\n\t                  key: series.key,\n\t                  value: chart.y()(point, pointIndex),\n\t                  color: color(series,series.seriesIndex)\n\t              });\n\t          });\n\t\n\t          //Highlight the tooltip entry based on which point the mouse is closest to.\n\t          if (allData.length > 2) {\n\t            var yValue = chart.yScale().invert(e.mouseY);\n\t            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n\t            var threshold = 0.03 * domainExtent;\n\t            var indexToHighlight = nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);\n\t            if (indexToHighlight !== null)\n\t              allData[indexToHighlight].highlight = true;\n\t          }\n\t\n\t          var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex), pointIndex);\n\t          interactiveLayer.tooltip\n\t                  .position({left: pointXLocation + margin.left, top: e.mouseY + margin.top})\n\t                  .chartContainer(that.parentNode)\n\t                  .enabled(tooltips)\n\t                  .valueFormatter(function(d,i) {\n\t                     return yAxis.tickFormat()(d);\n\t                  })\n\t                  .data(\n\t                      {\n\t                        value: xValue,\n\t                        series: allData\n\t                      }\n\t                  )();\n\t\n\t          interactiveLayer.renderGuideLine(pointXLocation);\n\t\n\t      });\n\t\n\t      interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n\t          dispatch.tooltipHide();\n\t          lines.clearHighlights();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t\n\t        if (typeof e.index !== 'undefined') {\n\t          index.i = e.index;\n\t          index.x = dx(index.i);\n\t\n\t          state.index = e.index;\n\t\n\t          indexLine\n\t            .data([index]);\n\t        }\n\t\n\t\n\t        if (typeof e.rescaleY !== 'undefined') {\n\t          rescaleY = e.rescaleY;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.lines = lines;\n\t  chart.legend = legend;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t  chart.interactiveLayer = interactiveLayer;\n\t\n\t  d3.rebind(chart, lines, 'defined', 'isArea', 'x', 'y', 'xScale','yScale', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi','useVoronoi',  'id');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.rescaleY = function(_) {\n\t    if (!arguments.length) return rescaleY;\n\t    rescaleY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showControls = function(_) {\n\t    if (!arguments.length) return showControls;\n\t    showControls = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.useInteractiveGuideline = function(_) {\n\t    if(!arguments.length) return useInteractiveGuideline;\n\t    useInteractiveGuideline = _;\n\t    if (_ === true) {\n\t       chart.interactive(false);\n\t       chart.useVoronoi(false);\n\t    }\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.average = function(_) {\n\t     if(!arguments.length) return average;\n\t     average = _;\n\t     return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noErrorCheck = function(_) {\n\t    if (!arguments.length) return noErrorCheck;\n\t    noErrorCheck = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Functions\n\t  //------------------------------------------------------------\n\t\n\t  /* Normalize the data according to an index point. */\n\t  function indexify(idx, data) {\n\t    return data.map(function(line, i) {\n\t      if (!line.values) {\n\t         return line;\n\t      }\n\t      var indexValue = line.values[idx];\n\t      if (indexValue == null) {\n\t        return line;\n\t      }\n\t      var v = lines.y()(indexValue, idx);\n\t\n\t      //TODO: implement check below, and disable series if series loses 100% or more cause divide by 0 issue\n\t      if (v < -.95 && !noErrorCheck) {\n\t        //if a series loses more than 100%, calculations fail.. anything close can cause major distortion (but is mathematically correct till it hits 100)\n\t\n\t        line.tempDisabled = true;\n\t        return line;\n\t      }\n\t\n\t      line.tempDisabled = false;\n\t\n\t      line.values = line.values.map(function(point, pointIndex) {\n\t        point.display = {'y': (lines.y()(point, pointIndex) - v) / (1 + v) };\n\t        return point;\n\t      })\n\t\n\t      return line;\n\t    })\n\t  }\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t//TODO: consider deprecating by adding necessary features to multiBar model\n\tnv.models.discreteBar = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n\t    , x = d3.scale.ordinal()\n\t    , y = d3.scale.linear()\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n\t    , color = nv.utils.defaultColor()\n\t    , showValues = false\n\t    , valueFormat = d3.format(',.2f')\n\t    , xDomain\n\t    , yDomain\n\t    , xRange\n\t    , yRange\n\t    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n\t    , rectClass = 'discreteBar'\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t\n\t      //add series index to each data point for reference\n\t      data.forEach(function(series, i) {\n\t        series.values.forEach(function(point) {\n\t          point.series = i;\n\t        });\n\t      });\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      // remap and flatten the data for use in calculating the scales' domains\n\t      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n\t            data.map(function(d) {\n\t              return d.values.map(function(d,i) {\n\t                return { x: getX(d,i), y: getY(d,i), y0: d.y0 }\n\t              })\n\t            });\n\t\n\t      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n\t          .rangeBands(xRange || [0, availableWidth], .1);\n\t\n\t      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y }).concat(forceY)));\n\t\n\t\n\t      // If showValues, pad the Y axis range to account for label height\n\t      if (showValues) y.range(yRange || [availableHeight - (y.domain()[0] < 0 ? 12 : 0), y.domain()[1] > 0 ? 12 : 0]);\n\t      else y.range(yRange || [availableHeight, 0]);\n\t\n\t      //store old scales if they exist\n\t      x0 = x0 || x;\n\t      y0 = y0 || y.copy().range([y(0),y(0)]);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-discretebar').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discretebar');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-groups');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      //TODO: by definition, the discrete bar should not have multiple groups, will modify/remove later\n\t      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n\t          .data(function(d) { return d }, function(d) { return d.key });\n\t      groups.enter().append('g')\n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6);\n\t      groups.exit()\n\t          \n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6)\n\t          .remove();\n\t      groups\n\t          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n\t          .classed('hover', function(d) { return d.hover });\n\t      groups\n\t          \n\t          .style('stroke-opacity', 1)\n\t          .style('fill-opacity', .75);\n\t\n\t\n\t      var bars = groups.selectAll('g.nv-bar')\n\t          .data(function(d) { return d.values });\n\t\n\t      bars.exit().remove();\n\t\n\t\n\t      var barsEnter = bars.enter().append('g')\n\t          .attr('transform', function(d,i,j) {\n\t              return 'translate(' + (x(getX(d,i)) + x.rangeBand() * .05 ) + ', ' + y(0) + ')'\n\t          })\n\t          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n\t            d3.select(this).classed('hover', true);\n\t            dispatch.elementMouseover({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (d.series + .5) / data.length), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t            d3.select(this).classed('hover', false);\n\t            dispatch.elementMouseout({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t          })\n\t          .on('click', function(d,i) {\n\t            dispatch.elementClick({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (d.series + .5) / data.length), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t            d3.event.stopPropagation();\n\t          })\n\t          .on('dblclick', function(d,i) {\n\t            dispatch.elementDblClick({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (d.series + .5) / data.length), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t            d3.event.stopPropagation();\n\t          });\n\t\n\t      barsEnter.append('rect')\n\t          .attr('height', 0)\n\t          .attr('width', x.rangeBand() * .9 / data.length )\n\t\n\t      if (showValues) {\n\t        barsEnter.append('text')\n\t          .attr('text-anchor', 'middle')\n\t          ;\n\t\n\t        bars.select('text')\n\t          .text(function(d,i) { return valueFormat(getY(d,i)) })\n\t          \n\t          .attr('x', x.rangeBand() * .9 / 2)\n\t          .attr('y', function(d,i) { return getY(d,i) < 0 ? y(getY(d,i)) - y(0) + 12 : -4 })\n\t\n\t          ;\n\t      } else {\n\t        bars.selectAll('text').remove();\n\t      }\n\t\n\t      bars\n\t          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive' })\n\t          .style('fill', function(d,i) { return d.color || color(d,i) })\n\t          .style('stroke', function(d,i) { return d.color || color(d,i) })\n\t        .select('rect')\n\t          .attr('class', rectClass)\n\t          \n\t          .attr('width', x.rangeBand() * .9 / data.length);\n\t      bars\n\t          .attr('transform', function(d,i) {\n\t            var left = x(getX(d,i)) + x.rangeBand() * .05,\n\t                top = getY(d,i) < 0 ?\n\t                        y(0) :\n\t                        y(0) - y(getY(d,i)) < 1 ?\n\t                          y(0) - 1 : //make 1 px positive bars show up above y=0\n\t                          y(getY(d,i));\n\t\n\t              return 'translate(' + left + ', ' + top + ')'\n\t          })\n\t        .select('rect')\n\t          .attr('height', function(d,i) {\n\t            return  Math.max(Math.abs(y(getY(d,i)) - y((yDomain && yDomain[0]) || 0)) || 1)\n\t          });\n\t\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceY = function(_) {\n\t    if (!arguments.length) return forceY;\n\t    forceY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showValues = function(_) {\n\t    if (!arguments.length) return showValues;\n\t    showValues = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.valueFormat= function(_) {\n\t    if (!arguments.length) return valueFormat;\n\t    valueFormat = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rectClass= function(_) {\n\t    if (!arguments.length) return rectClass;\n\t    rectClass = _;\n\t    return chart;\n\t  };\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.discreteBarChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var discretebar = nv.models.discreteBar()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    ;\n\t\n\t  var margin = {top: 15, right: 10, bottom: 50, left: 60}\n\t    , width = null\n\t    , height = null\n\t    , color = nv.utils.getColor()\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , rightAlignYAxis = false\n\t    , staggerLabels = false\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + x + '</h3>' +\n\t               '<p>' +  y + '</p>'\n\t      }\n\t    , x\n\t    , y\n\t    , noData = \"No Data Available.\"\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'beforeUpdate')\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  xAxis\n\t    .orient('bottom')\n\t    .highlightZero(false)\n\t    .showMaxMin(false)\n\t    .tickFormat(function(d) { return d })\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    .tickFormat(d3.format(',.1f'))\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(discretebar.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(discretebar.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t\n\t      chart.update = function() { \n\t        dispatch.beforeUpdate(); \n\t        container.call(chart); \n\t      };\n\t      chart.container = this;\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = discretebar.xScale();\n\t      y = discretebar.yScale().clamp(true);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-discreteBarWithAxes').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discreteBarWithAxes').append('g');\n\t      var defsEnter = gEnter.append('defs');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis')\n\t            .append('g').attr('class', 'nv-zeroLine')\n\t            .append('line');\n\t        \n\t      gEnter.append('g').attr('class', 'nv-barsWrap');\n\t\n\t      g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      discretebar\n\t        .width(availableWidth)\n\t        .height(availableHeight);\n\t\n\t\n\t      var barsWrap = g.select('.nv-barsWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      barsWrap.call(discretebar);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-x-label-clip-' + discretebar.id())\n\t        .append('rect');\n\t\n\t      g.select('#nv-x-label-clip-' + discretebar.id() + ' rect')\n\t          .attr('width', x.rangeBand() * (staggerLabels ? 2 : 1))\n\t          .attr('height', 16)\n\t          .attr('x', -x.rangeBand() / (staggerLabels ? 1 : 2 ));\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t          xAxis\n\t            .scale(x)\n\t            .ticks( availableWidth / 100 )\n\t            .tickSize(-availableHeight, 0);\n\t\n\t          g.select('.nv-x.nv-axis')\n\t              .attr('transform', 'translate(0,' + (y.range()[0] + ((discretebar.showValues() && y.domain()[0] < 0) ? 16 : 0)) + ')');\n\t          //d3.transition(g.select('.nv-x.nv-axis'))\n\t          g.select('.nv-x.nv-axis')\n\t              .call(xAxis);\n\t\n\t\n\t          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\t\n\t          if (staggerLabels) {\n\t            xTicks\n\t                .selectAll('text')\n\t                .attr('transform', function(d,i,j) { return 'translate(0,' + (j % 2 == 0 ? '5' : '17') + ')' })\n\t          }\n\t      }\n\t\n\t      if (showYAxis) {\n\t          yAxis\n\t            .scale(y)\n\t            .ticks( availableHeight / 36 )\n\t            .tickSize( -availableWidth, 0);\n\t\n\t          g.select('.nv-y.nv-axis')\n\t              .call(yAxis);\n\t      }\n\t\n\t      // Zero line\n\t      g.select(\".nv-zeroLine line\")\n\t        .attr(\"x1\",0)\n\t        .attr(\"x2\",availableWidth)\n\t        .attr(\"y1\", y(0))\n\t        .attr(\"y2\", y(0))\n\t        ;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  discretebar.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  discretebar.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.discretebar = discretebar;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t\n\t  d3.rebind(chart, discretebar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'id', 'showValues', 'valueFormat');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    discretebar.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.staggerLabels = function(_) {\n\t    if (!arguments.length) return staggerLabels;\n\t    staggerLabels = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.distribution = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 400 //technically width or height depending on x or y....\n\t    , size = 8\n\t    , axis = 'x' // 'x' or 'y'... horizontal or vertical\n\t    , getData = function(d) { return d[axis] }  // defaults d.x or d.y\n\t    , color = nv.utils.defaultColor()\n\t    , scale = d3.scale.linear()\n\t    , domain\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var scale0;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableLength = width - (axis === 'x' ? margin.left + margin.right : margin.top + margin.bottom),\n\t          naxis = axis == 'x' ? 'y' : 'x',\n\t          container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      scale0 = scale0 || scale;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-distribution').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-distribution');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      var distWrap = g.selectAll('g.nv-dist')\n\t          .data(function(d) { return d }, function(d) { return d.key });\n\t\n\t      distWrap.enter().append('g');\n\t      distWrap\n\t          .attr('class', function(d,i) { return 'nv-dist nv-series-' + i })\n\t          .style('stroke', function(d,i) { return color(d, i) });\n\t\n\t      var dist = distWrap.selectAll('line.nv-dist' + axis)\n\t          .data(function(d) { return d.values })\n\t      dist.enter().append('line')\n\t          .attr(axis + '1', function(d,i) { return scale0(getData(d,i)) })\n\t          .attr(axis + '2', function(d,i) { return scale0(getData(d,i)) })\n\t      distWrap.exit().selectAll('line.nv-dist' + axis)\n\t          \n\t          .attr(axis + '1', function(d,i) { return scale(getData(d,i)) })\n\t          .attr(axis + '2', function(d,i) { return scale(getData(d,i)) })\n\t          .style('stroke-opacity', 0)\n\t          .remove();\n\t      dist\n\t          .attr('class', function(d,i) { return 'nv-dist' + axis + ' nv-dist' + axis + '-' + i })\n\t          .attr(naxis + '1', 0)\n\t          .attr(naxis + '2', size);\n\t      dist\n\t          \n\t          .attr(axis + '1', function(d,i) { return scale(getData(d,i)) })\n\t          .attr(axis + '2', function(d,i) { return scale(getData(d,i)) })\n\t\n\t\n\t      scale0 = scale.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.axis = function(_) {\n\t    if (!arguments.length) return axis;\n\t    axis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.size = function(_) {\n\t    if (!arguments.length) return size;\n\t    size = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.getData = function(_) {\n\t    if (!arguments.length) return getData;\n\t    getData = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.scale = function(_) {\n\t    if (!arguments.length) return scale;\n\t    scale = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.historicalBarChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var bars = nv.models.historicalBar()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    ;\n\t\n\t\n\t  var margin = {top: 30, right: 90, bottom: 50, left: 90}\n\t    , color = nv.utils.defaultColor()\n\t    , width = null\n\t    , height = null\n\t    , showLegend = false\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , rightAlignYAxis = false\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>'\n\t      }\n\t    , x\n\t    , y\n\t    , state = {}\n\t    , defaultState = null\n\t    , noData = 'No Data Available.'\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(7)\n\t    ;\n\t  yAxis\n\t    .orient( (rightAlignYAxis) ? 'right' : 'left')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t\n\t    // New addition to calculate position if SVG is scaled with viewBox, may move TODO: consider implementing everywhere else\n\t    if (offsetElement) {\n\t      var svg = d3.select(offsetElement).select('svg');\n\t      var viewBox = (svg.node()) ? svg.attr('viewBox') : null;\n\t      if (viewBox) {\n\t        viewBox = viewBox.split(' ');\n\t        var ratio = parseInt(svg.style('width')) / viewBox[2];\n\t        e.pos[0] = e.pos[0] * ratio;\n\t        e.pos[1] = e.pos[1] * ratio;\n\t      }\n\t    }\n\t\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(bars.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(bars.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, null, null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t\n\t      chart.update = function() { container.call(chart) };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display noData message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = bars.xScale();\n\t      y = bars.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-historicalBarChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBarChart').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-barsWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width(availableWidth);\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t        g.select(\".nv-y.nv-axis\")\n\t            .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      bars\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled }));\n\t\n\t\n\t      var barsWrap = g.select('.nv-barsWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      barsWrap.call(bars);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t        xAxis\n\t          .scale(x)\n\t          .tickSize(-availableHeight, 0);\n\t\n\t        g.select('.nv-x.nv-axis')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')');\n\t        g.select('.nv-x.nv-axis')\n\t            \n\t            .call(xAxis);\n\t      }\n\t\n\t      if (showYAxis) {\n\t        yAxis\n\t          .scale(y)\n\t          .ticks( availableHeight / 36 )\n\t          .tickSize( -availableWidth, 0);\n\t\n\t        g.select('.nv-y.nv-axis')\n\t          \n\t            .call(yAxis);\n\t      }\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('legendClick', function(d,i) {\n\t        d.disabled = !d.disabled;\n\t\n\t        if (!data.filter(function(d) { return !d.disabled }).length) {\n\t          data.map(function(d) {\n\t            d.disabled = false;\n\t            wrap.selectAll('.nv-series').classed('disabled', false);\n\t            return d;\n\t          });\n\t        }\n\t\n\t        state.disabled = data.map(function(d) { return !!d.disabled });\n\t        dispatch.stateChange(state);\n\t\n\t        selection.call(chart);\n\t      });\n\t\n\t      legend.dispatch.on('legendDblclick', function(d) {\n\t          //Double clicking should always enable current series, and disabled all others.\n\t          data.forEach(function(d) {\n\t             d.disabled = true;\n\t          });\n\t          d.disabled = false;\n\t\n\t          state.disabled = data.map(function(d) { return !!d.disabled });\n\t          dispatch.stateChange(state);\n\t          chart.update();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  bars.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  bars.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.bars = bars;\n\t  chart.legend = legend;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t\n\t  d3.rebind(chart, bars, 'defined', 'isArea', 'x', 'y', 'size', 'xScale', 'yScale',\n\t    'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id', 'interpolate','highlightPoint','clearHighlights', 'interactive');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\tnv.models.indentedTree = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0} //TODO: implement, maybe as margin on the containing div\n\t    , width = 960\n\t    , height = 500\n\t    , color = nv.utils.defaultColor()\n\t    , id = Math.floor(Math.random() * 10000)\n\t    , header = true\n\t    , filterZero = false\n\t    , noData = \"No Data Available.\"\n\t    , childIndent = 20\n\t    , columns = [{key:'key', label: 'Name', type:'text'}] //TODO: consider functions like chart.addColumn, chart.removeColumn, instead of a block like this\n\t    , tableClass = null\n\t    , iconOpen = 'images/grey-plus.png' //TODO: consider removing this and replacing with a '+' or '-' unless user defines images\n\t    , iconClose = 'images/grey-minus.png'\n\t    , dispatch = d3.dispatch('elementClick', 'elementDblclick', 'elementMouseover', 'elementMouseout')\n\t    , getUrl = function(d) { return d.url }\n\t    ;\n\t\n\t  //============================================================\n\t\n\t  var idx = 0;\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var depth = 1,\n\t          container = d3.select(this);\n\t\n\t      var tree = d3.layout.tree()\n\t          .children(function(d) { return d.values })\n\t          .size([height, childIndent]); //Not sure if this is needed now that the result is HTML\n\t\n\t      chart.update = function() { container.call(chart) };\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t      if (!data[0]) data[0] = {key: noData};\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      var nodes = tree.nodes(data[0]);\n\t\n\t      // nodes.map(function(d) {\n\t      //   d.id = i++;\n\t      // })\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = d3.select(this).selectAll('div').data([[nodes]]);\n\t      var wrapEnter = wrap.enter().append('div').attr('class', 'nvd3 nv-wrap nv-indentedtree');\n\t      var tableEnter = wrapEnter.append('table');\n\t      var table = wrap.select('table').attr('width', '100%').attr('class', tableClass);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      if (header) {\n\t        var thead = tableEnter.append('thead');\n\t\n\t        var theadRow1 = thead.append('tr');\n\t\n\t        columns.forEach(function(column) {\n\t          theadRow1\n\t            .append('th')\n\t              .attr('width', column.width ? column.width : '10%')\n\t              .style('text-align', column.type == 'numeric' ? 'right' : 'left')\n\t            .append('span')\n\t              .text(column.label);\n\t        });\n\t      }\n\t\n\t\n\t      var tbody = table.selectAll('tbody')\n\t                    .data(function(d) { return d });\n\t      tbody.enter().append('tbody');\n\t\n\t\n\t\n\t      //compute max generations\n\t      depth = d3.max(nodes, function(node) { return node.depth });\n\t      tree.size([height, depth * childIndent]); //TODO: see if this is necessary at all\n\t\n\t\n\t      // Update the nodes\n\t      var node = tbody.selectAll('tr')\n\t          // .data(function(d) { return d; }, function(d) { return d.id || (d.id == ++i)});\n\t          .data(function(d) { return d.filter(function(d) { return (filterZero && !d.children) ? filterZero(d) :  true; } )}, function(d,i) { return d.id || (d.id || ++idx)});\n\t          //.style('display', 'table-row'); //TODO: see if this does anything\n\t\n\t      node.exit().remove();\n\t\n\t      node.select('img.nv-treeicon')\n\t          .attr('src', icon)\n\t          .classed('folded', folded);\n\t\n\t      var nodeEnter = node.enter().append('tr');\n\t\n\t\n\t      columns.forEach(function(column, index) {\n\t\n\t        var nodeName = nodeEnter.append('td')\n\t            .style('padding-left', function(d) { return (index ? 0 : d.depth * childIndent + 12 + (icon(d) ? 0 : 16)) + 'px' }, 'important') //TODO: check why I did the ternary here\n\t            .style('text-align', column.type == 'numeric' ? 'right' : 'left');\n\t\n\t\n\t        if (index == 0) {\n\t          nodeName.append('img')\n\t              .classed('nv-treeicon', true)\n\t              .classed('nv-folded', folded)\n\t              .attr('src', icon)\n\t              .style('width', '14px')\n\t              .style('height', '14px')\n\t              .style('padding', '0 1px')\n\t              .style('display', function(d) { return icon(d) ? 'inline-block' : 'none'; })\n\t              .on('click', click);\n\t        }\n\t\n\t\n\t        nodeName.each(function(d) {\n\t          if (!index && getUrl(d))\n\t            d3.select(this)\n\t              .append('a')\n\t              .attr('href',getUrl)\n\t              .attr('class', d3.functor(column.classes))\n\t              .append('span')\n\t          else\n\t            d3.select(this)\n\t              .append('span')\n\t\n\t            d3.select(this).select('span')\n\t              .attr('class', d3.functor(column.classes) )\n\t              .text(function(d) { return column.format ? (d[column.key] ? column.format(d[column.key]) : '-') :  (d[column.key] || '-'); });\n\t          });\n\t\n\t        if  (column.showCount) {\n\t          nodeName.append('span')\n\t              .attr('class', 'nv-childrenCount');\n\t\n\t          node.selectAll('span.nv-childrenCount').text(function(d) {\n\t                return ((d.values && d.values.length) || (d._values && d._values.length)) ?                                   //If this is a parent\n\t                    '(' + ((d.values && (d.values.filter(function(d) { return filterZero ? filterZero(d) :  true; }).length)) //If children are in values check its children and filter\n\t                    || (d._values && d._values.filter(function(d) { return filterZero ? filterZero(d) :  true; }).length)     //Otherwise, do the same, but with the other name, _values...\n\t                    || 0) + ')'                                                                                               //This is the catch-all in case there are no children after a filter\n\t                    : ''                                                                                                     //If this is not a parent, just give an empty string\n\t            });\n\t        }\n\t\n\t        // if (column.click)\n\t        //   nodeName.select('span').on('click', column.click);\n\t\n\t      });\n\t\n\t      node\n\t        .order()\n\t        .on('click', function(d) { \n\t          dispatch.elementClick({\n\t            row: this, //TODO: decide whether or not this should be consistent with scatter/line events or should be an html link (a href)\n\t            data: d,\n\t            pos: [d.x, d.y]\n\t          });\n\t        })\n\t        .on('dblclick', function(d) { \n\t          dispatch.elementDblclick({\n\t            row: this,\n\t            data: d,\n\t            pos: [d.x, d.y]\n\t          });\n\t        })\n\t        .on('mouseover', function(d) { \n\t          dispatch.elementMouseover({\n\t            row: this,\n\t            data: d,\n\t            pos: [d.x, d.y]\n\t          });\n\t        })\n\t        .on('mouseout', function(d) { \n\t          dispatch.elementMouseout({\n\t            row: this,\n\t            data: d,\n\t            pos: [d.x, d.y]\n\t          });\n\t        });\n\t\n\t\n\t\n\t\n\t      // Toggle children on click.\n\t      function click(d, _, unshift) {\n\t        d3.event.stopPropagation();\n\t\n\t        if(d3.event.shiftKey && !unshift) {\n\t          //If you shift-click, it'll toggle fold all the children, instead of itself\n\t          d3.event.shiftKey = false;\n\t          d.values && d.values.forEach(function(node){\n\t            if (node.values || node._values) {\n\t              click(node, 0, true);\n\t            }\n\t          });\n\t          return true;\n\t        }\n\t        if(!hasChildren(d)) {\n\t          //download file\n\t          //window.location.href = d.url;\n\t          return true;\n\t        }\n\t        if (d.values) {\n\t          d._values = d.values;\n\t          d.values = null;\n\t        } else {\n\t          d.values = d._values;\n\t          d._values = null;\n\t        }\n\t        chart.update();\n\t      }\n\t\n\t\n\t      function icon(d) {\n\t        return (d._values && d._values.length) ? iconOpen : (d.values && d.values.length) ? iconClose : '';\n\t      }\n\t\n\t      function folded(d) {\n\t        return (d._values && d._values.length);\n\t      }\n\t\n\t      function hasChildren(d) {\n\t        var values = d.values || d._values;\n\t\n\t        return (values && values.length);\n\t      }\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    scatter.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.header = function(_) {\n\t    if (!arguments.length) return header;\n\t    header = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.filterZero = function(_) {\n\t    if (!arguments.length) return filterZero;\n\t    filterZero = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.columns = function(_) {\n\t    if (!arguments.length) return columns;\n\t    columns = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tableClass = function(_) {\n\t    if (!arguments.length) return tableClass;\n\t    tableClass = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.iconOpen = function(_){\n\t     if (!arguments.length) return iconOpen;\n\t    iconOpen = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.iconClose = function(_){\n\t     if (!arguments.length) return iconClose;\n\t    iconClose = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.getUrl = function(_){\n\t     if (!arguments.length) return getUrl;\n\t    getUrl = _;\n\t    return chart;\n\t  }\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t};nv.models.legend = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 5, right: 0, bottom: 5, left: 0}\n\t    , width = 400\n\t    , height = 20\n\t    , getKey = function(d) { return d.key }\n\t    , color = nv.utils.defaultColor()\n\t    , align = true\n\t    , rightAlign = true\n\t    , updateState = true   //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\n\t    , radioButtonMode = false   //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\n\t    , dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-legend').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-legend').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      var series = g.selectAll('.nv-series')\n\t          .data(function(d) { return d });\n\t      var seriesEnter = series.enter().append('g').attr('class', 'nv-series')\n\t          .on('mouseover', function(d,i) {\n\t            dispatch.legendMouseover(d,i);  //TODO: Make consistent with other event objects\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t            dispatch.legendMouseout(d,i);\n\t          })\n\t          .on('click', function(d,i) {\n\t            dispatch.legendClick(d,i);\n\t            if (updateState) {\n\t               if (radioButtonMode) {\n\t                   //Radio button mode: set every series to disabled,\n\t                   //  and enable the clicked series.\n\t                   data.forEach(function(series) { series.disabled = true});\n\t                   d.disabled = false;\n\t               }\n\t               else {\n\t                   d.disabled = !d.disabled;\n\t                   if (data.every(function(series) { return series.disabled})) {\n\t                       //the default behavior of NVD3 legends is, if every single series\n\t                       // is disabled, turn all series' back on.\n\t                       data.forEach(function(series) { series.disabled = false});\n\t                   }\n\t               }\n\t               dispatch.stateChange({\n\t                  disabled: data.map(function(d) { return !!d.disabled })\n\t               });\n\t            }\n\t          })\n\t          .on('dblclick', function(d,i) {\n\t            dispatch.legendDblclick(d,i);\n\t            if (updateState) {\n\t                //the default behavior of NVD3 legends, when double clicking one,\n\t                // is to set all other series' to false, and make the double clicked series enabled.\n\t                data.forEach(function(series) {\n\t                   series.disabled = true;\n\t                });\n\t                d.disabled = false;\n\t                dispatch.stateChange({\n\t                    disabled: data.map(function(d) { return !!d.disabled })\n\t                });\n\t            }\n\t          });\n\t      seriesEnter.append('circle')\n\t          .style('stroke-width', 2)\n\t          .attr('class','nv-legend-symbol')\n\t          .attr('r', 5);\n\t      seriesEnter.append('text')\n\t          .attr('text-anchor', 'start')\n\t          .attr('class','nv-legend-text')\n\t          .attr('dy', '.32em')\n\t          .attr('dx', '8');\n\t      series.classed('disabled', function(d) { return d.disabled });\n\t      series.exit().remove();\n\t      series.select('circle')\n\t          .style('fill', function(d,i) { return d.color || color(d,i)})\n\t          .style('stroke', function(d,i) { return d.color || color(d, i) });\n\t      series.select('text').text(getKey);\n\t\n\t\n\t      //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\n\t\n\t      // NEW ALIGNING CODE, TODO: clean up\n\t      if (align) {\n\t\n\t        var seriesWidths = [];\n\t        series.each(function(d,i) {\n\t              var legendText = d3.select(this).select('text');\n\t              var nodeTextLength;\n\t              try {\n\t                nodeTextLength = legendText.getComputedTextLength();\n\t                // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\n\t                if(nodeTextLength <= 0) throw Error();\n\t              }\n\t              catch(e) {\n\t                nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\n\t              }\n\t\n\t              seriesWidths.push(nodeTextLength + 28); // 28 is ~ the width of the circle plus some padding\n\t            });\n\t\n\t        var seriesPerRow = 0;\n\t        var legendWidth = 0;\n\t        var columnWidths = [];\n\t\n\t        while ( legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\n\t          columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\n\t          legendWidth += seriesWidths[seriesPerRow++];\n\t        }\n\t        if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\n\t\n\t\n\t        while ( legendWidth > availableWidth && seriesPerRow > 1 ) {\n\t          columnWidths = [];\n\t          seriesPerRow--;\n\t\n\t          for (var k = 0; k < seriesWidths.length; k++) {\n\t            if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0) )\n\t              columnWidths[k % seriesPerRow] = seriesWidths[k];\n\t          }\n\t\n\t          legendWidth = columnWidths.reduce(function(prev, cur, index, array) {\n\t                          return prev + cur;\n\t                        });\n\t        }\n\t\n\t        var xPositions = [];\n\t        for (var i = 0, curX = 0; i < seriesPerRow; i++) {\n\t            xPositions[i] = curX;\n\t            curX += columnWidths[i];\n\t        }\n\t\n\t        series\n\t            .attr('transform', function(d, i) {\n\t              return 'translate(' + xPositions[i % seriesPerRow] + ',' + (5 + Math.floor(i / seriesPerRow) * 20) + ')';\n\t            });\n\t\n\t        //position legend as far right as possible within the total width\n\t        if (rightAlign) {\n\t           g.attr('transform', 'translate(' + (width - margin.right - legendWidth) + ',' + margin.top + ')');\n\t        }\n\t        else {\n\t           g.attr('transform', 'translate(0' + ',' + margin.top + ')');\n\t        }\n\t\n\t        height = margin.top + margin.bottom + (Math.ceil(seriesWidths.length / seriesPerRow) * 20);\n\t\n\t      } else {\n\t\n\t        var ypos = 5,\n\t            newxpos = 5,\n\t            maxwidth = 0,\n\t            xpos;\n\t        series\n\t            .attr('transform', function(d, i) {\n\t              var length = d3.select(this).select('text').node().getComputedTextLength() + 28;\n\t              xpos = newxpos;\n\t\n\t              if (width < margin.left + margin.right + xpos + length) {\n\t                newxpos = xpos = 5;\n\t                ypos += 20;\n\t              }\n\t\n\t              newxpos += length;\n\t              if (newxpos > maxwidth) maxwidth = newxpos;\n\t\n\t              return 'translate(' + xpos + ',' + ypos + ')';\n\t            });\n\t\n\t        //position legend as far right as possible within the total width\n\t        g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n\t\n\t        height = margin.top + margin.bottom + ypos + 15;\n\t\n\t      }\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.key = function(_) {\n\t    if (!arguments.length) return getKey;\n\t    getKey = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.align = function(_) {\n\t    if (!arguments.length) return align;\n\t    align = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlign = function(_) {\n\t    if (!arguments.length) return rightAlign;\n\t    rightAlign = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.updateState = function(_) {\n\t    if (!arguments.length) return updateState;\n\t    updateState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.radioButtonMode = function(_) {\n\t    if (!arguments.length) return radioButtonMode;\n\t    radioButtonMode = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.line = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var  scatter = nv.models.scatter()\n\t    ;\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , color = nv.utils.defaultColor() // a function that returns a color\n\t    , getX = function(d) { return d.x } // accessor to get the x value from a data point\n\t    , getY = function(d) { return d.y } // accessor to get the y value from a data point\n\t    , defined = function(d,i) { return !isNaN(getY(d,i)) && getY(d,i) !== null } // allows a line to be not continuous when it is not defined\n\t    , isArea = function(d) { return d.area } // decides if a line is an area or just a line\n\t    , clipEdge = false // if true, masks lines within x and y scale\n\t    , x //can be accessed via chart.xScale()\n\t    , y //can be accessed via chart.yScale()\n\t    , interpolate = \"linear\" // controls the line interpolation\n\t    ;\n\t\n\t  scatter\n\t    .size(16) // default size\n\t    .sizeDomain([16,256]) //set to speed up calculation, needs to be unset if there is a custom size accessor\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0 //used to store previous scales\n\t      ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = scatter.xScale();\n\t      y = scatter.yScale();\n\t\n\t      x0 = x0 || x;\n\t      y0 = y0 || y;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-line').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-line');\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g')\n\t\n\t      gEnter.append('g').attr('class', 'nv-groups');\n\t      gEnter.append('g').attr('class', 'nv-scatterWrap');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t\n\t      scatter\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t\n\t      var scatterWrap = wrap.select('.nv-scatterWrap');\n\t          //.datum(data); // Data automatically trickles down from the wrap\n\t\n\t      scatterWrap.call(scatter);\n\t\n\t\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-edge-clip-' + scatter.id())\n\t        .append('rect');\n\t\n\t      wrap.select('#nv-edge-clip-' + scatter.id() + ' rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', (availableHeight > 0) ? availableHeight : 0);\n\t\n\t      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n\t      scatterWrap\n\t          .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n\t\n\t\n\t\n\t\n\t      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n\t          .data(function(d) { return d }, function(d) { return d.key });\n\t      groups.enter().append('g')\n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6);\n\t\n\t      groups.exit().remove();\n\t\n\t      groups\n\t          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n\t          .classed('hover', function(d) { return d.hover })\n\t          .style('fill', function(d,i){ return color(d, i) })\n\t          .style('stroke', function(d,i){ return color(d, i)});\n\t      groups\n\t          \n\t          .style('stroke-opacity', 1)\n\t          .style('fill-opacity', .5);\n\t\n\t\n\t\n\t      var areaPaths = groups.selectAll('path.nv-area')\n\t          .data(function(d) { return isArea(d) ? [d] : [] }); // this is done differently than lines because I need to check if series is an area\n\t      areaPaths.enter().append('path')\n\t          .attr('class', 'nv-area')\n\t          .attr('d', function(d) {\n\t            return d3.svg.area()\n\t                .interpolate(interpolate)\n\t                .defined(defined)\n\t                .x(function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n\t                .y0(function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n\t                .y1(function(d,i) { return y0( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\n\t                //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n\t                .apply(this, [d.values])\n\t          });\n\t      groups.exit().selectAll('path.nv-area')\n\t           .remove();\n\t\n\t      areaPaths\n\t          \n\t          .attr('d', function(d) {\n\t            return d3.svg.area()\n\t                .interpolate(interpolate)\n\t                .defined(defined)\n\t                .x(function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n\t                .y0(function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n\t                .y1(function(d,i) { return y( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\n\t                //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n\t                .apply(this, [d.values])\n\t          });\n\t\n\t\n\t\n\t      var linePaths = groups.selectAll('path.nv-line')\n\t          .data(function(d) { return [d.values] });\n\t      linePaths.enter().append('path')\n\t          .attr('class', 'nv-line')\n\t          .attr('d',\n\t            d3.svg.line()\n\t              .interpolate(interpolate)\n\t              .defined(defined)\n\t              .x(function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n\t              .y(function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n\t          );\n\t\n\t      linePaths\n\t          \n\t          .attr('d',\n\t            d3.svg.line()\n\t              .interpolate(interpolate)\n\t              .defined(defined)\n\t              .x(function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n\t              .y(function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n\t          );\n\t\n\t\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = scatter.dispatch;\n\t  chart.scatter = scatter;\n\t\n\t  d3.rebind(chart, scatter, 'id', 'interactive', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange',\n\t    'sizeDomain', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'useVoronoi', 'clipRadius', 'padData','highlightPoint','clearHighlights');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    scatter.x(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    scatter.y(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.clipEdge = function(_) {\n\t    if (!arguments.length) return clipEdge;\n\t    clipEdge = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    scatter.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.interpolate = function(_) {\n\t    if (!arguments.length) return interpolate;\n\t    interpolate = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defined = function(_) {\n\t    if (!arguments.length) return defined;\n\t    defined = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.isArea = function(_) {\n\t    if (!arguments.length) return isArea;\n\t    isArea = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.lineChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var lines = nv.models.line()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    , interactiveLayer = nv.interactiveGuideline()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 20, bottom: 50, left: 60}\n\t    , color = nv.utils.defaultColor()\n\t    , width = null\n\t    , height = null\n\t    , showLegend = true\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , rightAlignYAxis = false\n\t    , useInteractiveGuideline = false\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>'\n\t      }\n\t    , x\n\t    , y\n\t    , state = {}\n\t    , defaultState = null\n\t    , noData = 'No Data Available.'\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(7)\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, null, null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t\n\t      chart.update = function() { container.call(chart) };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display noData message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = lines.xScale();\n\t      y = lines.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-lineChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-lineChart').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append(\"rect\").style(\"opacity\",0);\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-linesWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-interactive');\n\t\n\t      g.select(\"rect\")\n\t        .attr(\"width\",availableWidth)\n\t        .attr(\"height\",(availableHeight > 0) ? availableHeight : 0);\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width(availableWidth);\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t\n\t      //------------------------------------------------------------\n\t      //Set up interactive layer\n\t      if (useInteractiveGuideline) {\n\t        interactiveLayer\n\t           .width(availableWidth)\n\t           .height(availableHeight)\n\t           .margin({left:margin.left, top:margin.top})\n\t           .svgContainer(container)\n\t           .xScale(x);\n\t        wrap.select(\".nv-interactive\").call(interactiveLayer);\n\t      }\n\t\n\t\n\t      lines\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled }));\n\t\n\t\n\t      var linesWrap = g.select('.nv-linesWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      linesWrap.call(lines);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t        xAxis\n\t          .scale(x)\n\t          .ticks( availableWidth / 100 )\n\t          .tickSize(-availableHeight, 0);\n\t\n\t        g.select('.nv-x.nv-axis')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')');\n\t        g.select('.nv-x.nv-axis')\n\t            \n\t            .call(xAxis);\n\t      }\n\t\n\t      if (showYAxis) {\n\t        yAxis\n\t          .scale(y)\n\t          .ticks( availableHeight / 36 )\n\t          .tickSize( -availableWidth, 0);\n\t\n\t        g.select('.nv-y.nv-axis')\n\t            \n\t            .call(yAxis);\n\t      }\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) {\n\t          state = newState;\n\t          dispatch.stateChange(state);\n\t          chart.update();\n\t      });\n\t\n\t      interactiveLayer.dispatch.on('elementMousemove', function(e) {\n\t          lines.clearHighlights();\n\t          var singlePoint, pointIndex, pointXLocation, allData = [];\n\t          data\n\t          .filter(function(series, i) {\n\t            series.seriesIndex = i;\n\t            return !series.disabled;\n\t          })\n\t          .forEach(function(series,i) {\n\t              pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n\t              lines.highlightPoint(i, pointIndex, true);\n\t              var point = series.values[pointIndex];\n\t              if (typeof point === 'undefined') return;\n\t              if (typeof singlePoint === 'undefined') singlePoint = point;\n\t              if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n\t              allData.push({\n\t                  key: series.key,\n\t                  value: chart.y()(point, pointIndex),\n\t                  color: color(series,series.seriesIndex)\n\t              });\n\t          });\n\t          //Highlight the tooltip entry based on which point the mouse is closest to.\n\t          if (allData.length > 2) {\n\t            var yValue = chart.yScale().invert(e.mouseY);\n\t            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n\t            var threshold = 0.03 * domainExtent;\n\t            var indexToHighlight = nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);\n\t            if (indexToHighlight !== null)\n\t              allData[indexToHighlight].highlight = true;\n\t          }\n\t\n\t          var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex));\n\t          interactiveLayer.tooltip\n\t                  .position({left: pointXLocation + margin.left, top: e.mouseY + margin.top})\n\t                  .chartContainer(that.parentNode)\n\t                  .enabled(tooltips)\n\t                  .valueFormatter(function(d,i) {\n\t                     return yAxis.tickFormat()(d);\n\t                  })\n\t                  .data(\n\t                      {\n\t                        value: xValue,\n\t                        series: allData\n\t                      }\n\t                  )();\n\t\n\t          interactiveLayer.renderGuideLine(pointXLocation);\n\t\n\t      });\n\t\n\t      interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n\t          dispatch.tooltipHide();\n\t          lines.clearHighlights();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.lines = lines;\n\t  chart.legend = legend;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t  chart.interactiveLayer = interactiveLayer;\n\t\n\t  d3.rebind(chart, lines, 'defined', 'isArea', 'x', 'y', 'size', 'xScale', 'yScale', 'xDomain', 'yDomain', 'xRange', 'yRange'\n\t    , 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'useVoronoi','id', 'interpolate');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.useInteractiveGuideline = function(_) {\n\t    if(!arguments.length) return useInteractiveGuideline;\n\t    useInteractiveGuideline = _;\n\t    if (_ === true) {\n\t       chart.interactive(false);\n\t       chart.useVoronoi(false);\n\t    }\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.linePlusBarChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var lines = nv.models.line()\n\t    , bars = nv.models.historicalBar()\n\t    , xAxis = nv.models.axis()\n\t    , y1Axis = nv.models.axis()\n\t    , y2Axis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 60, bottom: 50, left: 60}\n\t    , width = null\n\t    , height = null\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , color = nv.utils.defaultColor()\n\t    , showLegend = true\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>';\n\t      }\n\t    , x\n\t    , y1\n\t    , y2\n\t    , state = {}\n\t    , defaultState = null\n\t    , noData = \"No Data Available.\"\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    ;\n\t\n\t  bars\n\t    .padData(true)\n\t    ;\n\t  lines\n\t    .clipEdge(false)\n\t    .padData(true)\n\t    ;\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(7)\n\t    .highlightZero(false)\n\t    ;\n\t  y1Axis\n\t    .orient('left')\n\t    ;\n\t  y2Axis\n\t    .orient('right')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t      var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t          top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t          x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n\t          y = (e.series.bar ? y1Axis : y2Axis).tickFormat()(lines.y()(e.point, e.pointIndex)),\n\t          content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t      nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n\t    }\n\t    ;\n\t\n\t  //------------------------------------------------------------\n\t\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      // chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      var dataBars = data.filter(function(d) { return !d.disabled && d.bar });\n\t      var dataLines = data.filter(function(d) { return !d.bar }); // removed the !d.disabled clause here to fix Issue #240\n\t\n\t      //x = xAxis.scale();\n\t       x = dataLines.filter(function(d) { return !d.disabled; }).length && dataLines.filter(function(d) { return !d.disabled; })[0].values.length ? lines.xScale() : bars.xScale();\n\t      //x = dataLines.filter(function(d) { return !d.disabled; }).length ? lines.xScale() : bars.xScale(); //old code before change above\n\t      y1 = bars.yScale();\n\t      y2 = lines.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-linePlusBar').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-linePlusBar').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y1 nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y2 nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-barsWrap');\n\t      gEnter.append('g').attr('class', 'nv-linesWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width( availableWidth / 2 );\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data.map(function(series) {\n\t              series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n\t              series.key = series.originalKey + (series.bar ? ' (left axis)' : ' (right axis)');\n\t              return series;\n\t            }))\n\t          .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + ( availableWidth / 2 ) + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t\n\t      lines\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }))\n\t\n\t      bars\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].bar }))\n\t\n\t\n\t\n\t      var barsWrap = g.select('.nv-barsWrap')\n\t          .datum(dataBars.length ? dataBars : [{values:[]}])\n\t\n\t      var linesWrap = g.select('.nv-linesWrap')\n\t          .datum(dataLines[0] && !dataLines[0].disabled ? dataLines : [{values:[]}] );\n\t          //.datum(!dataLines[0].disabled ? dataLines : [{values:dataLines[0].values.map(function(d) { return [d[0], null] }) }] );\n\t\n\t      d3.transition(barsWrap).call(bars);\n\t      d3.transition(linesWrap).call(lines);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      xAxis\n\t        .scale(x)\n\t        .ticks( availableWidth / 100 )\n\t        .tickSize(-availableHeight, 0);\n\t\n\t      g.select('.nv-x.nv-axis')\n\t          .attr('transform', 'translate(0,' + y1.range()[0] + ')');\n\t      d3.transition(g.select('.nv-x.nv-axis'))\n\t          .call(xAxis);\n\t\n\t\n\t      y1Axis\n\t        .scale(y1)\n\t        .ticks( availableHeight / 36 )\n\t        .tickSize(-availableWidth, 0);\n\t\n\t      d3.transition(g.select('.nv-y1.nv-axis'))\n\t          .style('opacity', dataBars.length ? 1 : 0)\n\t          .call(y1Axis);\n\t\n\t\n\t      y2Axis\n\t        .scale(y2)\n\t        .ticks( availableHeight / 36 )\n\t        .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\t\n\t      g.select('.nv-y2.nv-axis')\n\t          .style('opacity', dataLines.length ? 1 : 0)\n\t          .attr('transform', 'translate(' + availableWidth + ',0)');\n\t          //.attr('transform', 'translate(' + x.range()[1] + ',0)');\n\t\n\t      d3.transition(g.select('.nv-y2.nv-axis'))\n\t          .call(y2Axis);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) { \n\t        state = newState;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  bars.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  bars.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.legend = legend;\n\t  chart.lines = lines;\n\t  chart.bars = bars;\n\t  chart.xAxis = xAxis;\n\t  chart.y1Axis = y1Axis;\n\t  chart.y2Axis = y2Axis;\n\t\n\t  d3.rebind(chart, lines, 'defined', 'size', 'clipVoronoi', 'interpolate');\n\t  //TODO: consider rebinding x, y and some other stuff, and simply do soemthign lile bars.x(lines.x()), etc.\n\t  //d3.rebind(chart, lines, 'x', 'y', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    lines.x(_);\n\t    bars.x(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    lines.y(_);\n\t    bars.y(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\tnv.models.lineWithFocusChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var lines = nv.models.line()\n\t    , lines2 = nv.models.line()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , x2Axis = nv.models.axis()\n\t    , y2Axis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    , brush = d3.svg.brush()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 30, bottom: 30, left: 60}\n\t    , margin2 = {top: 0, right: 30, bottom: 20, left: 60}\n\t    , color = nv.utils.defaultColor()\n\t    , width = null\n\t    , height = null\n\t    , height2 = 100\n\t    , x\n\t    , y\n\t    , x2\n\t    , y2\n\t    , showLegend = true\n\t    , brushExtent = null\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>'\n\t      }\n\t    , noData = \"No Data Available.\"\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'brush')\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  lines\n\t    .clipEdge(true)\n\t    ;\n\t  lines2\n\t    .interactive(false)\n\t    ;\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(5)\n\t    ;\n\t  yAxis\n\t    .orient('left')\n\t    ;\n\t  x2Axis\n\t    .orient('bottom')\n\t    .tickPadding(5)\n\t    ;\n\t  y2Axis\n\t    .orient('left')\n\t    ;\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, null, null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom - height2,\n\t          availableHeight2 = height2 - margin2.top - margin2.bottom;\n\t\n\t      chart.update = function() { container.call(chart) };\n\t      chart.container = this;\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight1 / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = lines.xScale();\n\t      y = lines.yScale();\n\t      x2 = lines2.xScale();\n\t      y2 = lines2.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-lineWithFocusChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-lineWithFocusChart').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t\n\t      var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n\t      focusEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      focusEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      focusEnter.append('g').attr('class', 'nv-linesWrap');\n\t\n\t      var contextEnter = gEnter.append('g').attr('class', 'nv-context');\n\t      contextEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      contextEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      contextEnter.append('g').attr('class', 'nv-linesWrap');\n\t      contextEnter.append('g').attr('class', 'nv-brushBackground');\n\t      contextEnter.append('g').attr('class', 'nv-x nv-brush');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width(availableWidth);\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom - height2;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      lines\n\t        .width(availableWidth)\n\t        .height(availableHeight1)\n\t        .color(\n\t          data\n\t            .map(function(d,i) {\n\t              return d.color || color(d, i);\n\t            })\n\t            .filter(function(d,i) {\n\t              return !data[i].disabled;\n\t          })\n\t        );\n\t\n\t      lines2\n\t        .defined(lines.defined())\n\t        .width(availableWidth)\n\t        .height(availableHeight2)\n\t        .color(\n\t          data\n\t            .map(function(d,i) {\n\t              return d.color || color(d, i);\n\t            })\n\t            .filter(function(d,i) {\n\t              return !data[i].disabled;\n\t          })\n\t        );\n\t\n\t      g.select('.nv-context')\n\t          .attr('transform', 'translate(0,' + ( availableHeight1 + margin.bottom + margin2.top) + ')')\n\t\n\t      var contextLinesWrap = g.select('.nv-context .nv-linesWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      d3.transition(contextLinesWrap).call(lines2);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      /*\n\t      var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      d3.transition(focusLinesWrap).call(lines);\n\t     */\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Main (Focus) Axes\n\t\n\t      xAxis\n\t        .scale(x)\n\t        .ticks( availableWidth / 100 )\n\t        .tickSize(-availableHeight1, 0);\n\t\n\t      yAxis\n\t        .scale(y)\n\t        .ticks( availableHeight1 / 36 )\n\t        .tickSize( -availableWidth, 0);\n\t\n\t      g.select('.nv-focus .nv-x.nv-axis')\n\t          .attr('transform', 'translate(0,' + availableHeight1 + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Brush\n\t\n\t      brush\n\t        .x(x2)\n\t        .on('brush', function() {\n\t            //When brushing, turn off transitions because chart needs to change immediately.\n\t            var oldTransition = chart.transitionDuration();\n\t            chart.transitionDuration(0); \n\t            onBrush();\n\t            chart.transitionDuration(oldTransition);\n\t        });\n\t\n\t      if (brushExtent) brush.extent(brushExtent);\n\t\n\t      var brushBG = g.select('.nv-brushBackground').selectAll('g')\n\t          .data([brushExtent || brush.extent()])\n\t\n\t      var brushBGenter = brushBG.enter()\n\t          .append('g');\n\t\n\t      brushBGenter.append('rect')\n\t          .attr('class', 'left')\n\t          .attr('x', 0)\n\t          .attr('y', 0)\n\t          .attr('height', availableHeight2);\n\t\n\t      brushBGenter.append('rect')\n\t          .attr('class', 'right')\n\t          .attr('x', 0)\n\t          .attr('y', 0)\n\t          .attr('height', availableHeight2);\n\t\n\t      var gBrush = g.select('.nv-x.nv-brush')\n\t          .call(brush);\n\t      gBrush.selectAll('rect')\n\t          //.attr('y', -5)\n\t          .attr('height', availableHeight2);\n\t      gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n\t\n\t      onBrush();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Secondary (Context) Axes\n\t\n\t      x2Axis\n\t        .scale(x2)\n\t        .ticks( availableWidth / 100 )\n\t        .tickSize(-availableHeight2, 0);\n\t\n\t      g.select('.nv-context .nv-x.nv-axis')\n\t          .attr('transform', 'translate(0,' + y2.range()[0] + ')');\n\t      d3.transition(g.select('.nv-context .nv-x.nv-axis'))\n\t          .call(x2Axis);\n\t\n\t\n\t      y2Axis\n\t        .scale(y2)\n\t        .ticks( availableHeight2 / 36 )\n\t        .tickSize( -availableWidth, 0);\n\t\n\t      d3.transition(g.select('.nv-context .nv-y.nv-axis'))\n\t          .call(y2Axis);\n\t\n\t      g.select('.nv-context .nv-x.nv-axis')\n\t          .attr('transform', 'translate(0,' + y2.range()[0] + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) { \n\t        chart.update();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t      //============================================================\n\t      // Functions\n\t      //------------------------------------------------------------\n\t\n\t      // Taken from crossfilter (http://square.github.com/crossfilter/)\n\t      function resizePath(d) {\n\t        var e = +(d == 'e'),\n\t            x = e ? 1 : -1,\n\t            y = availableHeight2 / 3;\n\t        return 'M' + (.5 * x) + ',' + y\n\t            + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n\t            + 'V' + (2 * y - 6)\n\t            + 'A6,6 0 0 ' + e + ' ' + (.5 * x) + ',' + (2 * y)\n\t            + 'Z'\n\t            + 'M' + (2.5 * x) + ',' + (y + 8)\n\t            + 'V' + (2 * y - 8)\n\t            + 'M' + (4.5 * x) + ',' + (y + 8)\n\t            + 'V' + (2 * y - 8);\n\t      }\n\t\n\t\n\t      function updateBrushBG() {\n\t        if (!brush.empty()) brush.extent(brushExtent);\n\t        brushBG\n\t            .data([brush.empty() ? x2.domain() : brushExtent])\n\t            .each(function(d,i) {\n\t              var leftWidth = x2(d[0]) - x.range()[0],\n\t                  rightWidth = x.range()[1] - x2(d[1]);\n\t              d3.select(this).select('.left')\n\t                .attr('width',  leftWidth < 0 ? 0 : leftWidth);\n\t\n\t              d3.select(this).select('.right')\n\t                .attr('x', x2(d[1]))\n\t                .attr('width', rightWidth < 0 ? 0 : rightWidth);\n\t            });\n\t      }\n\t\n\t\n\t      function onBrush() {\n\t        brushExtent = brush.empty() ? null : brush.extent();\n\t        var extent = brush.empty() ? x2.domain() : brush.extent();\n\t\n\t        //The brush extent cannot be less than one.  If it is, don't update the line chart.\n\t        if (Math.abs(extent[0] - extent[1]) <= 1) {\n\t          return;\n\t        }\n\t\n\t        dispatch.brush({extent: extent, brush: brush});\n\t\n\t\n\t        updateBrushBG();\n\t\n\t        // Update Main (Focus)\n\t        var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n\t            .datum(\n\t              data\n\t                .filter(function(d) { return !d.disabled })\n\t                .map(function(d,i) {\n\t                  return {\n\t                    key: d.key,\n\t                    values: d.values.filter(function(d,i) {\n\t                      return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n\t                    })\n\t                  }\n\t                })\n\t            );\n\t        focusLinesWrap.call(lines);\n\t\n\t\n\t        // Update Main (Focus) Axes\n\t        g.select('.nv-focus .nv-x.nv-axis')\n\t            .call(xAxis);\n\t        g.select('.nv-focus .nv-y.nv-axis')\n\t            .call(yAxis);\n\t      }\n\t\n\t      //============================================================\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.legend = legend;\n\t  chart.lines = lines;\n\t  chart.lines2 = lines2;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t  chart.x2Axis = x2Axis;\n\t  chart.y2Axis = y2Axis;\n\t\n\t  d3.rebind(chart, lines, 'defined', 'isArea', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.x = function(_) {\n\t    if (!arguments.length) return lines.x;\n\t    lines.x(_);\n\t    lines2.x(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return lines.y;\n\t    lines.y(_);\n\t    lines2.y(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin2 = function(_) {\n\t    if (!arguments.length) return margin2;\n\t    margin2 = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height2 = function(_) {\n\t    if (!arguments.length) return height2;\n\t    height2 = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color =nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.interpolate = function(_) {\n\t    if (!arguments.length) return lines.interpolate();\n\t    lines.interpolate(_);\n\t    lines2.interpolate(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  // Chart has multiple similar Axes, to prevent code duplication, probably need to link all axis functions manually like below\n\t  chart.xTickFormat = function(_) {\n\t    if (!arguments.length) return xAxis.tickFormat();\n\t    xAxis.tickFormat(_);\n\t    x2Axis.tickFormat(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.yTickFormat = function(_) {\n\t    if (!arguments.length) return yAxis.tickFormat();\n\t    yAxis.tickFormat(_);\n\t    y2Axis.tickFormat(_);\n\t    return chart;\n\t  };\n\t  \n\t  chart.brushExtent = function(_) {\n\t    if (!arguments.length) return brushExtent;\n\t    brushExtent = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.linePlusBarWithFocusChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var lines = nv.models.line()\n\t    , lines2 = nv.models.line()\n\t    , bars = nv.models.historicalBar()\n\t    , bars2 = nv.models.historicalBar()\n\t    , xAxis = nv.models.axis()\n\t    , x2Axis = nv.models.axis()\n\t    , y1Axis = nv.models.axis()\n\t    , y2Axis = nv.models.axis()\n\t    , y3Axis = nv.models.axis()\n\t    , y4Axis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    , brush = d3.svg.brush()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 30, bottom: 30, left: 60}\n\t    , margin2 = {top: 0, right: 30, bottom: 20, left: 60}\n\t    , width = null\n\t    , height = null\n\t    , height2 = 100\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , color = nv.utils.defaultColor()\n\t    , showLegend = true\n\t    , extent\n\t    , brushExtent = null\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>';\n\t      }\n\t    , x\n\t    , x2\n\t    , y1\n\t    , y2\n\t    , y3\n\t    , y4\n\t    , noData = \"No Data Available.\"\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'brush')\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  lines\n\t    .clipEdge(true)\n\t    ;\n\t  lines2\n\t    .interactive(false)\n\t    ;\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(5)\n\t    ;\n\t  y1Axis\n\t    .orient('left')\n\t    ;\n\t  y2Axis\n\t    .orient('right')\n\t    ;\n\t  x2Axis\n\t    .orient('bottom')\n\t    .tickPadding(5)\n\t    ;\n\t  y3Axis\n\t    .orient('left')\n\t    ;\n\t  y4Axis\n\t    .orient('right')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    if (extent) {\n\t        e.pointIndex += Math.ceil(extent[0]);\n\t    }\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n\t        y = (e.series.bar ? y1Axis : y2Axis).tickFormat()(lines.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  //------------------------------------------------------------\n\t\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom - height2,\n\t          availableHeight2 = height2 - margin2.top - margin2.bottom;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      chart.container = this;\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight1 / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      var dataBars = data.filter(function(d) { return !d.disabled && d.bar });\n\t      var dataLines = data.filter(function(d) { return !d.bar }); // removed the !d.disabled clause here to fix Issue #240\n\t\n\t      x = bars.xScale();\n\t      x2 = x2Axis.scale();\n\t      y1 = bars.yScale();\n\t      y2 = lines.yScale();\n\t      y3 = bars2.yScale();\n\t      y4 = lines2.yScale();\n\t\n\t      var series1 = data\n\t        .filter(function(d) { return !d.disabled && d.bar })\n\t        .map(function(d) {\n\t          return d.values.map(function(d,i) {\n\t            return { x: getX(d,i), y: getY(d,i) }\n\t          })\n\t        });\n\t\n\t      var series2 = data\n\t        .filter(function(d) { return !d.disabled && !d.bar })\n\t        .map(function(d) {\n\t          return d.values.map(function(d,i) {\n\t            return { x: getX(d,i), y: getY(d,i) }\n\t          })\n\t        });\n\t\n\t      x   .range([0, availableWidth]);\n\t      \n\t      x2  .domain(d3.extent(d3.merge(series1.concat(series2)), function(d) { return d.x } ))\n\t          .range([0, availableWidth]);\n\t\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-linePlusBar').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-linePlusBar').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      \n\t      var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n\t      focusEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      focusEnter.append('g').attr('class', 'nv-y1 nv-axis');\n\t      focusEnter.append('g').attr('class', 'nv-y2 nv-axis');\n\t      focusEnter.append('g').attr('class', 'nv-barsWrap');\n\t      focusEnter.append('g').attr('class', 'nv-linesWrap');\n\t\n\t      var contextEnter = gEnter.append('g').attr('class', 'nv-context');\n\t      contextEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      contextEnter.append('g').attr('class', 'nv-y1 nv-axis');\n\t      contextEnter.append('g').attr('class', 'nv-y2 nv-axis');\n\t      contextEnter.append('g').attr('class', 'nv-barsWrap');\n\t      contextEnter.append('g').attr('class', 'nv-linesWrap');\n\t      contextEnter.append('g').attr('class', 'nv-brushBackground');\n\t      contextEnter.append('g').attr('class', 'nv-x nv-brush');\n\t\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width( availableWidth / 2 );\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data.map(function(series) {\n\t              series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n\t              series.key = series.originalKey + (series.bar ? ' (left axis)' : ' (right axis)');\n\t              return series;\n\t            }))\n\t          .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom - height2;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + ( availableWidth / 2 ) + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Context Components\n\t\n\t      bars2\n\t        .width(availableWidth)\n\t        .height(availableHeight2)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].bar }));\n\t\n\t      lines2\n\t        .width(availableWidth)\n\t        .height(availableHeight2)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }));\n\t        \n\t      var bars2Wrap = g.select('.nv-context .nv-barsWrap')\n\t          .datum(dataBars.length ? dataBars : [{values:[]}]);\n\t\n\t      var lines2Wrap = g.select('.nv-context .nv-linesWrap')\n\t          .datum(!dataLines[0].disabled ? dataLines : [{values:[]}]);\n\t          \n\t      g.select('.nv-context')\n\t          .attr('transform', 'translate(0,' + ( availableHeight1 + margin.bottom + margin2.top) + ')')\n\t\n\t      bars2Wrap.call(bars2);\n\t      lines2Wrap.call(lines2);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Brush\n\t\n\t      brush\n\t        .x(x2)\n\t        .on('brush', onBrush);\n\t\n\t      if (brushExtent) brush.extent(brushExtent);\n\t\n\t      var brushBG = g.select('.nv-brushBackground').selectAll('g')\n\t          .data([brushExtent || brush.extent()])\n\t\n\t      var brushBGenter = brushBG.enter()\n\t          .append('g');\n\t\n\t      brushBGenter.append('rect')\n\t          .attr('class', 'left')\n\t          .attr('x', 0)\n\t          .attr('y', 0)\n\t          .attr('height', availableHeight2);\n\t\n\t      brushBGenter.append('rect')\n\t          .attr('class', 'right')\n\t          .attr('x', 0)\n\t          .attr('y', 0)\n\t          .attr('height', availableHeight2);\n\t\n\t      var gBrush = g.select('.nv-x.nv-brush')\n\t          .call(brush);\n\t      gBrush.selectAll('rect')\n\t          //.attr('y', -5)\n\t          .attr('height', availableHeight2);\n\t      gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n\t\n\t      //------------------------------------------------------------\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Secondary (Context) Axes\n\t\n\t      x2Axis\n\t        .ticks( availableWidth / 100 )\n\t        .tickSize(-availableHeight2, 0);\n\t\n\t      g.select('.nv-context .nv-x.nv-axis')\n\t          .attr('transform', 'translate(0,' + y3.range()[0] + ')');\n\t      g.select('.nv-context .nv-x.nv-axis')\n\t          .call(x2Axis);\n\t\n\t\n\t      y3Axis\n\t        .scale(y3)\n\t        .ticks( availableHeight2 / 36 )\n\t        .tickSize( -availableWidth, 0);\n\t\n\t      g.select('.nv-context .nv-y1.nv-axis')\n\t          .style('opacity', dataBars.length ? 1 : 0)\n\t          .attr('transform', 'translate(0,' + x2.range()[0] + ')');\n\t          \n\t      g.select('.nv-context .nv-y1.nv-axis')\n\t          .call(y3Axis);\n\t          \n\t\n\t      y4Axis\n\t        .scale(y4)\n\t        .ticks( availableHeight2 / 36 )\n\t        .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\t\n\t      g.select('.nv-context .nv-y2.nv-axis')\n\t          .style('opacity', dataLines.length ? 1 : 0)\n\t          .attr('transform', 'translate(' + x2.range()[1] + ',0)');\n\t\n\t      g.select('.nv-context .nv-y2.nv-axis')\n\t          .call(y4Axis);\n\t          \n\t      //------------------------------------------------------------\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) { \n\t        chart.update();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t      //============================================================\n\t      // Functions\n\t      //------------------------------------------------------------\n\t\n\t      // Taken from crossfilter (http://square.github.com/crossfilter/)\n\t      function resizePath(d) {\n\t        var e = +(d == 'e'),\n\t            x = e ? 1 : -1,\n\t            y = availableHeight2 / 3;\n\t        return 'M' + (.5 * x) + ',' + y\n\t            + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n\t            + 'V' + (2 * y - 6)\n\t            + 'A6,6 0 0 ' + e + ' ' + (.5 * x) + ',' + (2 * y)\n\t            + 'Z'\n\t            + 'M' + (2.5 * x) + ',' + (y + 8)\n\t            + 'V' + (2 * y - 8)\n\t            + 'M' + (4.5 * x) + ',' + (y + 8)\n\t            + 'V' + (2 * y - 8);\n\t      }\n\t\n\t\n\t      function updateBrushBG() {\n\t        if (!brush.empty()) brush.extent(brushExtent);\n\t        brushBG\n\t            .data([brush.empty() ? x2.domain() : brushExtent])\n\t            .each(function(d,i) {\n\t              var leftWidth = x2(d[0]) - x2.range()[0],\n\t                  rightWidth = x2.range()[1] - x2(d[1]);\n\t              d3.select(this).select('.left')\n\t                .attr('width',  leftWidth < 0 ? 0 : leftWidth);\n\t\n\t              d3.select(this).select('.right')\n\t                .attr('x', x2(d[1]))\n\t                .attr('width', rightWidth < 0 ? 0 : rightWidth);\n\t            });\n\t      }\n\t\n\t\n\t      function onBrush() {\n\t        brushExtent = brush.empty() ? null : brush.extent();\n\t        extent = brush.empty() ? x2.domain() : brush.extent();\n\t\n\t\n\t        dispatch.brush({extent: extent, brush: brush});\n\t\n\t        updateBrushBG();\n\t\n\t\n\t        //------------------------------------------------------------\n\t        // Prepare Main (Focus) Bars and Lines\n\t        \n\t        bars\n\t        .width(availableWidth)\n\t        .height(availableHeight1)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].bar }));\n\t\n\t\n\t        lines\n\t        .width(availableWidth)\n\t        .height(availableHeight1)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }));\n\t\n\t        var focusBarsWrap = g.select('.nv-focus .nv-barsWrap')\n\t            .datum(!dataBars.length ? [{values:[]}] :\n\t              dataBars\n\t                .map(function(d,i) {\n\t                  return {\n\t                    key: d.key,\n\t                    values: d.values.filter(function(d,i) {\n\t                      return bars.x()(d,i) >= extent[0] && bars.x()(d,i) <= extent[1];\n\t                    })\n\t                  }\n\t                })\n\t            );\n\t        \n\t        var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n\t            .datum(dataLines[0].disabled ? [{values:[]}] :\n\t              dataLines\n\t                .map(function(d,i) {\n\t                  return {\n\t                    key: d.key,\n\t                    values: d.values.filter(function(d,i) {\n\t                      return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n\t                    })\n\t                  }\n\t                })\n\t             );\n\t                 \n\t        //------------------------------------------------------------\n\t        \n\t        \n\t        //------------------------------------------------------------\n\t        // Update Main (Focus) X Axis\n\t\n\t        if (dataBars.length) {\n\t            x = bars.xScale();\n\t        } else {\n\t            x = lines.xScale();\n\t        }\n\t        \n\t        xAxis\n\t        .scale(x)\n\t        .ticks( availableWidth / 100 )\n\t        .tickSize(-availableHeight1, 0);\n\t\n\t        xAxis.domain([Math.ceil(extent[0]), Math.floor(extent[1])]);\n\t        \n\t        g.select('.nv-x.nv-axis')\n\t          .call(xAxis);\n\t        //------------------------------------------------------------\n\t        \n\t        \n\t        //------------------------------------------------------------\n\t        // Update Main (Focus) Bars and Lines\n\t\n\t        focusBarsWrap.call(bars);\n\t        focusLinesWrap.call(lines);\n\t        \n\t        //------------------------------------------------------------\n\t        \n\t          \n\t        //------------------------------------------------------------\n\t        // Setup and Update Main (Focus) Y Axes\n\t        \n\t        g.select('.nv-focus .nv-x.nv-axis')\n\t          .attr('transform', 'translate(0,' + y1.range()[0] + ')');\n\t\n\t\n\t        y1Axis\n\t        .scale(y1)\n\t        .ticks( availableHeight1 / 36 )\n\t        .tickSize(-availableWidth, 0);\n\t\n\t        g.select('.nv-focus .nv-y1.nv-axis')\n\t          .style('opacity', dataBars.length ? 1 : 0);\n\t\n\t\n\t        y2Axis\n\t        .scale(y2)\n\t        .ticks( availableHeight1 / 36 )\n\t        .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\t\n\t        g.select('.nv-focus .nv-y2.nv-axis')\n\t          .style('opacity', dataLines.length ? 1 : 0)\n\t          .attr('transform', 'translate(' + x.range()[1] + ',0)');\n\t\n\t        g.select('.nv-focus .nv-y1.nv-axis')\n\t            .call(y1Axis);\n\t        g.select('.nv-focus .nv-y2.nv-axis')\n\t            .call(y2Axis);\n\t      }\n\t\n\t      //============================================================\n\t\n\t      onBrush();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  bars.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  bars.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.legend = legend;\n\t  chart.lines = lines;\n\t  chart.lines2 = lines2;\n\t  chart.bars = bars;\n\t  chart.bars2 = bars2;\n\t  chart.xAxis = xAxis;\n\t  chart.x2Axis = x2Axis;\n\t  chart.y1Axis = y1Axis;\n\t  chart.y2Axis = y2Axis;\n\t  chart.y3Axis = y3Axis;\n\t  chart.y4Axis = y4Axis;\n\t\n\t  d3.rebind(chart, lines, 'defined', 'size', 'clipVoronoi', 'interpolate');\n\t  //TODO: consider rebinding x, y and some other stuff, and simply do soemthign lile bars.x(lines.x()), etc.\n\t  //d3.rebind(chart, lines, 'x', 'y', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    lines.x(_);\n\t    bars.x(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    lines.y(_);\n\t    bars.y(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.brushExtent = function(_) {\n\t    if (!arguments.length) return brushExtent;\n\t    brushExtent = _;\n\t    return chart;\n\t  };\n\t\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.multiBar = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , x = d3.scale.ordinal()\n\t    , y = d3.scale.linear()\n\t    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n\t    , clipEdge = true\n\t    , stacked = false\n\t    , stackOffset = 'zero' // options include 'silhouette', 'wiggle', 'expand', 'zero', or a custom function\n\t    , color = nv.utils.defaultColor()\n\t    , hideable = false\n\t    , barColor = null // adding the ability to set the color for each rather than the whole group\n\t    , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n\t    , delay = 1200\n\t    , xDomain\n\t    , yDomain\n\t    , xRange\n\t    , yRange\n\t    , groupSpacing = 0.1\n\t    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0 //used to store previous scales\n\t      ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t      if(hideable && data.length) hideable = [{\n\t        values: data[0].values.map(function(d) {\n\t        return {\n\t          x: d.x,\n\t          y: 0,\n\t          series: d.series,\n\t          size: 0.01\n\t        };}\n\t      )}];\n\t\n\t      if (stacked)\n\t        data = d3.layout.stack()\n\t                 .offset(stackOffset)\n\t                 .values(function(d){ return d.values })\n\t                 .y(getY)\n\t                 (!data.length && hideable ? hideable : data);\n\t\n\t\n\t      //add series index to each data point for reference\n\t      data.forEach(function(series, i) {\n\t        series.values.forEach(function(point) {\n\t          point.series = i;\n\t        });\n\t      });\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // HACK for negative value stacking\n\t      if (stacked)\n\t        data[0].values.map(function(d,i) {\n\t          var posBase = 0, negBase = 0;\n\t          data.map(function(d) {\n\t            var f = d.values[i]\n\t            f.size = Math.abs(f.y);\n\t            if (f.y<0)  {\n\t              f.y1 = negBase;\n\t              negBase = negBase - f.size;\n\t            } else\n\t            {\n\t              f.y1 = f.size + posBase;\n\t              posBase = posBase + f.size;\n\t            }\n\t          });\n\t        });\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      // remap and flatten the data for use in calculating the scales' domains\n\t      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n\t            data.map(function(d) {\n\t              return d.values.map(function(d,i) {\n\t                return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1 }\n\t              })\n\t            });\n\t\n\t      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n\t          .rangeBands(xRange || [0, availableWidth], groupSpacing);\n\t\n\t      //y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y + (stacked ? d.y1 : 0) }).concat(forceY)))\n\t      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return stacked ? (d.y > 0 ? d.y1 : d.y1 + d.y ) : d.y }).concat(forceY)))\n\t          .range(yRange || [availableHeight, 0]);\n\t\n\t      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\t      if (x.domain()[0] === x.domain()[1])\n\t        x.domain()[0] ?\n\t            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n\t          : x.domain([-1,1]);\n\t\n\t      if (y.domain()[0] === y.domain()[1])\n\t        y.domain()[0] ?\n\t            y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n\t          : y.domain([-1,1]);\n\t\n\t\n\t      x0 = x0 || x;\n\t      y0 = y0 || y;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-multibar').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibar');\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g')\n\t\n\t      gEnter.append('g').attr('class', 'nv-groups');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-edge-clip-' + id)\n\t        .append('rect');\n\t      wrap.select('#nv-edge-clip-' + id + ' rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', availableHeight);\n\t\n\t      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\t\n\t\n\t\n\t      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n\t          .data(function(d) { return d }, function(d,i) { return i });\n\t      groups.enter().append('g')\n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6);\n\t      groups.exit()\n\t        .selectAll('rect.nv-bar')\n\t          .attr('y', function(d) { return stacked ? y0(d.y0) : y0(0) })\n\t          .attr('height', 0)\n\t          .remove();\n\t      groups\n\t          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n\t          .classed('hover', function(d) { return d.hover })\n\t          .style('fill', function(d,i){ return color(d, i) })\n\t          .style('stroke', function(d,i){ return color(d, i) });\n\t      groups\n\t          .style('stroke-opacity', 1)\n\t          .style('fill-opacity', .75);\n\t\n\t\n\t      var bars = groups.selectAll('rect.nv-bar')\n\t          .data(function(d) { return (hideable && !data.length) ? hideable.values : d.values });\n\t\n\t      bars.exit().remove();\n\t\n\t\n\t      var barsEnter = bars.enter().append('rect')\n\t          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n\t          .attr('x', function(d,i,j) {\n\t              return stacked ? 0 : (j * x.rangeBand() / data.length )\n\t          })\n\t          .attr('y', function(d) { return y0(stacked ? d.y0 : 0) })\n\t          .attr('height', 0)\n\t          .attr('width', x.rangeBand() / (stacked ? 1 : data.length) )\n\t          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',0)'; })\n\t          ;\n\t      bars\n\t          .style('fill', function(d,i,j){ return color(d, j, i);  })\n\t          .style('stroke', function(d,i,j){ return color(d, j, i); })\n\t          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n\t            d3.select(this).classed('hover', true);\n\t            dispatch.elementMouseover({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t            d3.select(this).classed('hover', false);\n\t            dispatch.elementMouseout({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t          })\n\t          .on('click', function(d,i) {\n\t            dispatch.elementClick({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t            d3.event.stopPropagation();\n\t          })\n\t          .on('dblclick', function(d,i) {\n\t            dispatch.elementDblClick({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t            d3.event.stopPropagation();\n\t          });\n\t      bars\n\t          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n\t          \n\t          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',0)'; })\n\t\n\t      if (barColor) {\n\t        if (!disabled) disabled = data.map(function() { return true });\n\t        bars\n\t          .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\n\t          .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\n\t      }\n\t\n\t\n\t      if (stacked)\n\t          bars\n\t            .attr('y', function(d,i) {\n\t\n\t              return y((stacked ? d.y1 : 0));\n\t            })\n\t            .attr('height', function(d,i) {\n\t              return Math.max(Math.abs(y(d.y + (stacked ? d.y0 : 0)) - y((stacked ? d.y0 : 0))),1);\n\t            })\n\t            .attr('x', function(d,i) {\n\t                  return stacked ? 0 : (d.series * x.rangeBand() / data.length )\n\t            })\n\t            .attr('width', x.rangeBand() / (stacked ? 1 : data.length) );\n\t      else\n\t          bars\n\t            .attr('x', function(d,i) {\n\t              return d.series * x.rangeBand() / data.length\n\t            })\n\t            .attr('width', x.rangeBand() / data.length)\n\t            .attr('y', function(d,i) {\n\t                return getY(d,i) < 0 ?\n\t                        y(0) :\n\t                        y(0) - y(getY(d,i)) < 1 ?\n\t                          y(0) - 1 :\n\t                        y(getY(d,i)) || 0;\n\t            })\n\t            .attr('height', function(d,i) {\n\t                return Math.max(Math.abs(y(getY(d,i)) - y(0)),1) || 0;\n\t            });\n\t\n\t\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceY = function(_) {\n\t    if (!arguments.length) return forceY;\n\t    forceY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.stacked = function(_) {\n\t    if (!arguments.length) return stacked;\n\t    stacked = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.stackOffset = function(_) {\n\t    if (!arguments.length) return stackOffset;\n\t    stackOffset = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.clipEdge = function(_) {\n\t    if (!arguments.length) return clipEdge;\n\t    clipEdge = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.barColor = function(_) {\n\t    if (!arguments.length) return barColor;\n\t    barColor = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.disabled = function(_) {\n\t    if (!arguments.length) return disabled;\n\t    disabled = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.hideable = function(_) {\n\t    if (!arguments.length) return hideable;\n\t    hideable = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.delay = function(_) {\n\t    if (!arguments.length) return delay;\n\t    delay = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.groupSpacing = function(_) {\n\t    if (!arguments.length) return groupSpacing;\n\t    groupSpacing = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.multiBarChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var multibar = nv.models.multiBar()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    , controls = nv.models.legend()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 20, bottom: 50, left: 60}\n\t    , width = null\n\t    , height = null\n\t    , color = nv.utils.defaultColor()\n\t    , showControls = true\n\t    , showLegend = true\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , rightAlignYAxis = false\n\t    , reduceXTicks = true // if false a tick will show for every data point\n\t    , staggerLabels = false\n\t    , rotateLabels = 0\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' on ' + x + '</p>'\n\t      }\n\t    , x //can be accessed via chart.xScale()\n\t    , y //can be accessed via chart.yScale()\n\t    , state = { stacked: false }\n\t    , defaultState = null\n\t    , noData = \"No Data Available.\"\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , controlWidth = function() { return showControls ? 180 : 0 }\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  multibar\n\t    .stacked(false)\n\t    ;\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(7)\n\t    .highlightZero(true)\n\t    .showMaxMin(false)\n\t    .tickFormat(function(d) { return d })\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    .tickFormat(d3.format(',.1f'))\n\t    ;\n\t\n\t  controls.updateState(false);\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart) };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t      //------------------------------------------------------------\n\t      // Display noData message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = multibar.xScale();\n\t      y = multibar.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-multiBarWithLegend').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarWithLegend').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-barsWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width(availableWidth - controlWidth());\n\t\n\t        if (multibar.barColor())\n\t          data.forEach(function(series,i) {\n\t            series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\n\t          })\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Controls\n\t\n\t      if (showControls) {\n\t        var controlsData = [\n\t          { key: 'Grouped', disabled: multibar.stacked() },\n\t          { key: 'Stacked', disabled: !multibar.stacked() }\n\t        ];\n\t\n\t        controls.width(controlWidth()).color(['#444', '#444', '#444']);\n\t        g.select('.nv-controlsWrap')\n\t            .datum(controlsData)\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t            .call(controls);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      multibar\n\t        .disabled(data.map(function(series) { return series.disabled }))\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled }))\n\t\n\t\n\t      var barsWrap = g.select('.nv-barsWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      barsWrap.call(multibar);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t          xAxis\n\t            .scale(x)\n\t            .ticks( availableWidth / 100 )\n\t            .tickSize(-availableHeight, 0);\n\t\n\t          g.select('.nv-x.nv-axis')\n\t              .attr('transform', 'translate(0,' + y.range()[0] + ')');\n\t          g.select('.nv-x.nv-axis')\n\t              .call(xAxis);\n\t\n\t          var xTicks = g.select('.nv-x.nv-axis > g').selectAll('g');\n\t\n\t          xTicks\n\t              .selectAll('line, text')\n\t              .style('opacity', 1)\n\t\n\t          if (staggerLabels) {\n\t              var getTranslate = function(x,y) {\n\t                  return \"translate(\" + x + \",\" + y + \")\";\n\t              };\n\t\n\t              var staggerUp = 5, staggerDown = 17;  //pixels to stagger by\n\t              // Issue #140\n\t              xTicks\n\t                .selectAll(\"text\")\n\t                .attr('transform', function(d,i,j) { \n\t                    return  getTranslate(0, (j % 2 == 0 ? staggerUp : staggerDown));\n\t                  });\n\t\n\t              var totalInBetweenTicks = d3.selectAll(\".nv-x.nv-axis .nv-wrap g g text\")[0].length;\n\t              g.selectAll(\".nv-x.nv-axis .nv-axisMaxMin text\")\n\t                .attr(\"transform\", function(d,i) {\n\t                    return getTranslate(0, (i === 0 || totalInBetweenTicks % 2 !== 0) ? staggerDown : staggerUp);\n\t                });\n\t          }\n\t\n\t          if (reduceXTicks)\n\t            xTicks\n\t              .filter(function(d,i) {\n\t                  return i % Math.ceil(data[0].values.length / (availableWidth / 100)) !== 0;\n\t                })\n\t              .selectAll('text, line')\n\t              .style('opacity', 0);\n\t\n\t          if(rotateLabels)\n\t            xTicks\n\t              .selectAll('.tick text')\n\t              .attr('transform', 'rotate(' + rotateLabels + ' 0,0)')\n\t              .style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\n\t          \n\t          g.select('.nv-x.nv-axis').selectAll('g.nv-axisMaxMin text')\n\t              .style('opacity', 1);\n\t      }\n\t\n\t\n\t      if (showYAxis) {      \n\t          yAxis\n\t            .scale(y)\n\t            .ticks( availableHeight / 36 )\n\t            .tickSize( -availableWidth, 0);\n\t\n\t          g.select('.nv-y.nv-axis')\n\t              .call(yAxis);\n\t      }\n\t\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) { \n\t        state = newState;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      controls.dispatch.on('legendClick', function(d,i) {\n\t        if (!d.disabled) return;\n\t        controlsData = controlsData.map(function(s) {\n\t          s.disabled = true;\n\t          return s;\n\t        });\n\t        d.disabled = false;\n\t\n\t        switch (d.key) {\n\t          case 'Grouped':\n\t            multibar.stacked(false);\n\t            break;\n\t          case 'Stacked':\n\t            multibar.stacked(true);\n\t            break;\n\t        }\n\t\n\t        state.stacked = multibar.stacked();\n\t        dispatch.stateChange(state);\n\t\n\t        chart.update();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode)\n\t      });\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        if (typeof e.stacked !== 'undefined') {\n\t          multibar.stacked(e.stacked);\n\t          state.stacked = e.stacked;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  multibar.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  multibar.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.multibar = multibar;\n\t  chart.legend = legend;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t\n\t  d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'clipEdge',\n\t   'id', 'stacked', 'stackOffset', 'delay', 'barColor','groupSpacing');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showControls = function(_) {\n\t    if (!arguments.length) return showControls;\n\t    showControls = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.reduceXTicks= function(_) {\n\t    if (!arguments.length) return reduceXTicks;\n\t    reduceXTicks = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rotateLabels = function(_) {\n\t    if (!arguments.length) return rotateLabels;\n\t    rotateLabels = _;\n\t    return chart;\n\t  }\n\t\n\t  chart.staggerLabels = function(_) {\n\t    if (!arguments.length) return staggerLabels;\n\t    staggerLabels = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltip = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t  \n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.multiBarHorizontal = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n\t    , x = d3.scale.ordinal()\n\t    , y = d3.scale.linear()\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n\t    , color = nv.utils.defaultColor()\n\t    , barColor = null // adding the ability to set the color for each rather than the whole group\n\t    , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n\t    , stacked = false\n\t    , showValues = false\n\t    , showBarLabels = false\n\t    , valuePadding = 60\n\t    , valueFormat = d3.format(',.2f')\n\t    , delay = 1200\n\t    , xDomain\n\t    , yDomain\n\t    , xRange\n\t    , yRange\n\t    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0 //used to store previous scales\n\t      ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t\n\t      if (stacked)\n\t        data = d3.layout.stack()\n\t                 .offset('zero')\n\t                 .values(function(d){ return d.values })\n\t                 .y(getY)\n\t                 (data);\n\t\n\t\n\t      //add series index to each data point for reference\n\t      data.forEach(function(series, i) {\n\t        series.values.forEach(function(point) {\n\t          point.series = i;\n\t        });\n\t      });\n\t\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // HACK for negative value stacking\n\t      if (stacked)\n\t        data[0].values.map(function(d,i) {\n\t          var posBase = 0, negBase = 0;\n\t          data.map(function(d) {\n\t            var f = d.values[i]\n\t            f.size = Math.abs(f.y);\n\t            if (f.y<0)  {\n\t              f.y1 = negBase - f.size;\n\t              negBase = negBase - f.size;\n\t            } else\n\t            {\n\t              f.y1 = posBase;\n\t              posBase = posBase + f.size;\n\t            }\n\t          });\n\t        });\n\t\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      // remap and flatten the data for use in calculating the scales' domains\n\t      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n\t            data.map(function(d) {\n\t              return d.values.map(function(d,i) {\n\t                return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1 }\n\t              })\n\t            });\n\t\n\t      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n\t          .rangeBands(xRange || [0, availableHeight], .1);\n\t\n\t      //y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y + (stacked ? d.y0 : 0) }).concat(forceY)))\n\t      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return stacked ? (d.y > 0 ? d.y1 + d.y : d.y1 ) : d.y }).concat(forceY)))\n\t\n\t      if (showValues && !stacked)\n\t        y.range(yRange || [(y.domain()[0] < 0 ? valuePadding : 0), availableWidth - (y.domain()[1] > 0 ? valuePadding : 0) ]);\n\t      else\n\t        y.range(yRange || [0, availableWidth]);\n\t\n\t      x0 = x0 || x;\n\t      y0 = y0 || d3.scale.linear().domain(y.domain()).range([y(0),y(0)]);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-multibarHorizontal').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibarHorizontal');\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-groups');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n\t          .data(function(d) { return d }, function(d,i) { return i });\n\t      groups.enter().append('g')\n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6);\n\t      groups.exit()\n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6)\n\t          .remove();\n\t      groups\n\t          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n\t          .classed('hover', function(d) { return d.hover })\n\t          .style('fill', function(d,i){ return color(d, i) })\n\t          .style('stroke', function(d,i){ return color(d, i) });\n\t      groups\n\t          .style('stroke-opacity', 1)\n\t          .style('fill-opacity', .75);\n\t\n\t\n\t      var bars = groups.selectAll('g.nv-bar')\n\t          .data(function(d) { return d.values });\n\t\n\t      bars.exit().remove();\n\t\n\t\n\t      var barsEnter = bars.enter().append('g')\n\t          .attr('transform', function(d,i,j) {\n\t              return 'translate(' + y0(stacked ? d.y0 : 0) + ',' + (stacked ? 0 : (j * x.rangeBand() / data.length ) + x(getX(d,i))) + ')'\n\t          });\n\t\n\t      barsEnter.append('rect')\n\t          .attr('width', 0)\n\t          .attr('height', x.rangeBand() / (stacked ? 1 : data.length) )\n\t\n\t      bars\n\t          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n\t            d3.select(this).classed('hover', true);\n\t            dispatch.elementMouseover({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [ y(getY(d,i) + (stacked ? d.y0 : 0)), x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length) ],\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t            d3.select(this).classed('hover', false);\n\t            dispatch.elementMouseout({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t          })\n\t          .on('click', function(d,i) {\n\t            dispatch.elementClick({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t            d3.event.stopPropagation();\n\t          })\n\t          .on('dblclick', function(d,i) {\n\t            dispatch.elementDblClick({\n\t              value: getY(d,i),\n\t              point: d,\n\t              series: data[d.series],\n\t              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n\t              pointIndex: i,\n\t              seriesIndex: d.series,\n\t              e: d3.event\n\t            });\n\t            d3.event.stopPropagation();\n\t          });\n\t\n\t\n\t      barsEnter.append('text');\n\t\n\t      if (showValues && !stacked) {\n\t        bars.select('text')\n\t            .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'end' : 'start' })\n\t            .attr('y', x.rangeBand() / (data.length * 2))\n\t            .attr('dy', '.32em')\n\t            .text(function(d,i) { return valueFormat(getY(d,i)) })\n\t        bars\n\t          .select('text')\n\t            .attr('x', function(d,i) { return getY(d,i) < 0 ? -4 : y(getY(d,i)) - y(0) + 4 })\n\t      } else {\n\t        bars.selectAll('text').text('');\n\t      }\n\t\n\t      if (showBarLabels && !stacked) {\n\t        barsEnter.append('text').classed('nv-bar-label',true);\n\t        bars.select('text.nv-bar-label')\n\t            .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'start' : 'end' })\n\t            .attr('y', x.rangeBand() / (data.length * 2))\n\t            .attr('dy', '.32em')\n\t            .text(function(d,i) { return getX(d,i) });\n\t        bars\n\t          .select('text.nv-bar-label')\n\t            .attr('x', function(d,i) { return getY(d,i) < 0 ? y(0) - y(getY(d,i)) + 4 : -4 });\n\t      }\n\t      else {\n\t        bars.selectAll('text.nv-bar-label').text('');\n\t      }\n\t\n\t      bars\n\t          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n\t\n\t      if (barColor) {\n\t        if (!disabled) disabled = data.map(function() { return true });\n\t        bars\n\t          .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\n\t          .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\n\t      }\n\t\n\t      if (stacked)\n\t        bars\n\t            .attr('transform', function(d,i) {\n\t              return 'translate(' + y(d.y1) + ',' + x(getX(d,i)) + ')'\n\t            })\n\t          .select('rect')\n\t            .attr('width', function(d,i) {\n\t              return Math.abs(y(getY(d,i) + d.y0) - y(d.y0))\n\t            })\n\t            .attr('height', x.rangeBand() );\n\t      else\n\t        bars\n\t            .attr('transform', function(d,i) {\n\t              //TODO: stacked must be all positive or all negative, not both?\n\t              return 'translate(' +\n\t              (getY(d,i) < 0 ? y(getY(d,i)) : y(0))\n\t              + ',' +\n\t              (d.series * x.rangeBand() / data.length\n\t              +\n\t              x(getX(d,i)) )\n\t              + ')'\n\t            })\n\t          .select('rect')\n\t            .attr('height', x.rangeBand() / data.length )\n\t            .attr('width', function(d,i) {\n\t              return Math.max(Math.abs(y(getY(d,i)) - y(0)),1)\n\t            });\n\t\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceY = function(_) {\n\t    if (!arguments.length) return forceY;\n\t    forceY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.stacked = function(_) {\n\t    if (!arguments.length) return stacked;\n\t    stacked = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.barColor = function(_) {\n\t    if (!arguments.length) return barColor;\n\t    barColor = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.disabled = function(_) {\n\t    if (!arguments.length) return disabled;\n\t    disabled = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.delay = function(_) {\n\t    if (!arguments.length) return delay;\n\t    delay = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showValues = function(_) {\n\t    if (!arguments.length) return showValues;\n\t    showValues = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showBarLabels = function(_) {\n\t    if (!arguments.length) return showBarLabels;\n\t    showBarLabels = _;\n\t    return chart;\n\t  };\n\t\n\t\n\t  chart.valueFormat= function(_) {\n\t    if (!arguments.length) return valueFormat;\n\t    valueFormat = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.valuePadding = function(_) {\n\t    if (!arguments.length) return valuePadding;\n\t    valuePadding = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.multiBarHorizontalChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var multibar = nv.models.multiBarHorizontal()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , legend = nv.models.legend().height(30)\n\t    , controls = nv.models.legend().height(30)\n\t    ;\n\t\n\t  var margin = {top: 30, right: 20, bottom: 50, left: 60}\n\t    , width = null\n\t    , height = null\n\t    , color = nv.utils.defaultColor()\n\t    , showControls = true\n\t    , showLegend = true\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , stacked = false\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + ' - ' + x + '</h3>' +\n\t               '<p>' +  y + '</p>'\n\t      }\n\t    , x //can be accessed via chart.xScale()\n\t    , y //can be accessed via chart.yScale()\n\t    , state = { stacked: stacked }\n\t    , defaultState = null\n\t    , noData = 'No Data Available.'\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , controlWidth = function() { return showControls ? 180 : 0 }\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  multibar\n\t    .stacked(stacked)\n\t    ;\n\t  xAxis\n\t    .orient('left')\n\t    .tickPadding(5)\n\t    .highlightZero(false)\n\t    .showMaxMin(false)\n\t    .tickFormat(function(d) { return d })\n\t    ;\n\t  yAxis\n\t    .orient('bottom')\n\t    .tickFormat(d3.format(',.1f'))\n\t    ;\n\t\n\t  controls.updateState(false);\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'e' : 'w', null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart) };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = multibar.xScale();\n\t      y = multibar.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-multiBarHorizontalChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarHorizontalChart').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis')\n\t            .append('g').attr('class', 'nv-zeroLine')\n\t            .append('line');\n\t      gEnter.append('g').attr('class', 'nv-barsWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width(availableWidth - controlWidth());\n\t\n\t        if (multibar.barColor())\n\t          data.forEach(function(series,i) {\n\t            series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\n\t          })\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Controls\n\t\n\t      if (showControls) {\n\t        var controlsData = [\n\t          { key: 'Grouped', disabled: multibar.stacked() },\n\t          { key: 'Stacked', disabled: !multibar.stacked() }\n\t        ];\n\t\n\t        controls.width(controlWidth()).color(['#444', '#444', '#444']);\n\t        g.select('.nv-controlsWrap')\n\t            .datum(controlsData)\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t            .call(controls);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      multibar\n\t        .disabled(data.map(function(series) { return series.disabled }))\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, i);\n\t        }).filter(function(d,i) { return !data[i].disabled }))\n\t\n\t\n\t      var barsWrap = g.select('.nv-barsWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t\n\t      barsWrap.call(multibar);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t          xAxis\n\t            .scale(x)\n\t            .ticks( availableHeight / 24 )\n\t            .tickSize(-availableWidth, 0);\n\t\n\t          g.select('.nv-x.nv-axis')\n\t              .call(xAxis);\n\t\n\t          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\t\n\t          xTicks\n\t              .selectAll('line, text');\n\t      }\n\t\n\t      if (showYAxis) {\n\t          yAxis\n\t            .scale(y)\n\t            .ticks( availableWidth / 100 )\n\t            .tickSize( -availableHeight, 0);\n\t\n\t          g.select('.nv-y.nv-axis')\n\t              .attr('transform', 'translate(0,' + availableHeight + ')');\n\t          g.select('.nv-y.nv-axis')\n\t              .call(yAxis);\n\t      }\n\t\n\t      // Zero line\n\t      g.select(\".nv-zeroLine line\")\n\t        .attr(\"x1\", y(0))\n\t        .attr(\"x2\", y(0))\n\t        .attr(\"y1\", 0)\n\t        .attr(\"y2\", -availableHeight)\n\t        ;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) {\n\t        state = newState;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      controls.dispatch.on('legendClick', function(d,i) {\n\t        if (!d.disabled) return;\n\t        controlsData = controlsData.map(function(s) {\n\t          s.disabled = true;\n\t          return s;\n\t        });\n\t        d.disabled = false;\n\t\n\t        switch (d.key) {\n\t          case 'Grouped':\n\t            multibar.stacked(false);\n\t            break;\n\t          case 'Stacked':\n\t            multibar.stacked(true);\n\t            break;\n\t        }\n\t\n\t        state.stacked = multibar.stacked();\n\t        dispatch.stateChange(state);\n\t\n\t        chart.update();\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        if (typeof e.stacked !== 'undefined') {\n\t          multibar.stacked(e.stacked);\n\t          state.stacked = e.stacked;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t      //============================================================\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  multibar.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  multibar.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.multibar = multibar;\n\t  chart.legend = legend;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t\n\t  d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY',\n\t    'clipEdge', 'id', 'delay', 'showValues','showBarLabels', 'valueFormat', 'stacked', 'barColor');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showControls = function(_) {\n\t    if (!arguments.length) return showControls;\n\t    showControls = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltip = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\tnv.models.multiChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 30, right: 20, bottom: 50, left: 60},\n\t      color = d3.scale.category20().range(),\n\t      width = null, \n\t      height = null,\n\t      showLegend = true,\n\t      tooltips = true,\n\t      tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' at ' + x + '</p>'\n\t      },\n\t      x,\n\t      y,\n\t      yDomain1,\n\t      yDomain2\n\t      ; //can be accessed via chart.lines.[x/y]Scale()\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x = d3.scale.linear(),\n\t      yScale1 = d3.scale.linear(),\n\t      yScale2 = d3.scale.linear(),\n\t\n\t      lines1 = nv.models.line().yScale(yScale1),\n\t      lines2 = nv.models.line().yScale(yScale2),\n\t\n\t      bars1 = nv.models.multiBar().stacked(false).yScale(yScale1),\n\t      bars2 = nv.models.multiBar().stacked(false).yScale(yScale2),\n\t\n\t      stack1 = nv.models.stackedArea().yScale(yScale1),\n\t      stack2 = nv.models.stackedArea().yScale(yScale2),\n\t\n\t      xAxis = nv.models.axis().scale(x).orient('bottom').tickPadding(5),\n\t      yAxis1 = nv.models.axis().scale(yScale1).orient('left'),\n\t      yAxis2 = nv.models.axis().scale(yScale2).orient('right'),\n\t\n\t      legend = nv.models.legend().height(30),\n\t      dispatch = d3.dispatch('tooltipShow', 'tooltipHide');\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(lines1.x()(e.point, e.pointIndex)),\n\t        y = ((e.series.yAxis == 2) ? yAxis2 : yAxis1).tickFormat()(lines1.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, undefined, undefined, offsetElement.offsetParent);\n\t  };\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      chart.container = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      var dataLines1 = data.filter(function(d) {return !d.disabled && d.type == 'line' && d.yAxis == 1})\n\t      var dataLines2 = data.filter(function(d) {return !d.disabled && d.type == 'line' && d.yAxis == 2})\n\t      var dataBars1 = data.filter(function(d) {return !d.disabled && d.type == 'bar' && d.yAxis == 1})\n\t      var dataBars2 = data.filter(function(d) {return !d.disabled && d.type == 'bar' && d.yAxis == 2})\n\t      var dataStack1 = data.filter(function(d) {return !d.disabled && d.type == 'area' && d.yAxis == 1})\n\t      var dataStack2 = data.filter(function(d) {return !d.disabled && d.type == 'area' && d.yAxis == 2})\n\t\n\t      var series1 = data.filter(function(d) {return !d.disabled && d.yAxis == 1})\n\t            .map(function(d) {\n\t              return d.values.map(function(d,i) {\n\t                return { x: d.x, y: d.y }\n\t              })\n\t            })\n\t\n\t      var series2 = data.filter(function(d) {return !d.disabled && d.yAxis == 2})\n\t            .map(function(d) {\n\t              return d.values.map(function(d,i) {\n\t                return { x: d.x, y: d.y }\n\t              })\n\t            })\n\t\n\t      x   .domain(d3.extent(d3.merge(series1.concat(series2)), function(d) { return d.x } ))\n\t          .range([0, availableWidth]);\n\t\n\t      var wrap = container.selectAll('g.wrap.multiChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'wrap nvd3 multiChart').append('g');\n\t\n\t      gEnter.append('g').attr('class', 'x axis');\n\t      gEnter.append('g').attr('class', 'y1 axis');\n\t      gEnter.append('g').attr('class', 'y2 axis');\n\t      gEnter.append('g').attr('class', 'lines1Wrap');\n\t      gEnter.append('g').attr('class', 'lines2Wrap');\n\t      gEnter.append('g').attr('class', 'bars1Wrap');\n\t      gEnter.append('g').attr('class', 'bars2Wrap');\n\t      gEnter.append('g').attr('class', 'stack1Wrap');\n\t      gEnter.append('g').attr('class', 'stack2Wrap');\n\t      gEnter.append('g').attr('class', 'legendWrap');\n\t\n\t      var g = wrap.select('g');\n\t\n\t      if (showLegend) {\n\t        legend.width( availableWidth / 2 );\n\t\n\t        g.select('.legendWrap')\n\t            .datum(data.map(function(series) { \n\t              series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n\t              series.key = series.originalKey + (series.yAxis == 1 ? '' : ' (right axis)');\n\t              return series;\n\t            }))\n\t          .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        g.select('.legendWrap')\n\t            .attr('transform', 'translate(' + ( availableWidth / 2 ) + ',' + (-margin.top) +')');\n\t      }\n\t\n\t\n\t      lines1\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .interpolate(\"monotone\")\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color[i % color.length];\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'line'}));\n\t\n\t      lines2\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .interpolate(\"monotone\")\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color[i % color.length];\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'line'}));\n\t\n\t      bars1\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color[i % color.length];\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'bar'}));\n\t\n\t      bars2\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color[i % color.length];\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'bar'}));\n\t\n\t      stack1\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color[i % color.length];\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'area'}));\n\t\n\t      stack2\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color[i % color.length];\n\t        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'area'}));\n\t\n\t      g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t\n\t      var lines1Wrap = g.select('.lines1Wrap')\n\t          .datum(dataLines1)\n\t      var bars1Wrap = g.select('.bars1Wrap')\n\t          .datum(dataBars1)\n\t      var stack1Wrap = g.select('.stack1Wrap')\n\t          .datum(dataStack1)\n\t\n\t      var lines2Wrap = g.select('.lines2Wrap')\n\t          .datum(dataLines2)\n\t      var bars2Wrap = g.select('.bars2Wrap')\n\t          .datum(dataBars2)\n\t      var stack2Wrap = g.select('.stack2Wrap')\n\t          .datum(dataStack2)\n\t\n\t      var extraValue1 = dataStack1.length ? dataStack1.map(function(a){return a.values}).reduce(function(a,b){\n\t        return a.map(function(aVal,i){return {x: aVal.x, y: aVal.y + b[i].y}})\n\t      }).concat([{x:0, y:0}]) : []\n\t      var extraValue2 = dataStack2.length ? dataStack2.map(function(a){return a.values}).reduce(function(a,b){\n\t        return a.map(function(aVal,i){return {x: aVal.x, y: aVal.y + b[i].y}})\n\t      }).concat([{x:0, y:0}]) : []\n\t\n\t      yScale1 .domain(yDomain1 || d3.extent(d3.merge(series1).concat(extraValue1), function(d) { return d.y } ))\n\t              .range([0, availableHeight])\n\t\n\t      yScale2 .domain(yDomain2 || d3.extent(d3.merge(series2).concat(extraValue2), function(d) { return d.y } ))\n\t              .range([0, availableHeight])\n\t\n\t      lines1.yDomain(yScale1.domain())\n\t      bars1.yDomain(yScale1.domain())\n\t      stack1.yDomain(yScale1.domain())\n\t\n\t      lines2.yDomain(yScale2.domain())\n\t      bars2.yDomain(yScale2.domain())\n\t      stack2.yDomain(yScale2.domain())\n\t\n\t      if(dataStack1.length){d3.transition(stack1Wrap).call(stack1);}\n\t      if(dataStack2.length){d3.transition(stack2Wrap).call(stack2);}\n\t\n\t      if(dataBars1.length){d3.transition(bars1Wrap).call(bars1);}\n\t      if(dataBars2.length){d3.transition(bars2Wrap).call(bars2);}\n\t\n\t      if(dataLines1.length){d3.transition(lines1Wrap).call(lines1);}\n\t      if(dataLines2.length){d3.transition(lines2Wrap).call(lines2);}\n\t      \n\t\n\t\n\t      xAxis\n\t        .ticks( availableWidth / 100 )\n\t        .tickSize(-availableHeight, 0);\n\t\n\t      g.select('.x.axis')\n\t          .attr('transform', 'translate(0,' + availableHeight + ')');\n\t      d3.transition(g.select('.x.axis'))\n\t          .call(xAxis);\n\t\n\t      yAxis1\n\t        .ticks( availableHeight / 36 )\n\t        .tickSize( -availableWidth, 0);\n\t\n\t\n\t      d3.transition(g.select('.y1.axis'))\n\t          .call(yAxis1);\n\t\n\t      yAxis2\n\t        .ticks( availableHeight / 36 )\n\t        .tickSize( -availableWidth, 0);\n\t\n\t      d3.transition(g.select('.y2.axis'))\n\t          .call(yAxis2);\n\t\n\t      g.select('.y2.axis')\n\t          .style('opacity', series2.length ? 1 : 0)\n\t          .attr('transform', 'translate(' + x.range()[1] + ',0)');\n\t\n\t      legend.dispatch.on('stateChange', function(newState) { \n\t        chart.update();\n\t      });\n\t     \n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  lines1.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines1.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  lines2.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines2.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  bars1.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  bars1.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  bars2.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  bars2.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  stack1.dispatch.on('tooltipShow', function(e) {\n\t    //disable tooltips when value ~= 0\n\t    //// TODO: consider removing points from voronoi that have 0 value instead of this hack\n\t    if (!Math.round(stack1.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\n\t      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\n\t      return false;\n\t    }\n\t\n\t    e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  stack1.dispatch.on('tooltipHide', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  stack2.dispatch.on('tooltipShow', function(e) {\n\t    //disable tooltips when value ~= 0\n\t    //// TODO: consider removing points from voronoi that have 0 value instead of this hack\n\t    if (!Math.round(stack2.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\n\t      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\n\t      return false;\n\t    }\n\t\n\t    e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  stack2.dispatch.on('tooltipHide', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t    lines1.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines1.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  lines2.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  lines2.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t\n\t\n\t  //============================================================\n\t  // Global getters and setters\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t  chart.lines1 = lines1;\n\t  chart.lines2 = lines2;\n\t  chart.bars1 = bars1;\n\t  chart.bars2 = bars2;\n\t  chart.stack1 = stack1;\n\t  chart.stack2 = stack2;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis1 = yAxis1;\n\t  chart.yAxis2 = yAxis2;\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    lines1.x(_);\n\t    bars1.x(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    lines1.y(_);\n\t    bars1.y(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain1 = function(_) {\n\t    if (!arguments.length) return yDomain1;\n\t    yDomain1 = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain2 = function(_) {\n\t    if (!arguments.length) return yDomain2;\n\t    yDomain2 = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = _;\n\t    legend.color(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  return chart;\n\t}\n\t\n\t\n\tnv.models.ohlcBar = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n\t    , x = d3.scale.linear()\n\t    , y = d3.scale.linear()\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , getOpen = function(d) { return d.open }\n\t    , getClose = function(d) { return d.close }\n\t    , getHigh = function(d) { return d.high }\n\t    , getLow = function(d) { return d.low }\n\t    , forceX = []\n\t    , forceY = []\n\t    , padData     = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n\t    , clipEdge = true\n\t    , color = nv.utils.defaultColor()\n\t    , xDomain\n\t    , yDomain\n\t    , xRange\n\t    , yRange\n\t    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  //TODO: store old scales for transitions\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x   .domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ));\n\t\n\t      if (padData)\n\t        x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n\t      else\n\t        x.range(xRange || [0, availableWidth]);\n\t\n\t      y   .domain(yDomain || [\n\t            d3.min(data[0].values.map(getLow).concat(forceY)),\n\t            d3.max(data[0].values.map(getHigh).concat(forceY))\n\t          ])\n\t          .range(yRange || [availableHeight, 0]);\n\t\n\t      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\t      if (x.domain()[0] === x.domain()[1])\n\t        x.domain()[0] ?\n\t            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n\t          : x.domain([-1,1]);\n\t\n\t      if (y.domain()[0] === y.domain()[1])\n\t        y.domain()[0] ?\n\t            y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n\t          : y.domain([-1,1]);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-ohlcBar').data([data[0].values]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-ohlcBar');\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-ticks');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      container\n\t          .on('click', function(d,i) {\n\t            dispatch.chartClick({\n\t                data: d,\n\t                index: i,\n\t                pos: d3.event,\n\t                id: id\n\t            });\n\t          });\n\t\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-chart-clip-path-' + id)\n\t        .append('rect');\n\t\n\t      wrap.select('#nv-chart-clip-path-' + id + ' rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', availableHeight);\n\t\n\t      g   .attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\t\n\t\n\t\n\t      var ticks = wrap.select('.nv-ticks').selectAll('.nv-tick')\n\t          .data(function(d) { return d });\n\t\n\t      ticks.exit().remove();\n\t\n\t\n\t      var ticksEnter = ticks.enter().append('path')\n\t          .attr('class', function(d,i,j) { return (getOpen(d,i) > getClose(d,i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i })\n\t          .attr('d', function(d,i) {\n\t            var w = (availableWidth / data[0].values.length) * .9;\n\t            return 'm0,0l0,'\n\t                 + (y(getOpen(d,i))\n\t                 - y(getHigh(d,i)))\n\t                 + 'l'\n\t                 + (-w/2)\n\t                 + ',0l'\n\t                 + (w/2)\n\t                 + ',0l0,'\n\t                 + (y(getLow(d,i)) - y(getOpen(d,i)))\n\t                 + 'l0,'\n\t                 + (y(getClose(d,i))\n\t                 - y(getLow(d,i)))\n\t                 + 'l'\n\t                 + (w/2)\n\t                 + ',0l'\n\t                 + (-w/2)\n\t                 + ',0z';\n\t          })\n\t          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',' + y(getHigh(d,i)) + ')'; })\n\t          //.attr('fill', function(d,i) { return color[0]; })\n\t          //.attr('stroke', function(d,i) { return color[0]; })\n\t          //.attr('x', 0 )\n\t          //.attr('y', function(d,i) {  return y(Math.max(0, getY(d,i))) })\n\t          //.attr('height', function(d,i) { return Math.abs(y(getY(d,i)) - y(0)) })\n\t          .on('mouseover', function(d,i) {\n\t            d3.select(this).classed('hover', true);\n\t            dispatch.elementMouseover({\n\t                point: d,\n\t                series: data[0],\n\t                pos: [x(getX(d,i)), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n\t                pointIndex: i,\n\t                seriesIndex: 0,\n\t                e: d3.event\n\t            });\n\t\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t                d3.select(this).classed('hover', false);\n\t                dispatch.elementMouseout({\n\t                    point: d,\n\t                    series: data[0],\n\t                    pointIndex: i,\n\t                    seriesIndex: 0,\n\t                    e: d3.event\n\t                });\n\t          })\n\t          .on('click', function(d,i) {\n\t                dispatch.elementClick({\n\t                    //label: d[label],\n\t                    value: getY(d,i),\n\t                    data: d,\n\t                    index: i,\n\t                    pos: [x(getX(d,i)), y(getY(d,i))],\n\t                    e: d3.event,\n\t                    id: id\n\t                });\n\t              d3.event.stopPropagation();\n\t          })\n\t          .on('dblclick', function(d,i) {\n\t              dispatch.elementDblClick({\n\t                  //label: d[label],\n\t                  value: getY(d,i),\n\t                  data: d,\n\t                  index: i,\n\t                  pos: [x(getX(d,i)), y(getY(d,i))],\n\t                  e: d3.event,\n\t                  id: id\n\t              });\n\t              d3.event.stopPropagation();\n\t          });\n\t\n\t      ticks\n\t          .attr('class', function(d,i,j) { return (getOpen(d,i) > getClose(d,i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i })\n\t      d3.transition(ticks)\n\t          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',' + y(getHigh(d,i)) + ')'; })\n\t          .attr('d', function(d,i) {\n\t            var w = (availableWidth / data[0].values.length) * .9;\n\t            return 'm0,0l0,'\n\t                 + (y(getOpen(d,i))\n\t                 - y(getHigh(d,i)))\n\t                 + 'l'\n\t                 + (-w/2)\n\t                 + ',0l'\n\t                 + (w/2)\n\t                 + ',0l0,'\n\t                 + (y(getLow(d,i))\n\t                 - y(getOpen(d,i)))\n\t                 + 'l0,'\n\t                 + (y(getClose(d,i))\n\t                 - y(getLow(d,i)))\n\t                 + 'l'\n\t                 + (w/2)\n\t                 + ',0l'\n\t                 + (-w/2)\n\t                 + ',0z';\n\t          })\n\t          //.attr('width', (availableWidth / data[0].values.length) * .9 )\n\t\n\t\n\t      //d3.transition(ticks)\n\t          //.attr('y', function(d,i) {  return y(Math.max(0, getY(d,i))) })\n\t          //.attr('height', function(d,i) { return Math.abs(y(getY(d,i)) - y(0)) });\n\t          //.order();  // not sure if this makes any sense for this model\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.open = function(_) {\n\t    if (!arguments.length) return getOpen;\n\t    getOpen = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.close = function(_) {\n\t    if (!arguments.length) return getClose;\n\t    getClose = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.high = function(_) {\n\t    if (!arguments.length) return getHigh;\n\t    getHigh = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.low = function(_) {\n\t    if (!arguments.length) return getLow;\n\t    getLow = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceX = function(_) {\n\t    if (!arguments.length) return forceX;\n\t    forceX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceY = function(_) {\n\t    if (!arguments.length) return forceY;\n\t    forceY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.padData = function(_) {\n\t    if (!arguments.length) return padData;\n\t    padData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.clipEdge = function(_) {\n\t    if (!arguments.length) return clipEdge;\n\t    clipEdge = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\tnv.models.pie = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 500\n\t    , height = 500\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , getDescription = function(d) { return d.description }\n\t    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n\t    , color = nv.utils.defaultColor()\n\t    , valueFormat = d3.format(',.2f')\n\t    , showLabels = true\n\t    , pieLabelsOutside = true\n\t    , donutLabelsOutside = false\n\t    , labelType = \"key\"\n\t    , labelThreshold = .02 //if slice percentage is under this, don't show label\n\t    , donut = false\n\t    , labelSunbeamLayout = false\n\t    , startAngle = false\n\t    , endAngle = false\n\t    , donutRatio = 0.5\n\t    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          radius = Math.min(availableWidth, availableHeight) / 2,\n\t          arcRadius = radius-(radius / 5),\n\t          container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      //var wrap = container.selectAll('.nv-wrap.nv-pie').data([data]);\n\t      var wrap = container.selectAll('.nv-wrap.nv-pie').data(data);\n\t      var wrapEnter = wrap.enter().append('g').attr('class','nvd3 nv-wrap nv-pie nv-chart-' + id);\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-pie');\n\t      gEnter.append('g').attr('class', 'nv-pieLabels');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t      g.select('.nv-pie').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n\t      g.select('.nv-pieLabels').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      container\n\t          .on('click', function(d,i) {\n\t              dispatch.chartClick({\n\t                  data: d,\n\t                  index: i,\n\t                  pos: d3.event,\n\t                  id: id\n\t              });\n\t          });\n\t\n\t\n\t      var arc = d3.svg.arc()\n\t                  .outerRadius(arcRadius);\n\t\n\t      if (startAngle) arc.startAngle(startAngle)\n\t      if (endAngle) arc.endAngle(endAngle);\n\t      if (donut) arc.innerRadius(radius * donutRatio);\n\t\n\t      // Setup the Pie chart and choose the data element\n\t      var pie = d3.layout.pie()\n\t          .sort(null)\n\t          .value(function(d) { return d.disabled ? 0 : getY(d) });\n\t\n\t      var slices = wrap.select('.nv-pie').selectAll('.nv-slice')\n\t          .data(pie);\n\t\n\t      var pieLabels = wrap.select('.nv-pieLabels').selectAll('.nv-label')\n\t          .data(pie);\n\t\n\t      slices.exit().remove();\n\t      pieLabels.exit().remove();\n\t\n\t      var ae = slices.enter().append('g')\n\t              .attr('class', 'nv-slice')\n\t              .on('mouseover', function(d,i){\n\t                d3.select(this).classed('hover', true);\n\t                dispatch.elementMouseover({\n\t                    label: getX(d.data),\n\t                    value: getY(d.data),\n\t                    point: d.data,\n\t                    pointIndex: i,\n\t                    pos: [d3.event.pageX, d3.event.pageY],\n\t                    id: id\n\t                });\n\t              })\n\t              .on('mouseout', function(d,i){\n\t                d3.select(this).classed('hover', false);\n\t                dispatch.elementMouseout({\n\t                    label: getX(d.data),\n\t                    value: getY(d.data),\n\t                    point: d.data,\n\t                    index: i,\n\t                    id: id\n\t                });\n\t              })\n\t              .on('click', function(d,i) {\n\t                dispatch.elementClick({\n\t                    label: getX(d.data),\n\t                    value: getY(d.data),\n\t                    point: d.data,\n\t                    index: i,\n\t                    pos: d3.event,\n\t                    id: id\n\t                });\n\t                d3.event.stopPropagation();\n\t              })\n\t              .on('dblclick', function(d,i) {\n\t                dispatch.elementDblClick({\n\t                    label: getX(d.data),\n\t                    value: getY(d.data),\n\t                    point: d.data,\n\t                    index: i,\n\t                    pos: d3.event,\n\t                    id: id\n\t                });\n\t                d3.event.stopPropagation();\n\t              });\n\t\n\t        slices.attr('fill', function(d,i) { return color(d, i); })\n\t            .attr('stroke', function(d,i) { return color(d, i); });\n\t\n\t        var paths = ae.append('path')\n\t            .each(function(d) { this._current = d; });\n\t            //.attr('d', arc);\n\t\n\t        slices.select('path')\n\t            .attr('d', arc);\n\t            \n\t        if (showLabels) {\n\t          // This does the normal label\n\t          var labelsArc = d3.svg.arc().innerRadius(0);\n\t\n\t          if (pieLabelsOutside){ labelsArc = arc; }\n\t\n\t          if (donutLabelsOutside) { labelsArc = d3.svg.arc().outerRadius(arc.outerRadius()); }\n\t\n\t          pieLabels.enter().append(\"g\").classed(\"nv-label\",true)\n\t            .each(function(d,i) {\n\t                var group = d3.select(this);\n\t\n\t                group\n\t                  .attr('transform', function(d) {\n\t                       if (labelSunbeamLayout) {\n\t                         d.outerRadius = arcRadius + 10; // Set Outer Coordinate\n\t                         d.innerRadius = arcRadius + 15; // Set Inner Coordinate\n\t                         var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n\t                         if ((d.startAngle+d.endAngle)/2 < Math.PI) {\n\t                           rotateAngle -= 90;\n\t                         } else {\n\t                           rotateAngle += 90;\n\t                         }\n\t                         return 'translate(' + labelsArc.centroid(d) + ') rotate(' + rotateAngle + ')';\n\t                       } else {\n\t                         d.outerRadius = radius + 10; // Set Outer Coordinate\n\t                         d.innerRadius = radius + 15; // Set Inner Coordinate\n\t                         return 'translate(' + labelsArc.centroid(d) + ')'\n\t                       }\n\t                  });\n\t\n\t                group.append('rect')\n\t                    .style('stroke', '#fff')\n\t                    .style('fill', '#fff')\n\t                    .attr(\"rx\", 3)\n\t                    .attr(\"ry\", 3);\n\t\n\t                group.append('text')\n\t                    .style('text-anchor', labelSunbeamLayout ? ((d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end') : 'middle') //center the text on it's origin or begin/end if orthogonal aligned\n\t                    .style('fill', '#000')\n\t\n\t            });\n\t\n\t          var labelLocationHash = {};\n\t          var avgHeight = 14;\n\t          var avgWidth = 140;\n\t          var createHashKey = function(coordinates) {\n\t\n\t              return Math.floor(coordinates[0]/avgWidth) * avgWidth + ',' + Math.floor(coordinates[1]/avgHeight) * avgHeight;\n\t          };\n\t          pieLabels\n\t                .attr('transform', function(d) {\n\t                  if (labelSunbeamLayout) {\n\t                      d.outerRadius = arcRadius + 10; // Set Outer Coordinate\n\t                      d.innerRadius = arcRadius + 15; // Set Inner Coordinate\n\t                      var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n\t                      if ((d.startAngle+d.endAngle)/2 < Math.PI) {\n\t                        rotateAngle -= 90;\n\t                      } else {\n\t                        rotateAngle += 90;\n\t                      }\n\t                      return 'translate(' + labelsArc.centroid(d) + ') rotate(' + rotateAngle + ')';\n\t                    } else {\n\t                      d.outerRadius = radius + 10; // Set Outer Coordinate\n\t                      d.innerRadius = radius + 15; // Set Inner Coordinate\n\t\n\t                      /*\n\t                      Overlapping pie labels are not good. What this attempts to do is, prevent overlapping.\n\t                      Each label location is hashed, and if a hash collision occurs, we assume an overlap.\n\t                      Adjust the label's y-position to remove the overlap.\n\t                      */\n\t                      var center = labelsArc.centroid(d);\n\t                      var hashKey = createHashKey(center);\n\t                      if (labelLocationHash[hashKey]) {\n\t                        center[1] -= avgHeight;\n\t                      }\n\t                      labelLocationHash[createHashKey(center)] = true;\n\t                      return 'translate(' + center + ')'\n\t                    }\n\t                });\n\t          pieLabels.select(\".nv-label text\")\n\t                .style('text-anchor', labelSunbeamLayout ? ((d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end') : 'middle') //center the text on it's origin or begin/end if orthogonal aligned\n\t                .text(function(d, i) {\n\t                  var percent = (d.endAngle - d.startAngle) / (2 * Math.PI);\n\t                  var labelTypes = {\n\t                    \"key\" : getX(d.data),\n\t                    \"value\": getY(d.data),\n\t                    \"percent\": d3.format('%')(percent)\n\t                  };\n\t                  return (d.value && percent > labelThreshold) ? labelTypes[labelType] : '';\n\t                });\n\t        }\n\t\n\t\n\t        // Computes the angle of an arc, converting from radians to degrees.\n\t        function angle(d) {\n\t          var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;\n\t          return a > 90 ? a - 180 : a;\n\t        }\n\t\n\t        function arcTween(a) {\n\t          a.endAngle = isNaN(a.endAngle) ? 0 : a.endAngle;\n\t          a.startAngle = isNaN(a.startAngle) ? 0 : a.startAngle;\n\t          if (!donut) a.innerRadius = 0;\n\t          var i = d3.interpolate(this._current, a);\n\t          this._current = i(0);\n\t          return function(t) {\n\t            return arc(i(t));\n\t          };\n\t        }\n\t\n\t        function tweenPie(b) {\n\t          b.innerRadius = 0;\n\t          var i = d3.interpolate({startAngle: 0, endAngle: 0}, b);\n\t          return function(t) {\n\t              return arc(i(t));\n\t          };\n\t        }\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.values = function(_) {\n\t    nv.log(\"pie.values() is no longer supported.\");\n\t    return chart;\n\t  };\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.description = function(_) {\n\t    if (!arguments.length) return getDescription;\n\t    getDescription = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showLabels = function(_) {\n\t    if (!arguments.length) return showLabels;\n\t    showLabels = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.labelSunbeamLayout = function(_) {\n\t    if (!arguments.length) return labelSunbeamLayout;\n\t    labelSunbeamLayout = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.donutLabelsOutside = function(_) {\n\t    if (!arguments.length) return donutLabelsOutside;\n\t    donutLabelsOutside = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.pieLabelsOutside = function(_) {\n\t    if (!arguments.length) return pieLabelsOutside;\n\t    pieLabelsOutside = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.labelType = function(_) {\n\t    if (!arguments.length) return labelType;\n\t    labelType = _;\n\t    labelType = labelType || \"key\";\n\t    return chart;\n\t  };\n\t\n\t  chart.donut = function(_) {\n\t    if (!arguments.length) return donut;\n\t    donut = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.donutRatio = function(_) {\n\t    if (!arguments.length) return donutRatio;\n\t    donutRatio = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.startAngle = function(_) {\n\t    if (!arguments.length) return startAngle;\n\t    startAngle = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.endAngle = function(_) {\n\t    if (!arguments.length) return endAngle;\n\t    endAngle = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.valueFormat = function(_) {\n\t    if (!arguments.length) return valueFormat;\n\t    valueFormat = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.labelThreshold = function(_) {\n\t    if (!arguments.length) return labelThreshold;\n\t    labelThreshold = _;\n\t    return chart;\n\t  };\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\tnv.models.pieChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var pie = nv.models.pie()\n\t    , legend = nv.models.legend()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 20, bottom: 20, left: 20}\n\t    , width = null\n\t    , height = null\n\t    , showLegend = true\n\t    , color = nv.utils.defaultColor()\n\t    , tooltips = true\n\t    , tooltip = function(key, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + '</p>'\n\t      }\n\t    , state = {}\n\t    , defaultState = null\n\t    , noData = \"No Data Available.\"\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var tooltipLabel = pie.description()(e.point) || pie.x()(e.point)\n\t    var left = e.pos[0] + ( (offsetElement && offsetElement.offsetLeft) || 0 ),\n\t        top = e.pos[1] + ( (offsetElement && offsetElement.offsetTop) || 0),\n\t        y = pie.valueFormat()(pie.y()(e.point)),\n\t        content = tooltip(tooltipLabel, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-pieChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-pieChart').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-pieWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend\n\t          .width( availableWidth )\n\t          .key(pie.x());\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      pie\n\t        .width(availableWidth)\n\t        .height(availableHeight);\n\t\n\t\n\t      var pieWrap = g.select('.nv-pieWrap')\n\t          .datum([data]);\n\t\n\t      d3.transition(pieWrap).call(pie);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      legend.dispatch.on('stateChange', function(newState) {\n\t        state = newState;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      pie.dispatch.on('elementMouseout.tooltip', function(e) {\n\t        dispatch.tooltipHide(e);\n\t      });\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  pie.dispatch.on('elementMouseover.tooltip', function(e) {\n\t    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  dispatch.on('tooltipShow', function(e) {\n\t    if (tooltips) showTooltip(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.legend = legend;\n\t  chart.dispatch = dispatch;\n\t  chart.pie = pie;\n\t\n\t  d3.rebind(chart, pie, 'valueFormat', 'values', 'x', 'y', 'description', 'id', 'showLabels', 'donutLabelsOutside', 'pieLabelsOutside', 'labelType', 'donut', 'donutRatio', 'labelThreshold');\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    pie.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.scatter = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin       = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width        = 960\n\t    , height       = 500\n\t    , color        = nv.utils.defaultColor() // chooses color\n\t    , id           = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't select one\n\t    , x            = d3.scale.linear()\n\t    , y            = d3.scale.linear()\n\t    , z            = d3.scale.linear() //linear because d3.svg.shape.size is treated as area\n\t    , getX         = function(d) { return d.x } // accessor to get the x value\n\t    , getY         = function(d) { return d.y } // accessor to get the y value\n\t    , getSize      = function(d) { return d.size || 1} // accessor to get the point size\n\t    , getShape     = function(d) { return d.shape || 'circle' } // accessor to get point shape\n\t    , onlyCircles  = true // Set to false to use shapes\n\t    , forceX       = [] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n\t    , forceY       = [] // List of numbers to Force into the Y scale\n\t    , forceSize    = [] // List of numbers to Force into the Size scale\n\t    , interactive  = true // If true, plots a voronoi overlay for advanced point intersection\n\t    , pointKey     = null\n\t    , pointActive  = function(d) { return !d.notActive } // any points that return false will be filtered out\n\t    , padData      = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n\t    , padDataOuter = .1 //outerPadding to imitate ordinal scale outer padding\n\t    , clipEdge     = false // if true, masks points within x and y scale\n\t    , clipVoronoi  = true // if true, masks each point with a circle... can turn off to slightly increase performance\n\t    , clipRadius   = function() { return 25 } // function to get the radius for voronoi point clips\n\t    , xDomain      = null // Override x domain (skips the calculation from data)\n\t    , yDomain      = null // Override y domain\n\t    , xRange       = null // Override x range\n\t    , yRange       = null // Override y range\n\t    , sizeDomain   = null // Override point size domain\n\t    , sizeRange    = null\n\t    , singlePoint  = false\n\t    , dispatch     = d3.dispatch('elementClick', 'elementMouseover', 'elementMouseout')\n\t    , useVoronoi   = true\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0, z0 // used to store previous scales\n\t    , timeoutID\n\t    , needsUpdate = false // Flag for when the points are visually updating, but the interactive layer is behind, to disable tooltips\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t      //add series index to each data point for reference\n\t      data.forEach(function(series, i) {\n\t        series.values.forEach(function(point) {\n\t          point.series = i;\n\t        });\n\t      });\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      // remap and flatten the data for use in calculating the scales' domains\n\t      var seriesData = (xDomain && yDomain && sizeDomain) ? [] : // if we know xDomain and yDomain and sizeDomain, no need to calculate.... if Size is constant remember to set sizeDomain to speed up performance\n\t            d3.merge(\n\t              data.map(function(d) {\n\t                return d.values.map(function(d,i) {\n\t                  return { x: getX(d,i), y: getY(d,i), size: getSize(d,i) }\n\t                })\n\t              })\n\t            );\n\t\n\t      x   .domain(xDomain || d3.extent(seriesData.map(function(d) { return d.x; }).concat(forceX)))\n\t\n\t      if (padData && data[0])\n\t        x.range(xRange || [(availableWidth * padDataOuter +  availableWidth) / (2 *data[0].values.length), availableWidth - availableWidth * (1 + padDataOuter) / (2 * data[0].values.length)  ]);\n\t        //x.range([availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n\t      else\n\t        x.range(xRange || [0, availableWidth]);\n\t\n\t      y   .domain(yDomain || d3.extent(seriesData.map(function(d) { return d.y }).concat(forceY)))\n\t          .range(yRange || [availableHeight, 0]);\n\t\n\t      z   .domain(sizeDomain || d3.extent(seriesData.map(function(d) { return d.size }).concat(forceSize)))\n\t          .range(sizeRange || [16, 256]);\n\t\n\t      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\t      if (x.domain()[0] === x.domain()[1] || y.domain()[0] === y.domain()[1]) singlePoint = true;\n\t      if (x.domain()[0] === x.domain()[1])\n\t        x.domain()[0] ?\n\t            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n\t          : x.domain([-1,1]);\n\t\n\t      if (y.domain()[0] === y.domain()[1])\n\t        y.domain()[0] ?\n\t            y.domain([y.domain()[0] - y.domain()[0] * 0.01, y.domain()[1] + y.domain()[1] * 0.01])\n\t          : y.domain([-1,1]);\n\t\n\t      if ( isNaN(x.domain()[0])) {\n\t          x.domain([-1,1]);\n\t      }\n\t\n\t      if ( isNaN(y.domain()[0])) {\n\t          y.domain([-1,1]);\n\t      }\n\t\n\t\n\t      x0 = x0 || x;\n\t      y0 = y0 || y;\n\t      z0 = z0 || z;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-scatter').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatter nv-chart-' + id + (singlePoint ? ' nv-single-point' : ''));\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-groups');\n\t      gEnter.append('g').attr('class', 'nv-point-paths');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-edge-clip-' + id)\n\t        .append('rect');\n\t\n\t      wrap.select('#nv-edge-clip-' + id + ' rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', (availableHeight > 0) ? availableHeight : 0);\n\t\n\t      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\t\n\t\n\t      function updateInteractiveLayer() {\n\t\n\t        if (!interactive) return false;\n\t\n\t        var eventElements;\n\t\n\t        var vertices = d3.merge(data.map(function(group, groupIndex) {\n\t            return group.values\n\t              .map(function(point, pointIndex) {\n\t                // *Adding noise to make duplicates very unlikely\n\t                // *Injecting series and point index for reference\n\t                /* *Adding a 'jitter' to the points, because there's an issue in d3.geom.voronoi.\n\t                */\n\t                var pX = getX(point,pointIndex);\n\t                var pY = getY(point,pointIndex);\n\t\n\t                return [x(pX),\n\t                        y(pY),\n\t                        groupIndex,\n\t                        pointIndex, point];\n\t              })\n\t              .filter(function(pointArray, pointIndex) {\n\t                return pointActive(pointArray[4], pointIndex); // Issue #237.. move filter to after map, so pointIndex is correct!\n\t              })\n\t          })\n\t        );\n\t\n\t\n\t\n\t        //inject series and point index for reference into voronoi\n\t        if (useVoronoi === true) {\n\t\n\t          if (clipVoronoi) {\n\t            var pointClipsEnter = wrap.select('defs').selectAll('.nv-point-clips')\n\t                .data([id])\n\t              .enter();\n\t\n\t            pointClipsEnter.append('clipPath')\n\t                  .attr('class', 'nv-point-clips')\n\t                  .attr('id', 'nv-points-clip-' + id);\n\t\n\t            var pointClips = wrap.select('#nv-points-clip-' + id).selectAll('circle')\n\t                .data(vertices);\n\t            pointClips.enter().append('circle')\n\t                .attr('r', clipRadius);\n\t            pointClips.exit().remove();\n\t            pointClips\n\t                .attr('cx', function(d) { return d[0] })\n\t                .attr('cy', function(d) { return d[1] });\n\t\n\t            wrap.select('.nv-point-paths')\n\t                .attr('clip-path', 'url(#nv-points-clip-' + id + ')');\n\t          }\n\t\n\t\n\t          if(vertices.length) {\n\t            // Issue #283 - Adding 2 dummy points to the voronoi b/c voronoi requires min 3 points to work\n\t            vertices.push([x.range()[0] - 20, y.range()[0] - 20, null, null]);\n\t            vertices.push([x.range()[1] + 20, y.range()[1] + 20, null, null]);\n\t            vertices.push([x.range()[0] - 20, y.range()[0] + 20, null, null]);\n\t            vertices.push([x.range()[1] + 20, y.range()[1] - 20, null, null]);\n\t          }\n\t\n\t          var bounds = d3.geom.polygon([\n\t              [-10,-10],\n\t              [-10,height + 10],\n\t              [width + 10,height + 10],\n\t              [width + 10,-10]\n\t          ]);\n\t\n\t          // delete duplicates from vertices - essential assumption for d3.geom.voronoi\n\t          var epsilon = 1e-6; // d3 uses 1e-6 to determine equivalence.\n\t          vertices = vertices.sort(function(a,b){return ((a[0] - b[0]) || (a[1] - b[1]))});\n\t          for (var i = 0; i < vertices.length - 1; ) {\n\t              if ((Math.abs(vertices[i][0] - vertices[i+1][0]) < epsilon) &&\n\t                  (Math.abs(vertices[i][1] - vertices[i+1][1]) < epsilon)) {\n\t                      vertices.splice(i+1, 1);\n\t              } else {\n\t                  i++;\n\t              }\n\t          }\n\t \n\t          var voronoi = d3.geom.voronoi(vertices).map(function(d, i) {\n\t              return {\n\t                'data': bounds.clip(d),\n\t                'series': vertices[i][2],\n\t                'point': vertices[i][3]\n\t              }\n\t            });\n\t\n\t\n\t          var pointPaths = wrap.select('.nv-point-paths').selectAll('path')\n\t              .data(voronoi);\n\t          pointPaths.enter().append('path')\n\t              .attr('class', function(d,i) { return 'nv-path-'+i; });\n\t          pointPaths.exit().remove();\n\t          pointPaths\n\t              .attr('d', function(d) {\n\t                if (!d || !d.data || d.data.length === 0)\n\t                    return 'M 0 0';\n\t                else\n\t                    return 'M' + d.data.join('L') + 'Z';\n\t              });\n\t\n\t          var mouseEventCallback = function(d,mDispatch) {\n\t                if (needsUpdate) return 0;\n\t                var series = data[d.series];\n\t                if (typeof series === 'undefined') return;\n\t\n\t                var point  = series.values[d.point];\n\t\n\t                mDispatch({\n\t                  point: point,\n\t                  series: series,\n\t                  pos: [x(getX(point, d.point)) + margin.left, y(getY(point, d.point)) + margin.top],\n\t                  seriesIndex: d.series,\n\t                  pointIndex: d.point\n\t                });\n\t          };\n\t\n\t          pointPaths\n\t              .on('click', function(d) {\n\t                mouseEventCallback(d, dispatch.elementClick);\n\t              })\n\t              .on('mouseover', function(d) {\n\t                mouseEventCallback(d, dispatch.elementMouseover);\n\t              })\n\t              .on('mouseout', function(d, i) {\n\t                mouseEventCallback(d, dispatch.elementMouseout);\n\t              });\n\t\n\t\n\t        } else {\n\t          /*\n\t          // bring data in form needed for click handlers\n\t          var dataWithPoints = vertices.map(function(d, i) {\n\t              return {\n\t                'data': d,\n\t                'series': vertices[i][2],\n\t                'point': vertices[i][3]\n\t              }\n\t            });\n\t           */\n\t\n\t          // add event handlers to points instead voronoi paths\n\t          wrap.select('.nv-groups').selectAll('.nv-group')\n\t            .selectAll('.nv-point')\n\t              //.data(dataWithPoints)\n\t              //.style('pointer-events', 'auto') // recativate events, disabled by css\n\t              .on('click', function(d,i) {\n\t                //nv.log('test', d, i);\n\t                if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\t                var series = data[d.series],\n\t                    point  = series.values[i];\n\t\n\t                dispatch.elementClick({\n\t                  point: point,\n\t                  series: series,\n\t                  pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n\t                  seriesIndex: d.series,\n\t                  pointIndex: i\n\t                });\n\t              })\n\t              .on('mouseover', function(d,i) {\n\t                if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\t                var series = data[d.series],\n\t                    point  = series.values[i];\n\t\n\t                dispatch.elementMouseover({\n\t                  point: point,\n\t                  series: series,\n\t                  pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n\t                  seriesIndex: d.series,\n\t                  pointIndex: i\n\t                });\n\t              })\n\t              .on('mouseout', function(d,i) {\n\t                if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\t                var series = data[d.series],\n\t                    point  = series.values[i];\n\t\n\t                dispatch.elementMouseout({\n\t                  point: point,\n\t                  series: series,\n\t                  seriesIndex: d.series,\n\t                  pointIndex: i\n\t                });\n\t              });\n\t          }\n\t\n\t          needsUpdate = false;\n\t      }\n\t\n\t      needsUpdate = true;\n\t\n\t      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n\t          .data(function(d) { return d }, function(d) { return d.key });\n\t      groups.enter().append('g')\n\t          .style('stroke-opacity', 1e-6)\n\t          .style('fill-opacity', 1e-6);\n\t      groups.exit()\n\t          .remove();\n\t      groups\n\t          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n\t          .classed('hover', function(d) { return d.hover });\n\t      groups\n\t          \n\t          .style('fill', function(d,i) { return color(d, i) })\n\t          .style('stroke', function(d,i) { return color(d, i) })\n\t          .style('stroke-opacity', 1)\n\t          .style('fill-opacity', .5);\n\t\n\t\n\t      if (onlyCircles) {\n\t\n\t        var points = groups.selectAll('circle.nv-point')\n\t            .data(function(d) { return d.values }, pointKey);\n\t        points.enter().append('circle')\n\t            .style('fill', function (d,i) { return d.color })\n\t            .style('stroke', function (d,i) { return d.color })\n\t            .attr('cx', function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n\t            .attr('cy', function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n\t            .attr('r', function(d,i) { return Math.sqrt(z(getSize(d,i))/Math.PI) });\n\t        points.exit().remove();\n\t        groups.exit().selectAll('path.nv-point')\n\t            .attr('cx', function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n\t            .attr('cy', function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n\t            .remove();\n\t        points.each(function(d,i) {\n\t          d3.select(this)\n\t            .classed('nv-point', true)\n\t            .classed('nv-point-' + i, true)\n\t            .classed('hover',false)\n\t            ;\n\t        });\n\t        points\n\t            .attr('cx', function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n\t            .attr('cy', function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n\t            .attr('r', function(d,i) { return Math.sqrt(z(getSize(d,i))/Math.PI) });\n\t\n\t      } else {\n\t\n\t        var points = groups.selectAll('path.nv-point')\n\t            .data(function(d) { return d.values });\n\t        points.enter().append('path')\n\t            .style('fill', function (d,i) { return d.color })\n\t            .style('stroke', function (d,i) { return d.color })\n\t            .attr('transform', function(d,i) {\n\t              return 'translate(' + x0(getX(d,i)) + ',' + y0(getY(d,i)) + ')'\n\t            })\n\t            .attr('d',\n\t              d3.svg.symbol()\n\t                .type(getShape)\n\t                .size(function(d,i) { return z(getSize(d,i)) })\n\t            );\n\t        points.exit().remove();\n\t        groups.exit().selectAll('path.nv-point')\n\t            \n\t            .attr('transform', function(d,i) {\n\t              return 'translate(' + x(getX(d,i)) + ',' + y(getY(d,i)) + ')'\n\t            })\n\t            .remove();\n\t        points.each(function(d,i) {\n\t          d3.select(this)\n\t            .classed('nv-point', true)\n\t            .classed('nv-point-' + i, true)\n\t            .classed('hover',false)\n\t            ;\n\t        });\n\t        points\n\t            .attr('transform', function(d,i) {\n\t              //nv.log(d,i,getX(d,i), x(getX(d,i)));\n\t              return 'translate(' + x(getX(d,i)) + ',' + y(getY(d,i)) + ')'\n\t            })\n\t            .attr('d',\n\t              d3.svg.symbol()\n\t                .type(getShape)\n\t                .size(function(d,i) { return z(getSize(d,i)) })\n\t            );\n\t      }\n\t\n\t\n\t      // Delay updating the invisible interactive layer for smoother animation\n\t      clearTimeout(timeoutID); // stop repeat calls to updateInteractiveLayer\n\t      timeoutID = setTimeout(updateInteractiveLayer, 300);\n\t      //updateInteractiveLayer();\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t      z0 = z.copy();\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t  chart.clearHighlights = function() {\n\t      //Remove the 'hover' class from all highlighted points.\n\t      d3.selectAll(\".nv-chart-\" + id + \" .nv-point.hover\").classed(\"hover\",false);\n\t  };\n\t\n\t  chart.highlightPoint = function(seriesIndex,pointIndex,isHoverOver) {\n\t      d3.select(\".nv-chart-\" + id + \" .nv-series-\" + seriesIndex + \" .nv-point-\" + pointIndex)\n\t          .classed(\"hover\",isHoverOver);\n\t  };\n\t\n\t\n\t  dispatch.on('elementMouseover.point', function(d) {\n\t     if (interactive) chart.highlightPoint(d.seriesIndex,d.pointIndex,true);\n\t  });\n\t\n\t  dispatch.on('elementMouseout.point', function(d) {\n\t     if (interactive) chart.highlightPoint(d.seriesIndex,d.pointIndex,false);\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.size = function(_) {\n\t    if (!arguments.length) return getSize;\n\t    getSize = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.zScale = function(_) {\n\t    if (!arguments.length) return z;\n\t    z = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.sizeDomain = function(_) {\n\t    if (!arguments.length) return sizeDomain;\n\t    sizeDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.sizeRange = function(_) {\n\t    if (!arguments.length) return sizeRange;\n\t    sizeRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceX = function(_) {\n\t    if (!arguments.length) return forceX;\n\t    forceX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceY = function(_) {\n\t    if (!arguments.length) return forceY;\n\t    forceY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.forceSize = function(_) {\n\t    if (!arguments.length) return forceSize;\n\t    forceSize = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.interactive = function(_) {\n\t    if (!arguments.length) return interactive;\n\t    interactive = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.pointKey = function(_) {\n\t    if (!arguments.length) return pointKey;\n\t    pointKey = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.pointActive = function(_) {\n\t    if (!arguments.length) return pointActive;\n\t    pointActive = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.padData = function(_) {\n\t    if (!arguments.length) return padData;\n\t    padData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.padDataOuter = function(_) {\n\t    if (!arguments.length) return padDataOuter;\n\t    padDataOuter = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.clipEdge = function(_) {\n\t    if (!arguments.length) return clipEdge;\n\t    clipEdge = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.clipVoronoi= function(_) {\n\t    if (!arguments.length) return clipVoronoi;\n\t    clipVoronoi = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.useVoronoi= function(_) {\n\t    if (!arguments.length) return useVoronoi;\n\t    useVoronoi = _;\n\t    if (useVoronoi === false) {\n\t        clipVoronoi = false;\n\t    }\n\t    return chart;\n\t  };\n\t\n\t  chart.clipRadius = function(_) {\n\t    if (!arguments.length) return clipRadius;\n\t    clipRadius = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.shape = function(_) {\n\t    if (!arguments.length) return getShape;\n\t    getShape = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.onlyCircles = function(_) {\n\t    if (!arguments.length) return onlyCircles;\n\t    onlyCircles = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.id = function(_) {\n\t    if (!arguments.length) return id;\n\t    id = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.singlePoint = function(_) {\n\t    if (!arguments.length) return singlePoint;\n\t    singlePoint = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\tnv.models.scatterChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var scatter      = nv.models.scatter()\n\t    , xAxis        = nv.models.axis()\n\t    , yAxis        = nv.models.axis()\n\t    , legend       = nv.models.legend()\n\t    , controls     = nv.models.legend()\n\t    , distX        = nv.models.distribution()\n\t    , distY        = nv.models.distribution()\n\t    ;\n\t\n\t  var margin       = {top: 30, right: 20, bottom: 50, left: 75}\n\t    , width        = null\n\t    , height       = null\n\t    , color        = nv.utils.defaultColor()\n\t    , x            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.xScale()\n\t    , y            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.yScale()\n\t    , xPadding     = 0\n\t    , yPadding     = 0\n\t    , showDistX    = false\n\t    , showDistY    = false\n\t    , showLegend   = true\n\t    , showXAxis    = true\n\t    , showYAxis    = true\n\t    , rightAlignYAxis = false\n\t    , showControls = !!d3.fisheye\n\t    , fisheye      = 0\n\t    , pauseFisheye = false\n\t    , tooltips     = true\n\t    , tooltipX     = function(key, x, y) { return '<strong>' + x + '</strong>' }\n\t    , tooltipY     = function(key, x, y) { return '<strong>' + y + '</strong>' }\n\t    , tooltip      = null\n\t    , state = {}\n\t    , defaultState = null\n\t    , dispatch     = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , noData       = \"No Data Available.\"\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  scatter\n\t    .xScale(x)\n\t    .yScale(y)\n\t    ;\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(10)\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    .tickPadding(10)\n\t    ;\n\t  distX\n\t    .axis('x')\n\t    ;\n\t  distY\n\t    .axis('y')\n\t    ;\n\t\n\t  controls.updateState(false);\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0;\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    //TODO: make tooltip style an option between single or dual on axes (maybe on all charts with axes?)\n\t\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        leftX = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        topX = y.range()[0] + margin.top + ( offsetElement.offsetTop || 0),\n\t        leftY = x.range()[0] + margin.left + ( offsetElement.offsetLeft || 0 ),\n\t        topY = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        xVal = xAxis.tickFormat()(scatter.x()(e.point, e.pointIndex)),\n\t        yVal = yAxis.tickFormat()(scatter.y()(e.point, e.pointIndex));\n\t\n\t      if( tooltipX != null )\n\t          nv.tooltip.show([leftX, topX], tooltipX(e.series.key, xVal, yVal, e, chart), 'n', 1, offsetElement, 'x-nvtooltip');\n\t      if( tooltipY != null )\n\t          nv.tooltip.show([leftY, topY], tooltipY(e.series.key, xVal, yVal, e, chart), 'e', 1, offsetElement, 'y-nvtooltip');\n\t      if( tooltip != null )\n\t          nv.tooltip.show([left, top], tooltip(e.series.key, xVal, yVal, e, chart), e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  var controlsData = [\n\t    { key: 'Magnify', disabled: true }\n\t  ];\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display noData message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x0 = x0 || x;\n\t      y0 = y0 || y;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-scatterChart').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatterChart nv-chart-' + scatter.id());\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      // background for pointer events\n\t      gEnter.append('rect').attr('class', 'nvd3 nv-background');\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-scatterWrap');\n\t      gEnter.append('g').attr('class', 'nv-distWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        var legendWidth = (showControls) ? availableWidth / 2 : availableWidth;\n\t        legend.width(legendWidth);\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + (availableWidth - legendWidth) + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Controls\n\t\n\t      if (showControls) {\n\t        controls.width(180).color(['#444']);\n\t        g.select('.nv-controlsWrap')\n\t            .datum(controlsData)\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t            .call(controls);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      scatter\n\t          .width(availableWidth)\n\t          .height(availableHeight)\n\t          .color(data.map(function(d,i) {\n\t            return d.color || color(d, i);\n\t          }).filter(function(d,i) { return !data[i].disabled }));\n\t\n\t      if (xPadding !== 0)\n\t        scatter.xDomain(null);\n\t\n\t      if (yPadding !== 0)\n\t        scatter.yDomain(null);\n\t\n\t      wrap.select('.nv-scatterWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t          .call(scatter);\n\t\n\t      //Adjust for x and y padding\n\t      if (xPadding !== 0) {\n\t        var xRange = x.domain()[1] - x.domain()[0];\n\t        scatter.xDomain([x.domain()[0] - (xPadding * xRange), x.domain()[1] + (xPadding * xRange)]);\n\t      }\n\t\n\t      if (yPadding !== 0) {\n\t        var yRange = y.domain()[1] - y.domain()[0];\n\t        scatter.yDomain([y.domain()[0] - (yPadding * yRange), y.domain()[1] + (yPadding * yRange)]);\n\t      }\n\t\n\t      //Only need to update the scatter again if x/yPadding changed the domain.\n\t      if (yPadding !== 0 || xPadding !== 0) {\n\t        wrap.select('.nv-scatterWrap')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(scatter);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t      if (showXAxis) {\n\t        xAxis\n\t            .scale(x)\n\t            .ticks( xAxis.ticks() && xAxis.ticks().length ? xAxis.ticks() : availableWidth / 100 )\n\t            .tickSize( -availableHeight , 0);\n\t\n\t        g.select('.nv-x.nv-axis')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n\t            .call(xAxis);\n\t\n\t      }\n\t\n\t      if (showYAxis) {\n\t        yAxis\n\t            .scale(y)\n\t            .ticks( yAxis.ticks() && yAxis.ticks().length ? yAxis.ticks() : availableHeight / 36 )\n\t            .tickSize( -availableWidth, 0);\n\t\n\t        g.select('.nv-y.nv-axis')\n\t            .call(yAxis);\n\t      }\n\t\n\t\n\t      if (showDistX) {\n\t        distX\n\t            .getData(scatter.x())\n\t            .scale(x)\n\t            .width(availableWidth)\n\t            .color(data.map(function(d,i) {\n\t              return d.color || color(d, i);\n\t            }).filter(function(d,i) { return !data[i].disabled }));\n\t        gEnter.select('.nv-distWrap').append('g')\n\t            .attr('class', 'nv-distributionX');\n\t        g.select('.nv-distributionX')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distX);\n\t      }\n\t\n\t      if (showDistY) {\n\t        distY\n\t            .getData(scatter.y())\n\t            .scale(y)\n\t            .width(availableHeight)\n\t            .color(data.map(function(d,i) {\n\t              return d.color || color(d, i);\n\t            }).filter(function(d,i) { return !data[i].disabled }));\n\t        gEnter.select('.nv-distWrap').append('g')\n\t            .attr('class', 'nv-distributionY');\n\t        g.select('.nv-distributionY')\n\t            .attr('transform', \n\t              'translate(' + (rightAlignYAxis ? availableWidth : -distY.size() ) + ',0)')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distY);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t\n\t      if (d3.fisheye) {\n\t        g.select('.nv-background')\n\t            .attr('width', availableWidth)\n\t            .attr('height', availableHeight);\n\t\n\t        g.select('.nv-background').on('mousemove', updateFisheye);\n\t        g.select('.nv-background').on('click', function() { pauseFisheye = !pauseFisheye;});\n\t        scatter.dispatch.on('elementClick.freezeFisheye', function() {\n\t          pauseFisheye = !pauseFisheye;\n\t        });\n\t      }\n\t\n\t\n\t      function updateFisheye() {\n\t        if (pauseFisheye) {\n\t          g.select('.nv-point-paths').style('pointer-events', 'all');\n\t          return false;\n\t        }\n\t\n\t        g.select('.nv-point-paths').style('pointer-events', 'none' );\n\t\n\t        var mouse = d3.mouse(this);\n\t        x.distortion(fisheye).focus(mouse[0]);\n\t        y.distortion(fisheye).focus(mouse[1]);\n\t\n\t        g.select('.nv-scatterWrap')\n\t            .call(scatter);\n\t\n\t        if (showXAxis)\n\t          g.select('.nv-x.nv-axis').call(xAxis);\n\t        \n\t        if (showYAxis)\n\t          g.select('.nv-y.nv-axis').call(yAxis);\n\t        \n\t        g.select('.nv-distributionX')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distX);\n\t        g.select('.nv-distributionY')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distY);\n\t      }\n\t\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      controls.dispatch.on('legendClick', function(d,i) {\n\t        d.disabled = !d.disabled;\n\t\n\t        fisheye = d.disabled ? 0 : 2.5;\n\t        g.select('.nv-background') .style('pointer-events', d.disabled ? 'none' : 'all');\n\t        g.select('.nv-point-paths').style('pointer-events', d.disabled ? 'all' : 'none' );\n\t\n\t        if (d.disabled) {\n\t          x.distortion(fisheye).focus(0);\n\t          y.distortion(fisheye).focus(0);\n\t\n\t          g.select('.nv-scatterWrap').call(scatter);\n\t          g.select('.nv-x.nv-axis').call(xAxis);\n\t          g.select('.nv-y.nv-axis').call(yAxis);\n\t        } else {\n\t          pauseFisheye = false;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      legend.dispatch.on('stateChange', function(newState) {\n\t        state.disabled = newState.disabled;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      scatter.dispatch.on('elementMouseover.tooltip', function(e) {\n\t        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n\t            .attr('y1', function(d,i) { return e.pos[1] - availableHeight;});\n\t        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n\t            .attr('x2', e.pos[0] + distX.size());\n\t\n\t        e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\n\t        dispatch.tooltipShow(e);\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  scatter.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t\n\t    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n\t        .attr('y1', 0);\n\t    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n\t        .attr('x2', distY.size());\n\t  });\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.scatter = scatter;\n\t  chart.legend = legend;\n\t  chart.controls = controls;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t  chart.distX = distX;\n\t  chart.distY = distY;\n\t\n\t  d3.rebind(chart, scatter, 'id', 'interactive', 'pointActive', 'x', 'y', 'shape', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange', 'sizeDomain', 'sizeRange', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'clipRadius', 'useVoronoi');\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    distX.color(color);\n\t    distY.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showDistX = function(_) {\n\t    if (!arguments.length) return showDistX;\n\t    showDistX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showDistY = function(_) {\n\t    if (!arguments.length) return showDistY;\n\t    showDistY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showControls = function(_) {\n\t    if (!arguments.length) return showControls;\n\t    showControls = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t\n\t  chart.fisheye = function(_) {\n\t    if (!arguments.length) return fisheye;\n\t    fisheye = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xPadding = function(_) {\n\t    if (!arguments.length) return xPadding;\n\t    xPadding = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yPadding = function(_) {\n\t    if (!arguments.length) return yPadding;\n\t    yPadding = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipXContent = function(_) {\n\t    if (!arguments.length) return tooltipX;\n\t    tooltipX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipYContent = function(_) {\n\t    if (!arguments.length) return tooltipY;\n\t    tooltipY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t  \n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.scatterPlusLineChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var scatter      = nv.models.scatter()\n\t    , xAxis        = nv.models.axis()\n\t    , yAxis        = nv.models.axis()\n\t    , legend       = nv.models.legend()\n\t    , controls     = nv.models.legend()\n\t    , distX        = nv.models.distribution()\n\t    , distY        = nv.models.distribution()\n\t    ;\n\t\n\t  var margin       = {top: 30, right: 20, bottom: 50, left: 75}\n\t    , width        = null\n\t    , height       = null\n\t    , color        = nv.utils.defaultColor()\n\t    , x            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.xScale()\n\t    , y            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.yScale()\n\t    , showDistX    = false\n\t    , showDistY    = false\n\t    , showLegend   = true\n\t    , showXAxis    = true\n\t    , showYAxis    = true\n\t    , rightAlignYAxis = false\n\t    , showControls = !!d3.fisheye\n\t    , fisheye      = 0\n\t    , pauseFisheye = false\n\t    , tooltips     = true\n\t    , tooltipX     = function(key, x, y) { return '<strong>' + x + '</strong>' }\n\t    , tooltipY     = function(key, x, y) { return '<strong>' + y + '</strong>' }\n\t    , tooltip      = function(key, x, y, date) { return '<h3>' + key + '</h3>' \n\t                                                      + '<p>' + date + '</p>' }\n\t    , state = {}\n\t    , defaultState = null\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , noData       = \"No Data Available.\"\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  scatter\n\t    .xScale(x)\n\t    .yScale(y)\n\t    ;\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(10)\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    .tickPadding(10)\n\t    ;\n\t  distX\n\t    .axis('x')\n\t    ;\n\t  distY\n\t    .axis('y')\n\t    ;\n\t  \n\t  controls.updateState(false);\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var x0, y0;\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    //TODO: make tooltip style an option between single or dual on axes (maybe on all charts with axes?)\n\t\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        leftX = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        topX = y.range()[0] + margin.top + ( offsetElement.offsetTop || 0),\n\t        leftY = x.range()[0] + margin.left + ( offsetElement.offsetLeft || 0 ),\n\t        topY = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        xVal = xAxis.tickFormat()(scatter.x()(e.point, e.pointIndex)),\n\t        yVal = yAxis.tickFormat()(scatter.y()(e.point, e.pointIndex));\n\t\n\t      if( tooltipX != null )\n\t          nv.tooltip.show([leftX, topX], tooltipX(e.series.key, xVal, yVal, e, chart), 'n', 1, offsetElement, 'x-nvtooltip');\n\t      if( tooltipY != null )\n\t          nv.tooltip.show([leftY, topY], tooltipY(e.series.key, xVal, yVal, e, chart), 'e', 1, offsetElement, 'y-nvtooltip');\n\t      if( tooltip != null )\n\t          nv.tooltip.show([left, top], tooltip(e.series.key, xVal, yVal, e.point.tooltip, e, chart), e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  var controlsData = [\n\t    { key: 'Magnify', disabled: true }\n\t  ];\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display noData message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = scatter.xScale();\n\t      y = scatter.yScale();\n\t\n\t      x0 = x0 || x;\n\t      y0 = y0 || y;\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-scatterChart').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatterChart nv-chart-' + scatter.id());\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g')\n\t\n\t      // background for pointer events\n\t      gEnter.append('rect').attr('class', 'nvd3 nv-background').style(\"pointer-events\",\"none\");\n\t\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-scatterWrap');\n\t      gEnter.append('g').attr('class', 'nv-regressionLinesWrap');\n\t      gEnter.append('g').attr('class', 'nv-distWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        legend.width( availableWidth / 2 );\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        wrap.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + (availableWidth / 2) + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Controls\n\t\n\t      if (showControls) {\n\t        controls.width(180).color(['#444']);\n\t        g.select('.nv-controlsWrap')\n\t            .datum(controlsData)\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')')\n\t            .call(controls);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      scatter\n\t          .width(availableWidth)\n\t          .height(availableHeight)\n\t          .color(data.map(function(d,i) {\n\t            return d.color || color(d, i);\n\t          }).filter(function(d,i) { return !data[i].disabled }))\n\t\n\t      wrap.select('.nv-scatterWrap')\n\t          .datum(data.filter(function(d) { return !d.disabled }))\n\t          .call(scatter);\n\t\n\t      wrap.select('.nv-regressionLinesWrap')\n\t          .attr('clip-path', 'url(#nv-edge-clip-' + scatter.id() + ')');\n\t\n\t      var regWrap = wrap.select('.nv-regressionLinesWrap').selectAll('.nv-regLines')\n\t                      .data(function(d) {return d });\n\t      \n\t      regWrap.enter().append('g').attr('class', 'nv-regLines');\n\t\n\t      var regLine = regWrap.selectAll('.nv-regLine').data(function(d){return [d]});\n\t      var regLineEnter = regLine.enter()\n\t                       .append('line').attr('class', 'nv-regLine')\n\t                       .style('stroke-opacity', 0);\n\t\n\t      regLine\n\t          \n\t          .attr('x1', x.range()[0])\n\t          .attr('x2', x.range()[1])\n\t          .attr('y1', function(d,i) {return y(x.domain()[0] * d.slope + d.intercept) })\n\t          .attr('y2', function(d,i) { return y(x.domain()[1] * d.slope + d.intercept) })\n\t          .style('stroke', function(d,i,j) { return color(d,j) })\n\t          .style('stroke-opacity', function(d,i) {\n\t            return (d.disabled || typeof d.slope === 'undefined' || typeof d.intercept === 'undefined') ? 0 : 1 \n\t          });\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t        xAxis\n\t            .scale(x)\n\t            .ticks( xAxis.ticks() ? xAxis.ticks() : availableWidth / 100 )\n\t            .tickSize( -availableHeight , 0);\n\t\n\t        g.select('.nv-x.nv-axis')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n\t            .call(xAxis);\n\t      }\n\t\n\t      if (showYAxis) {\n\t        yAxis\n\t            .scale(y)\n\t            .ticks( yAxis.ticks() ? yAxis.ticks() : availableHeight / 36 )\n\t            .tickSize( -availableWidth, 0);\n\t\n\t        g.select('.nv-y.nv-axis')\n\t            .call(yAxis);\n\t      }\n\t\n\t\n\t      if (showDistX) {\n\t        distX\n\t            .getData(scatter.x())\n\t            .scale(x)\n\t            .width(availableWidth)\n\t            .color(data.map(function(d,i) {\n\t              return d.color || color(d, i);\n\t            }).filter(function(d,i) { return !data[i].disabled }));\n\t        gEnter.select('.nv-distWrap').append('g')\n\t            .attr('class', 'nv-distributionX');\n\t        g.select('.nv-distributionX')\n\t            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distX);\n\t      }\n\t\n\t      if (showDistY) {\n\t        distY\n\t            .getData(scatter.y())\n\t            .scale(y)\n\t            .width(availableHeight)\n\t            .color(data.map(function(d,i) {\n\t              return d.color || color(d, i);\n\t            }).filter(function(d,i) { return !data[i].disabled }));\n\t        gEnter.select('.nv-distWrap').append('g')\n\t            .attr('class', 'nv-distributionY');\n\t        g.select('.nv-distributionY')\n\t            .attr('transform', 'translate(' + (rightAlignYAxis ? availableWidth : -distY.size() ) + ',0)')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distY);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t\n\t      if (d3.fisheye) {\n\t        g.select('.nv-background')\n\t            .attr('width', availableWidth)\n\t            .attr('height', availableHeight)\n\t            ;\n\t\n\t        g.select('.nv-background').on('mousemove', updateFisheye);\n\t        g.select('.nv-background').on('click', function() { pauseFisheye = !pauseFisheye;});\n\t        scatter.dispatch.on('elementClick.freezeFisheye', function() {\n\t          pauseFisheye = !pauseFisheye;\n\t        });\n\t      }\n\t\n\t\n\t      function updateFisheye() {\n\t        if (pauseFisheye) {\n\t          g.select('.nv-point-paths').style('pointer-events', 'all');\n\t          return false;\n\t        }\n\t\n\t        g.select('.nv-point-paths').style('pointer-events', 'none' );\n\t\n\t        var mouse = d3.mouse(this);\n\t        x.distortion(fisheye).focus(mouse[0]);\n\t        y.distortion(fisheye).focus(mouse[1]);\n\t\n\t        g.select('.nv-scatterWrap')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(scatter);\n\t\n\t        if (showXAxis)\n\t          g.select('.nv-x.nv-axis').call(xAxis);\n\t\n\t        if (showYAxis)\n\t          g.select('.nv-y.nv-axis').call(yAxis);\n\t        \n\t        g.select('.nv-distributionX')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distX);\n\t        g.select('.nv-distributionY')\n\t            .datum(data.filter(function(d) { return !d.disabled }))\n\t            .call(distY);\n\t      }\n\t\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      controls.dispatch.on('legendClick', function(d,i) {\n\t        d.disabled = !d.disabled;\n\t\n\t        fisheye = d.disabled ? 0 : 2.5;\n\t        g.select('.nv-background') .style('pointer-events', d.disabled ? 'none' : 'all');\n\t        g.select('.nv-point-paths').style('pointer-events', d.disabled ? 'all' : 'none' );\n\t\n\t        if (d.disabled) {\n\t          x.distortion(fisheye).focus(0);\n\t          y.distortion(fisheye).focus(0);\n\t\n\t          g.select('.nv-scatterWrap').call(scatter);\n\t          g.select('.nv-x.nv-axis').call(xAxis);\n\t          g.select('.nv-y.nv-axis').call(yAxis);\n\t        } else {\n\t          pauseFisheye = false;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      legend.dispatch.on('stateChange', function(newState) { \n\t        state = newState;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t\n\t      scatter.dispatch.on('elementMouseover.tooltip', function(e) {\n\t        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n\t            .attr('y1', e.pos[1] - availableHeight);\n\t        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n\t            .attr('x2', e.pos[0] + distX.size());\n\t\n\t        e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\n\t        dispatch.tooltipShow(e);\n\t      });\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined') {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t      //============================================================\n\t\n\t\n\t      //store old scales for use in transitions on update\n\t      x0 = x.copy();\n\t      y0 = y.copy();\n\t\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  scatter.dispatch.on('elementMouseout.tooltip', function(e) {\n\t    dispatch.tooltipHide(e);\n\t\n\t    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n\t        .attr('y1', 0);\n\t    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n\t        .attr('x2', distY.size());\n\t  });\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.scatter = scatter;\n\t  chart.legend = legend;\n\t  chart.controls = controls;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t  chart.distX = distX;\n\t  chart.distY = distY;\n\t\n\t  d3.rebind(chart, scatter, 'id', 'interactive', 'pointActive', 'x', 'y', 'shape', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange', 'sizeDomain', 'sizeRange', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'clipRadius', 'useVoronoi');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    distX.color(color);\n\t    distY.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showDistX = function(_) {\n\t    if (!arguments.length) return showDistX;\n\t    showDistX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showDistY = function(_) {\n\t    if (!arguments.length) return showDistY;\n\t    showDistY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showControls = function(_) {\n\t    if (!arguments.length) return showControls;\n\t    showControls = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.fisheye = function(_) {\n\t    if (!arguments.length) return fisheye;\n\t    fisheye = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipXContent = function(_) {\n\t    if (!arguments.length) return tooltipX;\n\t    tooltipX = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipYContent = function(_) {\n\t    if (!arguments.length) return tooltipY;\n\t    tooltipY = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.sparkline = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 2, right: 0, bottom: 2, left: 0}\n\t    , width = 400\n\t    , height = 32\n\t    , animate = true\n\t    , x = d3.scale.linear()\n\t    , y = d3.scale.linear()\n\t    , getX = function(d) { return d.x }\n\t    , getY = function(d) { return d.y }\n\t    , color = nv.utils.getColor(['#000'])\n\t    , xDomain\n\t    , yDomain\n\t    , xRange\n\t    , yRange\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x   .domain(xDomain || d3.extent(data, getX ))\n\t          .range(xRange || [0, availableWidth]);\n\t\n\t      y   .domain(yDomain || d3.extent(data, getY ))\n\t          .range(yRange || [availableHeight, 0]);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-sparkline').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparkline');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      var paths = wrap.selectAll('path')\n\t          .data(function(d) { return [d] });\n\t      paths.enter().append('path');\n\t      paths.exit().remove();\n\t      paths\n\t          .style('stroke', function(d,i) { return d.color || color(d, i) })\n\t          .attr('d', d3.svg.line()\n\t            .x(function(d,i) { return x(getX(d,i)) })\n\t            .y(function(d,i) { return y(getY(d,i)) })\n\t          );\n\t\n\t\n\t      // TODO: Add CURRENT data point (Need Min, Mac, Current / Most recent)\n\t      var points = wrap.selectAll('circle.nv-point')\n\t          .data(function(data) {\n\t              var yValues = data.map(function(d, i) { return getY(d,i); });\n\t              function pointIndex(index) {\n\t                  if (index != -1) {\n\t\t              var result = data[index];\n\t                      result.pointIndex = index;\n\t                      return result;\n\t                  } else {\n\t                      return null;\n\t                  }\n\t              }\n\t              var maxPoint = pointIndex(yValues.lastIndexOf(y.domain()[1])),\n\t                  minPoint = pointIndex(yValues.indexOf(y.domain()[0])),\n\t                  currentPoint = pointIndex(yValues.length - 1);\n\t              return [minPoint, maxPoint, currentPoint].filter(function (d) {return d != null;});\n\t          });\n\t      points.enter().append('circle');\n\t      points.exit().remove();\n\t      points\n\t          .attr('cx', function(d,i) { return x(getX(d,d.pointIndex)) })\n\t          .attr('cy', function(d,i) { return y(getY(d,d.pointIndex)) })\n\t          .attr('r', 2)\n\t          .attr('class', function(d,i) {\n\t            return getX(d, d.pointIndex) == x.domain()[1] ? 'nv-point nv-currentValue' :\n\t                   getY(d, d.pointIndex) == y.domain()[0] ? 'nv-point nv-minValue' : 'nv-point nv-maxValue'\n\t          });\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.xScale = function(_) {\n\t    if (!arguments.length) return x;\n\t    x = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yScale = function(_) {\n\t    if (!arguments.length) return y;\n\t    y = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xDomain = function(_) {\n\t    if (!arguments.length) return xDomain;\n\t    xDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yDomain = function(_) {\n\t    if (!arguments.length) return yDomain;\n\t    yDomain = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xRange = function(_) {\n\t    if (!arguments.length) return xRange;\n\t    xRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yRange = function(_) {\n\t    if (!arguments.length) return yRange;\n\t    yRange = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.animate = function(_) {\n\t    if (!arguments.length) return animate;\n\t    animate = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.sparklinePlus = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var sparkline = nv.models.sparkline();\n\t\n\t  var margin = {top: 15, right: 100, bottom: 10, left: 50}\n\t    , width = null\n\t    , height = null\n\t    , x\n\t    , y\n\t    , index = []\n\t    , paused = false\n\t    , xTickFormat = d3.format(',r')\n\t    , yTickFormat = d3.format(',.2f')\n\t    , showValue = true\n\t    , alignValue = true\n\t    , rightAlignValue = false\n\t    , noData = \"No Data Available.\"\n\t    ;\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this);\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      \n\t\n\t      chart.update = function() { chart(selection) };\n\t      chart.container = this;\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      var currentValue = sparkline.y()(data[data.length-1], data.length-1);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = sparkline.xScale();\n\t      y = sparkline.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-sparklineplus').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparklineplus');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-sparklineWrap');\n\t      gEnter.append('g').attr('class', 'nv-valueWrap');\n\t      gEnter.append('g').attr('class', 'nv-hoverArea');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      var sparklineWrap = g.select('.nv-sparklineWrap');\n\t\n\t      sparkline\n\t        .width(availableWidth)\n\t        .height(availableHeight);\n\t\n\t      sparklineWrap\n\t          .call(sparkline);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      var valueWrap = g.select('.nv-valueWrap');\n\t      \n\t      var value = valueWrap.selectAll('.nv-currentValue')\n\t          .data([currentValue]);\n\t\n\t      value.enter().append('text').attr('class', 'nv-currentValue')\n\t          .attr('dx', rightAlignValue ? -8 : 8)\n\t          .attr('dy', '.9em')\n\t          .style('text-anchor', rightAlignValue ? 'end' : 'start');\n\t\n\t      value\n\t          .attr('x', availableWidth + (rightAlignValue ? margin.right : 0))\n\t          .attr('y', alignValue ? function(d) { return y(d) } : 0)\n\t          .style('fill', sparkline.color()(data[data.length-1], data.length-1))\n\t          .text(yTickFormat(currentValue));\n\t\n\t\n\t\n\t      gEnter.select('.nv-hoverArea').append('rect')\n\t          .on('mousemove', sparklineHover)\n\t          .on('click', function() { paused = !paused })\n\t          .on('mouseout', function() { index = []; updateValueLine(); });\n\t          //.on('mouseout', function() { index = null; updateValueLine(); });\n\t\n\t      g.select('.nv-hoverArea rect')\n\t          .attr('transform', function(d) { return 'translate(' + -margin.left + ',' + -margin.top + ')' })\n\t          .attr('width', availableWidth + margin.left + margin.right)\n\t          .attr('height', availableHeight + margin.top);\n\t\n\t\n\t\n\t      function updateValueLine() { //index is currently global (within the chart), may or may not keep it that way\n\t        if (paused) return;\n\t\n\t        var hoverValue = g.selectAll('.nv-hoverValue').data(index)\n\t\n\t        var hoverEnter = hoverValue.enter()\n\t          .append('g').attr('class', 'nv-hoverValue')\n\t            .style('stroke-opacity', 0)\n\t            .style('fill-opacity', 0);\n\t\n\t        hoverValue.exit()\n\t          \n\t            .style('stroke-opacity', 0)\n\t            .style('fill-opacity', 0)\n\t            .remove();\n\t\n\t        hoverValue\n\t            .attr('transform', function(d) { return 'translate(' + x(sparkline.x()(data[d],d)) + ',0)' })\n\t          \n\t            .style('stroke-opacity', 1)\n\t            .style('fill-opacity', 1);\n\t\n\t        if (!index.length) return;\n\t\n\t        hoverEnter.append('line')\n\t            .attr('x1', 0)\n\t            .attr('y1', -margin.top)\n\t            .attr('x2', 0)\n\t            .attr('y2', availableHeight);\n\t\n\t\n\t        hoverEnter.append('text').attr('class', 'nv-xValue')\n\t            .attr('x', -6)\n\t            .attr('y', -margin.top)\n\t            .attr('text-anchor', 'end')\n\t            .attr('dy', '.9em')\n\t\n\t\n\t        g.select('.nv-hoverValue .nv-xValue')\n\t            .text(xTickFormat(sparkline.x()(data[index[0]], index[0])));\n\t\n\t        hoverEnter.append('text').attr('class', 'nv-yValue')\n\t            .attr('x', 6)\n\t            .attr('y', -margin.top)\n\t            .attr('text-anchor', 'start')\n\t            .attr('dy', '.9em')\n\t\n\t        g.select('.nv-hoverValue .nv-yValue')\n\t            .text(yTickFormat(sparkline.y()(data[index[0]], index[0])));\n\t\n\t      }\n\t\n\t\n\t      function sparklineHover() {\n\t        if (paused) return;\n\t\n\t        var pos = d3.mouse(this)[0] - margin.left;\n\t\n\t        function getClosestIndex(data, x) {\n\t          var distance = Math.abs(sparkline.x()(data[0], 0) - x);\n\t          var closestIndex = 0;\n\t          for (var i = 0; i < data.length; i++){\n\t            if (Math.abs(sparkline.x()(data[i], i) - x) < distance) {\n\t              distance = Math.abs(sparkline.x()(data[i], i) - x);\n\t              closestIndex = i;\n\t            }\n\t          }\n\t          return closestIndex;\n\t        }\n\t\n\t        index = [getClosestIndex(data, Math.round(x.invert(pos)))];\n\t\n\t        updateValueLine();\n\t      }\n\t\n\t    });\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.sparkline = sparkline;\n\t\n\t  d3.rebind(chart, sparkline, 'x', 'y', 'xScale', 'yScale', 'color');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t  \n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.xTickFormat = function(_) {\n\t    if (!arguments.length) return xTickFormat;\n\t    xTickFormat = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.yTickFormat = function(_) {\n\t    if (!arguments.length) return yTickFormat;\n\t    yTickFormat = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showValue = function(_) {\n\t    if (!arguments.length) return showValue;\n\t    showValue = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.alignValue = function(_) {\n\t    if (!arguments.length) return alignValue;\n\t    alignValue = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignValue = function(_) {\n\t    if (!arguments.length) return rightAlignValue;\n\t    rightAlignValue = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.stackedArea = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n\t    , width = 960\n\t    , height = 500\n\t    , color = nv.utils.defaultColor() // a function that computes the color\n\t    , id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't selet one\n\t    , getX = function(d) { return d.x } // accessor to get the x value from a data point\n\t    , getY = function(d) { return d.y } // accessor to get the y value from a data point\n\t    , style = 'stack'\n\t    , offset = 'zero'\n\t    , order = 'default'\n\t    , interpolate = 'linear'  // controls the line interpolation\n\t    , clipEdge = false // if true, masks lines within x and y scale\n\t    , x //can be accessed via chart.xScale()\n\t    , y //can be accessed via chart.yScale()\n\t    , scatter = nv.models.scatter()\n\t    , dispatch =  d3.dispatch('tooltipShow', 'tooltipHide', 'areaClick', 'areaMouseover', 'areaMouseout')\n\t    ;\n\t\n\t  scatter\n\t    .size(2.2) // default size\n\t    .sizeDomain([2.2,2.2]) // all the same size by default\n\t    ;\n\t\n\t  /************************************\n\t   * offset:\n\t   *   'wiggle' (stream)\n\t   *   'zero' (stacked)\n\t   *   'expand' (normalize to 100%)\n\t   *   'silhouette' (simple centered)\n\t   *\n\t   * order:\n\t   *   'inside-out' (stream)\n\t   *   'default' (input order)\n\t   ************************************/\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var availableWidth = width - margin.left - margin.right,\n\t          availableHeight = height - margin.top - margin.bottom,\n\t          container = d3.select(this);\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = scatter.xScale();\n\t      y = scatter.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t      var dataRaw = data;\n\t      // Injecting point index into each point because d3.layout.stack().out does not give index\n\t      data.forEach(function(aseries, i) {\n\t        aseries.seriesIndex = i;\n\t        aseries.values = aseries.values.map(function(d, j) {\n\t          d.index = j;\n\t          d.seriesIndex = i;\n\t          return d;\n\t        });\n\t      });\n\t\n\t      var dataFiltered = data.filter(function(series) {\n\t            return !series.disabled;\n\t      });\n\t\n\t      data = d3.layout.stack()\n\t               .order(order)\n\t               .offset(offset)\n\t               .values(function(d) { return d.values })  //TODO: make values customizeable in EVERY model in this fashion\n\t               .x(getX)\n\t               .y(getY)\n\t               .out(function(d, y0, y) {\n\t                    var yHeight = (getY(d) === 0) ? 0 : y;\n\t                    d.display = {\n\t                      y: yHeight,\n\t                     y0: y0\n\t                    };\n\t                })\n\t              (dataFiltered);\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-stackedarea').data([data]);\n\t      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedarea');\n\t      var defsEnter = wrapEnter.append('defs');\n\t      var gEnter = wrapEnter.append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append('g').attr('class', 'nv-areaWrap');\n\t      gEnter.append('g').attr('class', 'nv-scatterWrap');\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      scatter\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t        .x(getX)\n\t        .y(function(d) { return d.display.y + d.display.y0 })\n\t        .forceY([0])\n\t        .color(data.map(function(d,i) {\n\t          return d.color || color(d, d.seriesIndex);\n\t        }));\n\t\n\t\n\t      var scatterWrap = g.select('.nv-scatterWrap')\n\t          .datum(data);\n\t\n\t      scatterWrap.call(scatter);\n\t\n\t      defsEnter.append('clipPath')\n\t          .attr('id', 'nv-edge-clip-' + id)\n\t        .append('rect');\n\t\n\t      wrap.select('#nv-edge-clip-' + id + ' rect')\n\t          .attr('width', availableWidth)\n\t          .attr('height', availableHeight);\n\t\n\t      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\t\n\t      var area = d3.svg.area()\n\t          .x(function(d,i)  { return x(getX(d,i)) })\n\t          .y0(function(d) {\n\t              return y(d.display.y0)\n\t          })\n\t          .y1(function(d) {\n\t              return y(d.display.y + d.display.y0)\n\t          })\n\t          .interpolate(interpolate);\n\t\n\t      var zeroArea = d3.svg.area()\n\t          .x(function(d,i)  { return x(getX(d,i)) })\n\t          .y0(function(d) { return y(d.display.y0) })\n\t          .y1(function(d) { return y(d.display.y0) });\n\t\n\t\n\t      var path = g.select('.nv-areaWrap').selectAll('path.nv-area')\n\t          .data(function(d) { return d });\n\t\n\t      path.enter().append('path').attr('class', function(d,i) { return 'nv-area nv-area-' + i })\n\t          .attr('d', function(d,i){\n\t            return zeroArea(d.values, d.seriesIndex);\n\t          })\n\t          .on('mouseover', function(d,i) {\n\t            d3.select(this).classed('hover', true);\n\t            dispatch.areaMouseover({\n\t              point: d,\n\t              series: d.key,\n\t              pos: [d3.event.pageX, d3.event.pageY],\n\t              seriesIndex: d.seriesIndex\n\t            });\n\t          })\n\t          .on('mouseout', function(d,i) {\n\t            d3.select(this).classed('hover', false);\n\t            dispatch.areaMouseout({\n\t              point: d,\n\t              series: d.key,\n\t              pos: [d3.event.pageX, d3.event.pageY],\n\t              seriesIndex: d.seriesIndex\n\t            });\n\t          })\n\t          .on('click', function(d,i) {\n\t            d3.select(this).classed('hover', false);\n\t            dispatch.areaClick({\n\t              point: d,\n\t              series: d.key,\n\t              pos: [d3.event.pageX, d3.event.pageY],\n\t              seriesIndex: d.seriesIndex\n\t            });\n\t          })\n\t\n\t      path.exit().remove();\n\t\n\t      path\n\t          .style('fill', function(d,i){\n\t            return d.color || color(d, d.seriesIndex)\n\t          })\n\t          .style('stroke', function(d,i){ return d.color || color(d, d.seriesIndex) });\n\t      path\n\t          .attr('d', function(d,i) {\n\t            return area(d.values,i)\n\t          });\n\t\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      scatter.dispatch.on('elementMouseover.area', function(e) {\n\t        g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', true);\n\t      });\n\t      scatter.dispatch.on('elementMouseout.area', function(e) {\n\t        g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', false);\n\t      });\n\t\n\t      //============================================================\n\t      //Special offset functions\n\t      chart.d3_stackedOffset_stackPercent = function(stackData) {\n\t          var n = stackData.length,    //How many series\n\t          m = stackData[0].length,     //how many points per series\n\t          k = 1 / n,\n\t           i,\n\t           j,\n\t           o,\n\t           y0 = [];\n\t\n\t          for (j = 0; j < m; ++j) { //Looping through all points\n\t            for (i = 0, o = 0; i < dataRaw.length; i++)  //looping through series'\n\t                o += getY(dataRaw[i].values[j])   //total value of all points at a certian point in time.\n\t\n\t            if (o) for (i = 0; i < n; i++)\n\t               stackData[i][j][1] /= o;\n\t            else\n\t              for (i = 0; i < n; i++)\n\t               stackData[i][j][1] = k;\n\t          }\n\t          for (j = 0; j < m; ++j) y0[j] = 0;\n\t          return y0;\n\t      };\n\t\n\t    });\n\t\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  scatter.dispatch.on('elementClick.area', function(e) {\n\t    dispatch.areaClick(e);\n\t  })\n\t  scatter.dispatch.on('elementMouseover.tooltip', function(e) {\n\t        e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n\t        dispatch.tooltipShow(e);\n\t  });\n\t  scatter.dispatch.on('elementMouseout.tooltip', function(e) {\n\t        dispatch.tooltipHide(e);\n\t  });\n\t\n\t  //============================================================\n\t\n\t  //============================================================\n\t  // Global getters and setters\n\t  //------------------------------------------------------------\n\t\n\t  chart.dispatch = dispatch;\n\t  chart.scatter = scatter;\n\t\n\t  d3.rebind(chart, scatter, 'interactive', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange',\n\t    'sizeDomain', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'useVoronoi','clipRadius','highlightPoint','clearHighlights');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.x = function(_) {\n\t    if (!arguments.length) return getX;\n\t    getX = d3.functor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.y = function(_) {\n\t    if (!arguments.length) return getY;\n\t    getY = d3.functor(_);\n\t    return chart;\n\t  }\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.clipEdge = function(_) {\n\t    if (!arguments.length) return clipEdge;\n\t    clipEdge = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    return chart;\n\t  };\n\t\n\t  chart.offset = function(_) {\n\t    if (!arguments.length) return offset;\n\t    offset = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.order = function(_) {\n\t    if (!arguments.length) return order;\n\t    order = _;\n\t    return chart;\n\t  };\n\t\n\t  //shortcut for offset + order\n\t  chart.style = function(_) {\n\t    if (!arguments.length) return style;\n\t    style = _;\n\t\n\t    switch (style) {\n\t      case 'stack':\n\t        chart.offset('zero');\n\t        chart.order('default');\n\t        break;\n\t      case 'stream':\n\t        chart.offset('wiggle');\n\t        chart.order('inside-out');\n\t        break;\n\t      case 'stream-center':\n\t          chart.offset('silhouette');\n\t          chart.order('inside-out');\n\t          break;\n\t      case 'expand':\n\t        chart.offset('expand');\n\t        chart.order('default');\n\t        break;\n\t      case 'stack_percent':\n\t        chart.offset(chart.d3_stackedOffset_stackPercent);\n\t        chart.order('default');\n\t        break;\n\t    }\n\t\n\t    return chart;\n\t  };\n\t\n\t  chart.interpolate = function(_) {\n\t\t    if (!arguments.length) return interpolate;\n\t\t    interpolate = _;\n\t\t    return chart;\n\t  };\n\t  //============================================================\n\t\n\t\n\t  return chart;\n\t}\n\t\n\tnv.models.stackedAreaChart = function() {\n\t  \"use strict\";\n\t  //============================================================\n\t  // Public Variables with Default Settings\n\t  //------------------------------------------------------------\n\t\n\t  var stacked = nv.models.stackedArea()\n\t    , xAxis = nv.models.axis()\n\t    , yAxis = nv.models.axis()\n\t    , legend = nv.models.legend()\n\t    , controls = nv.models.legend()\n\t    , interactiveLayer = nv.interactiveGuideline()\n\t    ;\n\t\n\t  var margin = {top: 30, right: 25, bottom: 50, left: 60}\n\t    , width = null\n\t    , height = null\n\t    , color = nv.utils.defaultColor() // a function that takes in d, i and returns color\n\t    , showControls = true\n\t    , showLegend = true\n\t    , showXAxis = true\n\t    , showYAxis = true\n\t    , rightAlignYAxis = false\n\t    , useInteractiveGuideline = false\n\t    , tooltips = true\n\t    , tooltip = function(key, x, y, e, graph) {\n\t        return '<h3>' + key + '</h3>' +\n\t               '<p>' +  y + ' on ' + x + '</p>'\n\t      }\n\t    , x //can be accessed via chart.xScale()\n\t    , y //can be accessed via chart.yScale()\n\t    , yAxisTickFormat = d3.format(',.2f')\n\t    , state = { style: stacked.style() }\n\t    , defaultState = null\n\t    , noData = 'No Data Available.'\n\t    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n\t    , controlWidth = 250\n\t    , cData = ['Stacked','Stream','Expanded']\n\t    , controlLabels = {}\n\t    , transitionDuration = 0\n\t    ;\n\t\n\t  xAxis\n\t    .orient('bottom')\n\t    .tickPadding(7)\n\t    ;\n\t  yAxis\n\t    .orient((rightAlignYAxis) ? 'right' : 'left')\n\t    ;\n\t\n\t  controls.updateState(false);\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Private Variables\n\t  //------------------------------------------------------------\n\t\n\t  var showTooltip = function(e, offsetElement) {\n\t    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n\t        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n\t        x = xAxis.tickFormat()(stacked.x()(e.point, e.pointIndex)),\n\t        y = yAxis.tickFormat()(stacked.y()(e.point, e.pointIndex)),\n\t        content = tooltip(e.series.key, x, y, e, chart);\n\t\n\t    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n\t  };\n\t\n\t  //============================================================\n\t\n\t\n\t  function chart(selection) {\n\t    selection.each(function(data) {\n\t      var container = d3.select(this),\n\t          that = this;\n\t\n\t      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n\t                             - margin.left - margin.right,\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t\n\t      chart.update = function() { container.call(chart); };\n\t      chart.container = this;\n\t\n\t      //set state.disabled\n\t      state.disabled = data.map(function(d) { return !!d.disabled });\n\t\n\t      if (!defaultState) {\n\t        var key;\n\t        defaultState = {};\n\t        for (key in state) {\n\t          if (state[key] instanceof Array)\n\t            defaultState[key] = state[key].slice(0);\n\t          else\n\t            defaultState[key] = state[key];\n\t        }\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Display No Data message if there's nothing to show.\n\t\n\t      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n\t        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\t\n\t        noDataText.enter().append('text')\n\t          .attr('class', 'nvd3 nv-noData')\n\t          .attr('dy', '-.7em')\n\t          .style('text-anchor', 'middle');\n\t\n\t        noDataText\n\t          .attr('x', margin.left + availableWidth / 2)\n\t          .attr('y', margin.top + availableHeight / 2)\n\t          .text(function(d) { return d });\n\t\n\t        return chart;\n\t      } else {\n\t        container.selectAll('.nv-noData').remove();\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Scales\n\t\n\t      x = stacked.xScale();\n\t      y = stacked.yScale();\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup containers and skeleton of chart\n\t\n\t      var wrap = container.selectAll('g.nv-wrap.nv-stackedAreaChart').data([data]);\n\t      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedAreaChart').append('g');\n\t      var g = wrap.select('g');\n\t\n\t      gEnter.append(\"rect\").style(\"opacity\",0);\n\t      gEnter.append('g').attr('class', 'nv-x nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-y nv-axis');\n\t      gEnter.append('g').attr('class', 'nv-stackedWrap');\n\t      gEnter.append('g').attr('class', 'nv-legendWrap');\n\t      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\t      gEnter.append('g').attr('class', 'nv-interactive');\n\t\n\t      g.select(\"rect\").attr(\"width\",availableWidth).attr(\"height\",availableHeight);\n\t      //------------------------------------------------------------\n\t      // Legend\n\t\n\t      if (showLegend) {\n\t        var legendWidth = (showControls) ? availableWidth - controlWidth : availableWidth;\n\t        legend\n\t          .width(legendWidth);\n\t\n\t        g.select('.nv-legendWrap')\n\t            .datum(data)\n\t            .call(legend);\n\t\n\t        if ( margin.top != legend.height()) {\n\t          margin.top = legend.height();\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t        g.select('.nv-legendWrap')\n\t            .attr('transform', 'translate(' + (availableWidth-legendWidth) + ',' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Controls\n\t\n\t      if (showControls) {\n\t        var controlsData = [\n\t          {\n\t            key: controlLabels.stacked || 'Stacked',\n\t            metaKey: 'Stacked',\n\t            disabled: stacked.style() != 'stack',\n\t            style: 'stack'\n\t          },\n\t          {\n\t            key: controlLabels.stream || 'Stream',\n\t            metaKey: 'Stream',\n\t            disabled: stacked.style() != 'stream',\n\t            style: 'stream'\n\t          },\n\t          {\n\t            key: controlLabels.expanded || 'Expanded',\n\t            metaKey: 'Expanded',\n\t            disabled: stacked.style() != 'expand',\n\t            style: 'expand'\n\t          },\n\t          {\n\t            key: controlLabels.stack_percent || 'Stack %',\n\t            metaKey: 'Stack_Percent',\n\t            disabled: stacked.style() != 'stack_percent',\n\t            style: 'stack_percent'\n\t          }\n\t        ];\n\t\n\t        controlWidth = (cData.length/3) * 260;\n\t\n\t        controlsData = controlsData.filter(function(d) {\n\t          return cData.indexOf(d.metaKey) !== -1;\n\t        })\n\t\n\t        controls\n\t          .width( controlWidth )\n\t          .color(['#444', '#444', '#444']);\n\t\n\t        g.select('.nv-controlsWrap')\n\t            .datum(controlsData)\n\t            .call(controls);\n\t\n\t\n\t        if ( margin.top != Math.max(controls.height(), legend.height()) ) {\n\t          margin.top = Math.max(controls.height(), legend.height());\n\t          availableHeight = (height || parseInt(container.style('height')) || 400)\n\t                             - margin.top - margin.bottom;\n\t        }\n\t\n\t\n\t        g.select('.nv-controlsWrap')\n\t            .attr('transform', 'translate(0,' + (-margin.top) +')');\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t      if (rightAlignYAxis) {\n\t          g.select(\".nv-y.nv-axis\")\n\t              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t      // Main Chart Component(s)\n\t\n\t      //------------------------------------------------------------\n\t      //Set up interactive layer\n\t      if (useInteractiveGuideline) {\n\t        interactiveLayer\n\t           .width(availableWidth)\n\t           .height(availableHeight)\n\t           .margin({left: margin.left, top: margin.top})\n\t           .svgContainer(container)\n\t           .xScale(x);\n\t        wrap.select(\".nv-interactive\").call(interactiveLayer);\n\t      }\n\t\n\t      stacked\n\t        .width(availableWidth)\n\t        .height(availableHeight)\n\t\n\t      var stackedWrap = g.select('.nv-stackedWrap')\n\t          .datum(data);\n\t\n\t      stackedWrap.call(stacked);\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //------------------------------------------------------------\n\t      // Setup Axes\n\t\n\t      if (showXAxis) {\n\t        xAxis\n\t          .scale(x)\n\t          .ticks( availableWidth / 100 )\n\t          .tickSize( -availableHeight, 0);\n\t\n\t        g.select('.nv-x.nv-axis')\n\t            .attr('transform', 'translate(0,' + availableHeight + ')');\n\t\n\t        g.select('.nv-x.nv-axis')\n\t          \n\t            .call(xAxis);\n\t      }\n\t\n\t      if (showYAxis) {\n\t        yAxis\n\t          .scale(y)\n\t          .ticks(stacked.offset() == 'wiggle' ? 0 : availableHeight / 36)\n\t          .tickSize(-availableWidth, 0)\n\t          .setTickFormat( (stacked.style() == 'expand' || stacked.style() == 'stack_percent')\n\t                ? d3.format('%') : yAxisTickFormat);\n\t\n\t        g.select('.nv-y.nv-axis')\n\t          \n\t            .call(yAxis);\n\t      }\n\t\n\t      //------------------------------------------------------------\n\t\n\t\n\t      //============================================================\n\t      // Event Handling/Dispatching (in chart's scope)\n\t      //------------------------------------------------------------\n\t\n\t      stacked.dispatch.on('areaClick.toggle', function(e) {\n\t        if (data.filter(function(d) { return !d.disabled }).length === 1)\n\t          data.forEach(function(d) {\n\t            d.disabled = false;\n\t          });\n\t        else\n\t          data.forEach(function(d,i) {\n\t            d.disabled = (i != e.seriesIndex);\n\t          });\n\t\n\t        state.disabled = data.map(function(d) { return !!d.disabled });\n\t        dispatch.stateChange(state);\n\t\n\t        chart.update();\n\t      });\n\t\n\t      legend.dispatch.on('stateChange', function(newState) {\n\t        state.disabled = newState.disabled;\n\t        dispatch.stateChange(state);\n\t        chart.update();\n\t      });\n\t\n\t      controls.dispatch.on('legendClick', function(d,i) {\n\t        if (!d.disabled) return;\n\t\n\t        controlsData = controlsData.map(function(s) {\n\t          s.disabled = true;\n\t          return s;\n\t        });\n\t        d.disabled = false;\n\t\n\t        stacked.style(d.style);\n\t\n\t\n\t        state.style = stacked.style();\n\t        dispatch.stateChange(state);\n\t\n\t        chart.update();\n\t      });\n\t\n\t\n\t      interactiveLayer.dispatch.on('elementMousemove', function(e) {\n\t          stacked.clearHighlights();\n\t          var singlePoint, pointIndex, pointXLocation, allData = [];\n\t          data\n\t          .filter(function(series, i) {\n\t            series.seriesIndex = i;\n\t            return !series.disabled;\n\t          })\n\t          .forEach(function(series,i) {\n\t              pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n\t              stacked.highlightPoint(i, pointIndex, true);\n\t              var point = series.values[pointIndex];\n\t              if (typeof point === 'undefined') return;\n\t              if (typeof singlePoint === 'undefined') singlePoint = point;\n\t              if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n\t\n\t              //If we are in 'expand' mode, use the stacked percent value instead of raw value.\n\t              var tooltipValue = (stacked.style() == 'expand') ? point.display.y : chart.y()(point,pointIndex);\n\t              allData.push({\n\t                  key: series.key,\n\t                  value: tooltipValue,\n\t                  color: color(series,series.seriesIndex),\n\t                  stackedValue: point.display\n\t              });\n\t          });\n\t\n\t          allData.reverse();\n\t\n\t          //Highlight the tooltip entry based on which stack the mouse is closest to.\n\t          if (allData.length > 2) {\n\t            var yValue = chart.yScale().invert(e.mouseY);\n\t            var yDistMax = Infinity, indexToHighlight = null;\n\t            allData.forEach(function(series,i) {\n\t\n\t               //To handle situation where the stacked area chart is negative, we need to use absolute values\n\t               //when checking if the mouse Y value is within the stack area.\n\t               yValue = Math.abs(yValue);\n\t               var stackedY0 = Math.abs(series.stackedValue.y0);\n\t               var stackedY = Math.abs(series.stackedValue.y);\n\t               if ( yValue >= stackedY0 && yValue <= (stackedY + stackedY0))\n\t               {\n\t                  indexToHighlight = i;\n\t                  return;\n\t               }\n\t            });\n\t            if (indexToHighlight != null)\n\t               allData[indexToHighlight].highlight = true;\n\t          }\n\t\n\t          var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex));\n\t\n\t          //If we are in 'expand' mode, force the format to be a percentage.\n\t          var valueFormatter = (stacked.style() == 'expand') ?\n\t               function(d,i) {return d3.format(\".1%\")(d);} :\n\t               function(d,i) {return yAxis.tickFormat()(d); };\n\t          interactiveLayer.tooltip\n\t                  .position({left: pointXLocation + margin.left, top: e.mouseY + margin.top})\n\t                  .chartContainer(that.parentNode)\n\t                  .enabled(tooltips)\n\t                  .valueFormatter(valueFormatter)\n\t                  .data(\n\t                      {\n\t                        value: xValue,\n\t                        series: allData\n\t                      }\n\t                  )();\n\t\n\t          interactiveLayer.renderGuideLine(pointXLocation);\n\t\n\t      });\n\t\n\t      interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n\t          dispatch.tooltipHide();\n\t          stacked.clearHighlights();\n\t      });\n\t\n\t\n\t      dispatch.on('tooltipShow', function(e) {\n\t        if (tooltips) showTooltip(e, that.parentNode);\n\t      });\n\t\n\t      // Update chart from a state object passed to event handler\n\t      dispatch.on('changeState', function(e) {\n\t\n\t        if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n\t          data.forEach(function(series,i) {\n\t            series.disabled = e.disabled[i];\n\t          });\n\t\n\t          state.disabled = e.disabled;\n\t        }\n\t\n\t        if (typeof e.style !== 'undefined') {\n\t          stacked.style(e.style);\n\t        }\n\t\n\t        chart.update();\n\t      });\n\t\n\t    });\n\t\n\t\n\t    return chart;\n\t  }\n\t\n\t\n\t  //============================================================\n\t  // Event Handling/Dispatching (out of chart's scope)\n\t  //------------------------------------------------------------\n\t\n\t  stacked.dispatch.on('tooltipShow', function(e) {\n\t    //disable tooltips when value ~= 0\n\t    //// TODO: consider removing points from voronoi that have 0 value instead of this hack\n\t    /*\n\t    if (!Math.round(stacked.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\n\t      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\n\t      return false;\n\t    }\n\t   */\n\t\n\t    e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n\t    dispatch.tooltipShow(e);\n\t  });\n\t\n\t  stacked.dispatch.on('tooltipHide', function(e) {\n\t    dispatch.tooltipHide(e);\n\t  });\n\t\n\t  dispatch.on('tooltipHide', function() {\n\t    if (tooltips) nv.tooltip.cleanup();\n\t  });\n\t\n\t  //============================================================\n\t\n\t\n\t  //============================================================\n\t  // Expose Public Variables\n\t  //------------------------------------------------------------\n\t\n\t  // expose chart's sub-components\n\t  chart.dispatch = dispatch;\n\t  chart.stacked = stacked;\n\t  chart.legend = legend;\n\t  chart.controls = controls;\n\t  chart.xAxis = xAxis;\n\t  chart.yAxis = yAxis;\n\t  chart.interactiveLayer = interactiveLayer;\n\t\n\t  d3.rebind(chart, stacked, 'x', 'y', 'size', 'xScale', 'yScale', 'xDomain', 'yDomain', 'xRange', 'yRange', 'sizeDomain', 'interactive', 'useVoronoi', 'offset', 'order', 'style', 'clipEdge', 'forceX', 'forceY', 'forceSize', 'interpolate');\n\t\n\t  chart.options = nv.utils.optionsFunc.bind(chart);\n\t\n\t  chart.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n\t    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return chart;\n\t  };\n\t\n\t  chart.width = function(_) {\n\t    if (!arguments.length) return width;\n\t    width = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.height = function(_) {\n\t    if (!arguments.length) return height;\n\t    height = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.color = function(_) {\n\t    if (!arguments.length) return color;\n\t    color = nv.utils.getColor(_);\n\t    legend.color(color);\n\t    stacked.color(color);\n\t    return chart;\n\t  };\n\t\n\t  chart.showControls = function(_) {\n\t    if (!arguments.length) return showControls;\n\t    showControls = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showLegend = function(_) {\n\t    if (!arguments.length) return showLegend;\n\t    showLegend = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showXAxis = function(_) {\n\t    if (!arguments.length) return showXAxis;\n\t    showXAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.showYAxis = function(_) {\n\t    if (!arguments.length) return showYAxis;\n\t    showYAxis = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.rightAlignYAxis = function(_) {\n\t    if(!arguments.length) return rightAlignYAxis;\n\t    rightAlignYAxis = _;\n\t    yAxis.orient( (_) ? 'right' : 'left');\n\t    return chart;\n\t  };\n\t\n\t  chart.useInteractiveGuideline = function(_) {\n\t    if(!arguments.length) return useInteractiveGuideline;\n\t    useInteractiveGuideline = _;\n\t    if (_ === true) {\n\t       chart.interactive(false);\n\t       chart.useVoronoi(false);\n\t    }\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltip = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltips = function(_) {\n\t    if (!arguments.length) return tooltips;\n\t    tooltips = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.tooltipContent = function(_) {\n\t    if (!arguments.length) return tooltip;\n\t    tooltip = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.state = function(_) {\n\t    if (!arguments.length) return state;\n\t    state = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.defaultState = function(_) {\n\t    if (!arguments.length) return defaultState;\n\t    defaultState = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.noData = function(_) {\n\t    if (!arguments.length) return noData;\n\t    noData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.transitionDuration = function(_) {\n\t    if (!arguments.length) return transitionDuration;\n\t    transitionDuration = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.controlsData = function(_) {\n\t    if (!arguments.length) return cData;\n\t    cData = _;\n\t    return chart;\n\t  };\n\t\n\t  chart.controlLabels = function(_) {\n\t    if (!arguments.length) return controlLabels;\n\t    if (typeof _ !== 'object') return controlLabels;\n\t    controlLabels = _;\n\t    return chart;\n\t  };\n\t\n\t  yAxis.setTickFormat = yAxis.tickFormat;\n\t\n\t  yAxis.tickFormat = function(_) {\n\t    if (!arguments.length) return yAxisTickFormat;\n\t    yAxisTickFormat = _;\n\t    return yAxis;\n\t  };\n\t\n\t\n\t  //============================================================\n\t\n\t  return chart;\n\t}\n\t})();\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/** This is the common wrapper for nvd3 based visualizations. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(4), __webpack_require__(10), __webpack_require__(9) ], __WEBPACK_AMD_DEFINE_RESULT__ = function( Utilities ) {\n\t    return Backbone.View.extend({\n\t        initialize: function( options ) {\n\t            var self = this;\n\t            this.options = options;\n\t            options.render = function( canvas_id, groups ) {\n\t                return self.render( canvas_id, groups )\n\t            };\n\t            Utilities.panelHelper( options );\n\t        },\n\t\n\t        render: function( canvas_id, groups ) {\n\t            var self = this;\n\t            var chart       = this.options.chart;\n\t            var type        = this.options.type;\n\t            var makeConfig  = this.options.makeConfig;\n\t            var d3chart = nv.models[ type ]();\n\t            nv.addGraph( function() {\n\t                try {\n\t                    d3chart.xAxis.axisLabel( chart.settings.get( 'x_axis_label' ) );\n\t                    d3chart.yAxis.axisLabel( chart.settings.get( 'y_axis_label' ) ).axisLabelDistance( 30 );\n\t                    d3chart.options( { showControls: false } );\n\t                    d3chart.showLegend && d3chart.showLegend(chart.settings.get('show_legend') == 'true');\n\t                    self._makeAxes( d3chart, groups, chart.settings );\n\t                    makeConfig && makeConfig( d3chart );\n\t                    chart.settings.get( '__use_panels' ) === 'true' && d3chart.options( { showControls: false } );\n\t                    d3chart.xAxis.showMaxMin( false );\n\t                    d3chart.yAxis.showMaxMin( chart.definition.showmaxmin );\n\t                    d3chart.tooltipContent( function( key, x, y, graph ) {\n\t                        return '<h3>' + ( graph.point.tooltip || key ) + '</h3>';\n\t                    });\n\t                    if ( $( '#' + canvas_id ).length > 0 ) {\n\t                        var canvas = d3.select( '#' + canvas_id );\n\t                        canvas.datum( groups ).call( d3chart );\n\t                        if ( chart.definition.zoomable && chart.definition.zoomable != 'native' ) {\n\t                            d3chart.clipEdge && d3chart.clipEdge( true );\n\t                            Utilities.addZoom({\n\t                                xAxis  : d3chart.xAxis,\n\t                                yAxis  : d3chart.yAxis,\n\t                                yDomain: d3chart.yDomain,\n\t                                xDomain: d3chart.xDomain,\n\t                                redraw : function() { d3chart.update() },\n\t                                svg    : canvas\n\t                            });\n\t                        }\n\t                        nv.utils.windowResize( d3chart.update );\n\t                    }\n\t                } catch ( err ) {\n\t                    chart.state( 'failed', err );\n\t                }\n\t            });\n\t            return true;\n\t        },\n\t\n\t        /** Format axes ticks */\n\t        _makeAxes: function( d3chart, groups, settings ) {\n\t            var categories = Utilities.makeCategories( groups, [ 'x', 'y' ] );\n\t            function makeTickFormat( id ) {\n\t                Utilities.makeTickFormat({\n\t                    categories  : categories.array[ id ],\n\t                    type        : settings.get( id + '_axis_type|type' ),\n\t                    precision   : settings.get( id + '_axis_type|precision' ),\n\t                    formatter   : function( formatter ) {\n\t                        formatter && d3chart[ id + 'Axis' ].tickFormat( function( value ) {\n\t                            return formatter( value );\n\t                        });\n\t                    }\n\t                });\n\t            };\n\t            makeTickFormat( 'x' );\n\t            makeTickFormat( 'y' );\n\t        }\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/** This class handles job submissions to the Galaxy API. */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(1) ], __WEBPACK_AMD_DEFINE_RESULT__ = function( Utils ) {\n\t\n\t    /** Time to wait before refreshing to check if job has completed */\n\t    var WAITTIME = 1000;\n\t\n\t    /** Submit job request to charts tool */\n\t    var request = function( chart, parameters, success, error ) {\n\t        chart.state( 'wait', 'Requesting job results...' );\n\t         if ( chart.get( 'modified' ) ) {\n\t            cleanup( chart );\n\t            chart.set( 'modified', false );\n\t        }\n\t        var dataset_id_job = chart.get( 'dataset_id_job' );\n\t        if ( dataset_id_job != '' ) {\n\t            wait( chart, success, error );\n\t        } else {\n\t            var chart_id            = chart.id;\n\t            var chart_type          = chart.get( 'type' );\n\t            var chart_definition    = chart.definition;\n\t            chart.state( 'wait', 'Sending job request...' );\n\t            Utils.request({\n\t                type    : 'POST',\n\t                url     : Galaxy.root + 'api/tools',\n\t                data    : parameters,\n\t                success : function( response ) {\n\t                    if ( !response.outputs || response.outputs.length == 0 ) {\n\t                        chart.state( 'failed', 'Job submission failed. No response.' );\n\t                        error && error();\n\t                    } else {\n\t                        refreshHdas();\n\t                        var job = response.outputs[0];\n\t                        chart.state( 'wait', 'Your job has been queued. You may close the browser window. The job will run in the background.' );\n\t                        chart.set( 'dataset_id_job', job.id );\n\t                        chart.save();\n\t                        wait( chart, success, error );\n\t                    }\n\t                },\n\t                error   : function( response ) {\n\t                    var message = '';\n\t                    if ( response && response.message && response.message.data && response.message.data.input ) {\n\t                        message = response.message.data.input + '.';\n\t                    }\n\t                    chart.state( 'failed', 'This visualization requires the \\'' + parameters.tool_id + '\\' tool. Please make sure it is installed. ' + message );\n\t                    error && error();\n\t                          \n\t                }\n\t            });\n\t        }\n\t    };\n\t\n\t    /* Remove previous data when re-running jobs */\n\t    var cleanup = function( chart ) {\n\t        var self = this;\n\t        var previous =  chart.get( 'dataset_id_job' );\n\t        if (previous != '') {\n\t            Utils.request({\n\t                type    : 'PUT',\n\t                url     : Galaxy.root + 'api/histories/none/contents/' + previous,\n\t                data    : { deleted: true },\n\t                success : function() { refreshHdas() }\n\t            });\n\t            chart.set( 'dataset_id_job', '' );\n\t        }\n\t    };\n\t\n\t    /** Request job details */\n\t    var wait = function( chart, success, error ) {\n\t        var self = this;\n\t        Utils.request({\n\t            type    : 'GET',\n\t            url     : Galaxy.root + 'api/datasets/' + chart.get( 'dataset_id_job' ),\n\t            data    : {},\n\t            success : function( dataset ) {\n\t                var ready = false;\n\t                switch ( dataset.state ) {\n\t                    case 'ok':\n\t                        chart.state( 'wait', 'Job completed successfully...' );\n\t                        success && success( dataset );\n\t                        ready = true;\n\t                        break;\n\t                    case 'error':\n\t                        chart.state( 'failed', 'Job has failed. Please check the history for details.' );\n\t                        error && error( dataset );\n\t                        ready = true;\n\t                        break;\n\t                    case 'running':\n\t                        chart.state( 'wait', 'Your job is running. You may close the browser window. The job will continue in the background.' );\n\t                }\n\t                !ready && setTimeout( function() { wait( chart, success, error ) }, WAITTIME );\n\t            }\n\t        });\n\t    };\n\t\n\t    /** Refresh history panel */\n\t    var refreshHdas = function() {\n\t        Galaxy && Galaxy.currHistoryPanel && Galaxy.currHistoryPanel.refreshContents();\n\t    };\n\t\n\t    return { request: request }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ }\n/******/ ])});;\n\n\n/** WEBPACK FOOTER **\n ** nvd3_histogram_discrete.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e3622d0033a89edad914\n **/","define( [ 'visualizations/utilities/tabular-utilities', 'utilities/jobs', 'visualizations/nvd3/common/wrapper' ], function( Utilities, Jobs, NVD3 ) {\n    return Backbone.Model.extend({\n        initialize: function( options ) {\n            Jobs.request( options.chart, Utilities.buildJobDictionary( options.chart, 'histogramdiscrete' ), function( dataset ) {\n                var dataset_groups = new Backbone.Collection();\n                options.chart.groups.each( function( group, index ) {\n                    dataset_groups.add({\n                        __data_columns: { x: { is_label: true }, y: { is_numeric: true } },\n                        x     : 0,\n                        y     : index + 1,\n                        key   : group.get( 'key' )\n                    });\n                });\n                options.dataset_id = dataset.id;\n                options.dataset_groups = dataset_groups;\n                options.type = 'multiBarChart';\n                options.makeConfig = function( nvd3_model ) {\n                    nvd3_model.options( { showControls: true } );\n                };\n                new NVD3( options );\n            }, function() { options.process.reject() } );\n        }\n    });\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/visualizations/nvd3/histogram_discrete/wrapper.js\n ** module id = 0\n ** module chunks = 7\n **/","/** Useful helper functions */\ndefine( [], function() {\n\n    /** Clone */\n    function clone( obj ) {\n        return JSON.parse( JSON.stringify( obj ) || null );\n    };\n\n    /**\n     * Check if a string is a json string\n     * @param{String}   text - Content to be validated\n     */\n    function isJSON(text) {\n        return /^[\\],:{}\\s]*$/.test(text.replace(/\\\\[\"\\\\\\/bfnrtu]/g, '@').\n            replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\n            replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''));\n    };\n\n    /**\n     * Request handler for GET\n     * @param{String}   url     - Url request is made to\n     * @param{Function} success - Callback on success\n     * @param{Function} error   - Callback on error\n     * @param{Boolean}  cache   - Use cached data if available\n     */\n    function get (options) {\n        top.__utils__get__ = top.__utils__get__ || {};\n        var cache_key = JSON.stringify( options );\n        if (options.cache && top.__utils__get__[cache_key]) {\n            options.success && options.success(top.__utils__get__[cache_key]);\n            window.console.debug('utils.js::get() - Fetching from cache [' + options.url + '].');\n        } else {\n            request({\n                url     : options.url,\n                data    : options.data,\n                success : function(response) {\n                    top.__utils__get__[cache_key] = response;\n                    options.success && options.success(response);\n                },\n                error : function(response) {\n                    options.error && options.error(response);\n                }\n            });\n        }\n    };\n\n    /**\n     * Request handler\n     * @param{String}   method  - Request method ['GET', 'POST', 'DELETE', 'PUT']\n     * @param{String}   url     - Url request is made to\n     * @param{Object}   data    - Data send to url\n     * @param{Function} success - Callback on success\n     * @param{Function} error   - Callback on error\n     */\n    function request (options) {\n        var ajaxConfig = {\n            contentType : 'application/json',\n            type        : options.type || 'GET',\n            data        : options.data || {},\n            url         : options.url\n        }\n        if ( ajaxConfig.type == 'GET' || ajaxConfig.type == 'DELETE' ) {\n            if ( !$.isEmptyObject(ajaxConfig.data) ) {\n                ajaxConfig.url += ajaxConfig.url.indexOf('?') == -1 ? '?' : '&';\n                ajaxConfig.url += $.param(ajaxConfig.data, true);\n            }\n            ajaxConfig.data = null;\n        } else {\n            ajaxConfig.dataType = 'json';\n            ajaxConfig.url      = ajaxConfig.url;\n            ajaxConfig.data     = JSON.stringify( ajaxConfig.data );\n        }\n        $.ajax( ajaxConfig ).done( function( response ) {\n            if ( typeof response === 'string' && isJSON( response ) ) {\n                try {\n                    response = response.replace( 'Infinity,', '\"Infinity\",' );\n                    response = jQuery.parseJSON( response );\n                } catch ( e ) {\n                    console.debug( e );\n                }\n            }\n            options.success && options.success( response );\n        }).fail( function( response ) {\n            var response_text = null;\n            try {\n                response_text = jQuery.parseJSON( response.responseText );\n            } catch (e) {\n                response_text = response.responseText;\n            }\n            options.error && options.error( response_text, response );\n        }).always( function() {\n            options.complete && options.complete();\n        });\n    };\n\n    /**\n     * Safely merge to dictionaries\n     * @param{Object}   options         - Target dictionary\n     * @param{Object}   optionsDefault  - Source dictionary\n     */\n    function merge (options, optionsDefault) {\n        if (options) {\n            return _.defaults(options, optionsDefault);\n        } else {\n            return optionsDefault;\n        }\n    };\n\n    /** Create a unique id */\n    function uid(){\n        top.__utils__uid__ = top.__utils__uid__ || 0;\n        return 'uid-' + top.__utils__uid__++;\n    };\n\n    return {\n        get     : get,\n        merge   : merge,\n        uid     : uid,\n        request : request,\n        clone   : clone,\n        isJSON  : isJSON\n    };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/utilities/utils.js\n ** module id = 1\n ** module chunks = 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25\n **/","define( [ 'utilities/utils', 'visualizations/utilities/tabular-datasets' ], function( Utils, Datasets ) {\n    /** build job dictionary */\n    function buildJobDictionary( chart, module ) {\n        var settings_string = '';\n        var columns_string = '';\n        var group_index = 0;\n        for ( key in chart.settings.attributes ) {\n            var settings_value = chart.settings.get( key );\n            _.each( [ [ ' ', '&#32;' ], [ ',', '&#44;' ], [ ':', '&#58;' ] ], function( pair ) {\n                settings_value = settings_value.replace( new RegExp( pair[ 0 ], 'g' ), pair[ 1 ] );\n            });\n            settings_string += key + ':' + settings_value + ', ';\n        };\n        settings_string = settings_string.substring( 0, settings_string.length - 2 )\n        chart.groups.each( function( group ) {\n            group_index++;\n            _.each( group.get( '__data_columns' ), function( data_columns, name ) {\n                columns_string += name + '_' + group_index + ':' + ( parseInt( group.get( name ) ) + 1 ) + ', ';\n            });\n        });\n        columns_string = columns_string.substring( 0, columns_string.length - 2 );\n        return {\n                    'tool_id'       : 'charts',\n                    'inputs'        : {\n                        'input'     : {\n                            'id'    : chart.get( 'dataset_id' ),\n                            'src'   : 'hda'\n                        },\n                        'module'    : module,\n                        'columns'   : columns_string,\n                        'settings'  : settings_string\n                    }\n                }\n    };\n\n    /** Assists in assigning the viewport panels */\n    function panelHelper( options ) {\n        var self = this;\n        var process             = options.process;\n        var chart               = options.chart;\n        var render              = options.render;\n        var targets             = options.targets;\n        var dataset_id          = options.dataset_id || options.chart.get( 'dataset_id' );\n        var dataset_groups      = options.dataset_groups || options.chart.groups;\n        Datasets.request({\n            chart           : chart,\n            dataset_id      : dataset_id,\n            dataset_groups  : dataset_groups,\n            success         : function( result ) {\n                try {\n                    if ( targets.length == result.length ) {\n                        var valid = true;\n                        for ( var group_index in result ) {\n                            var group = result[ group_index ];\n                            if ( !render( targets[ group_index ], [ group ] ) ) {\n                                valid = false;\n                                break;\n                            }\n                        }\n                        if ( valid ) {\n                            chart.state( 'ok', 'Multi-panel chart drawn.' );\n                        }\n                    } else if ( targets.length == 1 ) {\n                        if ( render( targets[ 0 ], result ) ) {\n                            chart.state( 'ok', 'Chart drawn.' );\n                        }\n                    } else {\n                        chart.state( 'failed', 'Invalid panel count.' );\n                    }\n                    process.resolve();\n                } catch ( err ) {\n                    console.debug( 'FAILED: tabular-utilities::panelHelper() - ' + err );\n                    chart.state( 'failed', err );\n                    process.reject();\n                }\n            }\n        });\n    };\n\n    /** Get domain boundaries value */\n    function getDomains( groups, keys ) {\n        function _apply( operator, key ) {\n            var value = undefined;\n            for ( var group_index in groups ) {\n                var value_sub = d3[ operator ]( groups[ group_index ].values, function( d ) { return d[ key ] } );\n                value = value === undefined ? value_sub : Math[ operator ]( value, value_sub );\n            }\n            return value;\n        };\n        var result = {};\n        for( var index in keys ) {\n            var key = keys[ index ];\n            result[ key ] = {\n                min : _apply( 'min', key ),\n                max : _apply( 'max', key ),\n            };\n           \n        }\n        return result;\n    };\n\n    /** Default series maker */\n    function makeSeries( groups, keys ) {\n        var plot_data = [];\n        for ( var group_index in groups ) {\n            var group = groups[ group_index ];\n            var data = [];\n            for ( var value_index in group.values ) {\n                var point = [];\n                if ( keys ) {\n                    for ( var key_index in keys ) {\n                        var column_index = keys[ key_index ];\n                        point.push( group.values[ value_index ][ column_index ] );\n                    }\n                } else {\n                    for ( var column_index in group.values[ value_index ] ) {\n                        point.push( group.values[ value_index ][ column_index ] );\n                    }\n                }\n                data.push( point );\n            }\n            plot_data.push( data );\n        }\n        return plot_data;\n    };\n\n    /** Default category maker */\n    function makeCategories( groups, column_keys ) {\n        var array = {};\n        var data_columns = groups[ 0 ].__data_columns;\n        _.each( column_keys, function( key ) {\n            if ( data_columns[ key ].is_label ) {\n                array[ key ] = [];\n            }\n        });\n        if ( groups && groups[ 0 ] ) {\n            _.each( groups[ 0 ].values, function( value_dict ) {\n                for ( var key in array ) {\n                    array[ key ].push( String( value_dict[ key ] ) );\n                }\n            });\n        }\n        mapCategories( array, groups );\n        return { array : array }\n    };\n\n    /** Apply default mapping index all values contained in label columns (for all groups) */\n    function mapCategories( array, groups ) {\n        _.each( groups, function( group ) {\n            _.each( group.values, function( value_dict, i ) {\n                for ( var key in array ) {\n                    value_dict[ key ] = parseInt( i )\n                }\n            });\n        });\n    };\n\n    /** Category make for unique category labels */\n    function makeUniqueCategories( groups, with_index ) {\n        var categories  = {};\n        var array       = {};\n        var counter     = {};\n        var data_columns = groups[ 0 ].__data_columns;\n        _.each( data_columns, function( column_def, key ) {\n            if ( column_def.is_label ) {\n                categories[ key ] = {};\n                array[ key ]      = [];\n                counter[ key ]    = 0;\n            }\n        });\n        // index all values contained in label columns (for all groups)\n        for ( var i in groups ) {\n            var group = groups[ i ];\n            for ( var j in group.values ) {\n                var value_dict = group.values[ j ];\n                for ( var key in categories ) {\n                    var value = String( value_dict[ key ] );\n                    if ( categories[ key ][ value ] === undefined ) {\n                        categories[ key ][ value ] = counter[ key ];\n                        array[ key ].push( with_index ? [counter[key], value] : value );\n                        counter[ key ]++;\n                    }\n                }\n            }\n        }\n        // convert group values into category indeces\n        for ( var i in groups ) {\n            var group = groups[ i ];\n            for ( var j in group.values ) {\n                var value_dict = group.values[ j ];\n                for ( var key in categories ) {\n                    var value = String( value_dict[ key ] );\n                    value_dict[ key ] = categories[ key ][ value ];\n                }\n            }\n        }\n        return {\n            categories  : categories,\n            array       : array,\n            counter     : counter\n        }\n    };\n\n    /** Make axis */\n    function makeTickFormat ( options ) {\n        var type        = options.type;\n        var precision   = options.precision;\n        var categories  = options.categories;\n        var formatter   = options.formatter;\n        if ( type == 'hide' ) {\n            formatter( function() { return '' } );\n        } else if ( type == 'auto' ) {\n            if ( categories ) {\n                formatter( function( value ) { return categories[ value ] || '' } );\n            }\n        } else {\n            var d3format = function( d ) {\n                switch ( type ) {\n                    case 's':\n                        var prefix = d3.formatPrefix( d );\n                        return prefix.scale( d ).toFixed() + prefix.symbol;\n                    default :\n                        return d3.format( '.' + precision + type )( d );\n                }\n            };\n            if ( categories ) {\n                formatter( function( value ) {\n                    var label = categories[ value ];\n                    if ( label ) {\n                        if ( isNaN( label ) ) {\n                            return label;\n                        } else {\n                            try {\n                                return d3format( label );\n                            } catch ( err ) {\n                                return label;\n                            }\n                        }\n                    } else {\n                        return '';\n                    }\n                });\n            } else {\n                formatter( function( value ) { return d3format( value ) } );\n            }\n        }\n    };\n\n    /** Add zoom handler */\n    function addZoom( options ) {\n        var scaleExtent = 100;\n        var yAxis       = options.yAxis;\n        var xAxis       = options.xAxis;\n        var xDomain     = options.xDomain || xAxis.scale().domain;\n        var yDomain     = options.yDomain || yAxis.scale().domain;\n        var redraw      = options.redraw;\n        var svg         = options.svg;\n        var xScale      = xAxis.scale();\n        var yScale      = yAxis.scale();\n        var x_boundary  = xScale.domain().slice();\n        var y_boundary  = yScale.domain().slice();\n        var d3zoom      = d3.behavior.zoom();\n        xScale.nice();\n        yScale.nice();\n        function fixDomain( domain, boundary ) {\n            domain[ 0 ] = Math.min( Math.max( domain[ 0 ], boundary[ 0 ] ), boundary[ 1 ] - boundary[ 1 ]/scaleExtent );\n            domain[ 1 ] = Math.max( boundary[ 0 ] + boundary[ 1 ] / scaleExtent, Math.min( domain[ 1 ], boundary[ 1 ] ) );\n            return domain;\n        };\n        function zoomed() {\n            yDomain( fixDomain( yScale.domain(), y_boundary ) );\n            xDomain( fixDomain( xScale.domain(), x_boundary ) );\n            redraw();\n        };\n        function unzoomed() {\n            xDomain( x_boundary );\n            yDomain( y_boundary );\n            redraw();\n            d3zoom.scale( 1 );\n            d3zoom.translate( [ 0 , 0 ] );\n        };\n        d3zoom.x( xScale )\n              .y( yScale )\n              .scaleExtent( [ 1, scaleExtent ] )\n              .on( 'zoom', zoomed );\n        svg.call( d3zoom ).on( 'dblclick.zoom', unzoomed );\n        return d3zoom;\n    };\n\n    return {\n        buildJobDictionary      : buildJobDictionary,\n        panelHelper             : panelHelper,\n        makeCategories          : makeCategories,\n        makeUniqueCategories    : makeUniqueCategories,\n        makeSeries              : makeSeries,\n        getDomains              : getDomains,\n        mapCategories           : mapCategories,\n        makeTickFormat          : makeTickFormat,\n        addZoom                 : addZoom\n    }\n\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/visualizations/utilities/tabular-utilities.js\n ** module id = 4\n ** module chunks = 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 21 22 24\n **/","/** This class handles, formats and caches datasets. */\ndefine( [ 'utilities/utils' ], function( Utils ) {\n    /** Fills request dictionary with data from cache/response */\n    var _cache = {};\n    var request = function( options ) {\n        var groups      = options.dataset_groups;\n        var dataset_id  = options.dataset_id;\n        // identify columns needed to fulfill request\n        var column_list = [];\n        groups.each( function( group ) {\n            _.each( group.get( '__data_columns' ), function( column_def, column_name ) {\n                var column = group.get( column_name );\n                var block_id = _block_id( dataset_id, column );\n                if ( column_list.indexOf( column ) === -1 && !_cache[ block_id ] && column != 'auto' && column != 'zero' && column !== undefined ) {\n                    column_list.push( column );\n                }\n            });\n        });\n        if ( column_list.length == 0 ) {\n            _fillFromCache( options );\n            return;\n        }\n        // Fetch data columns into dataset object\n        Utils.get({\n            url     : Galaxy.root + 'api/datasets/' + dataset_id,\n            data    : {\n                data_type   : 'raw_data',\n                provider    : 'dataset-column',\n                indeces     : column_list.toString()\n            },\n            success : function( response ) {\n                var results = new Array( column_list.length );\n                for ( var i = 0; i < results.length; i++ ) {\n                    results[ i ] = [];\n                }\n                for ( var i in response.data ) {\n                    var row = response.data[ i ];\n                    for ( var j in row ) {\n                        var v = row[ j ];\n                        if ( v !== undefined && v != 2147483647 ) {\n                            results[ j ].push( v );\n                        }\n                    }\n                }\n                console.debug( 'tabular-datasets::_fetch() - Fetching complete.' );\n                for ( var i in results ) {\n                    var column = column_list[ i ];\n                    var block_id = _block_id( dataset_id, column );\n                    _cache[ block_id ] = results[ i ];\n                }\n                _fillFromCache( options );\n            }\n        });\n    };\n\n    /** Fill data from cache */\n    var _fillFromCache = function( options ) {\n        var groups      = options.dataset_groups;\n        var dataset_id  = options.dataset_id;\n        console.debug( 'tabular-datasets::_fillFromCache() - Filling request from cache.' );\n        var limit = 0;\n        groups.each( function( group ) {\n            _.each( group.get( '__data_columns' ), function( column_def, column_name ) {\n                var column = group.get( column_name );\n                var block_id = _block_id( dataset_id, column );\n                var column_data = _cache[ block_id ];\n                if ( column_data ) {\n                    limit = Math.max( limit, column_data.length );\n                }\n            });\n        });\n        if ( limit == 0 ) {\n            console.debug( 'tabular-datasets::_fillFromCache() - No data available.' );\n        }\n        var results = [];\n        groups.each( function( group, group_index ) {\n            var dict = Utils.merge( { key: ( group_index ) + ':' + group.get( 'key' ), values: [] }, group.attributes );\n            for ( var j = 0; j < limit; j++ ) {\n                dict.values[ j ] = { x : parseInt( j ) };\n            }\n            results.push( dict );\n        });\n        groups.each( function( group, group_index ) {\n            var values = results[ group_index ].values;\n            _.each( group.get( '__data_columns' ), function( column_def, column_name ) {\n                var column = group.get( column_name );\n                switch ( column ) {\n                    case 'auto':\n                        for ( var j = 0; j < limit; j++ ) {\n                            values[ j ][ column_name ] = parseInt( j );\n                        }\n                        break;\n                    case 'zero':\n                        for ( var j = 0; j < limit; j++ ) {\n                            values[ j ][ column_name ] = 0;\n                        }\n                        break;\n                    default:\n                        var block_id = _block_id( dataset_id, column );\n                        var column_data = _cache[ block_id ];\n                        for ( var j = 0; j < limit; j++ ) {\n                            var value = values[ j ];\n                            var v = column_data[ j ];\n                            if ( isNaN( v ) && !column_def.is_label ) {\n                                v = 0;\n                            }\n                            value[ column_name ] = v;\n                        }\n                }\n            });\n        });\n        options.success( results );\n    };\n\n    /** Get block id */\n    var _block_id = function ( dataset_id, column ) {\n        return dataset_id + '_' + '_' + column;\n    };\n\n    return { request: request };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/visualizations/utilities/tabular-datasets.js\n ** module id = 5\n ** module chunks = 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 24\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 6\n ** module chunks = 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 7\n ** module chunks = 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20\n **/","exports = module.exports = require(\"./../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".chartWrap{margin:0;padding:0;overflow:hidden}.nvtooltip.with-3d-shadow,.with-3d-shadow .nvtooltip{box-shadow:0 5px 10px rgba(0,0,0,.2);border-radius:6px}.nvtooltip{position:absolute;background-color:#fff;padding:1px;border:1px solid rgba(0,0,0,.2);z-index:10000;font-family:Arial;font-size:13px;text-align:left;pointer-events:none;white-space:nowrap;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nvtooltip.with-transitions,.with-transitions .nvtooltip{transition:opacity .25s linear;-moz-transition:opacity .25s linear;-webkit-transition:opacity .25s linear;transition-delay:.25s;-moz-transition-delay:.25s;-webkit-transition-delay:.25s}.nvtooltip.x-nvtooltip,.nvtooltip.y-nvtooltip{padding:8px}.nvtooltip h3{margin:0;padding:4px 14px;line-height:18px;font-weight:400;background-color:hsla(0,0%,97%,.75);text-align:center;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.nvtooltip p{margin:0;padding:5px 14px;text-align:center}.nvtooltip span{display:inline-block;margin:2px 0}.nvtooltip table{margin:6px;border-spacing:0}.nvtooltip table td{padding:2px 9px 2px 0;vertical-align:middle}.nvtooltip table td.key{font-weight:400}.nvtooltip table td.value{text-align:right;font-weight:700}.nvtooltip table tr.highlight td{padding:1px 9px 1px 0;border-bottom-style:solid;border-bottom-width:1px;border-top-style:solid;border-top-width:1px}.nvtooltip table td.legend-color-guide div{width:8px;height:8px;vertical-align:middle}.nvtooltip .footer{padding:3px;text-align:center}.nvtooltip-pending-removal{position:absolute;pointer-events:none}svg{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;width:100%;height:100%}svg text{font:400 12px Arial}svg .title{font:700 14px Arial}.nvd3 .nv-background{fill:#fff;fill-opacity:0}.nvd3.nv-noData{font-size:18px;font-weight:700}.nv-brush .extent{fill-opacity:.125;shape-rendering:crispEdges}.nvd3 .nv-legend .nv-series{cursor:pointer}.nvd3 .nv-legend .disabled circle{fill-opacity:0}.nvd3 .nv-axis{pointer-events:none}.nvd3 .nv-axis path{fill:none;stroke:#000;stroke-opacity:.75;shape-rendering:crispEdges}.nvd3 .nv-axis path.domain{stroke-opacity:.75}.nvd3 .nv-axis.nv-x path.domain{stroke-opacity:0}.nvd3 .nv-axis text{font-size:11px}.nv-axis line{fill:none;stroke:#e5e5e5;shape-rendering:crispEdges}.nvd3 .nv-axis .zero line,.nvd3 .nv-axis line.zero{stroke-opacity:.75}.nvd3 .nv-axis .nv-axisMaxMin text{font-weight:700}.nvd3 .x2 .nv-axis .nv-axisMaxMin text,.nvd3 .x3 .nv-axis .nv-axisMaxMin text,.nvd3 .x .nv-axis .nv-axisMaxMin text{text-anchor:middle}.nv-brush .resize path{fill:#eee;stroke:#666}.nvd3 .nv-bars .negative rect{zfill:brown}.nvd3 .nv-bars rect{zfill:#4682b4;fill-opacity:.75;transition:fill-opacity .25s linear;-moz-transition:fill-opacity .25s linear;-webkit-transition:fill-opacity .25s linear}.nvd3 .nv-bars rect.hover{fill-opacity:1}.nvd3 .nv-bars .hover rect{fill:#add8e6}.nvd3 .nv-bars text{fill:transparent}.nvd3 .nv-bars .hover text{fill:#000}.nvd3 .nv-discretebar .nv-groups rect,.nvd3 .nv-multibar .nv-groups rect,.nvd3 .nv-multibarHorizontal .nv-groups rect{stroke-opacity:0;transition:fill-opacity .25s linear;-moz-transition:fill-opacity .25s linear;-webkit-transition:fill-opacity .25s linear}.nvd3 .nv-discretebar .nv-groups rect:hover,.nvd3 .nv-multibar .nv-groups rect:hover,.nvd3 .nv-multibarHorizontal .nv-groups rect:hover{fill-opacity:1}.nvd3 .nv-discretebar .nv-groups text,.nvd3 .nv-multibarHorizontal .nv-groups text{font-weight:700;fill:#000;stroke:transparent}.nvd3.nv-pie path{stroke-opacity:0;transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear;-moz-transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear;-webkit-transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-pie .nv-slice text{stroke:#000;stroke-width:0}.nvd3.nv-pie path{stroke:#fff;stroke-width:1px;stroke-opacity:1}.nvd3.nv-pie .hover path{fill-opacity:.7}.nvd3.nv-pie .nv-label{pointer-events:none}.nvd3.nv-pie .nv-label rect{fill-opacity:0;stroke-opacity:0}.nvd3 .nv-groups path.nv-line{fill:none;stroke-width:1.5px}.nvd3 .nv-groups path.nv-line.nv-thin-line{stroke-width:1px}.nvd3 .nv-groups path.nv-area{stroke:none}.nvd3 .nv-line.hover path{stroke-width:6px}.nvd3.nv-line .nvd3.nv-scatter .nv-groups .nv-point{fill-opacity:0;stroke-opacity:0}.nvd3.nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:.5!important;stroke-opacity:.5!important}.with-transitions .nvd3 .nv-groups .nv-point{transition:stroke-width .25s linear,stroke-opacity .25s linear;-moz-transition:stroke-width .25s linear,stroke-opacity .25s linear;-webkit-transition:stroke-width .25s linear,stroke-opacity .25s linear}.nvd3 .nv-groups .nv-point.hover,.nvd3.nv-scatter .nv-groups .nv-point.hover{stroke-width:7px;fill-opacity:.95!important;stroke-opacity:.95!important}.nvd3 .nv-point-paths path{stroke:#aaa;stroke-opacity:0;fill:#eee;fill-opacity:0}.nvd3 .nv-indexLine{cursor:ew-resize}.nvd3 .nv-distribution{pointer-events:none}.nvd3 .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nvd3 .nv-scatter .nv-point.hover{fill-opacity:1}.nvd3.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0;transition:fill-opacity .25s linear,stroke-opacity .25s linear;-moz-transition:fill-opacity .25s linear,stroke-opacity .25s linear;-webkit-transition:fill-opacity .25s linear,stroke-opacity .25s linear}.nvd3.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nvd3.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nvd3.nv-linePlusBar .nv-bar rect{fill-opacity:.75}.nvd3.nv-linePlusBar .nv-bar rect:hover{fill-opacity:1}.nvd3.nv-bullet{font:10px sans-serif}.nvd3.nv-bullet .nv-measure{fill-opacity:.8}.nvd3.nv-bullet .nv-measure:hover{fill-opacity:1}.nvd3.nv-bullet .nv-marker{stroke:#000;stroke-width:2px}.nvd3.nv-bullet .nv-markerTriangle{stroke:#000;fill:#fff;stroke-width:1.5px}.nvd3.nv-bullet .nv-tick line{stroke:#666;stroke-width:.5px}.nvd3.nv-bullet .nv-range.nv-s0{fill:#eee}.nvd3.nv-bullet .nv-range.nv-s1{fill:#ddd}.nvd3.nv-bullet .nv-range.nv-s2{fill:#ccc}.nvd3.nv-bullet .nv-title{font-size:14px;font-weight:700}.nvd3.nv-bullet .nv-subtitle{fill:#999}.nvd3.nv-bullet .nv-range{fill:#bababa;fill-opacity:.4}.nvd3.nv-bullet .nv-range:hover{fill-opacity:.7}.nvd3.nv-sparkline path{fill:none}.nvd3.nv-sparklineplus g.nv-hoverValue{pointer-events:none}.nvd3.nv-sparklineplus .nv-hoverValue line{stroke:#333;stroke-width:1.5px}.nvd3.nv-sparklineplus,.nvd3.nv-sparklineplus g{pointer-events:all}.nvd3 .nv-hoverArea{fill-opacity:0;stroke-opacity:0}.nvd3.nv-sparklineplus .nv-xValue,.nvd3.nv-sparklineplus .nv-yValue{stroke-width:0;font-size:.9em;font-weight:400}.nvd3.nv-sparklineplus .nv-yValue{stroke:#f66}.nvd3.nv-sparklineplus .nv-maxValue{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-sparklineplus .nv-minValue{stroke:#d62728;fill:#d62728}.nvd3.nv-sparklineplus .nv-currentValue{font-weight:700;font-size:1.1em}.nvd3.nv-ohlcBar .nv-ticks .nv-tick{stroke-width:2px}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.hover{stroke-width:4px}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.positive{stroke:#2ca02c}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.negative{stroke:#d62728}.nvd3.nv-historicalStockChart .nv-axis .nv-axislabel{font-weight:700}.nvd3.nv-historicalStockChart .nv-dragTarget{fill-opacity:0;stroke:none;cursor:move}.nvd3 .nv-brush .extent{fill-opacity:0!important}.nvd3 .nv-brushBackground rect{stroke:#000;stroke-width:.4;fill:#fff;fill-opacity:.7}.nvd3.nv-indentedtree .name{margin-left:5px}.nvd3.nv-indentedtree .clickable{color:#08c;cursor:pointer}.nvd3.nv-indentedtree span.clickable:hover{color:#005580;text-decoration:underline}.nvd3.nv-indentedtree .nv-childrenCount{display:inline-block;margin-left:5px}.nvd3.nv-indentedtree .nv-treeicon,.nvd3.nv-indentedtree .nv-treeicon.nv-folded{cursor:pointer}.nvd3 .background path{fill:none;stroke:#ccc;stroke-opacity:.4;shape-rendering:crispEdges}.nvd3 .foreground path{fill:none;stroke:#4682b4;stroke-opacity:.7}.nvd3 .brush .extent{fill-opacity:.3;stroke:#fff;shape-rendering:crispEdges}.axis path,.nvd3 .axis line{fill:none;stroke:#000;shape-rendering:crispEdges}.nvd3 .axis text{text-shadow:0 1px 0 #fff}.nvd3 .nv-interactiveGuideLine{pointer-events:none}.nvd3 line.nv-guideline{stroke:#ccc}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./static/repository/plugins/nvd3/nv.d3.css\n ** module id = 8\n ** module chunks = 7 8 9 10 11 12 13 14 15 16 17 18 19\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../../node_modules/css-loader/index.js!./nv.d3.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../../node_modules/css-loader/index.js!./nv.d3.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../../../node_modules/css-loader/index.js!./nv.d3.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./static/repository/plugins/nvd3/nv.d3.css\n ** module id = 9\n ** module chunks = 7 8 9 10 11 12 13 14 15 16 17 18 19\n **/","(function(){\n\nvar nv = window.nv || {};\n\n\nnv.version = '1.1.15b';\nnv.dev = true //set false when in production\n\nwindow.nv = nv;\n\nnv.tooltip = nv.tooltip || {}; // For the tooltip system\nnv.utils = nv.utils || {}; // Utility subsystem\nnv.models = nv.models || {}; //stores all the possible models/components\nnv.charts = {}; //stores all the ready to use charts\nnv.graphs = []; //stores all the graphs currently on the page\nnv.logs = {}; //stores some statistics and potential error messages\n\nnv.dispatch = d3.dispatch('render_start', 'render_end');\n\n// *************************************************************************\n//  Development render timers - disabled if dev = false\n\nif (nv.dev) {\n  nv.dispatch.on('render_start', function(e) {\n    nv.logs.startTime = +new Date();\n  });\n\n  nv.dispatch.on('render_end', function(e) {\n    nv.logs.endTime = +new Date();\n    nv.logs.totalTime = nv.logs.endTime - nv.logs.startTime;\n    nv.log('total', nv.logs.totalTime); // used for development, to keep track of graph generation times\n  });\n}\n\n// ********************************************\n//  Public Core NV functions\n\n// Logs all arguments, and returns the last so you can test things in place\n// Note: in IE8 console.log is an object not a function, and if modernizr is used\n// then calling Function.prototype.bind with with anything other than a function\n// causes a TypeError to be thrown.\nnv.log = function() {\n  if (nv.dev && console.log && console.log.apply)\n    console.log.apply(console, arguments)\n  else if (nv.dev && typeof console.log == \"function\" && Function.prototype.bind) {\n    var log = Function.prototype.bind.call(console.log, console);\n    log.apply(console, arguments);\n  }\n  return arguments[arguments.length - 1];\n};\n\n\nnv.render = function render(step) {\n  step = step || 1; // number of graphs to generate in each timeout loop\n\n  nv.render.active = true;\n  nv.dispatch.render_start();\n\n  setTimeout(function() {\n    var chart, graph;\n\n    for (var i = 0; i < step && (graph = nv.render.queue[i]); i++) {\n      chart = graph.generate();\n      if (typeof graph.callback == typeof(Function)) graph.callback(chart);\n      nv.graphs.push(chart);\n    }\n\n    nv.render.queue.splice(0, i);\n\n    if (nv.render.queue.length) setTimeout(arguments.callee, 0);\n    else {\n      nv.dispatch.render_end();\n      nv.render.active = false;\n    }\n  }, 0);\n};\n\nnv.render.active = false;\nnv.render.queue = [];\n\nnv.addGraph = function(obj) {\n  if (typeof arguments[0] === typeof(Function))\n    obj = {generate: arguments[0], callback: arguments[1]};\n\n  nv.render.queue.push(obj);\n\n  if (!nv.render.active) nv.render();\n};\n\nnv.identity = function(d) { return d; };\n\nnv.strip = function(s) { return s.replace(/(\\s|&)/g,''); };\n\nfunction daysInMonth(month,year) {\n  return (new Date(year, month+1, 0)).getDate();\n}\n\nfunction d3_time_range(floor, step, number) {\n  return function(t0, t1, dt) {\n    var time = floor(t0), times = [];\n    if (time < t0) step(time);\n    if (dt > 1) {\n      while (time < t1) {\n        var date = new Date(+time);\n        if ((number(date) % dt === 0)) times.push(date);\n        step(time);\n      }\n    } else {\n      while (time < t1) { times.push(new Date(+time)); step(time); }\n    }\n    return times;\n  };\n}\n\nd3.time.monthEnd = function(date) {\n  return new Date(date.getFullYear(), date.getMonth(), 0);\n};\n\nd3.time.monthEnds = d3_time_range(d3.time.monthEnd, function(date) {\n    date.setUTCDate(date.getUTCDate() + 1);\n    date.setDate(daysInMonth(date.getMonth() + 1, date.getFullYear()));\n  }, function(date) {\n    return date.getMonth();\n  }\n);\n\n/* Utility class to handle creation of an interactive layer.\nThis places a rectangle on top of the chart. When you mouse move over it, it sends a dispatch\ncontaining the X-coordinate. It can also render a vertical line where the mouse is located.\n\ndispatch.elementMousemove is the important event to latch onto.  It is fired whenever the mouse moves over\nthe rectangle. The dispatch is given one object which contains the mouseX/Y location.\nIt also has 'pointXValue', which is the conversion of mouseX to the x-axis scale.\n*/\nnv.interactiveGuideline = function() {\n\t\"use strict\";\n\tvar tooltip = nv.models.tooltip();\n\t//Public settings\n\tvar width = null\n\t, height = null\n    //Please pass in the bounding chart's top and left margins\n    //This is important for calculating the correct mouseX/Y positions.\n\t, margin = {left: 0, top: 0}\n\t, xScale = d3.scale.linear()\n\t, yScale = d3.scale.linear()\n\t, dispatch = d3.dispatch('elementMousemove', 'elementMouseout','elementDblclick')\n\t, showGuideLine = true\n\t, svgContainer = null  \n    //Must pass in the bounding chart's <svg> container.\n    //The mousemove event is attached to this container.\n\t;\n\n\t//Private variables\n\tvar isMSIE = navigator.userAgent.indexOf(\"MSIE\") !== -1  //Check user-agent for Microsoft Internet Explorer.\n\t;\n\n\n\tfunction layer(selection) {\n\t\tselection.each(function(data) {\n\t\t\t\tvar container = d3.select(this);\n\t\t\t\t\n\t\t\t\tvar availableWidth = (width || 960), availableHeight = (height || 400);\n\n\t\t\t\tvar wrap = container.selectAll(\"g.nv-wrap.nv-interactiveLineLayer\").data([data]);\n\t\t\t\tvar wrapEnter = wrap.enter()\n\t\t\t\t\t\t\t\t.append(\"g\").attr(\"class\", \" nv-wrap nv-interactiveLineLayer\");\n\t\t\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t\twrapEnter.append(\"g\").attr(\"class\",\"nv-interactiveGuideLine\");\n\t\t\t\t\n\t\t\t\tif (!svgContainer) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n                function mouseHandler() {\n                      var d3mouse = d3.mouse(this);\n                      var mouseX = d3mouse[0];\n                      var mouseY = d3mouse[1];\n                      var subtractMargin = true;\n                      var mouseOutAnyReason = false;\n                      if (isMSIE) {\n                         /*\n                            D3.js (or maybe SVG.getScreenCTM) has a nasty bug in Internet Explorer 10.\n                            d3.mouse() returns incorrect X,Y mouse coordinates when mouse moving\n                            over a rect in IE 10.\n                            However, d3.event.offsetX/Y also returns the mouse coordinates\n                            relative to the triggering <rect>. So we use offsetX/Y on IE.  \n                         */\n                         mouseX = d3.event.offsetX;\n                         mouseY = d3.event.offsetY;\n\n                         /*\n                            On IE, if you attach a mouse event listener to the <svg> container,\n                            it will actually trigger it for all the child elements (like <path>, <circle>, etc).\n                            When this happens on IE, the offsetX/Y is set to where ever the child element\n                            is located.\n                            As a result, we do NOT need to subtract margins to figure out the mouse X/Y\n                            position under this scenario. Removing the line below *will* cause \n                            the interactive layer to not work right on IE.\n                         */\n                         if(d3.event.target.tagName !== \"svg\")\n                            subtractMargin = false;\n\n                         if (d3.event.target.className.baseVal.match(\"nv-legend\"))\n                         \tmouseOutAnyReason = true;\n                          \n                      }\n\n                      if(subtractMargin) {\n                         mouseX -= margin.left;\n                         mouseY -= margin.top;\n                      }\n\n                      /* If mouseX/Y is outside of the chart's bounds,\n                      trigger a mouseOut event.\n                      */\n                      if (mouseX < 0 || mouseY < 0 \n                        || mouseX > availableWidth || mouseY > availableHeight\n                        || (d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined)\n                        || mouseOutAnyReason\n                        ) \n                      {\n                      \t\tif (isMSIE) {\n                      \t\t\tif (d3.event.relatedTarget \n                      \t\t\t\t&& d3.event.relatedTarget.ownerSVGElement === undefined\n                      \t\t\t\t&& d3.event.relatedTarget.className.match(tooltip.nvPointerEventsClass)) {\n                      \t\t\t\treturn;\n                      \t\t\t}\n                      \t\t}\n                            dispatch.elementMouseout({\n                               mouseX: mouseX,\n                               mouseY: mouseY\n                            });\n                            layer.renderGuideLine(null); //hide the guideline\n                            return;\n                      }\n                      \n                      var pointXValue = xScale.invert(mouseX);\n                      dispatch.elementMousemove({\n                            mouseX: mouseX,\n                            mouseY: mouseY,\n                            pointXValue: pointXValue\n                      });\n\n                      //If user double clicks the layer, fire a elementDblclick dispatch.\n                      if (d3.event.type === \"dblclick\") {\n                        dispatch.elementDblclick({\n                            mouseX: mouseX,\n                            mouseY: mouseY,\n                            pointXValue: pointXValue\n                        });\n                      }\n                }\n\n\t\t\t\tsvgContainer\n\t\t\t\t      .on(\"mousemove\",mouseHandler, true)\n\t\t\t\t      .on(\"mouseout\" ,mouseHandler,true)\n                      .on(\"dblclick\" ,mouseHandler)\n\t\t\t\t      ;\n\n\t\t\t\t //Draws a vertical guideline at the given X postion.\n\t\t\t\tlayer.renderGuideLine = function(x) {\n\t\t\t\t \tif (!showGuideLine) return;\n\t\t\t\t \tvar line = wrap.select(\".nv-interactiveGuideLine\")\n\t\t\t\t \t      .selectAll(\"line\")\n\t\t\t\t \t      .data((x != null) ? [nv.utils.NaNtoZero(x)] : [], String);\n\n\t\t\t\t \tline.enter()\n\t\t\t\t \t\t.append(\"line\")\n\t\t\t\t \t\t.attr(\"class\", \"nv-guideline\")\n\t\t\t\t \t\t.attr(\"x1\", function(d) { return d;})\n\t\t\t\t \t\t.attr(\"x2\", function(d) { return d;})\n\t\t\t\t \t\t.attr(\"y1\", availableHeight)\n\t\t\t\t \t\t.attr(\"y2\",0)\n\t\t\t\t \t\t;\n\t\t\t\t \tline.exit().remove();\n\n\t\t\t\t}\n\t\t});\n\t}\n\n\tlayer.dispatch = dispatch;\n\tlayer.tooltip = tooltip;\n\n\tlayer.margin = function(_) {\n\t    if (!arguments.length) return margin;\n\t    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n\t    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n\t    return layer;\n    };\n\n\tlayer.width = function(_) {\n\t\tif (!arguments.length) return width;\n\t\twidth = _;\n\t\treturn layer;\n\t};\n\n\tlayer.height = function(_) {\n\t\tif (!arguments.length) return height;\n\t\theight = _;\n\t\treturn layer;\n\t};\n\n\tlayer.xScale = function(_) {\n\t\tif (!arguments.length) return xScale;\n\t\txScale = _;\n\t\treturn layer;\n\t};\n\n\tlayer.showGuideLine = function(_) {\n\t\tif (!arguments.length) return showGuideLine;\n\t\tshowGuideLine = _;\n\t\treturn layer;\n\t};\n\n\tlayer.svgContainer = function(_) {\n\t\tif (!arguments.length) return svgContainer;\n\t\tsvgContainer = _;\n\t\treturn layer;\n\t};\n\n\n\treturn layer;\n};\n\n/* Utility class that uses d3.bisect to find the index in a given array, where a search value can be inserted.\nThis is different from normal bisectLeft; this function finds the nearest index to insert the search value.\n\nFor instance, lets say your array is [1,2,3,5,10,30], and you search for 28. \nNormal d3.bisectLeft will return 4, because 28 is inserted after the number 10.  But interactiveBisect will return 5\nbecause 28 is closer to 30 than 10.\n\nUnit tests can be found in: interactiveBisectTest.html\n\nHas the following known issues:\n   * Will not work if the data points move backwards (ie, 10,9,8,7, etc) or if the data points are in random order.\n   * Won't work if there are duplicate x coordinate values.\n*/\nnv.interactiveBisect = function (values, searchVal, xAccessor) {\n\t  \"use strict\";\n      if (! values instanceof Array) return null;\n      if (typeof xAccessor !== 'function') xAccessor = function(d,i) { return d.x;}\n\n      var bisect = d3.bisector(xAccessor).left;\n      var index = d3.max([0, bisect(values,searchVal) - 1]);\n      var currentValue = xAccessor(values[index], index);\n      if (typeof currentValue === 'undefined') currentValue = index;\n\n      if (currentValue === searchVal) return index;  //found exact match\n\n      var nextIndex = d3.min([index+1, values.length - 1]);\n      var nextValue = xAccessor(values[nextIndex], nextIndex);\n      if (typeof nextValue === 'undefined') nextValue = nextIndex;\n\n      if (Math.abs(nextValue - searchVal) >= Math.abs(currentValue - searchVal))\n          return index;\n      else\n          return nextIndex\n};\n\n/*\nReturns the index in the array \"values\" that is closest to searchVal.\nOnly returns an index if searchVal is within some \"threshold\".\nOtherwise, returns null.\n*/\nnv.nearestValueIndex = function (values, searchVal, threshold) {\n      \"use strict\";\n      var yDistMax = Infinity, indexToHighlight = null;\n      values.forEach(function(d,i) {\n         var delta = Math.abs(searchVal - d);\n         if ( delta <= yDistMax && delta < threshold) {\n            yDistMax = delta;\n            indexToHighlight = i;\n         }\n      });\n      return indexToHighlight;\n};/* Tooltip rendering model for nvd3 charts.\nwindow.nv.models.tooltip is the updated,new way to render tooltips.\n\nwindow.nv.tooltip.show is the old tooltip code.\nwindow.nv.tooltip.* also has various helper methods.\n*/\n(function() {\n  \"use strict\";\n  window.nv.tooltip = {};\n\n  /* Model which can be instantiated to handle tooltip rendering.\n    Example usage: \n    var tip = nv.models.tooltip().gravity('w').distance(23)\n                .data(myDataObject);\n\n        tip();    //just invoke the returned function to render tooltip.\n  */\n  window.nv.models.tooltip = function() {\n        var content = null    //HTML contents of the tooltip.  If null, the content is generated via the data variable.\n        ,   data = null     /* Tooltip data. If data is given in the proper format, a consistent tooltip is generated.\n        Format of data:\n        {\n            key: \"Date\",\n            value: \"August 2009\", \n            series: [\n                    {\n                        key: \"Series 1\",\n                        value: \"Value 1\",\n                        color: \"#000\"\n                    },\n                    {\n                        key: \"Series 2\",\n                        value: \"Value 2\",\n                        color: \"#00f\"\n                    }\n            ]\n\n        }\n\n        */\n        ,   gravity = 'w'   //Can be 'n','s','e','w'. Determines how tooltip is positioned.\n        ,   distance = 50   //Distance to offset tooltip from the mouse location.\n        ,   snapDistance = 25   //Tolerance allowed before tooltip is moved from its current position (creates 'snapping' effect)\n        ,   fixedTop = null //If not null, this fixes the top position of the tooltip.\n        ,   classes = null  //Attaches additional CSS classes to the tooltip DIV that is created.\n        ,   chartContainer = null   //Parent DIV, of the SVG Container that holds the chart.\n        ,   tooltipElem = null  //actual DOM element representing the tooltip.\n        ,   position = {left: null, top: null}      //Relative position of the tooltip inside chartContainer.\n        ,   enabled = true  //True -> tooltips are rendered. False -> don't render tooltips.\n        //Generates a unique id when you create a new tooltip() object\n        ,   id = \"nvtooltip-\" + Math.floor(Math.random() * 100000)\n        ;\n\n        //CSS class to specify whether element should not have mouse events.\n        var  nvPointerEventsClass = \"nv-pointer-events-none\";\n\n        //Format function for the tooltip values column\n        var valueFormatter = function(d,i) {\n            return d;\n        };\n\n        //Format function for the tooltip header value.\n        var headerFormatter = function(d) {\n            return d;\n        };\n\n        //By default, the tooltip model renders a beautiful table inside a DIV.\n        //You can override this function if a custom tooltip is desired.\n        var contentGenerator = function(d) {\n            if (content != null) return content;\n\n            if (d == null) return '';\n\n            var table = d3.select(document.createElement(\"table\"));\n            var theadEnter = table.selectAll(\"thead\")\n                .data([d])\n                .enter().append(\"thead\");\n            theadEnter.append(\"tr\")\n                .append(\"td\")\n                .attr(\"colspan\",3)\n                .append(\"strong\")\n                    .classed(\"x-value\",true)\n                    .html(headerFormatter(d.value));\n\n            var tbodyEnter = table.selectAll(\"tbody\")\n                .data([d])\n                .enter().append(\"tbody\");\n            var trowEnter = tbodyEnter.selectAll(\"tr\")\n                .data(function(p) { return p.series})\n                .enter()\n                .append(\"tr\")\n                .classed(\"highlight\", function(p) { return p.highlight})\n                ;\n\n            trowEnter.append(\"td\")\n                .classed(\"legend-color-guide\",true)\n                .append(\"div\")\n                    .style(\"background-color\", function(p) { return p.color});\n            trowEnter.append(\"td\")\n                .classed(\"key\",true)\n                .html(function(p) {return p.key});\n            trowEnter.append(\"td\")\n                .classed(\"value\",true)\n                .html(function(p,i) { return valueFormatter(p.value,i) });\n\n\n            trowEnter.selectAll(\"td\").each(function(p) {\n                if (p.highlight) {\n                    var opacityScale = d3.scale.linear().domain([0,1]).range([\"#fff\",p.color]);\n                    var opacity = 0.6;\n                    d3.select(this)\n                        .style(\"border-bottom-color\", opacityScale(opacity))\n                        .style(\"border-top-color\", opacityScale(opacity))\n                        ;\n                }\n            });\n\n            var html = table.node().outerHTML;\n            if (d.footer !== undefined)\n                html += \"<div class='footer'>\" + d.footer + \"</div>\";\n            return html;\n\n        };\n\n        var dataSeriesExists = function(d) {\n            if (d && d.series && d.series.length > 0) return true;\n\n            return false;\n        };\n\n        //In situations where the chart is in a 'viewBox', re-position the tooltip based on how far chart is zoomed.\n        function convertViewBoxRatio() {\n            if (chartContainer) {\n              var svg = d3.select(chartContainer);\n              if (svg.node().tagName !== \"svg\") {\n                 svg = svg.select(\"svg\");\n              }\n              var viewBox = (svg.node()) ? svg.attr('viewBox') : null;\n              if (viewBox) {\n                viewBox = viewBox.split(' ');\n                var ratio = parseInt(svg.style('width')) / viewBox[2];\n                \n                position.left = position.left * ratio;\n                position.top  = position.top * ratio;\n              }\n            }\n        }\n\n        //Creates new tooltip container, or uses existing one on DOM.\n        function getTooltipContainer(newContent) {\n            var body;\n            if (chartContainer)\n                body = d3.select(chartContainer);\n            else\n                body = d3.select(\"body\");\n\n            var container = body.select(\".nvtooltip\");\n            if (container.node() === null) {\n                //Create new tooltip div if it doesn't exist on DOM.\n                container = body.append(\"div\")\n                    .attr(\"class\", \"nvtooltip \" + (classes? classes: \"xy-tooltip\"))\n                    .attr(\"id\",id)\n                    ;\n            }\n        \n\n            container.node().innerHTML = newContent;\n            container.style(\"top\",0).style(\"left\",0).style(\"opacity\",0);\n            container.selectAll(\"div, table, td, tr\").classed(nvPointerEventsClass,true)\n            container.classed(nvPointerEventsClass,true);\n            return container.node();\n        }\n\n        \n\n        //Draw the tooltip onto the DOM.\n        function nvtooltip() {\n            if (!enabled) return;\n            if (!dataSeriesExists(data)) return;\n\n            convertViewBoxRatio();\n\n            var left = position.left;\n            var top = (fixedTop != null) ? fixedTop : position.top;\n            var container = getTooltipContainer(contentGenerator(data));\n            tooltipElem = container;\n            if (chartContainer) {\n                var svgComp = chartContainer.getElementsByTagName(\"svg\")[0];\n                var boundRect = (svgComp) ? svgComp.getBoundingClientRect() : chartContainer.getBoundingClientRect();\n                var svgOffset = {left:0,top:0};\n                if (svgComp) {\n                    var svgBound = svgComp.getBoundingClientRect();\n                    var chartBound = chartContainer.getBoundingClientRect();\n                    var svgBoundTop = svgBound.top;\n                    \n                    //Defensive code. Sometimes, svgBoundTop can be a really negative\n                    //  number, like -134254. That's a bug. \n                    //  If such a number is found, use zero instead. FireFox bug only\n                    if (svgBoundTop < 0) {\n                        var containerBound = chartContainer.getBoundingClientRect();\n                        svgBoundTop = (Math.abs(svgBoundTop) > containerBound.height) ? 0 : svgBoundTop;\n                    } \n                    svgOffset.top = Math.abs(svgBoundTop - chartBound.top);\n                    svgOffset.left = Math.abs(svgBound.left - chartBound.left);\n                }\n                //If the parent container is an overflow <div> with scrollbars, subtract the scroll offsets.\n                //You need to also add any offset between the <svg> element and its containing <div>\n                //Finally, add any offset of the containing <div> on the whole page.\n                left += chartContainer.offsetLeft + svgOffset.left - 2*chartContainer.scrollLeft;\n                top += chartContainer.offsetTop + svgOffset.top - 2*chartContainer.scrollTop;\n            }\n\n            if (snapDistance && snapDistance > 0) {\n                top = Math.floor(top/snapDistance) * snapDistance;\n            }\n\n            nv.tooltip.calcTooltipPosition([left,top], gravity, distance, container);\n            return nvtooltip;\n        };\n\n        nvtooltip.nvPointerEventsClass = nvPointerEventsClass;\n        \n        nvtooltip.content = function(_) {\n            if (!arguments.length) return content;\n            content = _;\n            return nvtooltip;\n        };\n\n        //Returns tooltipElem...not able to set it.\n        nvtooltip.tooltipElem = function() {\n            return tooltipElem;\n        };\n\n        nvtooltip.contentGenerator = function(_) {\n            if (!arguments.length) return contentGenerator;\n            if (typeof _ === 'function') {\n                contentGenerator = _;\n            }\n            return nvtooltip;\n        };\n\n        nvtooltip.data = function(_) {\n            if (!arguments.length) return data;\n            data = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.gravity = function(_) {\n            if (!arguments.length) return gravity;\n            gravity = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.distance = function(_) {\n            if (!arguments.length) return distance;\n            distance = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.snapDistance = function(_) {\n            if (!arguments.length) return snapDistance;\n            snapDistance = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.classes = function(_) {\n            if (!arguments.length) return classes;\n            classes = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.chartContainer = function(_) {\n            if (!arguments.length) return chartContainer;\n            chartContainer = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.position = function(_) {\n            if (!arguments.length) return position;\n            position.left = (typeof _.left !== 'undefined') ? _.left : position.left;\n            position.top = (typeof _.top !== 'undefined') ? _.top : position.top;\n            return nvtooltip;\n        };\n\n        nvtooltip.fixedTop = function(_) {\n            if (!arguments.length) return fixedTop;\n            fixedTop = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.enabled = function(_) {\n            if (!arguments.length) return enabled;\n            enabled = _;\n            return nvtooltip;\n        };\n\n        nvtooltip.valueFormatter = function(_) {\n            if (!arguments.length) return valueFormatter;\n            if (typeof _ === 'function') {\n                valueFormatter = _;\n            }\n            return nvtooltip;\n        };\n\n        nvtooltip.headerFormatter = function(_) {\n            if (!arguments.length) return headerFormatter;\n            if (typeof _ === 'function') {\n                headerFormatter = _;\n            }\n            return nvtooltip;\n        };\n\n        //id() is a read-only function. You can't use it to set the id.\n        nvtooltip.id = function() {\n            return id;\n        };\n\n\n        return nvtooltip;\n  };\n\n\n  //Original tooltip.show function. Kept for backward compatibility.\n  // pos = [left,top]\n  nv.tooltip.show = function(pos, content, gravity, dist, parentContainer, classes) {\n      \n        //Create new tooltip div if it doesn't exist on DOM.\n        var   container = document.createElement('div');\n        container.className = 'nvtooltip ' + (classes ? classes : 'xy-tooltip');\n\n        var body = parentContainer;\n        if ( !parentContainer || parentContainer.tagName.match(/g|svg/i)) {\n            //If the parent element is an SVG element, place tooltip in the <body> element.\n            body = document.getElementsByTagName('body')[0];\n        }\n   \n        container.style.left = 0;\n        container.style.top = 0;\n        container.style.opacity = 0;\n        container.innerHTML = content;\n        body.appendChild(container);\n        \n        //If the parent container is an overflow <div> with scrollbars, subtract the scroll offsets.\n        if (parentContainer) {\n           pos[0] = pos[0] - parentContainer.scrollLeft;\n           pos[1] = pos[1] - parentContainer.scrollTop;\n        }\n        nv.tooltip.calcTooltipPosition(pos, gravity, dist, container);\n  };\n\n  //Looks up the ancestry of a DOM element, and returns the first NON-svg node.\n  nv.tooltip.findFirstNonSVGParent = function(Elem) {\n            while(Elem.tagName.match(/^g|svg$/i) !== null) {\n                Elem = Elem.parentNode;\n            }\n            return Elem;\n  };\n\n  //Finds the total offsetTop of a given DOM element.\n  //Looks up the entire ancestry of an element, up to the first relatively positioned element.\n  nv.tooltip.findTotalOffsetTop = function ( Elem, initialTop ) {\n                var offsetTop = initialTop;\n                \n                do {\n                    if( !isNaN( Elem.offsetTop ) ) {\n                        offsetTop += (Elem.offsetTop);\n                    }\n                } while( Elem = Elem.offsetParent );\n                return offsetTop;\n  };\n\n  //Finds the total offsetLeft of a given DOM element.\n  //Looks up the entire ancestry of an element, up to the first relatively positioned element.\n  nv.tooltip.findTotalOffsetLeft = function ( Elem, initialLeft) {\n                var offsetLeft = initialLeft;\n                \n                do {\n                    if( !isNaN( Elem.offsetLeft ) ) {\n                        offsetLeft += (Elem.offsetLeft);\n                    }\n                } while( Elem = Elem.offsetParent );\n                return offsetLeft;\n  };\n\n  //Global utility function to render a tooltip on the DOM.\n  //pos = [left,top] coordinates of where to place the tooltip, relative to the SVG chart container.\n  //gravity = how to orient the tooltip\n  //dist = how far away from the mouse to place tooltip\n  //container = tooltip DIV\n  nv.tooltip.calcTooltipPosition = function(pos, gravity, dist, container) {\n\n            var height = parseInt(container.offsetHeight),\n                width = parseInt(container.offsetWidth),\n                windowWidth = nv.utils.windowSize().width,\n                windowHeight = nv.utils.windowSize().height,\n                scrollTop = window.pageYOffset,\n                scrollLeft = window.pageXOffset,\n                left, top;\n\n            windowHeight = window.innerWidth >= document.body.scrollWidth ? windowHeight : windowHeight - 16;\n            windowWidth = window.innerHeight >= document.body.scrollHeight ? windowWidth : windowWidth - 16;\n\n            gravity = gravity || 's';\n            dist = dist || 20;\n\n            var tooltipTop = function ( Elem ) {\n                return nv.tooltip.findTotalOffsetTop(Elem, top);\n            };\n\n            var tooltipLeft = function ( Elem ) {\n                return nv.tooltip.findTotalOffsetLeft(Elem,left);\n            };\n\n            switch (gravity) {\n              case 'e':\n                left = pos[0] - width - dist;\n                top = pos[1] - (height / 2);\n                var tLeft = tooltipLeft(container);\n                var tTop = tooltipTop(container);\n                if (tLeft < scrollLeft) left = pos[0] + dist > scrollLeft ? pos[0] + dist : scrollLeft - tLeft + left;\n                if (tTop < scrollTop) top = scrollTop - tTop + top;\n                if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\n                break;\n              case 'w':\n                left = pos[0] + dist;\n                top = pos[1] - (height / 2);\n                var tLeft = tooltipLeft(container);\n                var tTop = tooltipTop(container);\n                if (tLeft + width > windowWidth) left = pos[0] - width - dist;\n                if (tTop < scrollTop) top = scrollTop + 5;\n                if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\n                break;\n              case 'n':\n                left = pos[0] - (width / 2) - 5;\n                top = pos[1] + dist;\n                var tLeft = tooltipLeft(container);\n                var tTop = tooltipTop(container);\n                if (tLeft < scrollLeft) left = scrollLeft + 5;\n                if (tLeft + width > windowWidth) left = left - width/2 + 5;\n                if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\n                break;\n              case 's':\n                left = pos[0] - (width / 2);\n                top = pos[1] - height - dist;\n                var tLeft = tooltipLeft(container);\n                var tTop = tooltipTop(container);\n                if (tLeft < scrollLeft) left = scrollLeft + 5;\n                if (tLeft + width > windowWidth) left = left - width/2 + 5;\n                if (scrollTop > tTop) top = scrollTop;\n                break;\n              case 'none':\n                left = pos[0];\n                top = pos[1] - dist;\n                var tLeft = tooltipLeft(container);\n                var tTop = tooltipTop(container);\n                break;\n            }\n\n\n            container.style.left = left+'px';\n            container.style.top = top+'px';\n            container.style.opacity = 1;\n            container.style.position = 'absolute'; \n\n            return container;\n    };\n\n    //Global utility function to remove tooltips from the DOM.\n    nv.tooltip.cleanup = function() {\n\n              // Find the tooltips, mark them for removal by this class (so others cleanups won't find it)\n              var tooltips = document.getElementsByClassName('nvtooltip');\n              var purging = [];\n              while(tooltips.length) {\n                purging.push(tooltips[0]);\n                tooltips[0].style.transitionDelay = '0 !important';\n                tooltips[0].style.opacity = 0;\n                tooltips[0].className = 'nvtooltip-pending-removal';\n              }\n\n              setTimeout(function() {\n\n                  while (purging.length) {\n                     var removeMe = purging.pop();\n                      removeMe.parentNode.removeChild(removeMe);\n                  }\n            }, 500);\n    };\n\n})();\n\nnv.utils.windowSize = function() {\n    // Sane defaults\n    var size = {width: 640, height: 480};\n\n    // Earlier IE uses Doc.body\n    if (document.body && document.body.offsetWidth) {\n        size.width = document.body.offsetWidth;\n        size.height = document.body.offsetHeight;\n    }\n\n    // IE can use depending on mode it is in\n    if (document.compatMode=='CSS1Compat' &&\n        document.documentElement &&\n        document.documentElement.offsetWidth ) {\n        size.width = document.documentElement.offsetWidth;\n        size.height = document.documentElement.offsetHeight;\n    }\n\n    // Most recent browsers use\n    if (window.innerWidth && window.innerHeight) {\n        size.width = window.innerWidth;\n        size.height = window.innerHeight;\n    }\n    return (size);\n};\n\n\n\n// Easy way to bind multiple functions to window.onresize\n// TODO: give a way to remove a function after its bound, other than removing all of them\nnv.utils.windowResize = function(fun){\n  if (fun === undefined) return;\n  var oldresize = window.onresize;\n\n  window.onresize = function(e) {\n    if (typeof oldresize == 'function') oldresize(e);\n    fun(e);\n  }\n}\n\n// Backwards compatible way to implement more d3-like coloring of graphs.\n// If passed an array, wrap it in a function which implements the old default\n// behavior\nnv.utils.getColor = function(color) {\n    if (!arguments.length) return nv.utils.defaultColor(); //if you pass in nothing, get default colors back\n\n    if( Object.prototype.toString.call( color ) === '[object Array]' )\n        return function(d, i) { return d.color || color[i % color.length]; };\n    else\n        return color;\n        //can't really help it if someone passes rubbish as color\n}\n\n// Default color chooser uses the index of an object as before.\nnv.utils.defaultColor = function() {\n    var colors = d3.scale.category20().range();\n    return function(d, i) { return d.color || colors[i % colors.length] };\n}\n\n\n// Returns a color function that takes the result of 'getKey' for each series and\n// looks for a corresponding color from the dictionary,\nnv.utils.customTheme = function(dictionary, getKey, defaultColors) {\n  getKey = getKey || function(series) { return series.key }; // use default series.key if getKey is undefined\n  defaultColors = defaultColors || d3.scale.category20().range(); //default color function\n\n  var defIndex = defaultColors.length; //current default color (going in reverse)\n\n  return function(series, index) {\n    var key = getKey(series);\n\n    if (!defIndex) defIndex = defaultColors.length; //used all the default colors, start over\n\n    if (typeof dictionary[key] !== \"undefined\")\n      return (typeof dictionary[key] === \"function\") ? dictionary[key]() : dictionary[key];\n    else\n      return defaultColors[--defIndex]; // no match in dictionary, use default color\n  }\n}\n\n\n\n// From the PJAX example on d3js.org, while this is not really directly needed\n// it's a very cool method for doing pjax, I may expand upon it a little bit,\n// open to suggestions on anything that may be useful\nnv.utils.pjax = function(links, content) {\n  d3.selectAll(links).on(\"click\", function() {\n    history.pushState(this.href, this.textContent, this.href);\n    load(this.href);\n    d3.event.preventDefault();\n  });\n\n  function load(href) {\n    d3.html(href, function(fragment) {\n      var target = d3.select(content).node();\n      target.parentNode.replaceChild(d3.select(fragment).select(content).node(), target);\n      nv.utils.pjax(links, content);\n    });\n  }\n\n  d3.select(window).on(\"popstate\", function() {\n    if (d3.event.state) load(d3.event.state);\n  });\n}\n\n/* For situations where we want to approximate the width in pixels for an SVG:text element.\nMost common instance is when the element is in a display:none; container.\nForumla is : text.length * font-size * constant_factor\n*/\nnv.utils.calcApproxTextWidth = function (svgTextElem) {\n    if (typeof svgTextElem.style === 'function'\n        && typeof svgTextElem.text === 'function') {\n        var fontSize = parseInt(svgTextElem.style(\"font-size\").replace(\"px\",\"\"));\n        var textLength = svgTextElem.text().length;\n\n        return textLength * fontSize * 0.5;\n    }\n    return 0;\n};\n\n/* Numbers that are undefined, null or NaN, convert them to zeros.\n*/\nnv.utils.NaNtoZero = function(n) {\n    if (typeof n !== 'number'\n        || isNaN(n)\n        || n === null\n        || n === Infinity) return 0;\n\n    return n;\n};\n\n/*\nSnippet of code you can insert into each nv.models.* to give you the ability to\ndo things like:\nchart.options({\n  showXAxis: true,\n  tooltips: true\n});\n\nTo enable in the chart:\nchart.options = nv.utils.optionsFunc.bind(chart);\n*/\nnv.utils.optionsFunc = function(args) {\n    if (args) {\n      d3.map(args).forEach((function(key,value) {\n        if (typeof this[key] === \"function\") {\n           this[key](value);\n        }\n      }).bind(this));\n    }\n    return this;\n};nv.models.axis = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var axis = d3.svg.axis()\n    ;\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 75 //only used for tickLabel currently\n    , height = 60 //only used for tickLabel currently\n    , scale = d3.scale.linear()\n    , axisLabelText = null\n    , showMaxMin = true //TODO: showMaxMin should be disabled on all ordinal scaled axes\n    , highlightZero = true\n    , rotateLabels = 0\n    , rotateYLabel = true\n    , staggerLabels = false\n    , isOrdinal = false\n    , ticks = null\n    , axisLabelDistance = 12 //The larger this number is, the closer the axis label is to the axis.\n    ;\n\n  axis\n    .scale(scale)\n    .orient('bottom')\n    .tickFormat(function(d) { return d })\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var scale0;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-axis').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-axis');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g')\n\n      //------------------------------------------------------------\n\n\n      if (ticks !== null)\n        axis.ticks(ticks);\n      else if (axis.orient() == 'top' || axis.orient() == 'bottom')\n        axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100);\n\n\n      //TODO: consider calculating width/height based on whether or not label is added, for reference in charts using this component\n\n\n      g.call(axis);\n\n      scale0 = scale0 || axis.scale();\n\n      var fmt = axis.tickFormat();\n      if (fmt == null) {\n        fmt = scale0.tickFormat();\n      }\n\n      var axisLabel = g.selectAll('text.nv-axislabel')\n          .data([axisLabelText || null]);\n      axisLabel.exit().remove();\n      switch (axis.orient()) {\n        case 'top':\n          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n          var w = (scale.range().length==2) ? scale.range()[1] : (scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]));\n          axisLabel\n              .attr('text-anchor', 'middle')\n              .attr('y', 0)\n              .attr('x', w/2);\n          if (showMaxMin) {\n            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                           .data(scale.domain());\n            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text');\n            axisMaxMin.exit().remove();\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(' + scale(d) + ',0)'\n                })\n              .select('text')\n                .attr('dy', '-0.5em')\n                .attr('y', -axis.tickPadding())\n                .attr('text-anchor', 'middle')\n                .text(function(d,i) {\n                  var v = fmt(d);\n                  return ('' + v).match('NaN') ? '' : v;\n                });\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(' + scale.range()[i] + ',0)'\n                });\n          }\n          break;\n        case 'bottom':\n          var xLabelMargin = 36;\n          var maxTextWidth = 30;\n          var xTicks = g.selectAll('g').select(\"text\");\n          if (rotateLabels%360) {\n            //Calculate the longest xTick width\n            xTicks.each(function(d,i){\n              var width = this.getBBox().width;\n              if(width > maxTextWidth) maxTextWidth = width;\n            });\n            //Convert to radians before calculating sin. Add 30 to margin for healthy padding.\n            var sin = Math.abs(Math.sin(rotateLabels*Math.PI/180));\n            var xLabelMargin = (sin ? sin*maxTextWidth : maxTextWidth)+30;\n            //Rotate all xTicks\n            xTicks\n              .attr('transform', function(d,i,j) { return 'rotate(' + rotateLabels + ' 0,0)' })\n              .style('text-anchor', rotateLabels%360 > 0 ? 'start' : 'end');\n          }\n          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n          var w = (scale.range().length==2) ? scale.range()[1] : (scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]));\n          axisLabel\n              .attr('text-anchor', 'middle')\n              .attr('y', xLabelMargin)\n              .attr('x', w/2);\n          if (showMaxMin) {\n          //if (showMaxMin && !isOrdinal) {\n            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                           //.data(scale.domain())\n                           .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);\n            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text');\n            axisMaxMin.exit().remove();\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(' + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)'\n                })\n              .select('text')\n                .attr('dy', '.71em')\n                .attr('y', axis.tickPadding())\n                .attr('transform', function(d,i,j) { return 'rotate(' + rotateLabels + ' 0,0)' })\n                .style('text-anchor', rotateLabels ? (rotateLabels%360 > 0 ? 'start' : 'end') : 'middle')\n                .text(function(d,i) {\n                  var v = fmt(d);\n                  return ('' + v).match('NaN') ? '' : v;\n                });\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  //return 'translate(' + scale.range()[i] + ',0)'\n                  //return 'translate(' + scale(d) + ',0)'\n                  return 'translate(' + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)'\n                });\n          }\n          if (staggerLabels)\n            xTicks\n                .attr('transform', function(d,i) { return 'translate(0,' + (i % 2 == 0 ? '0' : '12') + ')' });\n\n          break;\n        case 'right':\n          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n          axisLabel\n              .style('text-anchor', rotateYLabel ? 'middle' : 'begin')\n              .attr('transform', rotateYLabel ? 'rotate(90)' : '')\n              .attr('y', rotateYLabel ? (-Math.max(margin.right,width) + 12) : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\n              .attr('x', rotateYLabel ? (scale.range()[0] / 2) : axis.tickPadding());\n          if (showMaxMin) {\n            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                           .data(scale.domain());\n            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text')\n                .style('opacity', 0);\n            axisMaxMin.exit().remove();\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(0,' + scale(d) + ')'\n                })\n              .select('text')\n                .attr('dy', '.32em')\n                .attr('y', 0)\n                .attr('x', axis.tickPadding())\n                .style('text-anchor', 'start')\n                .text(function(d,i) {\n                  var v = fmt(d);\n                  return ('' + v).match('NaN') ? '' : v;\n                });\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(0,' + scale.range()[i] + ')'\n                })\n              .select('text')\n                .style('opacity', 1);\n          }\n          break;\n        case 'left':\n          /*\n          //For dynamically placing the label. Can be used with dynamically-sized chart axis margins\n          var yTicks = g.selectAll('g').select(\"text\");\n          yTicks.each(function(d,i){\n            var labelPadding = this.getBBox().width + axis.tickPadding() + 16;\n            if(labelPadding > width) width = labelPadding;\n          });\n          */\n          axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n          axisLabel\n              .style('text-anchor', rotateYLabel ? 'middle' : 'end')\n              .attr('transform', rotateYLabel ? 'rotate(-90)' : '')\n              .attr('y', rotateYLabel ? (-Math.max(margin.left,width) + axisLabelDistance) : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\n              .attr('x', rotateYLabel ? (-scale.range()[0] / 2) : -axis.tickPadding());\n          if (showMaxMin) {\n            var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                           .data(scale.domain());\n            axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text')\n                .style('opacity', 0);\n            axisMaxMin.exit().remove();\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(0,' + scale0(d) + ')'\n                })\n              .select('text')\n                .attr('dy', '.32em')\n                .attr('y', 0)\n                .attr('x', -axis.tickPadding())\n                .attr('text-anchor', 'end')\n                .text(function(d,i) {\n                  var v = fmt(d);\n                  return ('' + v).match('NaN') ? '' : v;\n                });\n            axisMaxMin\n                .attr('transform', function(d,i) {\n                  return 'translate(0,' + scale.range()[i] + ')'\n                })\n              .select('text')\n                .style('opacity', 1);\n          }\n          break;\n      }\n      axisLabel\n          .text(function(d) { return d });\n\n\n      if (showMaxMin && (axis.orient() === 'left' || axis.orient() === 'right')) {\n        //check if max and min overlap other values, if so, hide the values that overlap\n        g.selectAll('g') // the g's wrapping each tick\n            .each(function(d,i) {\n              d3.select(this).select('text').attr('opacity', 1);\n              if (scale(d) < scale.range()[1] + 10 || scale(d) > scale.range()[0] - 10) { // 10 is assuming text height is 16... if d is 0, leave it!\n                if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n                  d3.select(this).attr('opacity', 0);\n\n                d3.select(this).select('text').attr('opacity', 0); // Don't remove the ZERO line!!\n              }\n            });\n\n        //if Max and Min = 0 only show min, Issue #281\n        if (scale.domain()[0] == scale.domain()[1] && scale.domain()[0] == 0)\n          wrap.selectAll('g.nv-axisMaxMin')\n            .style('opacity', function(d,i) { return !i ? 1 : 0 });\n\n      }\n\n      if (showMaxMin && (axis.orient() === 'top' || axis.orient() === 'bottom')) {\n        var maxMinRange = [];\n        wrap.selectAll('g.nv-axisMaxMin')\n            .each(function(d,i) {\n              try {\n                  if (i) // i== 1, max position\n                      maxMinRange.push(scale(d) - this.getBBox().width - 4)  //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n                  else // i==0, min position\n                      maxMinRange.push(scale(d) + this.getBBox().width + 4)\n              }catch (err) {\n                  if (i) // i== 1, max position\n                      maxMinRange.push(scale(d) - 4)  //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n                  else // i==0, min position\n                      maxMinRange.push(scale(d) + 4)\n              }\n            });\n        g.selectAll('g') // the g's wrapping each tick\n            .each(function(d,i) {\n              if (scale(d) < maxMinRange[0] || scale(d) > maxMinRange[1]) {\n                if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n                  d3.select(this).remove();\n                else\n                  d3.select(this).select('text').remove(); // Don't remove the ZERO line!!\n              }\n            });\n      }\n\n\n      //highlight zero line ... Maybe should not be an option and should just be in CSS?\n      if (highlightZero)\n        g.selectAll('.tick')\n          .filter(function(d) { return !parseFloat(Math.round(d.__data__*100000)/1000000) && (d.__data__ !== undefined) }) //this is because sometimes the 0 tick is a very small fraction, TODO: think of cleaner technique\n            .classed('zero', true);\n\n      //store old scales for use in transitions on update\n      scale0 = scale.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.axis = axis;\n\n  d3.rebind(chart, axis, 'orient', 'tickValues', 'tickSubdivide', 'tickSize', 'tickPadding', 'tickFormat');\n  d3.rebind(chart, scale, 'domain', 'range', 'rangeBand', 'rangeBands'); //these are also accessible by chart.scale(), but added common ones directly for ease of use\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if(!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  }\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.ticks = function(_) {\n    if (!arguments.length) return ticks;\n    ticks = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.axisLabel = function(_) {\n    if (!arguments.length) return axisLabelText;\n    axisLabelText = _;\n    return chart;\n  }\n\n  chart.showMaxMin = function(_) {\n    if (!arguments.length) return showMaxMin;\n    showMaxMin = _;\n    return chart;\n  }\n\n  chart.highlightZero = function(_) {\n    if (!arguments.length) return highlightZero;\n    highlightZero = _;\n    return chart;\n  }\n\n  chart.scale = function(_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    axis.scale(scale);\n    isOrdinal = typeof scale.rangeBands === 'function';\n    d3.rebind(chart, scale, 'domain', 'range', 'rangeBand', 'rangeBands');\n    return chart;\n  }\n\n  chart.rotateYLabel = function(_) {\n    if(!arguments.length) return rotateYLabel;\n    rotateYLabel = _;\n    return chart;\n  }\n\n  chart.rotateLabels = function(_) {\n    if(!arguments.length) return rotateLabels;\n    rotateLabels = _;\n    return chart;\n  }\n\n  chart.staggerLabels = function(_) {\n    if (!arguments.length) return staggerLabels;\n    staggerLabels = _;\n    return chart;\n  };\n\n  chart.axisLabelDistance = function(_) {\n    if (!arguments.length) return axisLabelDistance;\n    axisLabelDistance = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n//TODO: consider deprecating and using multibar with single series for this\nnv.models.historicalBar = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    , x = d3.scale.linear()\n    , y = d3.scale.linear()\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , forceX = []\n    , forceY = [0]\n    , padData = false\n    , clipEdge = true\n    , color = nv.utils.defaultColor()\n    , xDomain\n    , yDomain\n    , xRange\n    , yRange\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n    , interactive = true\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x   .domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ))\n\n      if (padData)\n        x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n      else\n        x.range(xRange || [0, availableWidth]);\n\n      y   .domain(yDomain || d3.extent(data[0].values.map(getY).concat(forceY) ))\n          .range(yRange || [availableHeight, 0]);\n\n      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\n      if (x.domain()[0] === x.domain()[1])\n        x.domain()[0] ?\n            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n          : x.domain([-1,1]);\n\n      if (y.domain()[0] === y.domain()[1])\n        y.domain()[0] ?\n            y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n          : y.domain([-1,1]);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-historicalBar-' + id).data([data[0].values]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBar-' + id);\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-bars');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      container\n          .on('click', function(d,i) {\n            dispatch.chartClick({\n                data: d,\n                index: i,\n                pos: d3.event,\n                id: id\n            });\n          });\n\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-chart-clip-path-' + id)\n        .append('rect');\n\n      wrap.select('#nv-chart-clip-path-' + id + ' rect')\n          .attr('width', availableWidth)\n          .attr('height', availableHeight);\n\n      g   .attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\n\n\n      var bars = wrap.select('.nv-bars').selectAll('.nv-bar')\n          .data(function(d) { return d }, function(d,i) {return getX(d,i)});\n\n      bars.exit().remove();\n\n\n      var barsEnter = bars.enter().append('rect')\n          //.attr('class', function(d,i,j) { return (getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive') + ' nv-bar-' + j + '-' + i })\n          .attr('x', 0 )\n          .attr('y', function(d,i) {  return nv.utils.NaNtoZero(y(Math.max(0, getY(d,i)))) })\n          .attr('height', function(d,i) { return nv.utils.NaNtoZero(Math.abs(y(getY(d,i)) - y(0))) })\n          .attr('transform', function(d,i) { return 'translate(' + (x(getX(d,i)) - availableWidth / data[0].values.length * .45) + ',0)'; }) \n          .on('mouseover', function(d,i) {\n            if (!interactive) return;\n            d3.select(this).classed('hover', true);\n            dispatch.elementMouseover({\n                point: d,\n                series: data[0],\n                pos: [x(getX(d,i)), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n                pointIndex: i,\n                seriesIndex: 0,\n                e: d3.event\n            });\n\n          })\n          .on('mouseout', function(d,i) {\n                if (!interactive) return;\n                d3.select(this).classed('hover', false);\n                dispatch.elementMouseout({\n                    point: d,\n                    series: data[0],\n                    pointIndex: i,\n                    seriesIndex: 0,\n                    e: d3.event\n                });\n          })\n          .on('click', function(d,i) {\n                if (!interactive) return;\n                dispatch.elementClick({\n                    //label: d[label],\n                    value: getY(d,i),\n                    data: d,\n                    index: i,\n                    pos: [x(getX(d,i)), y(getY(d,i))],\n                    e: d3.event,\n                    id: id\n                });\n              d3.event.stopPropagation();\n          })\n          .on('dblclick', function(d,i) {\n              if (!interactive) return;\n              dispatch.elementDblClick({\n                  //label: d[label],\n                  value: getY(d,i),\n                  data: d,\n                  index: i,\n                  pos: [x(getX(d,i)), y(getY(d,i))],\n                  e: d3.event,\n                  id: id\n              });\n              d3.event.stopPropagation();\n          });\n\n      bars\n          .attr('fill', function(d,i) { return color(d, i); })\n          .attr('class', function(d,i,j) { return (getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive') + ' nv-bar-' + j + '-' + i })\n          \n          .attr('transform', function(d,i) { return 'translate(' + (x(getX(d,i)) - availableWidth / data[0].values.length * .45) + ',0)'; }) \n           //TODO: better width calculations that don't assume always uniform data spacing;w\n          .attr('width', (availableWidth / data[0].values.length) * .9 );\n\n\n      bars\n          .attr('y', function(d,i) {\n            var rval = getY(d,i) < 0 ?\n                    y(0) :\n                    y(0) - y(getY(d,i)) < 1 ?\n                      y(0) - 1 :\n                      y(getY(d,i));\n            return nv.utils.NaNtoZero(rval);\n          })\n          .attr('height', function(d,i) { return nv.utils.NaNtoZero(Math.max(Math.abs(y(getY(d,i)) - y(0)),1)) });\n\n    });\n\n    return chart;\n  }\n\n  //Create methods to allow outside functions to highlight a specific bar.\n  chart.highlightPoint = function(pointIndex, isHoverOver) {\n      d3.select(\".nv-historicalBar-\" + id)\n        .select(\".nv-bars .nv-bar-0-\" + pointIndex)\n              .classed(\"hover\", isHoverOver)\n               ;\n  };\n\n  chart.clearHighlights = function() {\n      d3.select(\".nv-historicalBar-\" + id)\n        .select(\".nv-bars .nv-bar.hover\")\n              .classed(\"hover\", false)\n               ;\n  };\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.forceX = function(_) {\n    if (!arguments.length) return forceX;\n    forceX = _;\n    return chart;\n  };\n\n  chart.forceY = function(_) {\n    if (!arguments.length) return forceY;\n    forceY = _;\n    return chart;\n  };\n\n  chart.padData = function(_) {\n    if (!arguments.length) return padData;\n    padData = _;\n    return chart;\n  };\n\n  chart.clipEdge = function(_) {\n    if (!arguments.length) return clipEdge;\n    clipEdge = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.interactive = function(_) {\n    if(!arguments.length) return interactive;\n    interactive = false;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\n// Chart design based on the recommendations of Stephen Few. Implementation\n// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n// http://projects.instantcognition.com/protovis/bulletchart/\n\nnv.models.bullet = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , orient = 'left' // TODO top & bottom\n    , reverse = false\n    , ranges = function(d) { return d.ranges }\n    , markers = function(d) { return d.markers }\n    , measures = function(d) { return d.measures }\n    , rangeLabels = function(d) { return d.rangeLabels ? d.rangeLabels : [] }\n    , markerLabels = function(d) { return d.markerLabels ? d.markerLabels : []  }\n    , measureLabels = function(d) { return d.measureLabels ? d.measureLabels : []  }\n    , forceX = [0] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n    , width = 380\n    , height = 30\n    , tickFormat = null\n    , color = nv.utils.getColor(['#1f77b4'])\n    , dispatch = d3.dispatch('elementMouseover', 'elementMouseout')\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(d, i) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n      var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\n          markerz = markers.call(this, d, i).slice().sort(d3.descending),\n          measurez = measures.call(this, d, i).slice().sort(d3.descending),\n          rangeLabelz = rangeLabels.call(this, d, i).slice(),\n          markerLabelz = markerLabels.call(this, d, i).slice(),\n          measureLabelz = measureLabels.call(this, d, i).slice();\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      // Compute the new x-scale.\n      var x1 = d3.scale.linear()\n          .domain( d3.extent(d3.merge([forceX, rangez])) )\n          .range(reverse ? [availableWidth, 0] : [0, availableWidth]);\n\n      // Retrieve the old x-scale, if this is an update.\n      var x0 = this.__chart__ || d3.scale.linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n\n      var rangeMin = d3.min(rangez), //rangez[2]\n          rangeMax = d3.max(rangez), //rangez[0]\n          rangeAvg = rangez[1];\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-bullet').data([d]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bullet');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('rect').attr('class', 'nv-range nv-rangeMax');\n      gEnter.append('rect').attr('class', 'nv-range nv-rangeAvg');\n      gEnter.append('rect').attr('class', 'nv-range nv-rangeMin');\n      gEnter.append('rect').attr('class', 'nv-measure');\n      gEnter.append('path').attr('class', 'nv-markerTriangle');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n\n      var w0 = function(d) { return Math.abs(x0(d) - x0(0)) }, // TODO: could optimize by precalculating x0(0) and x1(0)\n          w1 = function(d) { return Math.abs(x1(d) - x1(0)) };\n      var xp0 = function(d) { return d < 0 ? x0(d) : x0(0) },\n          xp1 = function(d) { return d < 0 ? x1(d) : x1(0) };\n\n\n      g.select('rect.nv-rangeMax')\n          .attr('height', availableHeight)\n          .attr('width', w1(rangeMax > 0 ? rangeMax : rangeMin))\n          .attr('x', xp1(rangeMax > 0 ? rangeMax : rangeMin))\n          .datum(rangeMax > 0 ? rangeMax : rangeMin)\n          /*\n          .attr('x', rangeMin < 0 ?\n                         rangeMax > 0 ?\n                             x1(rangeMin)\n                           : x1(rangeMax)\n                       : x1(0))\n                      */\n\n      g.select('rect.nv-rangeAvg')\n          .attr('height', availableHeight)\n          .attr('width', w1(rangeAvg))\n          .attr('x', xp1(rangeAvg))\n          .datum(rangeAvg)\n          /*\n          .attr('width', rangeMax <= 0 ?\n                             x1(rangeMax) - x1(rangeAvg)\n                           : x1(rangeAvg) - x1(rangeMin))\n          .attr('x', rangeMax <= 0 ?\n                         x1(rangeAvg)\n                       : x1(rangeMin))\n                      */\n\n      g.select('rect.nv-rangeMin')\n          .attr('height', availableHeight)\n          .attr('width', w1(rangeMax))\n          .attr('x', xp1(rangeMax))\n          .attr('width', w1(rangeMax > 0 ? rangeMin : rangeMax))\n          .attr('x', xp1(rangeMax > 0 ? rangeMin : rangeMax))\n          .datum(rangeMax > 0 ? rangeMin : rangeMax)\n          /*\n          .attr('width', rangeMax <= 0 ?\n                             x1(rangeAvg) - x1(rangeMin)\n                           : x1(rangeMax) - x1(rangeAvg))\n          .attr('x', rangeMax <= 0 ?\n                         x1(rangeMin)\n                       : x1(rangeAvg))\n                      */\n\n      g.select('rect.nv-measure')\n          .style('fill', color)\n          .attr('height', availableHeight / 3)\n          .attr('y', availableHeight / 3)\n          .attr('width', measurez < 0 ?\n                             x1(0) - x1(measurez[0])\n                           : x1(measurez[0]) - x1(0))\n          .attr('x', xp1(measurez))\n          .on('mouseover', function() {\n              dispatch.elementMouseover({\n                value: measurez[0],\n                label: measureLabelz[0] || 'Current',\n                pos: [x1(measurez[0]), availableHeight/2]\n              })\n          })\n          .on('mouseout', function() {\n              dispatch.elementMouseout({\n                value: measurez[0],\n                label: measureLabelz[0] || 'Current'\n              })\n          })\n\n      var h3 =  availableHeight / 6;\n      if (markerz[0]) {\n        g.selectAll('path.nv-markerTriangle')\n            .attr('transform', function(d) { return 'translate(' + x1(markerz[0]) + ',' + (availableHeight / 2) + ')' })\n            .attr('d', 'M0,' + h3 + 'L' + h3 + ',' + (-h3) + ' ' + (-h3) + ',' + (-h3) + 'Z')\n            .on('mouseover', function() {\n              dispatch.elementMouseover({\n                value: markerz[0],\n                label: markerLabelz[0] || 'Previous',\n                pos: [x1(markerz[0]), availableHeight/2]\n              })\n            })\n            .on('mouseout', function() {\n              dispatch.elementMouseout({\n                value: markerz[0],\n                label: markerLabelz[0] || 'Previous'\n              })\n            });\n      } else {\n        g.selectAll('path.nv-markerTriangle').remove();\n      }\n\n\n      wrap.selectAll('.nv-range')\n          .on('mouseover', function(d,i) {\n            var label = rangeLabelz[i] || (!i ? \"Maximum\" : i == 1 ? \"Mean\" : \"Minimum\");\n\n            dispatch.elementMouseover({\n              value: d,\n              label: label,\n              pos: [x1(d), availableHeight/2]\n            })\n          })\n          .on('mouseout', function(d,i) {\n            var label = rangeLabelz[i] || (!i ? \"Maximum\" : i == 1 ? \"Mean\" : \"Minimum\");\n\n            dispatch.elementMouseout({\n              value: d,\n              label: label\n            })\n          })\n\n/* // THIS IS THE PREVIOUS BULLET IMPLEMENTATION, WILL REMOVE SHORTLY\n      // Update the range rects.\n      var range = g.selectAll('rect.nv-range')\n          .data(rangez);\n\n      range.enter().append('rect')\n          .attr('class', function(d, i) { return 'nv-range nv-s' + i; })\n          .attr('width', w0)\n          .attr('height', availableHeight)\n          .attr('x', reverse ? x0 : 0)\n          .on('mouseover', function(d,i) { \n              dispatch.elementMouseover({\n                value: d,\n                label: (i <= 0) ? 'Maximum' : (i > 1) ? 'Minimum' : 'Mean', //TODO: make these labels a variable\n                pos: [x1(d), availableHeight/2]\n              })\n          })\n          .on('mouseout', function(d,i) { \n              dispatch.elementMouseout({\n                value: d,\n                label: (i <= 0) ? 'Minimum' : (i >=1) ? 'Maximum' : 'Mean' //TODO: make these labels a variable\n              })\n          })\n\n      d3.transition(range)\n          .attr('x', reverse ? x1 : 0)\n          .attr('width', w1)\n          .attr('height', availableHeight);\n\n\n      // Update the measure rects.\n      var measure = g.selectAll('rect.nv-measure')\n          .data(measurez);\n\n      measure.enter().append('rect')\n          .attr('class', function(d, i) { return 'nv-measure nv-s' + i; })\n          .style('fill', function(d,i) { return color(d,i ) })\n          .attr('width', w0)\n          .attr('height', availableHeight / 3)\n          .attr('x', reverse ? x0 : 0)\n          .attr('y', availableHeight / 3)\n          .on('mouseover', function(d) { \n              dispatch.elementMouseover({\n                value: d,\n                label: 'Current', //TODO: make these labels a variable\n                pos: [x1(d), availableHeight/2]\n              })\n          })\n          .on('mouseout', function(d) { \n              dispatch.elementMouseout({\n                value: d,\n                label: 'Current' //TODO: make these labels a variable\n              })\n          })\n\n      d3.transition(measure)\n          .attr('width', w1)\n          .attr('height', availableHeight / 3)\n          .attr('x', reverse ? x1 : 0)\n          .attr('y', availableHeight / 3);\n\n\n\n      // Update the marker lines.\n      var marker = g.selectAll('path.nv-markerTriangle')\n          .data(markerz);\n\n      var h3 =  availableHeight / 6;\n      marker.enter().append('path')\n          .attr('class', 'nv-markerTriangle')\n          .attr('transform', function(d) { return 'translate(' + x0(d) + ',' + (availableHeight / 2) + ')' })\n          .attr('d', 'M0,' + h3 + 'L' + h3 + ',' + (-h3) + ' ' + (-h3) + ',' + (-h3) + 'Z')\n          .on('mouseover', function(d,i) {\n              dispatch.elementMouseover({\n                value: d,\n                label: 'Previous',\n                pos: [x1(d), availableHeight/2]\n              })\n          })\n          .on('mouseout', function(d,i) {\n              dispatch.elementMouseout({\n                value: d,\n                label: 'Previous'\n              })\n          });\n\n      d3.transition(marker)\n          .attr('transform', function(d) { return 'translate(' + (x1(d) - x1(0)) + ',' + (availableHeight / 2) + ')' });\n\n      marker.exit().remove();\n*/\n\n    });\n\n    // d3.timer.flush();  // Not needed?\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  // left, right, top, bottom\n  chart.orient = function(_) {\n    if (!arguments.length) return orient;\n    orient = _;\n    reverse = orient == 'right' || orient == 'bottom';\n    return chart;\n  };\n\n  // ranges (bad, satisfactory, good)\n  chart.ranges = function(_) {\n    if (!arguments.length) return ranges;\n    ranges = _;\n    return chart;\n  };\n\n  // markers (previous, goal)\n  chart.markers = function(_) {\n    if (!arguments.length) return markers;\n    markers = _;\n    return chart;\n  };\n\n  // measures (actual, forecast)\n  chart.measures = function(_) {\n    if (!arguments.length) return measures;\n    measures = _;\n    return chart;\n  };\n\n  chart.forceX = function(_) {\n    if (!arguments.length) return forceX;\n    forceX = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.tickFormat = function(_) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n};\n\n\n\n// Chart design based on the recommendations of Stephen Few. Implementation\n// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n// http://projects.instantcognition.com/protovis/bulletchart/\nnv.models.bulletChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var bullet = nv.models.bullet()\n    ;\n\n  var orient = 'left' // TODO top & bottom\n    , reverse = false\n    , margin = {top: 5, right: 40, bottom: 20, left: 120}\n    , ranges = function(d) { return d.ranges }\n    , markers = function(d) { return d.markers }\n    , measures = function(d) { return d.measures }\n    , width = null\n    , height = 55\n    , tickFormat = null\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + x + '</h3>' +\n               '<p>' + y + '</p>'\n      }\n    , noData = 'No Data Available.'\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ) + margin.left,\n        top = e.pos[1] + ( offsetElement.offsetTop || 0) + margin.top,\n        content = tooltip(e.key, e.label, e.value, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'e' : 'w', null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(d, i) {\n      var container = d3.select(this);\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          that = this;\n\n\n      chart.update = function() { chart(selection) };\n      chart.container = this;\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!d || !ranges.call(this, d, i)) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', 18 + margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n\n      var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\n          markerz = markers.call(this, d, i).slice().sort(d3.descending),\n          measurez = measures.call(this, d, i).slice().sort(d3.descending);\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-bulletChart').data([d]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bulletChart');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-bulletWrap');\n      gEnter.append('g').attr('class', 'nv-titles');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      // Compute the new x-scale.\n      var x1 = d3.scale.linear()\n          .domain([0, Math.max(rangez[0], markerz[0], measurez[0])])  // TODO: need to allow forceX and forceY, and xDomain, yDomain\n          .range(reverse ? [availableWidth, 0] : [0, availableWidth]);\n\n      // Retrieve the old x-scale, if this is an update.\n      var x0 = this.__chart__ || d3.scale.linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n      /*\n      // Derive width-scales from the x-scales.\n      var w0 = bulletWidth(x0),\n          w1 = bulletWidth(x1);\n\n      function bulletWidth(x) {\n        var x0 = x(0);\n        return function(d) {\n          return Math.abs(x(d) - x(0));\n        };\n      }\n\n      function bulletTranslate(x) {\n        return function(d) {\n          return 'translate(' + x(d) + ',0)';\n        };\n      }\n      */\n\n      var w0 = function(d) { return Math.abs(x0(d) - x0(0)) }, // TODO: could optimize by precalculating x0(0) and x1(0)\n          w1 = function(d) { return Math.abs(x1(d) - x1(0)) };\n\n\n      var title = gEnter.select('.nv-titles').append('g')\n          .attr('text-anchor', 'end')\n          .attr('transform', 'translate(-6,' + (height - margin.top - margin.bottom) / 2 + ')');\n      title.append('text')\n          .attr('class', 'nv-title')\n          .text(function(d) { return d.title; });\n\n      title.append('text')\n          .attr('class', 'nv-subtitle')\n          .attr('dy', '1em')\n          .text(function(d) { return d.subtitle; });\n\n\n\n      bullet\n        .width(availableWidth)\n        .height(availableHeight)\n\n      var bulletWrap = g.select('.nv-bulletWrap');\n\n      d3.transition(bulletWrap).call(bullet);\n\n\n\n      // Compute the tick format.\n      var format = tickFormat || x1.tickFormat( availableWidth / 100 );\n\n      // Update the tick groups.\n      var tick = g.selectAll('g.nv-tick')\n          .data(x1.ticks( availableWidth / 50 ), function(d) {\n            return this.textContent || format(d);\n          });\n\n      // Initialize the ticks with the old scale, x0.\n      var tickEnter = tick.enter().append('g')\n          .attr('class', 'nv-tick')\n          .attr('transform', function(d) { return 'translate(' + x0(d) + ',0)' })\n          .style('opacity', 1e-6);\n\n      tickEnter.append('line')\n          .attr('y1', availableHeight)\n          .attr('y2', availableHeight * 7 / 6);\n\n      tickEnter.append('text')\n          .attr('text-anchor', 'middle')\n          .attr('dy', '1em')\n          .attr('y', availableHeight * 7 / 6)\n          .text(format);\n\n\n      // Transition the updating ticks to the new scale, x1.\n      var tickUpdate = d3.transition(tick)\n          .attr('transform', function(d) { return 'translate(' + x1(d) + ',0)' })\n          .style('opacity', 1);\n\n      tickUpdate.select('line')\n          .attr('y1', availableHeight)\n          .attr('y2', availableHeight * 7 / 6);\n\n      tickUpdate.select('text')\n          .attr('y', availableHeight * 7 / 6);\n\n      // Transition the exiting ticks to the new scale, x1.\n      d3.transition(tick.exit())\n          .attr('transform', function(d) { return 'translate(' + x1(d) + ',0)' })\n          .style('opacity', 1e-6)\n          .remove();\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      dispatch.on('tooltipShow', function(e) {\n        e.key = d.title;\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      //============================================================\n\n    });\n\n    d3.timer.flush();\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  bullet.dispatch.on('elementMouseover.tooltip', function(e) {\n    dispatch.tooltipShow(e);\n  });\n\n  bullet.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n  chart.bullet = bullet;\n\n  d3.rebind(chart, bullet, 'color');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  // left, right, top, bottom\n  chart.orient = function(x) {\n    if (!arguments.length) return orient;\n    orient = x;\n    reverse = orient == 'right' || orient == 'bottom';\n    return chart;\n  };\n\n  // ranges (bad, satisfactory, good)\n  chart.ranges = function(x) {\n    if (!arguments.length) return ranges;\n    ranges = x;\n    return chart;\n  };\n\n  // markers (previous, goal)\n  chart.markers = function(x) {\n    if (!arguments.length) return markers;\n    markers = x;\n    return chart;\n  };\n\n  // measures (actual, forecast)\n  chart.measures = function(x) {\n    if (!arguments.length) return measures;\n    measures = x;\n    return chart;\n  };\n\n  chart.width = function(x) {\n    if (!arguments.length) return width;\n    width = x;\n    return chart;\n  };\n\n  chart.height = function(x) {\n    if (!arguments.length) return height;\n    height = x;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.tickFormat = function(x) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n};\n\n\n\nnv.models.cumulativeLineChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var lines = nv.models.line()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , legend = nv.models.legend()\n    , controls = nv.models.legend()\n    , interactiveLayer = nv.interactiveGuideline()\n    ;\n\n  var margin = {top: 30, right: 30, bottom: 50, left: 60}\n    , color = nv.utils.defaultColor()\n    , width = null\n    , height = null\n    , showLegend = true\n    , showXAxis = true\n    , showYAxis = true\n    , rightAlignYAxis = false\n    , tooltips = true\n    , showControls = true\n    , useInteractiveGuideline = false\n    , rescaleY = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>'\n      }\n    , x //can be accessed via chart.xScale()\n    , y //can be accessed via chart.yScale()\n    , id = lines.id()\n    , state = { index: 0, rescaleY: rescaleY }\n    , defaultState = null\n    , noData = 'No Data Available.'\n    , average = function(d) { return d.average }\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , transitionDuration = 0\n    , noErrorCheck = false  //if set to TRUE, will bypass an error check in the indexify function.\n    ;\n\n  xAxis\n    .orient('bottom')\n    .tickPadding(7)\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    ;\n\n  //============================================================\n  controls.updateState(false);\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n   var dx = d3.scale.linear()\n     , index = {i: 0, x: 0}\n     ;\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, null, null, offsetElement);\n  };\n\n  //============================================================\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this).classed('nv-chart-' + id, true),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n\n      chart.update = function() { container.call(chart) };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      var indexDrag = d3.behavior.drag()\n                        .on('dragstart', dragStart)\n                        .on('drag', dragMove)\n                        .on('dragend', dragEnd);\n\n\n      function dragStart(d,i) {\n        d3.select(chart.container)\n            .style('cursor', 'ew-resize');\n      }\n\n      function dragMove(d,i) {\n        index.x = d3.event.x;\n        index.i = Math.round(dx.invert(index.x));\n        updateZero();\n      }\n\n      function dragEnd(d,i) {\n        d3.select(chart.container)\n            .style('cursor', 'auto');\n\n        // update state and send stateChange with new index\n        state.index = index.i;\n        dispatch.stateChange(state);\n      }\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = lines.xScale();\n      y = lines.yScale();\n\n\n      if (!rescaleY) {\n        var seriesDomains = data\n          .filter(function(series) { return !series.disabled })\n          .map(function(series,i) {\n            var initialDomain = d3.extent(series.values, lines.y());\n\n            //account for series being disabled when losing 95% or more\n            if (initialDomain[0] < -.95) initialDomain[0] = -.95;\n\n            return [\n              (initialDomain[0] - initialDomain[1]) / (1 + initialDomain[1]),\n              (initialDomain[1] - initialDomain[0]) / (1 + initialDomain[0])\n            ];\n          });\n\n        var completeDomain = [\n          d3.min(seriesDomains, function(d) { return d[0] }),\n          d3.max(seriesDomains, function(d) { return d[1] })\n        ]\n\n        lines.yDomain(completeDomain);\n      } else {\n        lines.yDomain(null);\n      }\n\n\n      dx  .domain([0, data[0].values.length - 1]) //Assumes all series have same length\n          .range([0, availableWidth])\n          .clamp(true);\n\n      //------------------------------------------------------------\n\n\n      var data = indexify(index.i, data);\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n      var interactivePointerEvents = (useInteractiveGuideline) ? \"none\" : \"all\";\n      var wrap = container.selectAll('g.nv-wrap.nv-cumulativeLine').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-cumulativeLine').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-interactive');\n      gEnter.append('g').attr('class', 'nv-x nv-axis').style(\"pointer-events\",\"none\");\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-background');\n      gEnter.append('g').attr('class', 'nv-linesWrap').style(\"pointer-events\",interactivePointerEvents);\n      gEnter.append('g').attr('class', 'nv-avgLinesWrap').style(\"pointer-events\",\"none\");\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width(availableWidth);\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Controls\n\n      if (showControls) {\n        var controlsData = [\n          { key: 'Re-scale y-axis', disabled: !rescaleY }\n        ];\n\n        controls\n            .width(140)\n            .color(['#444', '#444', '#444'])\n            .rightAlign(false)\n            .margin({top: 5, right: 0, bottom: 5, left: 20})\n            ;\n\n        g.select('.nv-controlsWrap')\n            .datum(controlsData)\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n            .call(controls);\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      // Show error if series goes below 100%\n      var tempDisabled = data.filter(function(d) { return d.tempDisabled });\n\n      wrap.select('.tempDisabled').remove(); //clean-up and prevent duplicates\n      if (tempDisabled.length) {\n        wrap.append('text').attr('class', 'tempDisabled')\n            .attr('x', availableWidth / 2)\n            .attr('y', '-.71em')\n            .style('text-anchor', 'end')\n            .text(tempDisabled.map(function(d) { return d.key }).join(', ') + ' values cannot be calculated for this time period.');\n      }\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      //------------------------------------------------------------\n      //Set up interactive layer\n      if (useInteractiveGuideline) {\n        interactiveLayer\n          .width(availableWidth)\n          .height(availableHeight)\n          .margin({left:margin.left,top:margin.top})\n          .svgContainer(container)\n          .xScale(x);\n        wrap.select(\".nv-interactive\").call(interactiveLayer);\n      }\n\n      gEnter.select('.nv-background')\n        .append('rect');\n\n      g.select('.nv-background rect')\n          .attr('width', availableWidth)\n          .attr('height', availableHeight);\n\n      lines\n        //.x(function(d) { return d.x })\n        .y(function(d) { return d.display.y })\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && !data[i].tempDisabled; }));\n\n\n\n      var linesWrap = g.select('.nv-linesWrap')\n          .datum(data.filter(function(d) { return  !d.disabled && !d.tempDisabled }));\n\n      //d3.transition(linesWrap).call(lines);\n      linesWrap.call(lines);\n\n      /*Handle average lines [AN-612] ----------------------------*/\n\n      //Store a series index number in the data array.\n      data.forEach(function(d,i) {\n            d.seriesIndex = i;\n      });\n\n      var avgLineData = data.filter(function(d) {\n          return !d.disabled && !!average(d);\n      });\n\n      var avgLines = g.select(\".nv-avgLinesWrap\").selectAll(\"line\")\n              .data(avgLineData, function(d) { return d.key; });\n\n      var getAvgLineY = function(d) {\n          //If average lines go off the svg element, clamp them to the svg bounds.\n          var yVal = y(average(d));\n          if (yVal < 0) return 0;\n          if (yVal > availableHeight) return availableHeight;\n          return yVal;\n      };\n\n      avgLines.enter()\n              .append('line')\n              .style('stroke-width',2)\n              .style('stroke-dasharray','10,10')\n              .style('stroke',function (d,i) {\n                  return lines.color()(d,d.seriesIndex);\n              })\n              .attr('x1',0)\n              .attr('x2',availableWidth)\n              .attr('y1', getAvgLineY)\n              .attr('y2', getAvgLineY);\n\n      avgLines\n              .style('stroke-opacity',function(d){\n                  //If average lines go offscreen, make them transparent\n                  var yVal = y(average(d));\n                  if (yVal < 0 || yVal > availableHeight) return 0;\n                  return 1;\n              })\n              .attr('x1',0)\n              .attr('x2',availableWidth)\n              .attr('y1', getAvgLineY)\n              .attr('y2', getAvgLineY);\n\n      avgLines.exit().remove();\n\n      //Create index line -----------------------------------------\n\n      var indexLine = linesWrap.selectAll('.nv-indexLine')\n          .data([index]);\n      indexLine.enter().append('rect').attr('class', 'nv-indexLine')\n          .attr('width', 3)\n          .attr('x', -2)\n          .attr('fill', 'red')\n          .attr('fill-opacity', .5)\n          .style(\"pointer-events\",\"all\")\n          .call(indexDrag)\n\n      indexLine\n          .attr('transform', function(d) { return 'translate(' + dx(d.i) + ',0)' })\n          .attr('height', availableHeight)\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n        xAxis\n          .scale(x)\n          //Suggest how many ticks based on the chart width and D3 should listen (70 is the optimal number for MM/DD/YY dates)\n          .ticks( Math.min(data[0].values.length,availableWidth/70) )\n          .tickSize(-availableHeight, 0);\n\n        g.select('.nv-x.nv-axis')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')');\n        d3.transition(g.select('.nv-x.nv-axis'))\n            .call(xAxis);\n      }\n\n\n      if (showYAxis) {\n        yAxis\n          .scale(y)\n          .ticks( availableHeight / 36 )\n          .tickSize( -availableWidth, 0);\n\n        d3.transition(g.select('.nv-y.nv-axis'))\n            .call(yAxis);\n      }\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n\n      function updateZero() {\n        indexLine\n          .data([index]);\n\n        //When dragging the index line, turn off line transitions.\n        // Then turn them back on when done dragging.\n        var oldDuration = chart.transitionDuration();\n        chart.transitionDuration(0);\n        chart.update();\n        chart.transitionDuration(oldDuration);\n      }\n\n      g.select('.nv-background rect')\n          .on('click', function() {\n            index.x = d3.mouse(this)[0];\n            index.i = Math.round(dx.invert(index.x));\n\n            // update state and send stateChange with new index\n            state.index = index.i;\n            dispatch.stateChange(state);\n\n            updateZero();\n          });\n\n      lines.dispatch.on('elementClick', function(e) {\n        index.i = e.pointIndex;\n        index.x = dx(index.i);\n\n        // update state and send stateChange with new index\n        state.index = index.i;\n        dispatch.stateChange(state);\n\n        updateZero();\n      });\n\n      controls.dispatch.on('legendClick', function(d,i) {\n        d.disabled = !d.disabled;\n        rescaleY = !d.disabled;\n\n        state.rescaleY = rescaleY;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n\n      legend.dispatch.on('stateChange', function(newState) {\n        state.disabled = newState.disabled;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      interactiveLayer.dispatch.on('elementMousemove', function(e) {\n          lines.clearHighlights();\n          var singlePoint, pointIndex, pointXLocation, allData = [];\n\n\n          data\n          .filter(function(series, i) {\n            series.seriesIndex = i;\n            return !series.disabled;\n          })\n          .forEach(function(series,i) {\n              pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n              lines.highlightPoint(i, pointIndex, true);\n              var point = series.values[pointIndex];\n              if (typeof point === 'undefined') return;\n              if (typeof singlePoint === 'undefined') singlePoint = point;\n              if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n              allData.push({\n                  key: series.key,\n                  value: chart.y()(point, pointIndex),\n                  color: color(series,series.seriesIndex)\n              });\n          });\n\n          //Highlight the tooltip entry based on which point the mouse is closest to.\n          if (allData.length > 2) {\n            var yValue = chart.yScale().invert(e.mouseY);\n            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n            var threshold = 0.03 * domainExtent;\n            var indexToHighlight = nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);\n            if (indexToHighlight !== null)\n              allData[indexToHighlight].highlight = true;\n          }\n\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex), pointIndex);\n          interactiveLayer.tooltip\n                  .position({left: pointXLocation + margin.left, top: e.mouseY + margin.top})\n                  .chartContainer(that.parentNode)\n                  .enabled(tooltips)\n                  .valueFormatter(function(d,i) {\n                     return yAxis.tickFormat()(d);\n                  })\n                  .data(\n                      {\n                        value: xValue,\n                        series: allData\n                      }\n                  )();\n\n          interactiveLayer.renderGuideLine(pointXLocation);\n\n      });\n\n      interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n          dispatch.tooltipHide();\n          lines.clearHighlights();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n\n        if (typeof e.index !== 'undefined') {\n          index.i = e.index;\n          index.x = dx(index.i);\n\n          state.index = e.index;\n\n          indexLine\n            .data([index]);\n        }\n\n\n        if (typeof e.rescaleY !== 'undefined') {\n          rescaleY = e.rescaleY;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.lines = lines;\n  chart.legend = legend;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n  chart.interactiveLayer = interactiveLayer;\n\n  d3.rebind(chart, lines, 'defined', 'isArea', 'x', 'y', 'xScale','yScale', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi','useVoronoi',  'id');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.rescaleY = function(_) {\n    if (!arguments.length) return rescaleY;\n    rescaleY = _;\n    return chart;\n  };\n\n  chart.showControls = function(_) {\n    if (!arguments.length) return showControls;\n    showControls = _;\n    return chart;\n  };\n\n  chart.useInteractiveGuideline = function(_) {\n    if(!arguments.length) return useInteractiveGuideline;\n    useInteractiveGuideline = _;\n    if (_ === true) {\n       chart.interactive(false);\n       chart.useVoronoi(false);\n    }\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.average = function(_) {\n     if(!arguments.length) return average;\n     average = _;\n     return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  chart.noErrorCheck = function(_) {\n    if (!arguments.length) return noErrorCheck;\n    noErrorCheck = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  //============================================================\n  // Functions\n  //------------------------------------------------------------\n\n  /* Normalize the data according to an index point. */\n  function indexify(idx, data) {\n    return data.map(function(line, i) {\n      if (!line.values) {\n         return line;\n      }\n      var indexValue = line.values[idx];\n      if (indexValue == null) {\n        return line;\n      }\n      var v = lines.y()(indexValue, idx);\n\n      //TODO: implement check below, and disable series if series loses 100% or more cause divide by 0 issue\n      if (v < -.95 && !noErrorCheck) {\n        //if a series loses more than 100%, calculations fail.. anything close can cause major distortion (but is mathematically correct till it hits 100)\n\n        line.tempDisabled = true;\n        return line;\n      }\n\n      line.tempDisabled = false;\n\n      line.values = line.values.map(function(point, pointIndex) {\n        point.display = {'y': (lines.y()(point, pointIndex) - v) / (1 + v) };\n        return point;\n      })\n\n      return line;\n    })\n  }\n\n  //============================================================\n\n\n  return chart;\n}\n//TODO: consider deprecating by adding necessary features to multiBar model\nnv.models.discreteBar = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    , x = d3.scale.ordinal()\n    , y = d3.scale.linear()\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n    , color = nv.utils.defaultColor()\n    , showValues = false\n    , valueFormat = d3.format(',.2f')\n    , xDomain\n    , yDomain\n    , xRange\n    , yRange\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n    , rectClass = 'discreteBar'\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n\n      //add series index to each data point for reference\n      data.forEach(function(series, i) {\n        series.values.forEach(function(point) {\n          point.series = i;\n        });\n      });\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      // remap and flatten the data for use in calculating the scales' domains\n      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n            data.map(function(d) {\n              return d.values.map(function(d,i) {\n                return { x: getX(d,i), y: getY(d,i), y0: d.y0 }\n              })\n            });\n\n      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n          .rangeBands(xRange || [0, availableWidth], .1);\n\n      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y }).concat(forceY)));\n\n\n      // If showValues, pad the Y axis range to account for label height\n      if (showValues) y.range(yRange || [availableHeight - (y.domain()[0] < 0 ? 12 : 0), y.domain()[1] > 0 ? 12 : 0]);\n      else y.range(yRange || [availableHeight, 0]);\n\n      //store old scales if they exist\n      x0 = x0 || x;\n      y0 = y0 || y.copy().range([y(0),y(0)]);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-discretebar').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discretebar');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-groups');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n\n      //TODO: by definition, the discrete bar should not have multiple groups, will modify/remove later\n      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n          .data(function(d) { return d }, function(d) { return d.key });\n      groups.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n      groups.exit()\n          \n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6)\n          .remove();\n      groups\n          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n          .classed('hover', function(d) { return d.hover });\n      groups\n          \n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .75);\n\n\n      var bars = groups.selectAll('g.nv-bar')\n          .data(function(d) { return d.values });\n\n      bars.exit().remove();\n\n\n      var barsEnter = bars.enter().append('g')\n          .attr('transform', function(d,i,j) {\n              return 'translate(' + (x(getX(d,i)) + x.rangeBand() * .05 ) + ', ' + y(0) + ')'\n          })\n          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n            d3.select(this).classed('hover', true);\n            dispatch.elementMouseover({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (d.series + .5) / data.length), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n          })\n          .on('mouseout', function(d,i) {\n            d3.select(this).classed('hover', false);\n            dispatch.elementMouseout({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n          })\n          .on('click', function(d,i) {\n            dispatch.elementClick({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (d.series + .5) / data.length), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n            d3.event.stopPropagation();\n          })\n          .on('dblclick', function(d,i) {\n            dispatch.elementDblClick({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (d.series + .5) / data.length), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n            d3.event.stopPropagation();\n          });\n\n      barsEnter.append('rect')\n          .attr('height', 0)\n          .attr('width', x.rangeBand() * .9 / data.length )\n\n      if (showValues) {\n        barsEnter.append('text')\n          .attr('text-anchor', 'middle')\n          ;\n\n        bars.select('text')\n          .text(function(d,i) { return valueFormat(getY(d,i)) })\n          \n          .attr('x', x.rangeBand() * .9 / 2)\n          .attr('y', function(d,i) { return getY(d,i) < 0 ? y(getY(d,i)) - y(0) + 12 : -4 })\n\n          ;\n      } else {\n        bars.selectAll('text').remove();\n      }\n\n      bars\n          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive' })\n          .style('fill', function(d,i) { return d.color || color(d,i) })\n          .style('stroke', function(d,i) { return d.color || color(d,i) })\n        .select('rect')\n          .attr('class', rectClass)\n          \n          .attr('width', x.rangeBand() * .9 / data.length);\n      bars\n          .attr('transform', function(d,i) {\n            var left = x(getX(d,i)) + x.rangeBand() * .05,\n                top = getY(d,i) < 0 ?\n                        y(0) :\n                        y(0) - y(getY(d,i)) < 1 ?\n                          y(0) - 1 : //make 1 px positive bars show up above y=0\n                          y(getY(d,i));\n\n              return 'translate(' + left + ', ' + top + ')'\n          })\n        .select('rect')\n          .attr('height', function(d,i) {\n            return  Math.max(Math.abs(y(getY(d,i)) - y((yDomain && yDomain[0]) || 0)) || 1)\n          });\n\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.forceY = function(_) {\n    if (!arguments.length) return forceY;\n    forceY = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.showValues = function(_) {\n    if (!arguments.length) return showValues;\n    showValues = _;\n    return chart;\n  };\n\n  chart.valueFormat= function(_) {\n    if (!arguments.length) return valueFormat;\n    valueFormat = _;\n    return chart;\n  };\n\n  chart.rectClass= function(_) {\n    if (!arguments.length) return rectClass;\n    rectClass = _;\n    return chart;\n  };\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.discreteBarChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var discretebar = nv.models.discreteBar()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    ;\n\n  var margin = {top: 15, right: 10, bottom: 50, left: 60}\n    , width = null\n    , height = null\n    , color = nv.utils.getColor()\n    , showXAxis = true\n    , showYAxis = true\n    , rightAlignYAxis = false\n    , staggerLabels = false\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + x + '</h3>' +\n               '<p>' +  y + '</p>'\n      }\n    , x\n    , y\n    , noData = \"No Data Available.\"\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'beforeUpdate')\n    , transitionDuration = 0\n    ;\n\n  xAxis\n    .orient('bottom')\n    .highlightZero(false)\n    .showMaxMin(false)\n    .tickFormat(function(d) { return d })\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    .tickFormat(d3.format(',.1f'))\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(discretebar.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(discretebar.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n\n      chart.update = function() { \n        dispatch.beforeUpdate(); \n        container.call(chart); \n      };\n      chart.container = this;\n\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = discretebar.xScale();\n      y = discretebar.yScale().clamp(true);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-discreteBarWithAxes').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discreteBarWithAxes').append('g');\n      var defsEnter = gEnter.append('defs');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis')\n            .append('g').attr('class', 'nv-zeroLine')\n            .append('line');\n        \n      gEnter.append('g').attr('class', 'nv-barsWrap');\n\n      g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      discretebar\n        .width(availableWidth)\n        .height(availableHeight);\n\n\n      var barsWrap = g.select('.nv-barsWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      barsWrap.call(discretebar);\n\n      //------------------------------------------------------------\n\n\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-x-label-clip-' + discretebar.id())\n        .append('rect');\n\n      g.select('#nv-x-label-clip-' + discretebar.id() + ' rect')\n          .attr('width', x.rangeBand() * (staggerLabels ? 2 : 1))\n          .attr('height', 16)\n          .attr('x', -x.rangeBand() / (staggerLabels ? 1 : 2 ));\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n          xAxis\n            .scale(x)\n            .ticks( availableWidth / 100 )\n            .tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis')\n              .attr('transform', 'translate(0,' + (y.range()[0] + ((discretebar.showValues() && y.domain()[0] < 0) ? 16 : 0)) + ')');\n          //d3.transition(g.select('.nv-x.nv-axis'))\n          g.select('.nv-x.nv-axis')\n              .call(xAxis);\n\n\n          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\n          if (staggerLabels) {\n            xTicks\n                .selectAll('text')\n                .attr('transform', function(d,i,j) { return 'translate(0,' + (j % 2 == 0 ? '5' : '17') + ')' })\n          }\n      }\n\n      if (showYAxis) {\n          yAxis\n            .scale(y)\n            .ticks( availableHeight / 36 )\n            .tickSize( -availableWidth, 0);\n\n          g.select('.nv-y.nv-axis')\n              .call(yAxis);\n      }\n\n      // Zero line\n      g.select(\".nv-zeroLine line\")\n        .attr(\"x1\",0)\n        .attr(\"x2\",availableWidth)\n        .attr(\"y1\", y(0))\n        .attr(\"y2\", y(0))\n        ;\n\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      //============================================================\n\n\n    });\n\n    return chart;\n  }\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  discretebar.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  discretebar.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.discretebar = discretebar;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n\n  d3.rebind(chart, discretebar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'id', 'showValues', 'valueFormat');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    discretebar.color(color);\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.staggerLabels = function(_) {\n    if (!arguments.length) return staggerLabels;\n    staggerLabels = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.distribution = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 400 //technically width or height depending on x or y....\n    , size = 8\n    , axis = 'x' // 'x' or 'y'... horizontal or vertical\n    , getData = function(d) { return d[axis] }  // defaults d.x or d.y\n    , color = nv.utils.defaultColor()\n    , scale = d3.scale.linear()\n    , domain\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var scale0;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableLength = width - (axis === 'x' ? margin.left + margin.right : margin.top + margin.bottom),\n          naxis = axis == 'x' ? 'y' : 'x',\n          container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      scale0 = scale0 || scale;\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-distribution').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-distribution');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n      //------------------------------------------------------------\n\n\n      var distWrap = g.selectAll('g.nv-dist')\n          .data(function(d) { return d }, function(d) { return d.key });\n\n      distWrap.enter().append('g');\n      distWrap\n          .attr('class', function(d,i) { return 'nv-dist nv-series-' + i })\n          .style('stroke', function(d,i) { return color(d, i) });\n\n      var dist = distWrap.selectAll('line.nv-dist' + axis)\n          .data(function(d) { return d.values })\n      dist.enter().append('line')\n          .attr(axis + '1', function(d,i) { return scale0(getData(d,i)) })\n          .attr(axis + '2', function(d,i) { return scale0(getData(d,i)) })\n      distWrap.exit().selectAll('line.nv-dist' + axis)\n          \n          .attr(axis + '1', function(d,i) { return scale(getData(d,i)) })\n          .attr(axis + '2', function(d,i) { return scale(getData(d,i)) })\n          .style('stroke-opacity', 0)\n          .remove();\n      dist\n          .attr('class', function(d,i) { return 'nv-dist' + axis + ' nv-dist' + axis + '-' + i })\n          .attr(naxis + '1', 0)\n          .attr(naxis + '2', size);\n      dist\n          \n          .attr(axis + '1', function(d,i) { return scale(getData(d,i)) })\n          .attr(axis + '2', function(d,i) { return scale(getData(d,i)) })\n\n\n      scale0 = scale.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.axis = function(_) {\n    if (!arguments.length) return axis;\n    axis = _;\n    return chart;\n  };\n\n  chart.size = function(_) {\n    if (!arguments.length) return size;\n    size = _;\n    return chart;\n  };\n\n  chart.getData = function(_) {\n    if (!arguments.length) return getData;\n    getData = d3.functor(_);\n    return chart;\n  };\n\n  chart.scale = function(_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.historicalBarChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var bars = nv.models.historicalBar()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , legend = nv.models.legend()\n    ;\n\n\n  var margin = {top: 30, right: 90, bottom: 50, left: 90}\n    , color = nv.utils.defaultColor()\n    , width = null\n    , height = null\n    , showLegend = false\n    , showXAxis = true\n    , showYAxis = true\n    , rightAlignYAxis = false\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>'\n      }\n    , x\n    , y\n    , state = {}\n    , defaultState = null\n    , noData = 'No Data Available.'\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , transitionDuration = 0\n    ;\n\n  xAxis\n    .orient('bottom')\n    .tickPadding(7)\n    ;\n  yAxis\n    .orient( (rightAlignYAxis) ? 'right' : 'left')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n\n    // New addition to calculate position if SVG is scaled with viewBox, may move TODO: consider implementing everywhere else\n    if (offsetElement) {\n      var svg = d3.select(offsetElement).select('svg');\n      var viewBox = (svg.node()) ? svg.attr('viewBox') : null;\n      if (viewBox) {\n        viewBox = viewBox.split(' ');\n        var ratio = parseInt(svg.style('width')) / viewBox[2];\n        e.pos[0] = e.pos[0] * ratio;\n        e.pos[1] = e.pos[1] * ratio;\n      }\n    }\n\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(bars.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(bars.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, null, null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n\n      chart.update = function() { container.call(chart) };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display noData message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = bars.xScale();\n      y = bars.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-historicalBarChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBarChart').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-barsWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width(availableWidth);\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        wrap.select('.nv-legendWrap')\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n      }\n\n      //------------------------------------------------------------\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n        g.select(\".nv-y.nv-axis\")\n            .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      bars\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled }));\n\n\n      var barsWrap = g.select('.nv-barsWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      barsWrap.call(bars);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n        xAxis\n          .scale(x)\n          .tickSize(-availableHeight, 0);\n\n        g.select('.nv-x.nv-axis')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')');\n        g.select('.nv-x.nv-axis')\n            \n            .call(xAxis);\n      }\n\n      if (showYAxis) {\n        yAxis\n          .scale(y)\n          .ticks( availableHeight / 36 )\n          .tickSize( -availableWidth, 0);\n\n        g.select('.nv-y.nv-axis')\n          \n            .call(yAxis);\n      }\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('legendClick', function(d,i) {\n        d.disabled = !d.disabled;\n\n        if (!data.filter(function(d) { return !d.disabled }).length) {\n          data.map(function(d) {\n            d.disabled = false;\n            wrap.selectAll('.nv-series').classed('disabled', false);\n            return d;\n          });\n        }\n\n        state.disabled = data.map(function(d) { return !!d.disabled });\n        dispatch.stateChange(state);\n\n        selection.call(chart);\n      });\n\n      legend.dispatch.on('legendDblclick', function(d) {\n          //Double clicking should always enable current series, and disabled all others.\n          data.forEach(function(d) {\n             d.disabled = true;\n          });\n          d.disabled = false;\n\n          state.disabled = data.map(function(d) { return !!d.disabled });\n          dispatch.stateChange(state);\n          chart.update();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  bars.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  bars.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.bars = bars;\n  chart.legend = legend;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n\n  d3.rebind(chart, bars, 'defined', 'isArea', 'x', 'y', 'size', 'xScale', 'yScale',\n    'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id', 'interpolate','highlightPoint','clearHighlights', 'interactive');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\nnv.models.indentedTree = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0} //TODO: implement, maybe as margin on the containing div\n    , width = 960\n    , height = 500\n    , color = nv.utils.defaultColor()\n    , id = Math.floor(Math.random() * 10000)\n    , header = true\n    , filterZero = false\n    , noData = \"No Data Available.\"\n    , childIndent = 20\n    , columns = [{key:'key', label: 'Name', type:'text'}] //TODO: consider functions like chart.addColumn, chart.removeColumn, instead of a block like this\n    , tableClass = null\n    , iconOpen = 'images/grey-plus.png' //TODO: consider removing this and replacing with a '+' or '-' unless user defines images\n    , iconClose = 'images/grey-minus.png'\n    , dispatch = d3.dispatch('elementClick', 'elementDblclick', 'elementMouseover', 'elementMouseout')\n    , getUrl = function(d) { return d.url }\n    ;\n\n  //============================================================\n\n  var idx = 0;\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var depth = 1,\n          container = d3.select(this);\n\n      var tree = d3.layout.tree()\n          .children(function(d) { return d.values })\n          .size([height, childIndent]); //Not sure if this is needed now that the result is HTML\n\n      chart.update = function() { container.call(chart) };\n\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n      if (!data[0]) data[0] = {key: noData};\n\n      //------------------------------------------------------------\n\n\n      var nodes = tree.nodes(data[0]);\n\n      // nodes.map(function(d) {\n      //   d.id = i++;\n      // })\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = d3.select(this).selectAll('div').data([[nodes]]);\n      var wrapEnter = wrap.enter().append('div').attr('class', 'nvd3 nv-wrap nv-indentedtree');\n      var tableEnter = wrapEnter.append('table');\n      var table = wrap.select('table').attr('width', '100%').attr('class', tableClass);\n\n      //------------------------------------------------------------\n\n\n      if (header) {\n        var thead = tableEnter.append('thead');\n\n        var theadRow1 = thead.append('tr');\n\n        columns.forEach(function(column) {\n          theadRow1\n            .append('th')\n              .attr('width', column.width ? column.width : '10%')\n              .style('text-align', column.type == 'numeric' ? 'right' : 'left')\n            .append('span')\n              .text(column.label);\n        });\n      }\n\n\n      var tbody = table.selectAll('tbody')\n                    .data(function(d) { return d });\n      tbody.enter().append('tbody');\n\n\n\n      //compute max generations\n      depth = d3.max(nodes, function(node) { return node.depth });\n      tree.size([height, depth * childIndent]); //TODO: see if this is necessary at all\n\n\n      // Update the nodes\n      var node = tbody.selectAll('tr')\n          // .data(function(d) { return d; }, function(d) { return d.id || (d.id == ++i)});\n          .data(function(d) { return d.filter(function(d) { return (filterZero && !d.children) ? filterZero(d) :  true; } )}, function(d,i) { return d.id || (d.id || ++idx)});\n          //.style('display', 'table-row'); //TODO: see if this does anything\n\n      node.exit().remove();\n\n      node.select('img.nv-treeicon')\n          .attr('src', icon)\n          .classed('folded', folded);\n\n      var nodeEnter = node.enter().append('tr');\n\n\n      columns.forEach(function(column, index) {\n\n        var nodeName = nodeEnter.append('td')\n            .style('padding-left', function(d) { return (index ? 0 : d.depth * childIndent + 12 + (icon(d) ? 0 : 16)) + 'px' }, 'important') //TODO: check why I did the ternary here\n            .style('text-align', column.type == 'numeric' ? 'right' : 'left');\n\n\n        if (index == 0) {\n          nodeName.append('img')\n              .classed('nv-treeicon', true)\n              .classed('nv-folded', folded)\n              .attr('src', icon)\n              .style('width', '14px')\n              .style('height', '14px')\n              .style('padding', '0 1px')\n              .style('display', function(d) { return icon(d) ? 'inline-block' : 'none'; })\n              .on('click', click);\n        }\n\n\n        nodeName.each(function(d) {\n          if (!index && getUrl(d))\n            d3.select(this)\n              .append('a')\n              .attr('href',getUrl)\n              .attr('class', d3.functor(column.classes))\n              .append('span')\n          else\n            d3.select(this)\n              .append('span')\n\n            d3.select(this).select('span')\n              .attr('class', d3.functor(column.classes) )\n              .text(function(d) { return column.format ? (d[column.key] ? column.format(d[column.key]) : '-') :  (d[column.key] || '-'); });\n          });\n\n        if  (column.showCount) {\n          nodeName.append('span')\n              .attr('class', 'nv-childrenCount');\n\n          node.selectAll('span.nv-childrenCount').text(function(d) {\n                return ((d.values && d.values.length) || (d._values && d._values.length)) ?                                   //If this is a parent\n                    '(' + ((d.values && (d.values.filter(function(d) { return filterZero ? filterZero(d) :  true; }).length)) //If children are in values check its children and filter\n                    || (d._values && d._values.filter(function(d) { return filterZero ? filterZero(d) :  true; }).length)     //Otherwise, do the same, but with the other name, _values...\n                    || 0) + ')'                                                                                               //This is the catch-all in case there are no children after a filter\n                    : ''                                                                                                     //If this is not a parent, just give an empty string\n            });\n        }\n\n        // if (column.click)\n        //   nodeName.select('span').on('click', column.click);\n\n      });\n\n      node\n        .order()\n        .on('click', function(d) { \n          dispatch.elementClick({\n            row: this, //TODO: decide whether or not this should be consistent with scatter/line events or should be an html link (a href)\n            data: d,\n            pos: [d.x, d.y]\n          });\n        })\n        .on('dblclick', function(d) { \n          dispatch.elementDblclick({\n            row: this,\n            data: d,\n            pos: [d.x, d.y]\n          });\n        })\n        .on('mouseover', function(d) { \n          dispatch.elementMouseover({\n            row: this,\n            data: d,\n            pos: [d.x, d.y]\n          });\n        })\n        .on('mouseout', function(d) { \n          dispatch.elementMouseout({\n            row: this,\n            data: d,\n            pos: [d.x, d.y]\n          });\n        });\n\n\n\n\n      // Toggle children on click.\n      function click(d, _, unshift) {\n        d3.event.stopPropagation();\n\n        if(d3.event.shiftKey && !unshift) {\n          //If you shift-click, it'll toggle fold all the children, instead of itself\n          d3.event.shiftKey = false;\n          d.values && d.values.forEach(function(node){\n            if (node.values || node._values) {\n              click(node, 0, true);\n            }\n          });\n          return true;\n        }\n        if(!hasChildren(d)) {\n          //download file\n          //window.location.href = d.url;\n          return true;\n        }\n        if (d.values) {\n          d._values = d.values;\n          d.values = null;\n        } else {\n          d.values = d._values;\n          d._values = null;\n        }\n        chart.update();\n      }\n\n\n      function icon(d) {\n        return (d._values && d._values.length) ? iconOpen : (d.values && d.values.length) ? iconClose : '';\n      }\n\n      function folded(d) {\n        return (d._values && d._values.length);\n      }\n\n      function hasChildren(d) {\n        var values = d.values || d._values;\n\n        return (values && values.length);\n      }\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    scatter.color(color);\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.header = function(_) {\n    if (!arguments.length) return header;\n    header = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.filterZero = function(_) {\n    if (!arguments.length) return filterZero;\n    filterZero = _;\n    return chart;\n  };\n\n  chart.columns = function(_) {\n    if (!arguments.length) return columns;\n    columns = _;\n    return chart;\n  };\n\n  chart.tableClass = function(_) {\n    if (!arguments.length) return tableClass;\n    tableClass = _;\n    return chart;\n  };\n\n  chart.iconOpen = function(_){\n     if (!arguments.length) return iconOpen;\n    iconOpen = _;\n    return chart;\n  }\n\n  chart.iconClose = function(_){\n     if (!arguments.length) return iconClose;\n    iconClose = _;\n    return chart;\n  }\n\n  chart.getUrl = function(_){\n     if (!arguments.length) return getUrl;\n    getUrl = _;\n    return chart;\n  }\n\n  //============================================================\n\n\n  return chart;\n};nv.models.legend = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 5, right: 0, bottom: 5, left: 0}\n    , width = 400\n    , height = 20\n    , getKey = function(d) { return d.key }\n    , color = nv.utils.defaultColor()\n    , align = true\n    , rightAlign = true\n    , updateState = true   //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\n    , radioButtonMode = false   //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\n    , dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange')\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-legend').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-legend').append('g');\n      var g = wrap.select('g');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      var series = g.selectAll('.nv-series')\n          .data(function(d) { return d });\n      var seriesEnter = series.enter().append('g').attr('class', 'nv-series')\n          .on('mouseover', function(d,i) {\n            dispatch.legendMouseover(d,i);  //TODO: Make consistent with other event objects\n          })\n          .on('mouseout', function(d,i) {\n            dispatch.legendMouseout(d,i);\n          })\n          .on('click', function(d,i) {\n            dispatch.legendClick(d,i);\n            if (updateState) {\n               if (radioButtonMode) {\n                   //Radio button mode: set every series to disabled,\n                   //  and enable the clicked series.\n                   data.forEach(function(series) { series.disabled = true});\n                   d.disabled = false;\n               }\n               else {\n                   d.disabled = !d.disabled;\n                   if (data.every(function(series) { return series.disabled})) {\n                       //the default behavior of NVD3 legends is, if every single series\n                       // is disabled, turn all series' back on.\n                       data.forEach(function(series) { series.disabled = false});\n                   }\n               }\n               dispatch.stateChange({\n                  disabled: data.map(function(d) { return !!d.disabled })\n               });\n            }\n          })\n          .on('dblclick', function(d,i) {\n            dispatch.legendDblclick(d,i);\n            if (updateState) {\n                //the default behavior of NVD3 legends, when double clicking one,\n                // is to set all other series' to false, and make the double clicked series enabled.\n                data.forEach(function(series) {\n                   series.disabled = true;\n                });\n                d.disabled = false;\n                dispatch.stateChange({\n                    disabled: data.map(function(d) { return !!d.disabled })\n                });\n            }\n          });\n      seriesEnter.append('circle')\n          .style('stroke-width', 2)\n          .attr('class','nv-legend-symbol')\n          .attr('r', 5);\n      seriesEnter.append('text')\n          .attr('text-anchor', 'start')\n          .attr('class','nv-legend-text')\n          .attr('dy', '.32em')\n          .attr('dx', '8');\n      series.classed('disabled', function(d) { return d.disabled });\n      series.exit().remove();\n      series.select('circle')\n          .style('fill', function(d,i) { return d.color || color(d,i)})\n          .style('stroke', function(d,i) { return d.color || color(d, i) });\n      series.select('text').text(getKey);\n\n\n      //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\n\n      // NEW ALIGNING CODE, TODO: clean up\n      if (align) {\n\n        var seriesWidths = [];\n        series.each(function(d,i) {\n              var legendText = d3.select(this).select('text');\n              var nodeTextLength;\n              try {\n                nodeTextLength = legendText.getComputedTextLength();\n                // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\n                if(nodeTextLength <= 0) throw Error();\n              }\n              catch(e) {\n                nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\n              }\n\n              seriesWidths.push(nodeTextLength + 28); // 28 is ~ the width of the circle plus some padding\n            });\n\n        var seriesPerRow = 0;\n        var legendWidth = 0;\n        var columnWidths = [];\n\n        while ( legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\n          columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\n          legendWidth += seriesWidths[seriesPerRow++];\n        }\n        if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\n\n\n        while ( legendWidth > availableWidth && seriesPerRow > 1 ) {\n          columnWidths = [];\n          seriesPerRow--;\n\n          for (var k = 0; k < seriesWidths.length; k++) {\n            if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0) )\n              columnWidths[k % seriesPerRow] = seriesWidths[k];\n          }\n\n          legendWidth = columnWidths.reduce(function(prev, cur, index, array) {\n                          return prev + cur;\n                        });\n        }\n\n        var xPositions = [];\n        for (var i = 0, curX = 0; i < seriesPerRow; i++) {\n            xPositions[i] = curX;\n            curX += columnWidths[i];\n        }\n\n        series\n            .attr('transform', function(d, i) {\n              return 'translate(' + xPositions[i % seriesPerRow] + ',' + (5 + Math.floor(i / seriesPerRow) * 20) + ')';\n            });\n\n        //position legend as far right as possible within the total width\n        if (rightAlign) {\n           g.attr('transform', 'translate(' + (width - margin.right - legendWidth) + ',' + margin.top + ')');\n        }\n        else {\n           g.attr('transform', 'translate(0' + ',' + margin.top + ')');\n        }\n\n        height = margin.top + margin.bottom + (Math.ceil(seriesWidths.length / seriesPerRow) * 20);\n\n      } else {\n\n        var ypos = 5,\n            newxpos = 5,\n            maxwidth = 0,\n            xpos;\n        series\n            .attr('transform', function(d, i) {\n              var length = d3.select(this).select('text').node().getComputedTextLength() + 28;\n              xpos = newxpos;\n\n              if (width < margin.left + margin.right + xpos + length) {\n                newxpos = xpos = 5;\n                ypos += 20;\n              }\n\n              newxpos += length;\n              if (newxpos > maxwidth) maxwidth = newxpos;\n\n              return 'translate(' + xpos + ',' + ypos + ')';\n            });\n\n        //position legend as far right as possible within the total width\n        g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n\n        height = margin.top + margin.bottom + ypos + 15;\n\n      }\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.key = function(_) {\n    if (!arguments.length) return getKey;\n    getKey = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.align = function(_) {\n    if (!arguments.length) return align;\n    align = _;\n    return chart;\n  };\n\n  chart.rightAlign = function(_) {\n    if (!arguments.length) return rightAlign;\n    rightAlign = _;\n    return chart;\n  };\n\n  chart.updateState = function(_) {\n    if (!arguments.length) return updateState;\n    updateState = _;\n    return chart;\n  };\n\n  chart.radioButtonMode = function(_) {\n    if (!arguments.length) return radioButtonMode;\n    radioButtonMode = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.line = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var  scatter = nv.models.scatter()\n    ;\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , color = nv.utils.defaultColor() // a function that returns a color\n    , getX = function(d) { return d.x } // accessor to get the x value from a data point\n    , getY = function(d) { return d.y } // accessor to get the y value from a data point\n    , defined = function(d,i) { return !isNaN(getY(d,i)) && getY(d,i) !== null } // allows a line to be not continuous when it is not defined\n    , isArea = function(d) { return d.area } // decides if a line is an area or just a line\n    , clipEdge = false // if true, masks lines within x and y scale\n    , x //can be accessed via chart.xScale()\n    , y //can be accessed via chart.yScale()\n    , interpolate = \"linear\" // controls the line interpolation\n    ;\n\n  scatter\n    .size(16) // default size\n    .sizeDomain([16,256]) //set to speed up calculation, needs to be unset if there is a custom size accessor\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0 //used to store previous scales\n      ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = scatter.xScale();\n      y = scatter.yScale();\n\n      x0 = x0 || x;\n      y0 = y0 || y;\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-line').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-line');\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g')\n\n      gEnter.append('g').attr('class', 'nv-groups');\n      gEnter.append('g').attr('class', 'nv-scatterWrap');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n\n\n      scatter\n        .width(availableWidth)\n        .height(availableHeight)\n\n      var scatterWrap = wrap.select('.nv-scatterWrap');\n          //.datum(data); // Data automatically trickles down from the wrap\n\n      scatterWrap.call(scatter);\n\n\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-edge-clip-' + scatter.id())\n        .append('rect');\n\n      wrap.select('#nv-edge-clip-' + scatter.id() + ' rect')\n          .attr('width', availableWidth)\n          .attr('height', (availableHeight > 0) ? availableHeight : 0);\n\n      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n      scatterWrap\n          .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n\n\n\n\n      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n          .data(function(d) { return d }, function(d) { return d.key });\n      groups.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n\n      groups.exit().remove();\n\n      groups\n          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n          .classed('hover', function(d) { return d.hover })\n          .style('fill', function(d,i){ return color(d, i) })\n          .style('stroke', function(d,i){ return color(d, i)});\n      groups\n          \n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .5);\n\n\n\n      var areaPaths = groups.selectAll('path.nv-area')\n          .data(function(d) { return isArea(d) ? [d] : [] }); // this is done differently than lines because I need to check if series is an area\n      areaPaths.enter().append('path')\n          .attr('class', 'nv-area')\n          .attr('d', function(d) {\n            return d3.svg.area()\n                .interpolate(interpolate)\n                .defined(defined)\n                .x(function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n                .y0(function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n                .y1(function(d,i) { return y0( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\n                //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n                .apply(this, [d.values])\n          });\n      groups.exit().selectAll('path.nv-area')\n           .remove();\n\n      areaPaths\n          \n          .attr('d', function(d) {\n            return d3.svg.area()\n                .interpolate(interpolate)\n                .defined(defined)\n                .x(function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n                .y0(function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n                .y1(function(d,i) { return y( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\n                //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n                .apply(this, [d.values])\n          });\n\n\n\n      var linePaths = groups.selectAll('path.nv-line')\n          .data(function(d) { return [d.values] });\n      linePaths.enter().append('path')\n          .attr('class', 'nv-line')\n          .attr('d',\n            d3.svg.line()\n              .interpolate(interpolate)\n              .defined(defined)\n              .x(function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n              .y(function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n          );\n\n      linePaths\n          \n          .attr('d',\n            d3.svg.line()\n              .interpolate(interpolate)\n              .defined(defined)\n              .x(function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n              .y(function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n          );\n\n\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = scatter.dispatch;\n  chart.scatter = scatter;\n\n  d3.rebind(chart, scatter, 'id', 'interactive', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange',\n    'sizeDomain', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'useVoronoi', 'clipRadius', 'padData','highlightPoint','clearHighlights');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    scatter.x(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    scatter.y(_);\n    return chart;\n  };\n\n  chart.clipEdge = function(_) {\n    if (!arguments.length) return clipEdge;\n    clipEdge = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    scatter.color(color);\n    return chart;\n  };\n\n  chart.interpolate = function(_) {\n    if (!arguments.length) return interpolate;\n    interpolate = _;\n    return chart;\n  };\n\n  chart.defined = function(_) {\n    if (!arguments.length) return defined;\n    defined = _;\n    return chart;\n  };\n\n  chart.isArea = function(_) {\n    if (!arguments.length) return isArea;\n    isArea = d3.functor(_);\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.lineChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var lines = nv.models.line()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , legend = nv.models.legend()\n    , interactiveLayer = nv.interactiveGuideline()\n    ;\n\n  var margin = {top: 30, right: 20, bottom: 50, left: 60}\n    , color = nv.utils.defaultColor()\n    , width = null\n    , height = null\n    , showLegend = true\n    , showXAxis = true\n    , showYAxis = true\n    , rightAlignYAxis = false\n    , useInteractiveGuideline = false\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>'\n      }\n    , x\n    , y\n    , state = {}\n    , defaultState = null\n    , noData = 'No Data Available.'\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , transitionDuration = 0\n    ;\n\n  xAxis\n    .orient('bottom')\n    .tickPadding(7)\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, null, null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n\n      chart.update = function() { container.call(chart) };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display noData message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = lines.xScale();\n      y = lines.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-lineChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-lineChart').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append(\"rect\").style(\"opacity\",0);\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-linesWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-interactive');\n\n      g.select(\"rect\")\n        .attr(\"width\",availableWidth)\n        .attr(\"height\",(availableHeight > 0) ? availableHeight : 0);\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width(availableWidth);\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        wrap.select('.nv-legendWrap')\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n      }\n\n      //------------------------------------------------------------\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n\n      //------------------------------------------------------------\n      //Set up interactive layer\n      if (useInteractiveGuideline) {\n        interactiveLayer\n           .width(availableWidth)\n           .height(availableHeight)\n           .margin({left:margin.left, top:margin.top})\n           .svgContainer(container)\n           .xScale(x);\n        wrap.select(\".nv-interactive\").call(interactiveLayer);\n      }\n\n\n      lines\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled }));\n\n\n      var linesWrap = g.select('.nv-linesWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      linesWrap.call(lines);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n        xAxis\n          .scale(x)\n          .ticks( availableWidth / 100 )\n          .tickSize(-availableHeight, 0);\n\n        g.select('.nv-x.nv-axis')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')');\n        g.select('.nv-x.nv-axis')\n            \n            .call(xAxis);\n      }\n\n      if (showYAxis) {\n        yAxis\n          .scale(y)\n          .ticks( availableHeight / 36 )\n          .tickSize( -availableWidth, 0);\n\n        g.select('.nv-y.nv-axis')\n            \n            .call(yAxis);\n      }\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) {\n          state = newState;\n          dispatch.stateChange(state);\n          chart.update();\n      });\n\n      interactiveLayer.dispatch.on('elementMousemove', function(e) {\n          lines.clearHighlights();\n          var singlePoint, pointIndex, pointXLocation, allData = [];\n          data\n          .filter(function(series, i) {\n            series.seriesIndex = i;\n            return !series.disabled;\n          })\n          .forEach(function(series,i) {\n              pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n              lines.highlightPoint(i, pointIndex, true);\n              var point = series.values[pointIndex];\n              if (typeof point === 'undefined') return;\n              if (typeof singlePoint === 'undefined') singlePoint = point;\n              if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n              allData.push({\n                  key: series.key,\n                  value: chart.y()(point, pointIndex),\n                  color: color(series,series.seriesIndex)\n              });\n          });\n          //Highlight the tooltip entry based on which point the mouse is closest to.\n          if (allData.length > 2) {\n            var yValue = chart.yScale().invert(e.mouseY);\n            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n            var threshold = 0.03 * domainExtent;\n            var indexToHighlight = nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);\n            if (indexToHighlight !== null)\n              allData[indexToHighlight].highlight = true;\n          }\n\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex));\n          interactiveLayer.tooltip\n                  .position({left: pointXLocation + margin.left, top: e.mouseY + margin.top})\n                  .chartContainer(that.parentNode)\n                  .enabled(tooltips)\n                  .valueFormatter(function(d,i) {\n                     return yAxis.tickFormat()(d);\n                  })\n                  .data(\n                      {\n                        value: xValue,\n                        series: allData\n                      }\n                  )();\n\n          interactiveLayer.renderGuideLine(pointXLocation);\n\n      });\n\n      interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n          dispatch.tooltipHide();\n          lines.clearHighlights();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.lines = lines;\n  chart.legend = legend;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n  chart.interactiveLayer = interactiveLayer;\n\n  d3.rebind(chart, lines, 'defined', 'isArea', 'x', 'y', 'size', 'xScale', 'yScale', 'xDomain', 'yDomain', 'xRange', 'yRange'\n    , 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'useVoronoi','id', 'interpolate');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.useInteractiveGuideline = function(_) {\n    if(!arguments.length) return useInteractiveGuideline;\n    useInteractiveGuideline = _;\n    if (_ === true) {\n       chart.interactive(false);\n       chart.useVoronoi(false);\n    }\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.linePlusBarChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var lines = nv.models.line()\n    , bars = nv.models.historicalBar()\n    , xAxis = nv.models.axis()\n    , y1Axis = nv.models.axis()\n    , y2Axis = nv.models.axis()\n    , legend = nv.models.legend()\n    ;\n\n  var margin = {top: 30, right: 60, bottom: 50, left: 60}\n    , width = null\n    , height = null\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , color = nv.utils.defaultColor()\n    , showLegend = true\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>';\n      }\n    , x\n    , y1\n    , y2\n    , state = {}\n    , defaultState = null\n    , noData = \"No Data Available.\"\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    ;\n\n  bars\n    .padData(true)\n    ;\n  lines\n    .clipEdge(false)\n    .padData(true)\n    ;\n  xAxis\n    .orient('bottom')\n    .tickPadding(7)\n    .highlightZero(false)\n    ;\n  y1Axis\n    .orient('left')\n    ;\n  y2Axis\n    .orient('right')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n      var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n          top = e.pos[1] + ( offsetElement.offsetTop || 0),\n          x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n          y = (e.series.bar ? y1Axis : y2Axis).tickFormat()(lines.y()(e.point, e.pointIndex)),\n          content = tooltip(e.series.key, x, y, e, chart);\n\n      nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n    }\n    ;\n\n  //------------------------------------------------------------\n\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart); };\n      // chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      var dataBars = data.filter(function(d) { return !d.disabled && d.bar });\n      var dataLines = data.filter(function(d) { return !d.bar }); // removed the !d.disabled clause here to fix Issue #240\n\n      //x = xAxis.scale();\n       x = dataLines.filter(function(d) { return !d.disabled; }).length && dataLines.filter(function(d) { return !d.disabled; })[0].values.length ? lines.xScale() : bars.xScale();\n      //x = dataLines.filter(function(d) { return !d.disabled; }).length ? lines.xScale() : bars.xScale(); //old code before change above\n      y1 = bars.yScale();\n      y2 = lines.yScale();\n\n      //------------------------------------------------------------\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-linePlusBar').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-linePlusBar').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y1 nv-axis');\n      gEnter.append('g').attr('class', 'nv-y2 nv-axis');\n      gEnter.append('g').attr('class', 'nv-barsWrap');\n      gEnter.append('g').attr('class', 'nv-linesWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width( availableWidth / 2 );\n\n        g.select('.nv-legendWrap')\n            .datum(data.map(function(series) {\n              series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n              series.key = series.originalKey + (series.bar ? ' (left axis)' : ' (right axis)');\n              return series;\n            }))\n          .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + ( availableWidth / 2 ) + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n\n      lines\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }))\n\n      bars\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && data[i].bar }))\n\n\n\n      var barsWrap = g.select('.nv-barsWrap')\n          .datum(dataBars.length ? dataBars : [{values:[]}])\n\n      var linesWrap = g.select('.nv-linesWrap')\n          .datum(dataLines[0] && !dataLines[0].disabled ? dataLines : [{values:[]}] );\n          //.datum(!dataLines[0].disabled ? dataLines : [{values:dataLines[0].values.map(function(d) { return [d[0], null] }) }] );\n\n      d3.transition(barsWrap).call(bars);\n      d3.transition(linesWrap).call(lines);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      xAxis\n        .scale(x)\n        .ticks( availableWidth / 100 )\n        .tickSize(-availableHeight, 0);\n\n      g.select('.nv-x.nv-axis')\n          .attr('transform', 'translate(0,' + y1.range()[0] + ')');\n      d3.transition(g.select('.nv-x.nv-axis'))\n          .call(xAxis);\n\n\n      y1Axis\n        .scale(y1)\n        .ticks( availableHeight / 36 )\n        .tickSize(-availableWidth, 0);\n\n      d3.transition(g.select('.nv-y1.nv-axis'))\n          .style('opacity', dataBars.length ? 1 : 0)\n          .call(y1Axis);\n\n\n      y2Axis\n        .scale(y2)\n        .ticks( availableHeight / 36 )\n        .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\n      g.select('.nv-y2.nv-axis')\n          .style('opacity', dataLines.length ? 1 : 0)\n          .attr('transform', 'translate(' + availableWidth + ',0)');\n          //.attr('transform', 'translate(' + x.range()[1] + ',0)');\n\n      d3.transition(g.select('.nv-y2.nv-axis'))\n          .call(y2Axis);\n\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) { \n        state = newState;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  bars.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  bars.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.legend = legend;\n  chart.lines = lines;\n  chart.bars = bars;\n  chart.xAxis = xAxis;\n  chart.y1Axis = y1Axis;\n  chart.y2Axis = y2Axis;\n\n  d3.rebind(chart, lines, 'defined', 'size', 'clipVoronoi', 'interpolate');\n  //TODO: consider rebinding x, y and some other stuff, and simply do soemthign lile bars.x(lines.x()), etc.\n  //d3.rebind(chart, lines, 'x', 'y', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    lines.x(_);\n    bars.x(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    lines.y(_);\n    bars.y(_);\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\nnv.models.lineWithFocusChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var lines = nv.models.line()\n    , lines2 = nv.models.line()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , x2Axis = nv.models.axis()\n    , y2Axis = nv.models.axis()\n    , legend = nv.models.legend()\n    , brush = d3.svg.brush()\n    ;\n\n  var margin = {top: 30, right: 30, bottom: 30, left: 60}\n    , margin2 = {top: 0, right: 30, bottom: 20, left: 60}\n    , color = nv.utils.defaultColor()\n    , width = null\n    , height = null\n    , height2 = 100\n    , x\n    , y\n    , x2\n    , y2\n    , showLegend = true\n    , brushExtent = null\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>'\n      }\n    , noData = \"No Data Available.\"\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'brush')\n    , transitionDuration = 0\n    ;\n\n  lines\n    .clipEdge(true)\n    ;\n  lines2\n    .interactive(false)\n    ;\n  xAxis\n    .orient('bottom')\n    .tickPadding(5)\n    ;\n  yAxis\n    .orient('left')\n    ;\n  x2Axis\n    .orient('bottom')\n    .tickPadding(5)\n    ;\n  y2Axis\n    .orient('left')\n    ;\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, null, null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom - height2,\n          availableHeight2 = height2 - margin2.top - margin2.bottom;\n\n      chart.update = function() { container.call(chart) };\n      chart.container = this;\n\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight1 / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = lines.xScale();\n      y = lines.yScale();\n      x2 = lines2.xScale();\n      y2 = lines2.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-lineWithFocusChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-lineWithFocusChart').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n\n      var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n      focusEnter.append('g').attr('class', 'nv-x nv-axis');\n      focusEnter.append('g').attr('class', 'nv-y nv-axis');\n      focusEnter.append('g').attr('class', 'nv-linesWrap');\n\n      var contextEnter = gEnter.append('g').attr('class', 'nv-context');\n      contextEnter.append('g').attr('class', 'nv-x nv-axis');\n      contextEnter.append('g').attr('class', 'nv-y nv-axis');\n      contextEnter.append('g').attr('class', 'nv-linesWrap');\n      contextEnter.append('g').attr('class', 'nv-brushBackground');\n      contextEnter.append('g').attr('class', 'nv-x nv-brush');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width(availableWidth);\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom - height2;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      lines\n        .width(availableWidth)\n        .height(availableHeight1)\n        .color(\n          data\n            .map(function(d,i) {\n              return d.color || color(d, i);\n            })\n            .filter(function(d,i) {\n              return !data[i].disabled;\n          })\n        );\n\n      lines2\n        .defined(lines.defined())\n        .width(availableWidth)\n        .height(availableHeight2)\n        .color(\n          data\n            .map(function(d,i) {\n              return d.color || color(d, i);\n            })\n            .filter(function(d,i) {\n              return !data[i].disabled;\n          })\n        );\n\n      g.select('.nv-context')\n          .attr('transform', 'translate(0,' + ( availableHeight1 + margin.bottom + margin2.top) + ')')\n\n      var contextLinesWrap = g.select('.nv-context .nv-linesWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      d3.transition(contextLinesWrap).call(lines2);\n\n      //------------------------------------------------------------\n\n\n      /*\n      var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      d3.transition(focusLinesWrap).call(lines);\n     */\n\n\n      //------------------------------------------------------------\n      // Setup Main (Focus) Axes\n\n      xAxis\n        .scale(x)\n        .ticks( availableWidth / 100 )\n        .tickSize(-availableHeight1, 0);\n\n      yAxis\n        .scale(y)\n        .ticks( availableHeight1 / 36 )\n        .tickSize( -availableWidth, 0);\n\n      g.select('.nv-focus .nv-x.nv-axis')\n          .attr('transform', 'translate(0,' + availableHeight1 + ')');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Brush\n\n      brush\n        .x(x2)\n        .on('brush', function() {\n            //When brushing, turn off transitions because chart needs to change immediately.\n            var oldTransition = chart.transitionDuration();\n            chart.transitionDuration(0); \n            onBrush();\n            chart.transitionDuration(oldTransition);\n        });\n\n      if (brushExtent) brush.extent(brushExtent);\n\n      var brushBG = g.select('.nv-brushBackground').selectAll('g')\n          .data([brushExtent || brush.extent()])\n\n      var brushBGenter = brushBG.enter()\n          .append('g');\n\n      brushBGenter.append('rect')\n          .attr('class', 'left')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('height', availableHeight2);\n\n      brushBGenter.append('rect')\n          .attr('class', 'right')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('height', availableHeight2);\n\n      var gBrush = g.select('.nv-x.nv-brush')\n          .call(brush);\n      gBrush.selectAll('rect')\n          //.attr('y', -5)\n          .attr('height', availableHeight2);\n      gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n\n      onBrush();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Secondary (Context) Axes\n\n      x2Axis\n        .scale(x2)\n        .ticks( availableWidth / 100 )\n        .tickSize(-availableHeight2, 0);\n\n      g.select('.nv-context .nv-x.nv-axis')\n          .attr('transform', 'translate(0,' + y2.range()[0] + ')');\n      d3.transition(g.select('.nv-context .nv-x.nv-axis'))\n          .call(x2Axis);\n\n\n      y2Axis\n        .scale(y2)\n        .ticks( availableHeight2 / 36 )\n        .tickSize( -availableWidth, 0);\n\n      d3.transition(g.select('.nv-context .nv-y.nv-axis'))\n          .call(y2Axis);\n\n      g.select('.nv-context .nv-x.nv-axis')\n          .attr('transform', 'translate(0,' + y2.range()[0] + ')');\n\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) { \n        chart.update();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      //============================================================\n\n\n      //============================================================\n      // Functions\n      //------------------------------------------------------------\n\n      // Taken from crossfilter (http://square.github.com/crossfilter/)\n      function resizePath(d) {\n        var e = +(d == 'e'),\n            x = e ? 1 : -1,\n            y = availableHeight2 / 3;\n        return 'M' + (.5 * x) + ',' + y\n            + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n            + 'V' + (2 * y - 6)\n            + 'A6,6 0 0 ' + e + ' ' + (.5 * x) + ',' + (2 * y)\n            + 'Z'\n            + 'M' + (2.5 * x) + ',' + (y + 8)\n            + 'V' + (2 * y - 8)\n            + 'M' + (4.5 * x) + ',' + (y + 8)\n            + 'V' + (2 * y - 8);\n      }\n\n\n      function updateBrushBG() {\n        if (!brush.empty()) brush.extent(brushExtent);\n        brushBG\n            .data([brush.empty() ? x2.domain() : brushExtent])\n            .each(function(d,i) {\n              var leftWidth = x2(d[0]) - x.range()[0],\n                  rightWidth = x.range()[1] - x2(d[1]);\n              d3.select(this).select('.left')\n                .attr('width',  leftWidth < 0 ? 0 : leftWidth);\n\n              d3.select(this).select('.right')\n                .attr('x', x2(d[1]))\n                .attr('width', rightWidth < 0 ? 0 : rightWidth);\n            });\n      }\n\n\n      function onBrush() {\n        brushExtent = brush.empty() ? null : brush.extent();\n        var extent = brush.empty() ? x2.domain() : brush.extent();\n\n        //The brush extent cannot be less than one.  If it is, don't update the line chart.\n        if (Math.abs(extent[0] - extent[1]) <= 1) {\n          return;\n        }\n\n        dispatch.brush({extent: extent, brush: brush});\n\n\n        updateBrushBG();\n\n        // Update Main (Focus)\n        var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n            .datum(\n              data\n                .filter(function(d) { return !d.disabled })\n                .map(function(d,i) {\n                  return {\n                    key: d.key,\n                    values: d.values.filter(function(d,i) {\n                      return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n                    })\n                  }\n                })\n            );\n        focusLinesWrap.call(lines);\n\n\n        // Update Main (Focus) Axes\n        g.select('.nv-focus .nv-x.nv-axis')\n            .call(xAxis);\n        g.select('.nv-focus .nv-y.nv-axis')\n            .call(yAxis);\n      }\n\n      //============================================================\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.legend = legend;\n  chart.lines = lines;\n  chart.lines2 = lines2;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n  chart.x2Axis = x2Axis;\n  chart.y2Axis = y2Axis;\n\n  d3.rebind(chart, lines, 'defined', 'isArea', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.x = function(_) {\n    if (!arguments.length) return lines.x;\n    lines.x(_);\n    lines2.x(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return lines.y;\n    lines.y(_);\n    lines2.y(_);\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.margin2 = function(_) {\n    if (!arguments.length) return margin2;\n    margin2 = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.height2 = function(_) {\n    if (!arguments.length) return height2;\n    height2 = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color =nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.interpolate = function(_) {\n    if (!arguments.length) return lines.interpolate();\n    lines.interpolate(_);\n    lines2.interpolate(_);\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  // Chart has multiple similar Axes, to prevent code duplication, probably need to link all axis functions manually like below\n  chart.xTickFormat = function(_) {\n    if (!arguments.length) return xAxis.tickFormat();\n    xAxis.tickFormat(_);\n    x2Axis.tickFormat(_);\n    return chart;\n  };\n\n  chart.yTickFormat = function(_) {\n    if (!arguments.length) return yAxis.tickFormat();\n    yAxis.tickFormat(_);\n    y2Axis.tickFormat(_);\n    return chart;\n  };\n  \n  chart.brushExtent = function(_) {\n    if (!arguments.length) return brushExtent;\n    brushExtent = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.linePlusBarWithFocusChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var lines = nv.models.line()\n    , lines2 = nv.models.line()\n    , bars = nv.models.historicalBar()\n    , bars2 = nv.models.historicalBar()\n    , xAxis = nv.models.axis()\n    , x2Axis = nv.models.axis()\n    , y1Axis = nv.models.axis()\n    , y2Axis = nv.models.axis()\n    , y3Axis = nv.models.axis()\n    , y4Axis = nv.models.axis()\n    , legend = nv.models.legend()\n    , brush = d3.svg.brush()\n    ;\n\n  var margin = {top: 30, right: 30, bottom: 30, left: 60}\n    , margin2 = {top: 0, right: 30, bottom: 20, left: 60}\n    , width = null\n    , height = null\n    , height2 = 100\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , color = nv.utils.defaultColor()\n    , showLegend = true\n    , extent\n    , brushExtent = null\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>';\n      }\n    , x\n    , x2\n    , y1\n    , y2\n    , y3\n    , y4\n    , noData = \"No Data Available.\"\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'brush')\n    , transitionDuration = 0\n    ;\n\n  lines\n    .clipEdge(true)\n    ;\n  lines2\n    .interactive(false)\n    ;\n  xAxis\n    .orient('bottom')\n    .tickPadding(5)\n    ;\n  y1Axis\n    .orient('left')\n    ;\n  y2Axis\n    .orient('right')\n    ;\n  x2Axis\n    .orient('bottom')\n    .tickPadding(5)\n    ;\n  y3Axis\n    .orient('left')\n    ;\n  y4Axis\n    .orient('right')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    if (extent) {\n        e.pointIndex += Math.ceil(extent[0]);\n    }\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\n        y = (e.series.bar ? y1Axis : y2Axis).tickFormat()(lines.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  //------------------------------------------------------------\n\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom - height2,\n          availableHeight2 = height2 - margin2.top - margin2.bottom;\n\n      chart.update = function() { container.call(chart); };\n      chart.container = this;\n\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight1 / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      var dataBars = data.filter(function(d) { return !d.disabled && d.bar });\n      var dataLines = data.filter(function(d) { return !d.bar }); // removed the !d.disabled clause here to fix Issue #240\n\n      x = bars.xScale();\n      x2 = x2Axis.scale();\n      y1 = bars.yScale();\n      y2 = lines.yScale();\n      y3 = bars2.yScale();\n      y4 = lines2.yScale();\n\n      var series1 = data\n        .filter(function(d) { return !d.disabled && d.bar })\n        .map(function(d) {\n          return d.values.map(function(d,i) {\n            return { x: getX(d,i), y: getY(d,i) }\n          })\n        });\n\n      var series2 = data\n        .filter(function(d) { return !d.disabled && !d.bar })\n        .map(function(d) {\n          return d.values.map(function(d,i) {\n            return { x: getX(d,i), y: getY(d,i) }\n          })\n        });\n\n      x   .range([0, availableWidth]);\n      \n      x2  .domain(d3.extent(d3.merge(series1.concat(series2)), function(d) { return d.x } ))\n          .range([0, availableWidth]);\n\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-linePlusBar').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-linePlusBar').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      \n      var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n      focusEnter.append('g').attr('class', 'nv-x nv-axis');\n      focusEnter.append('g').attr('class', 'nv-y1 nv-axis');\n      focusEnter.append('g').attr('class', 'nv-y2 nv-axis');\n      focusEnter.append('g').attr('class', 'nv-barsWrap');\n      focusEnter.append('g').attr('class', 'nv-linesWrap');\n\n      var contextEnter = gEnter.append('g').attr('class', 'nv-context');\n      contextEnter.append('g').attr('class', 'nv-x nv-axis');\n      contextEnter.append('g').attr('class', 'nv-y1 nv-axis');\n      contextEnter.append('g').attr('class', 'nv-y2 nv-axis');\n      contextEnter.append('g').attr('class', 'nv-barsWrap');\n      contextEnter.append('g').attr('class', 'nv-linesWrap');\n      contextEnter.append('g').attr('class', 'nv-brushBackground');\n      contextEnter.append('g').attr('class', 'nv-x nv-brush');\n\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width( availableWidth / 2 );\n\n        g.select('.nv-legendWrap')\n            .datum(data.map(function(series) {\n              series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n              series.key = series.originalKey + (series.bar ? ' (left axis)' : ' (right axis)');\n              return series;\n            }))\n          .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight1 = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom - height2;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + ( availableWidth / 2 ) + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n      //------------------------------------------------------------\n      // Context Components\n\n      bars2\n        .width(availableWidth)\n        .height(availableHeight2)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && data[i].bar }));\n\n      lines2\n        .width(availableWidth)\n        .height(availableHeight2)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }));\n        \n      var bars2Wrap = g.select('.nv-context .nv-barsWrap')\n          .datum(dataBars.length ? dataBars : [{values:[]}]);\n\n      var lines2Wrap = g.select('.nv-context .nv-linesWrap')\n          .datum(!dataLines[0].disabled ? dataLines : [{values:[]}]);\n          \n      g.select('.nv-context')\n          .attr('transform', 'translate(0,' + ( availableHeight1 + margin.bottom + margin2.top) + ')')\n\n      bars2Wrap.call(bars2);\n      lines2Wrap.call(lines2);\n\n      //------------------------------------------------------------\n\n\n\n      //------------------------------------------------------------\n      // Setup Brush\n\n      brush\n        .x(x2)\n        .on('brush', onBrush);\n\n      if (brushExtent) brush.extent(brushExtent);\n\n      var brushBG = g.select('.nv-brushBackground').selectAll('g')\n          .data([brushExtent || brush.extent()])\n\n      var brushBGenter = brushBG.enter()\n          .append('g');\n\n      brushBGenter.append('rect')\n          .attr('class', 'left')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('height', availableHeight2);\n\n      brushBGenter.append('rect')\n          .attr('class', 'right')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('height', availableHeight2);\n\n      var gBrush = g.select('.nv-x.nv-brush')\n          .call(brush);\n      gBrush.selectAll('rect')\n          //.attr('y', -5)\n          .attr('height', availableHeight2);\n      gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n\n      //------------------------------------------------------------\n\n      //------------------------------------------------------------\n      // Setup Secondary (Context) Axes\n\n      x2Axis\n        .ticks( availableWidth / 100 )\n        .tickSize(-availableHeight2, 0);\n\n      g.select('.nv-context .nv-x.nv-axis')\n          .attr('transform', 'translate(0,' + y3.range()[0] + ')');\n      g.select('.nv-context .nv-x.nv-axis')\n          .call(x2Axis);\n\n\n      y3Axis\n        .scale(y3)\n        .ticks( availableHeight2 / 36 )\n        .tickSize( -availableWidth, 0);\n\n      g.select('.nv-context .nv-y1.nv-axis')\n          .style('opacity', dataBars.length ? 1 : 0)\n          .attr('transform', 'translate(0,' + x2.range()[0] + ')');\n          \n      g.select('.nv-context .nv-y1.nv-axis')\n          .call(y3Axis);\n          \n\n      y4Axis\n        .scale(y4)\n        .ticks( availableHeight2 / 36 )\n        .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\n      g.select('.nv-context .nv-y2.nv-axis')\n          .style('opacity', dataLines.length ? 1 : 0)\n          .attr('transform', 'translate(' + x2.range()[1] + ',0)');\n\n      g.select('.nv-context .nv-y2.nv-axis')\n          .call(y4Axis);\n          \n      //------------------------------------------------------------\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) { \n        chart.update();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      //============================================================\n\n\n      //============================================================\n      // Functions\n      //------------------------------------------------------------\n\n      // Taken from crossfilter (http://square.github.com/crossfilter/)\n      function resizePath(d) {\n        var e = +(d == 'e'),\n            x = e ? 1 : -1,\n            y = availableHeight2 / 3;\n        return 'M' + (.5 * x) + ',' + y\n            + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n            + 'V' + (2 * y - 6)\n            + 'A6,6 0 0 ' + e + ' ' + (.5 * x) + ',' + (2 * y)\n            + 'Z'\n            + 'M' + (2.5 * x) + ',' + (y + 8)\n            + 'V' + (2 * y - 8)\n            + 'M' + (4.5 * x) + ',' + (y + 8)\n            + 'V' + (2 * y - 8);\n      }\n\n\n      function updateBrushBG() {\n        if (!brush.empty()) brush.extent(brushExtent);\n        brushBG\n            .data([brush.empty() ? x2.domain() : brushExtent])\n            .each(function(d,i) {\n              var leftWidth = x2(d[0]) - x2.range()[0],\n                  rightWidth = x2.range()[1] - x2(d[1]);\n              d3.select(this).select('.left')\n                .attr('width',  leftWidth < 0 ? 0 : leftWidth);\n\n              d3.select(this).select('.right')\n                .attr('x', x2(d[1]))\n                .attr('width', rightWidth < 0 ? 0 : rightWidth);\n            });\n      }\n\n\n      function onBrush() {\n        brushExtent = brush.empty() ? null : brush.extent();\n        extent = brush.empty() ? x2.domain() : brush.extent();\n\n\n        dispatch.brush({extent: extent, brush: brush});\n\n        updateBrushBG();\n\n\n        //------------------------------------------------------------\n        // Prepare Main (Focus) Bars and Lines\n        \n        bars\n        .width(availableWidth)\n        .height(availableHeight1)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && data[i].bar }));\n\n\n        lines\n        .width(availableWidth)\n        .height(availableHeight1)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }));\n\n        var focusBarsWrap = g.select('.nv-focus .nv-barsWrap')\n            .datum(!dataBars.length ? [{values:[]}] :\n              dataBars\n                .map(function(d,i) {\n                  return {\n                    key: d.key,\n                    values: d.values.filter(function(d,i) {\n                      return bars.x()(d,i) >= extent[0] && bars.x()(d,i) <= extent[1];\n                    })\n                  }\n                })\n            );\n        \n        var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n            .datum(dataLines[0].disabled ? [{values:[]}] :\n              dataLines\n                .map(function(d,i) {\n                  return {\n                    key: d.key,\n                    values: d.values.filter(function(d,i) {\n                      return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n                    })\n                  }\n                })\n             );\n                 \n        //------------------------------------------------------------\n        \n        \n        //------------------------------------------------------------\n        // Update Main (Focus) X Axis\n\n        if (dataBars.length) {\n            x = bars.xScale();\n        } else {\n            x = lines.xScale();\n        }\n        \n        xAxis\n        .scale(x)\n        .ticks( availableWidth / 100 )\n        .tickSize(-availableHeight1, 0);\n\n        xAxis.domain([Math.ceil(extent[0]), Math.floor(extent[1])]);\n        \n        g.select('.nv-x.nv-axis')\n          .call(xAxis);\n        //------------------------------------------------------------\n        \n        \n        //------------------------------------------------------------\n        // Update Main (Focus) Bars and Lines\n\n        focusBarsWrap.call(bars);\n        focusLinesWrap.call(lines);\n        \n        //------------------------------------------------------------\n        \n          \n        //------------------------------------------------------------\n        // Setup and Update Main (Focus) Y Axes\n        \n        g.select('.nv-focus .nv-x.nv-axis')\n          .attr('transform', 'translate(0,' + y1.range()[0] + ')');\n\n\n        y1Axis\n        .scale(y1)\n        .ticks( availableHeight1 / 36 )\n        .tickSize(-availableWidth, 0);\n\n        g.select('.nv-focus .nv-y1.nv-axis')\n          .style('opacity', dataBars.length ? 1 : 0);\n\n\n        y2Axis\n        .scale(y2)\n        .ticks( availableHeight1 / 36 )\n        .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\n        g.select('.nv-focus .nv-y2.nv-axis')\n          .style('opacity', dataLines.length ? 1 : 0)\n          .attr('transform', 'translate(' + x.range()[1] + ',0)');\n\n        g.select('.nv-focus .nv-y1.nv-axis')\n            .call(y1Axis);\n        g.select('.nv-focus .nv-y2.nv-axis')\n            .call(y2Axis);\n      }\n\n      //============================================================\n\n      onBrush();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  lines.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  bars.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  bars.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.legend = legend;\n  chart.lines = lines;\n  chart.lines2 = lines2;\n  chart.bars = bars;\n  chart.bars2 = bars2;\n  chart.xAxis = xAxis;\n  chart.x2Axis = x2Axis;\n  chart.y1Axis = y1Axis;\n  chart.y2Axis = y2Axis;\n  chart.y3Axis = y3Axis;\n  chart.y4Axis = y4Axis;\n\n  d3.rebind(chart, lines, 'defined', 'size', 'clipVoronoi', 'interpolate');\n  //TODO: consider rebinding x, y and some other stuff, and simply do soemthign lile bars.x(lines.x()), etc.\n  //d3.rebind(chart, lines, 'x', 'y', 'size', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'interactive', 'clipEdge', 'clipVoronoi', 'id');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    lines.x(_);\n    bars.x(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    lines.y(_);\n    bars.y(_);\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.brushExtent = function(_) {\n    if (!arguments.length) return brushExtent;\n    brushExtent = _;\n    return chart;\n  };\n\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.multiBar = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , x = d3.scale.ordinal()\n    , y = d3.scale.linear()\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n    , clipEdge = true\n    , stacked = false\n    , stackOffset = 'zero' // options include 'silhouette', 'wiggle', 'expand', 'zero', or a custom function\n    , color = nv.utils.defaultColor()\n    , hideable = false\n    , barColor = null // adding the ability to set the color for each rather than the whole group\n    , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n    , delay = 1200\n    , xDomain\n    , yDomain\n    , xRange\n    , yRange\n    , groupSpacing = 0.1\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0 //used to store previous scales\n      ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n      if(hideable && data.length) hideable = [{\n        values: data[0].values.map(function(d) {\n        return {\n          x: d.x,\n          y: 0,\n          series: d.series,\n          size: 0.01\n        };}\n      )}];\n\n      if (stacked)\n        data = d3.layout.stack()\n                 .offset(stackOffset)\n                 .values(function(d){ return d.values })\n                 .y(getY)\n                 (!data.length && hideable ? hideable : data);\n\n\n      //add series index to each data point for reference\n      data.forEach(function(series, i) {\n        series.values.forEach(function(point) {\n          point.series = i;\n        });\n      });\n\n\n      //------------------------------------------------------------\n      // HACK for negative value stacking\n      if (stacked)\n        data[0].values.map(function(d,i) {\n          var posBase = 0, negBase = 0;\n          data.map(function(d) {\n            var f = d.values[i]\n            f.size = Math.abs(f.y);\n            if (f.y<0)  {\n              f.y1 = negBase;\n              negBase = negBase - f.size;\n            } else\n            {\n              f.y1 = f.size + posBase;\n              posBase = posBase + f.size;\n            }\n          });\n        });\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      // remap and flatten the data for use in calculating the scales' domains\n      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n            data.map(function(d) {\n              return d.values.map(function(d,i) {\n                return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1 }\n              })\n            });\n\n      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n          .rangeBands(xRange || [0, availableWidth], groupSpacing);\n\n      //y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y + (stacked ? d.y1 : 0) }).concat(forceY)))\n      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return stacked ? (d.y > 0 ? d.y1 : d.y1 + d.y ) : d.y }).concat(forceY)))\n          .range(yRange || [availableHeight, 0]);\n\n      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n      if (x.domain()[0] === x.domain()[1])\n        x.domain()[0] ?\n            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n          : x.domain([-1,1]);\n\n      if (y.domain()[0] === y.domain()[1])\n        y.domain()[0] ?\n            y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n          : y.domain([-1,1]);\n\n\n      x0 = x0 || x;\n      y0 = y0 || y;\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-multibar').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibar');\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g')\n\n      gEnter.append('g').attr('class', 'nv-groups');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-edge-clip-' + id)\n        .append('rect');\n      wrap.select('#nv-edge-clip-' + id + ' rect')\n          .attr('width', availableWidth)\n          .attr('height', availableHeight);\n\n      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n\n\n      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n          .data(function(d) { return d }, function(d,i) { return i });\n      groups.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n      groups.exit()\n        .selectAll('rect.nv-bar')\n          .attr('y', function(d) { return stacked ? y0(d.y0) : y0(0) })\n          .attr('height', 0)\n          .remove();\n      groups\n          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n          .classed('hover', function(d) { return d.hover })\n          .style('fill', function(d,i){ return color(d, i) })\n          .style('stroke', function(d,i){ return color(d, i) });\n      groups\n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .75);\n\n\n      var bars = groups.selectAll('rect.nv-bar')\n          .data(function(d) { return (hideable && !data.length) ? hideable.values : d.values });\n\n      bars.exit().remove();\n\n\n      var barsEnter = bars.enter().append('rect')\n          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n          .attr('x', function(d,i,j) {\n              return stacked ? 0 : (j * x.rangeBand() / data.length )\n          })\n          .attr('y', function(d) { return y0(stacked ? d.y0 : 0) })\n          .attr('height', 0)\n          .attr('width', x.rangeBand() / (stacked ? 1 : data.length) )\n          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',0)'; })\n          ;\n      bars\n          .style('fill', function(d,i,j){ return color(d, j, i);  })\n          .style('stroke', function(d,i,j){ return color(d, j, i); })\n          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n            d3.select(this).classed('hover', true);\n            dispatch.elementMouseover({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n          })\n          .on('mouseout', function(d,i) {\n            d3.select(this).classed('hover', false);\n            dispatch.elementMouseout({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n          })\n          .on('click', function(d,i) {\n            dispatch.elementClick({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n            d3.event.stopPropagation();\n          })\n          .on('dblclick', function(d,i) {\n            dispatch.elementDblClick({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n            d3.event.stopPropagation();\n          });\n      bars\n          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n          \n          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',0)'; })\n\n      if (barColor) {\n        if (!disabled) disabled = data.map(function() { return true });\n        bars\n          .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\n          .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\n      }\n\n\n      if (stacked)\n          bars\n            .attr('y', function(d,i) {\n\n              return y((stacked ? d.y1 : 0));\n            })\n            .attr('height', function(d,i) {\n              return Math.max(Math.abs(y(d.y + (stacked ? d.y0 : 0)) - y((stacked ? d.y0 : 0))),1);\n            })\n            .attr('x', function(d,i) {\n                  return stacked ? 0 : (d.series * x.rangeBand() / data.length )\n            })\n            .attr('width', x.rangeBand() / (stacked ? 1 : data.length) );\n      else\n          bars\n            .attr('x', function(d,i) {\n              return d.series * x.rangeBand() / data.length\n            })\n            .attr('width', x.rangeBand() / data.length)\n            .attr('y', function(d,i) {\n                return getY(d,i) < 0 ?\n                        y(0) :\n                        y(0) - y(getY(d,i)) < 1 ?\n                          y(0) - 1 :\n                        y(getY(d,i)) || 0;\n            })\n            .attr('height', function(d,i) {\n                return Math.max(Math.abs(y(getY(d,i)) - y(0)),1) || 0;\n            });\n\n\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.forceY = function(_) {\n    if (!arguments.length) return forceY;\n    forceY = _;\n    return chart;\n  };\n\n  chart.stacked = function(_) {\n    if (!arguments.length) return stacked;\n    stacked = _;\n    return chart;\n  };\n\n  chart.stackOffset = function(_) {\n    if (!arguments.length) return stackOffset;\n    stackOffset = _;\n    return chart;\n  };\n\n  chart.clipEdge = function(_) {\n    if (!arguments.length) return clipEdge;\n    clipEdge = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.barColor = function(_) {\n    if (!arguments.length) return barColor;\n    barColor = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.disabled = function(_) {\n    if (!arguments.length) return disabled;\n    disabled = _;\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.hideable = function(_) {\n    if (!arguments.length) return hideable;\n    hideable = _;\n    return chart;\n  };\n\n  chart.delay = function(_) {\n    if (!arguments.length) return delay;\n    delay = _;\n    return chart;\n  };\n\n  chart.groupSpacing = function(_) {\n    if (!arguments.length) return groupSpacing;\n    groupSpacing = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.multiBarChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var multibar = nv.models.multiBar()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , legend = nv.models.legend()\n    , controls = nv.models.legend()\n    ;\n\n  var margin = {top: 30, right: 20, bottom: 50, left: 60}\n    , width = null\n    , height = null\n    , color = nv.utils.defaultColor()\n    , showControls = true\n    , showLegend = true\n    , showXAxis = true\n    , showYAxis = true\n    , rightAlignYAxis = false\n    , reduceXTicks = true // if false a tick will show for every data point\n    , staggerLabels = false\n    , rotateLabels = 0\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' on ' + x + '</p>'\n      }\n    , x //can be accessed via chart.xScale()\n    , y //can be accessed via chart.yScale()\n    , state = { stacked: false }\n    , defaultState = null\n    , noData = \"No Data Available.\"\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , controlWidth = function() { return showControls ? 180 : 0 }\n    , transitionDuration = 0\n    ;\n\n  multibar\n    .stacked(false)\n    ;\n  xAxis\n    .orient('bottom')\n    .tickPadding(7)\n    .highlightZero(true)\n    .showMaxMin(false)\n    .tickFormat(function(d) { return d })\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    .tickFormat(d3.format(',.1f'))\n    ;\n\n  controls.updateState(false);\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart) };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n      //------------------------------------------------------------\n      // Display noData message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = multibar.xScale();\n      y = multibar.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-multiBarWithLegend').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarWithLegend').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-barsWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width(availableWidth - controlWidth());\n\n        if (multibar.barColor())\n          data.forEach(function(series,i) {\n            series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\n          })\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Controls\n\n      if (showControls) {\n        var controlsData = [\n          { key: 'Grouped', disabled: multibar.stacked() },\n          { key: 'Stacked', disabled: !multibar.stacked() }\n        ];\n\n        controls.width(controlWidth()).color(['#444', '#444', '#444']);\n        g.select('.nv-controlsWrap')\n            .datum(controlsData)\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n            .call(controls);\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      multibar\n        .disabled(data.map(function(series) { return series.disabled }))\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled }))\n\n\n      var barsWrap = g.select('.nv-barsWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      barsWrap.call(multibar);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n          xAxis\n            .scale(x)\n            .ticks( availableWidth / 100 )\n            .tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis')\n              .attr('transform', 'translate(0,' + y.range()[0] + ')');\n          g.select('.nv-x.nv-axis')\n              .call(xAxis);\n\n          var xTicks = g.select('.nv-x.nv-axis > g').selectAll('g');\n\n          xTicks\n              .selectAll('line, text')\n              .style('opacity', 1)\n\n          if (staggerLabels) {\n              var getTranslate = function(x,y) {\n                  return \"translate(\" + x + \",\" + y + \")\";\n              };\n\n              var staggerUp = 5, staggerDown = 17;  //pixels to stagger by\n              // Issue #140\n              xTicks\n                .selectAll(\"text\")\n                .attr('transform', function(d,i,j) { \n                    return  getTranslate(0, (j % 2 == 0 ? staggerUp : staggerDown));\n                  });\n\n              var totalInBetweenTicks = d3.selectAll(\".nv-x.nv-axis .nv-wrap g g text\")[0].length;\n              g.selectAll(\".nv-x.nv-axis .nv-axisMaxMin text\")\n                .attr(\"transform\", function(d,i) {\n                    return getTranslate(0, (i === 0 || totalInBetweenTicks % 2 !== 0) ? staggerDown : staggerUp);\n                });\n          }\n\n          if (reduceXTicks)\n            xTicks\n              .filter(function(d,i) {\n                  return i % Math.ceil(data[0].values.length / (availableWidth / 100)) !== 0;\n                })\n              .selectAll('text, line')\n              .style('opacity', 0);\n\n          if(rotateLabels)\n            xTicks\n              .selectAll('.tick text')\n              .attr('transform', 'rotate(' + rotateLabels + ' 0,0)')\n              .style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\n          \n          g.select('.nv-x.nv-axis').selectAll('g.nv-axisMaxMin text')\n              .style('opacity', 1);\n      }\n\n\n      if (showYAxis) {      \n          yAxis\n            .scale(y)\n            .ticks( availableHeight / 36 )\n            .tickSize( -availableWidth, 0);\n\n          g.select('.nv-y.nv-axis')\n              .call(yAxis);\n      }\n\n\n      //------------------------------------------------------------\n\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) { \n        state = newState;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      controls.dispatch.on('legendClick', function(d,i) {\n        if (!d.disabled) return;\n        controlsData = controlsData.map(function(s) {\n          s.disabled = true;\n          return s;\n        });\n        d.disabled = false;\n\n        switch (d.key) {\n          case 'Grouped':\n            multibar.stacked(false);\n            break;\n          case 'Stacked':\n            multibar.stacked(true);\n            break;\n        }\n\n        state.stacked = multibar.stacked();\n        dispatch.stateChange(state);\n\n        chart.update();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode)\n      });\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        if (typeof e.stacked !== 'undefined') {\n          multibar.stacked(e.stacked);\n          state.stacked = e.stacked;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  multibar.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  multibar.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.multibar = multibar;\n  chart.legend = legend;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n\n  d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'clipEdge',\n   'id', 'stacked', 'stackOffset', 'delay', 'barColor','groupSpacing');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showControls = function(_) {\n    if (!arguments.length) return showControls;\n    showControls = _;\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.reduceXTicks= function(_) {\n    if (!arguments.length) return reduceXTicks;\n    reduceXTicks = _;\n    return chart;\n  };\n\n  chart.rotateLabels = function(_) {\n    if (!arguments.length) return rotateLabels;\n    rotateLabels = _;\n    return chart;\n  }\n\n  chart.staggerLabels = function(_) {\n    if (!arguments.length) return staggerLabels;\n    staggerLabels = _;\n    return chart;\n  };\n\n  chart.tooltip = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n  \n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.multiBarHorizontal = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    , x = d3.scale.ordinal()\n    , y = d3.scale.linear()\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n    , color = nv.utils.defaultColor()\n    , barColor = null // adding the ability to set the color for each rather than the whole group\n    , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n    , stacked = false\n    , showValues = false\n    , showBarLabels = false\n    , valuePadding = 60\n    , valueFormat = d3.format(',.2f')\n    , delay = 1200\n    , xDomain\n    , yDomain\n    , xRange\n    , yRange\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0 //used to store previous scales\n      ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n\n      if (stacked)\n        data = d3.layout.stack()\n                 .offset('zero')\n                 .values(function(d){ return d.values })\n                 .y(getY)\n                 (data);\n\n\n      //add series index to each data point for reference\n      data.forEach(function(series, i) {\n        series.values.forEach(function(point) {\n          point.series = i;\n        });\n      });\n\n\n\n      //------------------------------------------------------------\n      // HACK for negative value stacking\n      if (stacked)\n        data[0].values.map(function(d,i) {\n          var posBase = 0, negBase = 0;\n          data.map(function(d) {\n            var f = d.values[i]\n            f.size = Math.abs(f.y);\n            if (f.y<0)  {\n              f.y1 = negBase - f.size;\n              negBase = negBase - f.size;\n            } else\n            {\n              f.y1 = posBase;\n              posBase = posBase + f.size;\n            }\n          });\n        });\n\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      // remap and flatten the data for use in calculating the scales' domains\n      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n            data.map(function(d) {\n              return d.values.map(function(d,i) {\n                return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1 }\n              })\n            });\n\n      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n          .rangeBands(xRange || [0, availableHeight], .1);\n\n      //y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y + (stacked ? d.y0 : 0) }).concat(forceY)))\n      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return stacked ? (d.y > 0 ? d.y1 + d.y : d.y1 ) : d.y }).concat(forceY)))\n\n      if (showValues && !stacked)\n        y.range(yRange || [(y.domain()[0] < 0 ? valuePadding : 0), availableWidth - (y.domain()[1] > 0 ? valuePadding : 0) ]);\n      else\n        y.range(yRange || [0, availableWidth]);\n\n      x0 = x0 || x;\n      y0 = y0 || d3.scale.linear().domain(y.domain()).range([y(0),y(0)]);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-multibarHorizontal').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibarHorizontal');\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-groups');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n\n      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n          .data(function(d) { return d }, function(d,i) { return i });\n      groups.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n      groups.exit()\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6)\n          .remove();\n      groups\n          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n          .classed('hover', function(d) { return d.hover })\n          .style('fill', function(d,i){ return color(d, i) })\n          .style('stroke', function(d,i){ return color(d, i) });\n      groups\n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .75);\n\n\n      var bars = groups.selectAll('g.nv-bar')\n          .data(function(d) { return d.values });\n\n      bars.exit().remove();\n\n\n      var barsEnter = bars.enter().append('g')\n          .attr('transform', function(d,i,j) {\n              return 'translate(' + y0(stacked ? d.y0 : 0) + ',' + (stacked ? 0 : (j * x.rangeBand() / data.length ) + x(getX(d,i))) + ')'\n          });\n\n      barsEnter.append('rect')\n          .attr('width', 0)\n          .attr('height', x.rangeBand() / (stacked ? 1 : data.length) )\n\n      bars\n          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n            d3.select(this).classed('hover', true);\n            dispatch.elementMouseover({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [ y(getY(d,i) + (stacked ? d.y0 : 0)), x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length) ],\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n          })\n          .on('mouseout', function(d,i) {\n            d3.select(this).classed('hover', false);\n            dispatch.elementMouseout({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n          })\n          .on('click', function(d,i) {\n            dispatch.elementClick({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n            d3.event.stopPropagation();\n          })\n          .on('dblclick', function(d,i) {\n            dispatch.elementDblClick({\n              value: getY(d,i),\n              point: d,\n              series: data[d.series],\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\n              pointIndex: i,\n              seriesIndex: d.series,\n              e: d3.event\n            });\n            d3.event.stopPropagation();\n          });\n\n\n      barsEnter.append('text');\n\n      if (showValues && !stacked) {\n        bars.select('text')\n            .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'end' : 'start' })\n            .attr('y', x.rangeBand() / (data.length * 2))\n            .attr('dy', '.32em')\n            .text(function(d,i) { return valueFormat(getY(d,i)) })\n        bars\n          .select('text')\n            .attr('x', function(d,i) { return getY(d,i) < 0 ? -4 : y(getY(d,i)) - y(0) + 4 })\n      } else {\n        bars.selectAll('text').text('');\n      }\n\n      if (showBarLabels && !stacked) {\n        barsEnter.append('text').classed('nv-bar-label',true);\n        bars.select('text.nv-bar-label')\n            .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'start' : 'end' })\n            .attr('y', x.rangeBand() / (data.length * 2))\n            .attr('dy', '.32em')\n            .text(function(d,i) { return getX(d,i) });\n        bars\n          .select('text.nv-bar-label')\n            .attr('x', function(d,i) { return getY(d,i) < 0 ? y(0) - y(getY(d,i)) + 4 : -4 });\n      }\n      else {\n        bars.selectAll('text.nv-bar-label').text('');\n      }\n\n      bars\n          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n\n      if (barColor) {\n        if (!disabled) disabled = data.map(function() { return true });\n        bars\n          .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\n          .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\n      }\n\n      if (stacked)\n        bars\n            .attr('transform', function(d,i) {\n              return 'translate(' + y(d.y1) + ',' + x(getX(d,i)) + ')'\n            })\n          .select('rect')\n            .attr('width', function(d,i) {\n              return Math.abs(y(getY(d,i) + d.y0) - y(d.y0))\n            })\n            .attr('height', x.rangeBand() );\n      else\n        bars\n            .attr('transform', function(d,i) {\n              //TODO: stacked must be all positive or all negative, not both?\n              return 'translate(' +\n              (getY(d,i) < 0 ? y(getY(d,i)) : y(0))\n              + ',' +\n              (d.series * x.rangeBand() / data.length\n              +\n              x(getX(d,i)) )\n              + ')'\n            })\n          .select('rect')\n            .attr('height', x.rangeBand() / data.length )\n            .attr('width', function(d,i) {\n              return Math.max(Math.abs(y(getY(d,i)) - y(0)),1)\n            });\n\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.forceY = function(_) {\n    if (!arguments.length) return forceY;\n    forceY = _;\n    return chart;\n  };\n\n  chart.stacked = function(_) {\n    if (!arguments.length) return stacked;\n    stacked = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.barColor = function(_) {\n    if (!arguments.length) return barColor;\n    barColor = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.disabled = function(_) {\n    if (!arguments.length) return disabled;\n    disabled = _;\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.delay = function(_) {\n    if (!arguments.length) return delay;\n    delay = _;\n    return chart;\n  };\n\n  chart.showValues = function(_) {\n    if (!arguments.length) return showValues;\n    showValues = _;\n    return chart;\n  };\n\n  chart.showBarLabels = function(_) {\n    if (!arguments.length) return showBarLabels;\n    showBarLabels = _;\n    return chart;\n  };\n\n\n  chart.valueFormat= function(_) {\n    if (!arguments.length) return valueFormat;\n    valueFormat = _;\n    return chart;\n  };\n\n  chart.valuePadding = function(_) {\n    if (!arguments.length) return valuePadding;\n    valuePadding = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.multiBarHorizontalChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var multibar = nv.models.multiBarHorizontal()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , legend = nv.models.legend().height(30)\n    , controls = nv.models.legend().height(30)\n    ;\n\n  var margin = {top: 30, right: 20, bottom: 50, left: 60}\n    , width = null\n    , height = null\n    , color = nv.utils.defaultColor()\n    , showControls = true\n    , showLegend = true\n    , showXAxis = true\n    , showYAxis = true\n    , stacked = false\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + ' - ' + x + '</h3>' +\n               '<p>' +  y + '</p>'\n      }\n    , x //can be accessed via chart.xScale()\n    , y //can be accessed via chart.yScale()\n    , state = { stacked: stacked }\n    , defaultState = null\n    , noData = 'No Data Available.'\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , controlWidth = function() { return showControls ? 180 : 0 }\n    , transitionDuration = 0\n    ;\n\n  multibar\n    .stacked(stacked)\n    ;\n  xAxis\n    .orient('left')\n    .tickPadding(5)\n    .highlightZero(false)\n    .showMaxMin(false)\n    .tickFormat(function(d) { return d })\n    ;\n  yAxis\n    .orient('bottom')\n    .tickFormat(d3.format(',.1f'))\n    ;\n\n  controls.updateState(false);\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'e' : 'w', null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart) };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = multibar.xScale();\n      y = multibar.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-multiBarHorizontalChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarHorizontalChart').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis')\n            .append('g').attr('class', 'nv-zeroLine')\n            .append('line');\n      gEnter.append('g').attr('class', 'nv-barsWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width(availableWidth - controlWidth());\n\n        if (multibar.barColor())\n          data.forEach(function(series,i) {\n            series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\n          })\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Controls\n\n      if (showControls) {\n        var controlsData = [\n          { key: 'Grouped', disabled: multibar.stacked() },\n          { key: 'Stacked', disabled: !multibar.stacked() }\n        ];\n\n        controls.width(controlWidth()).color(['#444', '#444', '#444']);\n        g.select('.nv-controlsWrap')\n            .datum(controlsData)\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n            .call(controls);\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      multibar\n        .disabled(data.map(function(series) { return series.disabled }))\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color(d, i);\n        }).filter(function(d,i) { return !data[i].disabled }))\n\n\n      var barsWrap = g.select('.nv-barsWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n\n      barsWrap.call(multibar);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n          xAxis\n            .scale(x)\n            .ticks( availableHeight / 24 )\n            .tickSize(-availableWidth, 0);\n\n          g.select('.nv-x.nv-axis')\n              .call(xAxis);\n\n          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\n          xTicks\n              .selectAll('line, text');\n      }\n\n      if (showYAxis) {\n          yAxis\n            .scale(y)\n            .ticks( availableWidth / 100 )\n            .tickSize( -availableHeight, 0);\n\n          g.select('.nv-y.nv-axis')\n              .attr('transform', 'translate(0,' + availableHeight + ')');\n          g.select('.nv-y.nv-axis')\n              .call(yAxis);\n      }\n\n      // Zero line\n      g.select(\".nv-zeroLine line\")\n        .attr(\"x1\", y(0))\n        .attr(\"x2\", y(0))\n        .attr(\"y1\", 0)\n        .attr(\"y2\", -availableHeight)\n        ;\n\n      //------------------------------------------------------------\n\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) {\n        state = newState;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      controls.dispatch.on('legendClick', function(d,i) {\n        if (!d.disabled) return;\n        controlsData = controlsData.map(function(s) {\n          s.disabled = true;\n          return s;\n        });\n        d.disabled = false;\n\n        switch (d.key) {\n          case 'Grouped':\n            multibar.stacked(false);\n            break;\n          case 'Stacked':\n            multibar.stacked(true);\n            break;\n        }\n\n        state.stacked = multibar.stacked();\n        dispatch.stateChange(state);\n\n        chart.update();\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        if (typeof e.stacked !== 'undefined') {\n          multibar.stacked(e.stacked);\n          state.stacked = e.stacked;\n        }\n\n        chart.update();\n      });\n      //============================================================\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  multibar.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  multibar.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.multibar = multibar;\n  chart.legend = legend;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n\n  d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY',\n    'clipEdge', 'id', 'delay', 'showValues','showBarLabels', 'valueFormat', 'stacked', 'barColor');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    return chart;\n  };\n\n  chart.showControls = function(_) {\n    if (!arguments.length) return showControls;\n    showControls = _;\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.tooltip = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n  //============================================================\n\n\n  return chart;\n}\nnv.models.multiChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 30, right: 20, bottom: 50, left: 60},\n      color = d3.scale.category20().range(),\n      width = null, \n      height = null,\n      showLegend = true,\n      tooltips = true,\n      tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' at ' + x + '</p>'\n      },\n      x,\n      y,\n      yDomain1,\n      yDomain2\n      ; //can be accessed via chart.lines.[x/y]Scale()\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x = d3.scale.linear(),\n      yScale1 = d3.scale.linear(),\n      yScale2 = d3.scale.linear(),\n\n      lines1 = nv.models.line().yScale(yScale1),\n      lines2 = nv.models.line().yScale(yScale2),\n\n      bars1 = nv.models.multiBar().stacked(false).yScale(yScale1),\n      bars2 = nv.models.multiBar().stacked(false).yScale(yScale2),\n\n      stack1 = nv.models.stackedArea().yScale(yScale1),\n      stack2 = nv.models.stackedArea().yScale(yScale2),\n\n      xAxis = nv.models.axis().scale(x).orient('bottom').tickPadding(5),\n      yAxis1 = nv.models.axis().scale(yScale1).orient('left'),\n      yAxis2 = nv.models.axis().scale(yScale2).orient('right'),\n\n      legend = nv.models.legend().height(30),\n      dispatch = d3.dispatch('tooltipShow', 'tooltipHide');\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(lines1.x()(e.point, e.pointIndex)),\n        y = ((e.series.yAxis == 2) ? yAxis2 : yAxis1).tickFormat()(lines1.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, undefined, undefined, offsetElement.offsetParent);\n  };\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      chart.update = function() { container.call(chart); };\n      chart.container = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      var dataLines1 = data.filter(function(d) {return !d.disabled && d.type == 'line' && d.yAxis == 1})\n      var dataLines2 = data.filter(function(d) {return !d.disabled && d.type == 'line' && d.yAxis == 2})\n      var dataBars1 = data.filter(function(d) {return !d.disabled && d.type == 'bar' && d.yAxis == 1})\n      var dataBars2 = data.filter(function(d) {return !d.disabled && d.type == 'bar' && d.yAxis == 2})\n      var dataStack1 = data.filter(function(d) {return !d.disabled && d.type == 'area' && d.yAxis == 1})\n      var dataStack2 = data.filter(function(d) {return !d.disabled && d.type == 'area' && d.yAxis == 2})\n\n      var series1 = data.filter(function(d) {return !d.disabled && d.yAxis == 1})\n            .map(function(d) {\n              return d.values.map(function(d,i) {\n                return { x: d.x, y: d.y }\n              })\n            })\n\n      var series2 = data.filter(function(d) {return !d.disabled && d.yAxis == 2})\n            .map(function(d) {\n              return d.values.map(function(d,i) {\n                return { x: d.x, y: d.y }\n              })\n            })\n\n      x   .domain(d3.extent(d3.merge(series1.concat(series2)), function(d) { return d.x } ))\n          .range([0, availableWidth]);\n\n      var wrap = container.selectAll('g.wrap.multiChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'wrap nvd3 multiChart').append('g');\n\n      gEnter.append('g').attr('class', 'x axis');\n      gEnter.append('g').attr('class', 'y1 axis');\n      gEnter.append('g').attr('class', 'y2 axis');\n      gEnter.append('g').attr('class', 'lines1Wrap');\n      gEnter.append('g').attr('class', 'lines2Wrap');\n      gEnter.append('g').attr('class', 'bars1Wrap');\n      gEnter.append('g').attr('class', 'bars2Wrap');\n      gEnter.append('g').attr('class', 'stack1Wrap');\n      gEnter.append('g').attr('class', 'stack2Wrap');\n      gEnter.append('g').attr('class', 'legendWrap');\n\n      var g = wrap.select('g');\n\n      if (showLegend) {\n        legend.width( availableWidth / 2 );\n\n        g.select('.legendWrap')\n            .datum(data.map(function(series) { \n              series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n              series.key = series.originalKey + (series.yAxis == 1 ? '' : ' (right axis)');\n              return series;\n            }))\n          .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        g.select('.legendWrap')\n            .attr('transform', 'translate(' + ( availableWidth / 2 ) + ',' + (-margin.top) +')');\n      }\n\n\n      lines1\n        .width(availableWidth)\n        .height(availableHeight)\n        .interpolate(\"monotone\")\n        .color(data.map(function(d,i) {\n          return d.color || color[i % color.length];\n        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'line'}));\n\n      lines2\n        .width(availableWidth)\n        .height(availableHeight)\n        .interpolate(\"monotone\")\n        .color(data.map(function(d,i) {\n          return d.color || color[i % color.length];\n        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'line'}));\n\n      bars1\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color[i % color.length];\n        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'bar'}));\n\n      bars2\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color[i % color.length];\n        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'bar'}));\n\n      stack1\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color[i % color.length];\n        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'area'}));\n\n      stack2\n        .width(availableWidth)\n        .height(availableHeight)\n        .color(data.map(function(d,i) {\n          return d.color || color[i % color.length];\n        }).filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'area'}));\n\n      g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n      var lines1Wrap = g.select('.lines1Wrap')\n          .datum(dataLines1)\n      var bars1Wrap = g.select('.bars1Wrap')\n          .datum(dataBars1)\n      var stack1Wrap = g.select('.stack1Wrap')\n          .datum(dataStack1)\n\n      var lines2Wrap = g.select('.lines2Wrap')\n          .datum(dataLines2)\n      var bars2Wrap = g.select('.bars2Wrap')\n          .datum(dataBars2)\n      var stack2Wrap = g.select('.stack2Wrap')\n          .datum(dataStack2)\n\n      var extraValue1 = dataStack1.length ? dataStack1.map(function(a){return a.values}).reduce(function(a,b){\n        return a.map(function(aVal,i){return {x: aVal.x, y: aVal.y + b[i].y}})\n      }).concat([{x:0, y:0}]) : []\n      var extraValue2 = dataStack2.length ? dataStack2.map(function(a){return a.values}).reduce(function(a,b){\n        return a.map(function(aVal,i){return {x: aVal.x, y: aVal.y + b[i].y}})\n      }).concat([{x:0, y:0}]) : []\n\n      yScale1 .domain(yDomain1 || d3.extent(d3.merge(series1).concat(extraValue1), function(d) { return d.y } ))\n              .range([0, availableHeight])\n\n      yScale2 .domain(yDomain2 || d3.extent(d3.merge(series2).concat(extraValue2), function(d) { return d.y } ))\n              .range([0, availableHeight])\n\n      lines1.yDomain(yScale1.domain())\n      bars1.yDomain(yScale1.domain())\n      stack1.yDomain(yScale1.domain())\n\n      lines2.yDomain(yScale2.domain())\n      bars2.yDomain(yScale2.domain())\n      stack2.yDomain(yScale2.domain())\n\n      if(dataStack1.length){d3.transition(stack1Wrap).call(stack1);}\n      if(dataStack2.length){d3.transition(stack2Wrap).call(stack2);}\n\n      if(dataBars1.length){d3.transition(bars1Wrap).call(bars1);}\n      if(dataBars2.length){d3.transition(bars2Wrap).call(bars2);}\n\n      if(dataLines1.length){d3.transition(lines1Wrap).call(lines1);}\n      if(dataLines2.length){d3.transition(lines2Wrap).call(lines2);}\n      \n\n\n      xAxis\n        .ticks( availableWidth / 100 )\n        .tickSize(-availableHeight, 0);\n\n      g.select('.x.axis')\n          .attr('transform', 'translate(0,' + availableHeight + ')');\n      d3.transition(g.select('.x.axis'))\n          .call(xAxis);\n\n      yAxis1\n        .ticks( availableHeight / 36 )\n        .tickSize( -availableWidth, 0);\n\n\n      d3.transition(g.select('.y1.axis'))\n          .call(yAxis1);\n\n      yAxis2\n        .ticks( availableHeight / 36 )\n        .tickSize( -availableWidth, 0);\n\n      d3.transition(g.select('.y2.axis'))\n          .call(yAxis2);\n\n      g.select('.y2.axis')\n          .style('opacity', series2.length ? 1 : 0)\n          .attr('transform', 'translate(' + x.range()[1] + ',0)');\n\n      legend.dispatch.on('stateChange', function(newState) { \n        chart.update();\n      });\n     \n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  lines1.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines1.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  lines2.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines2.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  bars1.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  bars1.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  bars2.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  bars2.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  stack1.dispatch.on('tooltipShow', function(e) {\n    //disable tooltips when value ~= 0\n    //// TODO: consider removing points from voronoi that have 0 value instead of this hack\n    if (!Math.round(stack1.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\n      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\n      return false;\n    }\n\n    e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n    dispatch.tooltipShow(e);\n  });\n\n  stack1.dispatch.on('tooltipHide', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  stack2.dispatch.on('tooltipShow', function(e) {\n    //disable tooltips when value ~= 0\n    //// TODO: consider removing points from voronoi that have 0 value instead of this hack\n    if (!Math.round(stack2.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\n      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\n      return false;\n    }\n\n    e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n    dispatch.tooltipShow(e);\n  });\n\n  stack2.dispatch.on('tooltipHide', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n    lines1.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines1.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  lines2.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  lines2.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n\n\n  //============================================================\n  // Global getters and setters\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n  chart.lines1 = lines1;\n  chart.lines2 = lines2;\n  chart.bars1 = bars1;\n  chart.bars2 = bars2;\n  chart.stack1 = stack1;\n  chart.stack2 = stack2;\n  chart.xAxis = xAxis;\n  chart.yAxis1 = yAxis1;\n  chart.yAxis2 = yAxis2;\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    lines1.x(_);\n    bars1.x(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    lines1.y(_);\n    bars1.y(_);\n    return chart;\n  };\n\n  chart.yDomain1 = function(_) {\n    if (!arguments.length) return yDomain1;\n    yDomain1 = _;\n    return chart;\n  };\n\n  chart.yDomain2 = function(_) {\n    if (!arguments.length) return yDomain2;\n    yDomain2 = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = _;\n    legend.color(_);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  return chart;\n}\n\n\nnv.models.ohlcBar = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    , x = d3.scale.linear()\n    , y = d3.scale.linear()\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , getOpen = function(d) { return d.open }\n    , getClose = function(d) { return d.close }\n    , getHigh = function(d) { return d.high }\n    , getLow = function(d) { return d.low }\n    , forceX = []\n    , forceY = []\n    , padData     = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n    , clipEdge = true\n    , color = nv.utils.defaultColor()\n    , xDomain\n    , yDomain\n    , xRange\n    , yRange\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n    ;\n\n  //============================================================\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  //TODO: store old scales for transitions\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x   .domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ));\n\n      if (padData)\n        x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n      else\n        x.range(xRange || [0, availableWidth]);\n\n      y   .domain(yDomain || [\n            d3.min(data[0].values.map(getLow).concat(forceY)),\n            d3.max(data[0].values.map(getHigh).concat(forceY))\n          ])\n          .range(yRange || [availableHeight, 0]);\n\n      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n      if (x.domain()[0] === x.domain()[1])\n        x.domain()[0] ?\n            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n          : x.domain([-1,1]);\n\n      if (y.domain()[0] === y.domain()[1])\n        y.domain()[0] ?\n            y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n          : y.domain([-1,1]);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-ohlcBar').data([data[0].values]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-ohlcBar');\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-ticks');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      container\n          .on('click', function(d,i) {\n            dispatch.chartClick({\n                data: d,\n                index: i,\n                pos: d3.event,\n                id: id\n            });\n          });\n\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-chart-clip-path-' + id)\n        .append('rect');\n\n      wrap.select('#nv-chart-clip-path-' + id + ' rect')\n          .attr('width', availableWidth)\n          .attr('height', availableHeight);\n\n      g   .attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\n\n\n      var ticks = wrap.select('.nv-ticks').selectAll('.nv-tick')\n          .data(function(d) { return d });\n\n      ticks.exit().remove();\n\n\n      var ticksEnter = ticks.enter().append('path')\n          .attr('class', function(d,i,j) { return (getOpen(d,i) > getClose(d,i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i })\n          .attr('d', function(d,i) {\n            var w = (availableWidth / data[0].values.length) * .9;\n            return 'm0,0l0,'\n                 + (y(getOpen(d,i))\n                 - y(getHigh(d,i)))\n                 + 'l'\n                 + (-w/2)\n                 + ',0l'\n                 + (w/2)\n                 + ',0l0,'\n                 + (y(getLow(d,i)) - y(getOpen(d,i)))\n                 + 'l0,'\n                 + (y(getClose(d,i))\n                 - y(getLow(d,i)))\n                 + 'l'\n                 + (w/2)\n                 + ',0l'\n                 + (-w/2)\n                 + ',0z';\n          })\n          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',' + y(getHigh(d,i)) + ')'; })\n          //.attr('fill', function(d,i) { return color[0]; })\n          //.attr('stroke', function(d,i) { return color[0]; })\n          //.attr('x', 0 )\n          //.attr('y', function(d,i) {  return y(Math.max(0, getY(d,i))) })\n          //.attr('height', function(d,i) { return Math.abs(y(getY(d,i)) - y(0)) })\n          .on('mouseover', function(d,i) {\n            d3.select(this).classed('hover', true);\n            dispatch.elementMouseover({\n                point: d,\n                series: data[0],\n                pos: [x(getX(d,i)), y(getY(d,i))],  // TODO: Figure out why the value appears to be shifted\n                pointIndex: i,\n                seriesIndex: 0,\n                e: d3.event\n            });\n\n          })\n          .on('mouseout', function(d,i) {\n                d3.select(this).classed('hover', false);\n                dispatch.elementMouseout({\n                    point: d,\n                    series: data[0],\n                    pointIndex: i,\n                    seriesIndex: 0,\n                    e: d3.event\n                });\n          })\n          .on('click', function(d,i) {\n                dispatch.elementClick({\n                    //label: d[label],\n                    value: getY(d,i),\n                    data: d,\n                    index: i,\n                    pos: [x(getX(d,i)), y(getY(d,i))],\n                    e: d3.event,\n                    id: id\n                });\n              d3.event.stopPropagation();\n          })\n          .on('dblclick', function(d,i) {\n              dispatch.elementDblClick({\n                  //label: d[label],\n                  value: getY(d,i),\n                  data: d,\n                  index: i,\n                  pos: [x(getX(d,i)), y(getY(d,i))],\n                  e: d3.event,\n                  id: id\n              });\n              d3.event.stopPropagation();\n          });\n\n      ticks\n          .attr('class', function(d,i,j) { return (getOpen(d,i) > getClose(d,i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i })\n      d3.transition(ticks)\n          .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',' + y(getHigh(d,i)) + ')'; })\n          .attr('d', function(d,i) {\n            var w = (availableWidth / data[0].values.length) * .9;\n            return 'm0,0l0,'\n                 + (y(getOpen(d,i))\n                 - y(getHigh(d,i)))\n                 + 'l'\n                 + (-w/2)\n                 + ',0l'\n                 + (w/2)\n                 + ',0l0,'\n                 + (y(getLow(d,i))\n                 - y(getOpen(d,i)))\n                 + 'l0,'\n                 + (y(getClose(d,i))\n                 - y(getLow(d,i)))\n                 + 'l'\n                 + (w/2)\n                 + ',0l'\n                 + (-w/2)\n                 + ',0z';\n          })\n          //.attr('width', (availableWidth / data[0].values.length) * .9 )\n\n\n      //d3.transition(ticks)\n          //.attr('y', function(d,i) {  return y(Math.max(0, getY(d,i))) })\n          //.attr('height', function(d,i) { return Math.abs(y(getY(d,i)) - y(0)) });\n          //.order();  // not sure if this makes any sense for this model\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = _;\n    return chart;\n  };\n\n  chart.open = function(_) {\n    if (!arguments.length) return getOpen;\n    getOpen = _;\n    return chart;\n  };\n\n  chart.close = function(_) {\n    if (!arguments.length) return getClose;\n    getClose = _;\n    return chart;\n  };\n\n  chart.high = function(_) {\n    if (!arguments.length) return getHigh;\n    getHigh = _;\n    return chart;\n  };\n\n  chart.low = function(_) {\n    if (!arguments.length) return getLow;\n    getLow = _;\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.forceX = function(_) {\n    if (!arguments.length) return forceX;\n    forceX = _;\n    return chart;\n  };\n\n  chart.forceY = function(_) {\n    if (!arguments.length) return forceY;\n    forceY = _;\n    return chart;\n  };\n\n  chart.padData = function(_) {\n    if (!arguments.length) return padData;\n    padData = _;\n    return chart;\n  };\n\n  chart.clipEdge = function(_) {\n    if (!arguments.length) return clipEdge;\n    clipEdge = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\nnv.models.pie = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 500\n    , height = 500\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , getDescription = function(d) { return d.description }\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    , color = nv.utils.defaultColor()\n    , valueFormat = d3.format(',.2f')\n    , showLabels = true\n    , pieLabelsOutside = true\n    , donutLabelsOutside = false\n    , labelType = \"key\"\n    , labelThreshold = .02 //if slice percentage is under this, don't show label\n    , donut = false\n    , labelSunbeamLayout = false\n    , startAngle = false\n    , endAngle = false\n    , donutRatio = 0.5\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          radius = Math.min(availableWidth, availableHeight) / 2,\n          arcRadius = radius-(radius / 5),\n          container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      //var wrap = container.selectAll('.nv-wrap.nv-pie').data([data]);\n      var wrap = container.selectAll('.nv-wrap.nv-pie').data(data);\n      var wrapEnter = wrap.enter().append('g').attr('class','nvd3 nv-wrap nv-pie nv-chart-' + id);\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-pie');\n      gEnter.append('g').attr('class', 'nv-pieLabels');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n      g.select('.nv-pie').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n      g.select('.nv-pieLabels').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n\n      //------------------------------------------------------------\n\n\n      container\n          .on('click', function(d,i) {\n              dispatch.chartClick({\n                  data: d,\n                  index: i,\n                  pos: d3.event,\n                  id: id\n              });\n          });\n\n\n      var arc = d3.svg.arc()\n                  .outerRadius(arcRadius);\n\n      if (startAngle) arc.startAngle(startAngle)\n      if (endAngle) arc.endAngle(endAngle);\n      if (donut) arc.innerRadius(radius * donutRatio);\n\n      // Setup the Pie chart and choose the data element\n      var pie = d3.layout.pie()\n          .sort(null)\n          .value(function(d) { return d.disabled ? 0 : getY(d) });\n\n      var slices = wrap.select('.nv-pie').selectAll('.nv-slice')\n          .data(pie);\n\n      var pieLabels = wrap.select('.nv-pieLabels').selectAll('.nv-label')\n          .data(pie);\n\n      slices.exit().remove();\n      pieLabels.exit().remove();\n\n      var ae = slices.enter().append('g')\n              .attr('class', 'nv-slice')\n              .on('mouseover', function(d,i){\n                d3.select(this).classed('hover', true);\n                dispatch.elementMouseover({\n                    label: getX(d.data),\n                    value: getY(d.data),\n                    point: d.data,\n                    pointIndex: i,\n                    pos: [d3.event.pageX, d3.event.pageY],\n                    id: id\n                });\n              })\n              .on('mouseout', function(d,i){\n                d3.select(this).classed('hover', false);\n                dispatch.elementMouseout({\n                    label: getX(d.data),\n                    value: getY(d.data),\n                    point: d.data,\n                    index: i,\n                    id: id\n                });\n              })\n              .on('click', function(d,i) {\n                dispatch.elementClick({\n                    label: getX(d.data),\n                    value: getY(d.data),\n                    point: d.data,\n                    index: i,\n                    pos: d3.event,\n                    id: id\n                });\n                d3.event.stopPropagation();\n              })\n              .on('dblclick', function(d,i) {\n                dispatch.elementDblClick({\n                    label: getX(d.data),\n                    value: getY(d.data),\n                    point: d.data,\n                    index: i,\n                    pos: d3.event,\n                    id: id\n                });\n                d3.event.stopPropagation();\n              });\n\n        slices.attr('fill', function(d,i) { return color(d, i); })\n            .attr('stroke', function(d,i) { return color(d, i); });\n\n        var paths = ae.append('path')\n            .each(function(d) { this._current = d; });\n            //.attr('d', arc);\n\n        slices.select('path')\n            .attr('d', arc);\n            \n        if (showLabels) {\n          // This does the normal label\n          var labelsArc = d3.svg.arc().innerRadius(0);\n\n          if (pieLabelsOutside){ labelsArc = arc; }\n\n          if (donutLabelsOutside) { labelsArc = d3.svg.arc().outerRadius(arc.outerRadius()); }\n\n          pieLabels.enter().append(\"g\").classed(\"nv-label\",true)\n            .each(function(d,i) {\n                var group = d3.select(this);\n\n                group\n                  .attr('transform', function(d) {\n                       if (labelSunbeamLayout) {\n                         d.outerRadius = arcRadius + 10; // Set Outer Coordinate\n                         d.innerRadius = arcRadius + 15; // Set Inner Coordinate\n                         var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n                         if ((d.startAngle+d.endAngle)/2 < Math.PI) {\n                           rotateAngle -= 90;\n                         } else {\n                           rotateAngle += 90;\n                         }\n                         return 'translate(' + labelsArc.centroid(d) + ') rotate(' + rotateAngle + ')';\n                       } else {\n                         d.outerRadius = radius + 10; // Set Outer Coordinate\n                         d.innerRadius = radius + 15; // Set Inner Coordinate\n                         return 'translate(' + labelsArc.centroid(d) + ')'\n                       }\n                  });\n\n                group.append('rect')\n                    .style('stroke', '#fff')\n                    .style('fill', '#fff')\n                    .attr(\"rx\", 3)\n                    .attr(\"ry\", 3);\n\n                group.append('text')\n                    .style('text-anchor', labelSunbeamLayout ? ((d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end') : 'middle') //center the text on it's origin or begin/end if orthogonal aligned\n                    .style('fill', '#000')\n\n            });\n\n          var labelLocationHash = {};\n          var avgHeight = 14;\n          var avgWidth = 140;\n          var createHashKey = function(coordinates) {\n\n              return Math.floor(coordinates[0]/avgWidth) * avgWidth + ',' + Math.floor(coordinates[1]/avgHeight) * avgHeight;\n          };\n          pieLabels\n                .attr('transform', function(d) {\n                  if (labelSunbeamLayout) {\n                      d.outerRadius = arcRadius + 10; // Set Outer Coordinate\n                      d.innerRadius = arcRadius + 15; // Set Inner Coordinate\n                      var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n                      if ((d.startAngle+d.endAngle)/2 < Math.PI) {\n                        rotateAngle -= 90;\n                      } else {\n                        rotateAngle += 90;\n                      }\n                      return 'translate(' + labelsArc.centroid(d) + ') rotate(' + rotateAngle + ')';\n                    } else {\n                      d.outerRadius = radius + 10; // Set Outer Coordinate\n                      d.innerRadius = radius + 15; // Set Inner Coordinate\n\n                      /*\n                      Overlapping pie labels are not good. What this attempts to do is, prevent overlapping.\n                      Each label location is hashed, and if a hash collision occurs, we assume an overlap.\n                      Adjust the label's y-position to remove the overlap.\n                      */\n                      var center = labelsArc.centroid(d);\n                      var hashKey = createHashKey(center);\n                      if (labelLocationHash[hashKey]) {\n                        center[1] -= avgHeight;\n                      }\n                      labelLocationHash[createHashKey(center)] = true;\n                      return 'translate(' + center + ')'\n                    }\n                });\n          pieLabels.select(\".nv-label text\")\n                .style('text-anchor', labelSunbeamLayout ? ((d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end') : 'middle') //center the text on it's origin or begin/end if orthogonal aligned\n                .text(function(d, i) {\n                  var percent = (d.endAngle - d.startAngle) / (2 * Math.PI);\n                  var labelTypes = {\n                    \"key\" : getX(d.data),\n                    \"value\": getY(d.data),\n                    \"percent\": d3.format('%')(percent)\n                  };\n                  return (d.value && percent > labelThreshold) ? labelTypes[labelType] : '';\n                });\n        }\n\n\n        // Computes the angle of an arc, converting from radians to degrees.\n        function angle(d) {\n          var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;\n          return a > 90 ? a - 180 : a;\n        }\n\n        function arcTween(a) {\n          a.endAngle = isNaN(a.endAngle) ? 0 : a.endAngle;\n          a.startAngle = isNaN(a.startAngle) ? 0 : a.startAngle;\n          if (!donut) a.innerRadius = 0;\n          var i = d3.interpolate(this._current, a);\n          this._current = i(0);\n          return function(t) {\n            return arc(i(t));\n          };\n        }\n\n        function tweenPie(b) {\n          b.innerRadius = 0;\n          var i = d3.interpolate({startAngle: 0, endAngle: 0}, b);\n          return function(t) {\n              return arc(i(t));\n          };\n        }\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.values = function(_) {\n    nv.log(\"pie.values() is no longer supported.\");\n    return chart;\n  };\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = _;\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = d3.functor(_);\n    return chart;\n  };\n\n  chart.description = function(_) {\n    if (!arguments.length) return getDescription;\n    getDescription = _;\n    return chart;\n  };\n\n  chart.showLabels = function(_) {\n    if (!arguments.length) return showLabels;\n    showLabels = _;\n    return chart;\n  };\n\n  chart.labelSunbeamLayout = function(_) {\n    if (!arguments.length) return labelSunbeamLayout;\n    labelSunbeamLayout = _;\n    return chart;\n  };\n\n  chart.donutLabelsOutside = function(_) {\n    if (!arguments.length) return donutLabelsOutside;\n    donutLabelsOutside = _;\n    return chart;\n  };\n\n  chart.pieLabelsOutside = function(_) {\n    if (!arguments.length) return pieLabelsOutside;\n    pieLabelsOutside = _;\n    return chart;\n  };\n\n  chart.labelType = function(_) {\n    if (!arguments.length) return labelType;\n    labelType = _;\n    labelType = labelType || \"key\";\n    return chart;\n  };\n\n  chart.donut = function(_) {\n    if (!arguments.length) return donut;\n    donut = _;\n    return chart;\n  };\n\n  chart.donutRatio = function(_) {\n    if (!arguments.length) return donutRatio;\n    donutRatio = _;\n    return chart;\n  };\n\n  chart.startAngle = function(_) {\n    if (!arguments.length) return startAngle;\n    startAngle = _;\n    return chart;\n  };\n\n  chart.endAngle = function(_) {\n    if (!arguments.length) return endAngle;\n    endAngle = _;\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.valueFormat = function(_) {\n    if (!arguments.length) return valueFormat;\n    valueFormat = _;\n    return chart;\n  };\n\n  chart.labelThreshold = function(_) {\n    if (!arguments.length) return labelThreshold;\n    labelThreshold = _;\n    return chart;\n  };\n  //============================================================\n\n\n  return chart;\n}\nnv.models.pieChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var pie = nv.models.pie()\n    , legend = nv.models.legend()\n    ;\n\n  var margin = {top: 30, right: 20, bottom: 20, left: 20}\n    , width = null\n    , height = null\n    , showLegend = true\n    , color = nv.utils.defaultColor()\n    , tooltips = true\n    , tooltip = function(key, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + '</p>'\n      }\n    , state = {}\n    , defaultState = null\n    , noData = \"No Data Available.\"\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var tooltipLabel = pie.description()(e.point) || pie.x()(e.point)\n    var left = e.pos[0] + ( (offsetElement && offsetElement.offsetLeft) || 0 ),\n        top = e.pos[1] + ( (offsetElement && offsetElement.offsetTop) || 0),\n        y = pie.valueFormat()(pie.y()(e.point)),\n        content = tooltip(tooltipLabel, y, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart); };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-pieChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-pieChart').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-pieWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend\n          .width( availableWidth )\n          .key(pie.x());\n\n        wrap.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        wrap.select('.nv-legendWrap')\n            .attr('transform', 'translate(0,' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      pie\n        .width(availableWidth)\n        .height(availableHeight);\n\n\n      var pieWrap = g.select('.nv-pieWrap')\n          .datum([data]);\n\n      d3.transition(pieWrap).call(pie);\n\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      legend.dispatch.on('stateChange', function(newState) {\n        state = newState;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      pie.dispatch.on('elementMouseout.tooltip', function(e) {\n        dispatch.tooltipHide(e);\n      });\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n\n    });\n\n    return chart;\n  }\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  pie.dispatch.on('elementMouseover.tooltip', function(e) {\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\n    dispatch.tooltipShow(e);\n  });\n\n  dispatch.on('tooltipShow', function(e) {\n    if (tooltips) showTooltip(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.legend = legend;\n  chart.dispatch = dispatch;\n  chart.pie = pie;\n\n  d3.rebind(chart, pie, 'valueFormat', 'values', 'x', 'y', 'description', 'id', 'showLabels', 'donutLabelsOutside', 'pieLabelsOutside', 'labelType', 'donut', 'donutRatio', 'labelThreshold');\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    pie.color(color);\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.scatter = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin       = {top: 0, right: 0, bottom: 0, left: 0}\n    , width        = 960\n    , height       = 500\n    , color        = nv.utils.defaultColor() // chooses color\n    , id           = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't select one\n    , x            = d3.scale.linear()\n    , y            = d3.scale.linear()\n    , z            = d3.scale.linear() //linear because d3.svg.shape.size is treated as area\n    , getX         = function(d) { return d.x } // accessor to get the x value\n    , getY         = function(d) { return d.y } // accessor to get the y value\n    , getSize      = function(d) { return d.size || 1} // accessor to get the point size\n    , getShape     = function(d) { return d.shape || 'circle' } // accessor to get point shape\n    , onlyCircles  = true // Set to false to use shapes\n    , forceX       = [] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n    , forceY       = [] // List of numbers to Force into the Y scale\n    , forceSize    = [] // List of numbers to Force into the Size scale\n    , interactive  = true // If true, plots a voronoi overlay for advanced point intersection\n    , pointKey     = null\n    , pointActive  = function(d) { return !d.notActive } // any points that return false will be filtered out\n    , padData      = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n    , padDataOuter = .1 //outerPadding to imitate ordinal scale outer padding\n    , clipEdge     = false // if true, masks points within x and y scale\n    , clipVoronoi  = true // if true, masks each point with a circle... can turn off to slightly increase performance\n    , clipRadius   = function() { return 25 } // function to get the radius for voronoi point clips\n    , xDomain      = null // Override x domain (skips the calculation from data)\n    , yDomain      = null // Override y domain\n    , xRange       = null // Override x range\n    , yRange       = null // Override y range\n    , sizeDomain   = null // Override point size domain\n    , sizeRange    = null\n    , singlePoint  = false\n    , dispatch     = d3.dispatch('elementClick', 'elementMouseover', 'elementMouseout')\n    , useVoronoi   = true\n    ;\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0, z0 // used to store previous scales\n    , timeoutID\n    , needsUpdate = false // Flag for when the points are visually updating, but the interactive layer is behind, to disable tooltips\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n      //add series index to each data point for reference\n      data.forEach(function(series, i) {\n        series.values.forEach(function(point) {\n          point.series = i;\n        });\n      });\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      // remap and flatten the data for use in calculating the scales' domains\n      var seriesData = (xDomain && yDomain && sizeDomain) ? [] : // if we know xDomain and yDomain and sizeDomain, no need to calculate.... if Size is constant remember to set sizeDomain to speed up performance\n            d3.merge(\n              data.map(function(d) {\n                return d.values.map(function(d,i) {\n                  return { x: getX(d,i), y: getY(d,i), size: getSize(d,i) }\n                })\n              })\n            );\n\n      x   .domain(xDomain || d3.extent(seriesData.map(function(d) { return d.x; }).concat(forceX)))\n\n      if (padData && data[0])\n        x.range(xRange || [(availableWidth * padDataOuter +  availableWidth) / (2 *data[0].values.length), availableWidth - availableWidth * (1 + padDataOuter) / (2 * data[0].values.length)  ]);\n        //x.range([availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n      else\n        x.range(xRange || [0, availableWidth]);\n\n      y   .domain(yDomain || d3.extent(seriesData.map(function(d) { return d.y }).concat(forceY)))\n          .range(yRange || [availableHeight, 0]);\n\n      z   .domain(sizeDomain || d3.extent(seriesData.map(function(d) { return d.size }).concat(forceSize)))\n          .range(sizeRange || [16, 256]);\n\n      // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n      if (x.domain()[0] === x.domain()[1] || y.domain()[0] === y.domain()[1]) singlePoint = true;\n      if (x.domain()[0] === x.domain()[1])\n        x.domain()[0] ?\n            x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n          : x.domain([-1,1]);\n\n      if (y.domain()[0] === y.domain()[1])\n        y.domain()[0] ?\n            y.domain([y.domain()[0] - y.domain()[0] * 0.01, y.domain()[1] + y.domain()[1] * 0.01])\n          : y.domain([-1,1]);\n\n      if ( isNaN(x.domain()[0])) {\n          x.domain([-1,1]);\n      }\n\n      if ( isNaN(y.domain()[0])) {\n          y.domain([-1,1]);\n      }\n\n\n      x0 = x0 || x;\n      y0 = y0 || y;\n      z0 = z0 || z;\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-scatter').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatter nv-chart-' + id + (singlePoint ? ' nv-single-point' : ''));\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-groups');\n      gEnter.append('g').attr('class', 'nv-point-paths');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-edge-clip-' + id)\n        .append('rect');\n\n      wrap.select('#nv-edge-clip-' + id + ' rect')\n          .attr('width', availableWidth)\n          .attr('height', (availableHeight > 0) ? availableHeight : 0);\n\n      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n\n      function updateInteractiveLayer() {\n\n        if (!interactive) return false;\n\n        var eventElements;\n\n        var vertices = d3.merge(data.map(function(group, groupIndex) {\n            return group.values\n              .map(function(point, pointIndex) {\n                // *Adding noise to make duplicates very unlikely\n                // *Injecting series and point index for reference\n                /* *Adding a 'jitter' to the points, because there's an issue in d3.geom.voronoi.\n                */\n                var pX = getX(point,pointIndex);\n                var pY = getY(point,pointIndex);\n\n                return [x(pX),\n                        y(pY),\n                        groupIndex,\n                        pointIndex, point];\n              })\n              .filter(function(pointArray, pointIndex) {\n                return pointActive(pointArray[4], pointIndex); // Issue #237.. move filter to after map, so pointIndex is correct!\n              })\n          })\n        );\n\n\n\n        //inject series and point index for reference into voronoi\n        if (useVoronoi === true) {\n\n          if (clipVoronoi) {\n            var pointClipsEnter = wrap.select('defs').selectAll('.nv-point-clips')\n                .data([id])\n              .enter();\n\n            pointClipsEnter.append('clipPath')\n                  .attr('class', 'nv-point-clips')\n                  .attr('id', 'nv-points-clip-' + id);\n\n            var pointClips = wrap.select('#nv-points-clip-' + id).selectAll('circle')\n                .data(vertices);\n            pointClips.enter().append('circle')\n                .attr('r', clipRadius);\n            pointClips.exit().remove();\n            pointClips\n                .attr('cx', function(d) { return d[0] })\n                .attr('cy', function(d) { return d[1] });\n\n            wrap.select('.nv-point-paths')\n                .attr('clip-path', 'url(#nv-points-clip-' + id + ')');\n          }\n\n\n          if(vertices.length) {\n            // Issue #283 - Adding 2 dummy points to the voronoi b/c voronoi requires min 3 points to work\n            vertices.push([x.range()[0] - 20, y.range()[0] - 20, null, null]);\n            vertices.push([x.range()[1] + 20, y.range()[1] + 20, null, null]);\n            vertices.push([x.range()[0] - 20, y.range()[0] + 20, null, null]);\n            vertices.push([x.range()[1] + 20, y.range()[1] - 20, null, null]);\n          }\n\n          var bounds = d3.geom.polygon([\n              [-10,-10],\n              [-10,height + 10],\n              [width + 10,height + 10],\n              [width + 10,-10]\n          ]);\n\n          // delete duplicates from vertices - essential assumption for d3.geom.voronoi\n          var epsilon = 1e-6; // d3 uses 1e-6 to determine equivalence.\n          vertices = vertices.sort(function(a,b){return ((a[0] - b[0]) || (a[1] - b[1]))});\n          for (var i = 0; i < vertices.length - 1; ) {\n              if ((Math.abs(vertices[i][0] - vertices[i+1][0]) < epsilon) &&\n                  (Math.abs(vertices[i][1] - vertices[i+1][1]) < epsilon)) {\n                      vertices.splice(i+1, 1);\n              } else {\n                  i++;\n              }\n          }\n \n          var voronoi = d3.geom.voronoi(vertices).map(function(d, i) {\n              return {\n                'data': bounds.clip(d),\n                'series': vertices[i][2],\n                'point': vertices[i][3]\n              }\n            });\n\n\n          var pointPaths = wrap.select('.nv-point-paths').selectAll('path')\n              .data(voronoi);\n          pointPaths.enter().append('path')\n              .attr('class', function(d,i) { return 'nv-path-'+i; });\n          pointPaths.exit().remove();\n          pointPaths\n              .attr('d', function(d) {\n                if (!d || !d.data || d.data.length === 0)\n                    return 'M 0 0';\n                else\n                    return 'M' + d.data.join('L') + 'Z';\n              });\n\n          var mouseEventCallback = function(d,mDispatch) {\n                if (needsUpdate) return 0;\n                var series = data[d.series];\n                if (typeof series === 'undefined') return;\n\n                var point  = series.values[d.point];\n\n                mDispatch({\n                  point: point,\n                  series: series,\n                  pos: [x(getX(point, d.point)) + margin.left, y(getY(point, d.point)) + margin.top],\n                  seriesIndex: d.series,\n                  pointIndex: d.point\n                });\n          };\n\n          pointPaths\n              .on('click', function(d) {\n                mouseEventCallback(d, dispatch.elementClick);\n              })\n              .on('mouseover', function(d) {\n                mouseEventCallback(d, dispatch.elementMouseover);\n              })\n              .on('mouseout', function(d, i) {\n                mouseEventCallback(d, dispatch.elementMouseout);\n              });\n\n\n        } else {\n          /*\n          // bring data in form needed for click handlers\n          var dataWithPoints = vertices.map(function(d, i) {\n              return {\n                'data': d,\n                'series': vertices[i][2],\n                'point': vertices[i][3]\n              }\n            });\n           */\n\n          // add event handlers to points instead voronoi paths\n          wrap.select('.nv-groups').selectAll('.nv-group')\n            .selectAll('.nv-point')\n              //.data(dataWithPoints)\n              //.style('pointer-events', 'auto') // recativate events, disabled by css\n              .on('click', function(d,i) {\n                //nv.log('test', d, i);\n                if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                var series = data[d.series],\n                    point  = series.values[i];\n\n                dispatch.elementClick({\n                  point: point,\n                  series: series,\n                  pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                  seriesIndex: d.series,\n                  pointIndex: i\n                });\n              })\n              .on('mouseover', function(d,i) {\n                if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                var series = data[d.series],\n                    point  = series.values[i];\n\n                dispatch.elementMouseover({\n                  point: point,\n                  series: series,\n                  pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                  seriesIndex: d.series,\n                  pointIndex: i\n                });\n              })\n              .on('mouseout', function(d,i) {\n                if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                var series = data[d.series],\n                    point  = series.values[i];\n\n                dispatch.elementMouseout({\n                  point: point,\n                  series: series,\n                  seriesIndex: d.series,\n                  pointIndex: i\n                });\n              });\n          }\n\n          needsUpdate = false;\n      }\n\n      needsUpdate = true;\n\n      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n          .data(function(d) { return d }, function(d) { return d.key });\n      groups.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n      groups.exit()\n          .remove();\n      groups\n          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n          .classed('hover', function(d) { return d.hover });\n      groups\n          \n          .style('fill', function(d,i) { return color(d, i) })\n          .style('stroke', function(d,i) { return color(d, i) })\n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .5);\n\n\n      if (onlyCircles) {\n\n        var points = groups.selectAll('circle.nv-point')\n            .data(function(d) { return d.values }, pointKey);\n        points.enter().append('circle')\n            .style('fill', function (d,i) { return d.color })\n            .style('stroke', function (d,i) { return d.color })\n            .attr('cx', function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n            .attr('cy', function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n            .attr('r', function(d,i) { return Math.sqrt(z(getSize(d,i))/Math.PI) });\n        points.exit().remove();\n        groups.exit().selectAll('path.nv-point')\n            .attr('cx', function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n            .attr('cy', function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n            .remove();\n        points.each(function(d,i) {\n          d3.select(this)\n            .classed('nv-point', true)\n            .classed('nv-point-' + i, true)\n            .classed('hover',false)\n            ;\n        });\n        points\n            .attr('cx', function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n            .attr('cy', function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n            .attr('r', function(d,i) { return Math.sqrt(z(getSize(d,i))/Math.PI) });\n\n      } else {\n\n        var points = groups.selectAll('path.nv-point')\n            .data(function(d) { return d.values });\n        points.enter().append('path')\n            .style('fill', function (d,i) { return d.color })\n            .style('stroke', function (d,i) { return d.color })\n            .attr('transform', function(d,i) {\n              return 'translate(' + x0(getX(d,i)) + ',' + y0(getY(d,i)) + ')'\n            })\n            .attr('d',\n              d3.svg.symbol()\n                .type(getShape)\n                .size(function(d,i) { return z(getSize(d,i)) })\n            );\n        points.exit().remove();\n        groups.exit().selectAll('path.nv-point')\n            \n            .attr('transform', function(d,i) {\n              return 'translate(' + x(getX(d,i)) + ',' + y(getY(d,i)) + ')'\n            })\n            .remove();\n        points.each(function(d,i) {\n          d3.select(this)\n            .classed('nv-point', true)\n            .classed('nv-point-' + i, true)\n            .classed('hover',false)\n            ;\n        });\n        points\n            .attr('transform', function(d,i) {\n              //nv.log(d,i,getX(d,i), x(getX(d,i)));\n              return 'translate(' + x(getX(d,i)) + ',' + y(getY(d,i)) + ')'\n            })\n            .attr('d',\n              d3.svg.symbol()\n                .type(getShape)\n                .size(function(d,i) { return z(getSize(d,i)) })\n            );\n      }\n\n\n      // Delay updating the invisible interactive layer for smoother animation\n      clearTimeout(timeoutID); // stop repeat calls to updateInteractiveLayer\n      timeoutID = setTimeout(updateInteractiveLayer, 300);\n      //updateInteractiveLayer();\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n      z0 = z.copy();\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n  chart.clearHighlights = function() {\n      //Remove the 'hover' class from all highlighted points.\n      d3.selectAll(\".nv-chart-\" + id + \" .nv-point.hover\").classed(\"hover\",false);\n  };\n\n  chart.highlightPoint = function(seriesIndex,pointIndex,isHoverOver) {\n      d3.select(\".nv-chart-\" + id + \" .nv-series-\" + seriesIndex + \" .nv-point-\" + pointIndex)\n          .classed(\"hover\",isHoverOver);\n  };\n\n\n  dispatch.on('elementMouseover.point', function(d) {\n     if (interactive) chart.highlightPoint(d.seriesIndex,d.pointIndex,true);\n  });\n\n  dispatch.on('elementMouseout.point', function(d) {\n     if (interactive) chart.highlightPoint(d.seriesIndex,d.pointIndex,false);\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = d3.functor(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = d3.functor(_);\n    return chart;\n  };\n\n  chart.size = function(_) {\n    if (!arguments.length) return getSize;\n    getSize = d3.functor(_);\n    return chart;\n  };\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.zScale = function(_) {\n    if (!arguments.length) return z;\n    z = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.sizeDomain = function(_) {\n    if (!arguments.length) return sizeDomain;\n    sizeDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.sizeRange = function(_) {\n    if (!arguments.length) return sizeRange;\n    sizeRange = _;\n    return chart;\n  };\n\n  chart.forceX = function(_) {\n    if (!arguments.length) return forceX;\n    forceX = _;\n    return chart;\n  };\n\n  chart.forceY = function(_) {\n    if (!arguments.length) return forceY;\n    forceY = _;\n    return chart;\n  };\n\n  chart.forceSize = function(_) {\n    if (!arguments.length) return forceSize;\n    forceSize = _;\n    return chart;\n  };\n\n  chart.interactive = function(_) {\n    if (!arguments.length) return interactive;\n    interactive = _;\n    return chart;\n  };\n\n  chart.pointKey = function(_) {\n    if (!arguments.length) return pointKey;\n    pointKey = _;\n    return chart;\n  };\n\n  chart.pointActive = function(_) {\n    if (!arguments.length) return pointActive;\n    pointActive = _;\n    return chart;\n  };\n\n  chart.padData = function(_) {\n    if (!arguments.length) return padData;\n    padData = _;\n    return chart;\n  };\n\n  chart.padDataOuter = function(_) {\n    if (!arguments.length) return padDataOuter;\n    padDataOuter = _;\n    return chart;\n  };\n\n  chart.clipEdge = function(_) {\n    if (!arguments.length) return clipEdge;\n    clipEdge = _;\n    return chart;\n  };\n\n  chart.clipVoronoi= function(_) {\n    if (!arguments.length) return clipVoronoi;\n    clipVoronoi = _;\n    return chart;\n  };\n\n  chart.useVoronoi= function(_) {\n    if (!arguments.length) return useVoronoi;\n    useVoronoi = _;\n    if (useVoronoi === false) {\n        clipVoronoi = false;\n    }\n    return chart;\n  };\n\n  chart.clipRadius = function(_) {\n    if (!arguments.length) return clipRadius;\n    clipRadius = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.shape = function(_) {\n    if (!arguments.length) return getShape;\n    getShape = _;\n    return chart;\n  };\n\n  chart.onlyCircles = function(_) {\n    if (!arguments.length) return onlyCircles;\n    onlyCircles = _;\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n  chart.singlePoint = function(_) {\n    if (!arguments.length) return singlePoint;\n    singlePoint = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\nnv.models.scatterChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var scatter      = nv.models.scatter()\n    , xAxis        = nv.models.axis()\n    , yAxis        = nv.models.axis()\n    , legend       = nv.models.legend()\n    , controls     = nv.models.legend()\n    , distX        = nv.models.distribution()\n    , distY        = nv.models.distribution()\n    ;\n\n  var margin       = {top: 30, right: 20, bottom: 50, left: 75}\n    , width        = null\n    , height       = null\n    , color        = nv.utils.defaultColor()\n    , x            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.xScale()\n    , y            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.yScale()\n    , xPadding     = 0\n    , yPadding     = 0\n    , showDistX    = false\n    , showDistY    = false\n    , showLegend   = true\n    , showXAxis    = true\n    , showYAxis    = true\n    , rightAlignYAxis = false\n    , showControls = !!d3.fisheye\n    , fisheye      = 0\n    , pauseFisheye = false\n    , tooltips     = true\n    , tooltipX     = function(key, x, y) { return '<strong>' + x + '</strong>' }\n    , tooltipY     = function(key, x, y) { return '<strong>' + y + '</strong>' }\n    , tooltip      = null\n    , state = {}\n    , defaultState = null\n    , dispatch     = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , noData       = \"No Data Available.\"\n    , transitionDuration = 0\n    ;\n\n  scatter\n    .xScale(x)\n    .yScale(y)\n    ;\n  xAxis\n    .orient('bottom')\n    .tickPadding(10)\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    .tickPadding(10)\n    ;\n  distX\n    .axis('x')\n    ;\n  distY\n    .axis('y')\n    ;\n\n  controls.updateState(false);\n\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0;\n\n  var showTooltip = function(e, offsetElement) {\n    //TODO: make tooltip style an option between single or dual on axes (maybe on all charts with axes?)\n\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        leftX = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        topX = y.range()[0] + margin.top + ( offsetElement.offsetTop || 0),\n        leftY = x.range()[0] + margin.left + ( offsetElement.offsetLeft || 0 ),\n        topY = e.pos[1] + ( offsetElement.offsetTop || 0),\n        xVal = xAxis.tickFormat()(scatter.x()(e.point, e.pointIndex)),\n        yVal = yAxis.tickFormat()(scatter.y()(e.point, e.pointIndex));\n\n      if( tooltipX != null )\n          nv.tooltip.show([leftX, topX], tooltipX(e.series.key, xVal, yVal, e, chart), 'n', 1, offsetElement, 'x-nvtooltip');\n      if( tooltipY != null )\n          nv.tooltip.show([leftY, topY], tooltipY(e.series.key, xVal, yVal, e, chart), 'e', 1, offsetElement, 'y-nvtooltip');\n      if( tooltip != null )\n          nv.tooltip.show([left, top], tooltip(e.series.key, xVal, yVal, e, chart), e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  var controlsData = [\n    { key: 'Magnify', disabled: true }\n  ];\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart); };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display noData message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x0 = x0 || x;\n      y0 = y0 || y;\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-scatterChart').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatterChart nv-chart-' + scatter.id());\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      // background for pointer events\n      gEnter.append('rect').attr('class', 'nvd3 nv-background');\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-scatterWrap');\n      gEnter.append('g').attr('class', 'nv-distWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        var legendWidth = (showControls) ? availableWidth / 2 : availableWidth;\n        legend.width(legendWidth);\n\n        wrap.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        wrap.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + (availableWidth - legendWidth) + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Controls\n\n      if (showControls) {\n        controls.width(180).color(['#444']);\n        g.select('.nv-controlsWrap')\n            .datum(controlsData)\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n            .call(controls);\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      scatter\n          .width(availableWidth)\n          .height(availableHeight)\n          .color(data.map(function(d,i) {\n            return d.color || color(d, i);\n          }).filter(function(d,i) { return !data[i].disabled }));\n\n      if (xPadding !== 0)\n        scatter.xDomain(null);\n\n      if (yPadding !== 0)\n        scatter.yDomain(null);\n\n      wrap.select('.nv-scatterWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n          .call(scatter);\n\n      //Adjust for x and y padding\n      if (xPadding !== 0) {\n        var xRange = x.domain()[1] - x.domain()[0];\n        scatter.xDomain([x.domain()[0] - (xPadding * xRange), x.domain()[1] + (xPadding * xRange)]);\n      }\n\n      if (yPadding !== 0) {\n        var yRange = y.domain()[1] - y.domain()[0];\n        scatter.yDomain([y.domain()[0] - (yPadding * yRange), y.domain()[1] + (yPadding * yRange)]);\n      }\n\n      //Only need to update the scatter again if x/yPadding changed the domain.\n      if (yPadding !== 0 || xPadding !== 0) {\n        wrap.select('.nv-scatterWrap')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(scatter);\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n      if (showXAxis) {\n        xAxis\n            .scale(x)\n            .ticks( xAxis.ticks() && xAxis.ticks().length ? xAxis.ticks() : availableWidth / 100 )\n            .tickSize( -availableHeight , 0);\n\n        g.select('.nv-x.nv-axis')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n            .call(xAxis);\n\n      }\n\n      if (showYAxis) {\n        yAxis\n            .scale(y)\n            .ticks( yAxis.ticks() && yAxis.ticks().length ? yAxis.ticks() : availableHeight / 36 )\n            .tickSize( -availableWidth, 0);\n\n        g.select('.nv-y.nv-axis')\n            .call(yAxis);\n      }\n\n\n      if (showDistX) {\n        distX\n            .getData(scatter.x())\n            .scale(x)\n            .width(availableWidth)\n            .color(data.map(function(d,i) {\n              return d.color || color(d, i);\n            }).filter(function(d,i) { return !data[i].disabled }));\n        gEnter.select('.nv-distWrap').append('g')\n            .attr('class', 'nv-distributionX');\n        g.select('.nv-distributionX')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distX);\n      }\n\n      if (showDistY) {\n        distY\n            .getData(scatter.y())\n            .scale(y)\n            .width(availableHeight)\n            .color(data.map(function(d,i) {\n              return d.color || color(d, i);\n            }).filter(function(d,i) { return !data[i].disabled }));\n        gEnter.select('.nv-distWrap').append('g')\n            .attr('class', 'nv-distributionY');\n        g.select('.nv-distributionY')\n            .attr('transform', \n              'translate(' + (rightAlignYAxis ? availableWidth : -distY.size() ) + ',0)')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distY);\n      }\n\n      //------------------------------------------------------------\n\n\n\n\n      if (d3.fisheye) {\n        g.select('.nv-background')\n            .attr('width', availableWidth)\n            .attr('height', availableHeight);\n\n        g.select('.nv-background').on('mousemove', updateFisheye);\n        g.select('.nv-background').on('click', function() { pauseFisheye = !pauseFisheye;});\n        scatter.dispatch.on('elementClick.freezeFisheye', function() {\n          pauseFisheye = !pauseFisheye;\n        });\n      }\n\n\n      function updateFisheye() {\n        if (pauseFisheye) {\n          g.select('.nv-point-paths').style('pointer-events', 'all');\n          return false;\n        }\n\n        g.select('.nv-point-paths').style('pointer-events', 'none' );\n\n        var mouse = d3.mouse(this);\n        x.distortion(fisheye).focus(mouse[0]);\n        y.distortion(fisheye).focus(mouse[1]);\n\n        g.select('.nv-scatterWrap')\n            .call(scatter);\n\n        if (showXAxis)\n          g.select('.nv-x.nv-axis').call(xAxis);\n        \n        if (showYAxis)\n          g.select('.nv-y.nv-axis').call(yAxis);\n        \n        g.select('.nv-distributionX')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distX);\n        g.select('.nv-distributionY')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distY);\n      }\n\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      controls.dispatch.on('legendClick', function(d,i) {\n        d.disabled = !d.disabled;\n\n        fisheye = d.disabled ? 0 : 2.5;\n        g.select('.nv-background') .style('pointer-events', d.disabled ? 'none' : 'all');\n        g.select('.nv-point-paths').style('pointer-events', d.disabled ? 'all' : 'none' );\n\n        if (d.disabled) {\n          x.distortion(fisheye).focus(0);\n          y.distortion(fisheye).focus(0);\n\n          g.select('.nv-scatterWrap').call(scatter);\n          g.select('.nv-x.nv-axis').call(xAxis);\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } else {\n          pauseFisheye = false;\n        }\n\n        chart.update();\n      });\n\n      legend.dispatch.on('stateChange', function(newState) {\n        state.disabled = newState.disabled;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      scatter.dispatch.on('elementMouseover.tooltip', function(e) {\n        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n            .attr('y1', function(d,i) { return e.pos[1] - availableHeight;});\n        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n            .attr('x2', e.pos[0] + distX.size());\n\n        e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\n        dispatch.tooltipShow(e);\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  scatter.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n\n    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n        .attr('y1', 0);\n    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n        .attr('x2', distY.size());\n  });\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.scatter = scatter;\n  chart.legend = legend;\n  chart.controls = controls;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n  chart.distX = distX;\n  chart.distY = distY;\n\n  d3.rebind(chart, scatter, 'id', 'interactive', 'pointActive', 'x', 'y', 'shape', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange', 'sizeDomain', 'sizeRange', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'clipRadius', 'useVoronoi');\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    distX.color(color);\n    distY.color(color);\n    return chart;\n  };\n\n  chart.showDistX = function(_) {\n    if (!arguments.length) return showDistX;\n    showDistX = _;\n    return chart;\n  };\n\n  chart.showDistY = function(_) {\n    if (!arguments.length) return showDistY;\n    showDistY = _;\n    return chart;\n  };\n\n  chart.showControls = function(_) {\n    if (!arguments.length) return showControls;\n    showControls = _;\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n\n  chart.fisheye = function(_) {\n    if (!arguments.length) return fisheye;\n    fisheye = _;\n    return chart;\n  };\n\n  chart.xPadding = function(_) {\n    if (!arguments.length) return xPadding;\n    xPadding = _;\n    return chart;\n  };\n\n  chart.yPadding = function(_) {\n    if (!arguments.length) return yPadding;\n    yPadding = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.tooltipXContent = function(_) {\n    if (!arguments.length) return tooltipX;\n    tooltipX = _;\n    return chart;\n  };\n\n  chart.tooltipYContent = function(_) {\n    if (!arguments.length) return tooltipY;\n    tooltipY = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n  \n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.scatterPlusLineChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var scatter      = nv.models.scatter()\n    , xAxis        = nv.models.axis()\n    , yAxis        = nv.models.axis()\n    , legend       = nv.models.legend()\n    , controls     = nv.models.legend()\n    , distX        = nv.models.distribution()\n    , distY        = nv.models.distribution()\n    ;\n\n  var margin       = {top: 30, right: 20, bottom: 50, left: 75}\n    , width        = null\n    , height       = null\n    , color        = nv.utils.defaultColor()\n    , x            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.xScale()\n    , y            = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.yScale()\n    , showDistX    = false\n    , showDistY    = false\n    , showLegend   = true\n    , showXAxis    = true\n    , showYAxis    = true\n    , rightAlignYAxis = false\n    , showControls = !!d3.fisheye\n    , fisheye      = 0\n    , pauseFisheye = false\n    , tooltips     = true\n    , tooltipX     = function(key, x, y) { return '<strong>' + x + '</strong>' }\n    , tooltipY     = function(key, x, y) { return '<strong>' + y + '</strong>' }\n    , tooltip      = function(key, x, y, date) { return '<h3>' + key + '</h3>' \n                                                      + '<p>' + date + '</p>' }\n    , state = {}\n    , defaultState = null\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , noData       = \"No Data Available.\"\n    , transitionDuration = 0\n    ;\n\n  scatter\n    .xScale(x)\n    .yScale(y)\n    ;\n  xAxis\n    .orient('bottom')\n    .tickPadding(10)\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    .tickPadding(10)\n    ;\n  distX\n    .axis('x')\n    ;\n  distY\n    .axis('y')\n    ;\n  \n  controls.updateState(false);\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var x0, y0;\n\n  var showTooltip = function(e, offsetElement) {\n    //TODO: make tooltip style an option between single or dual on axes (maybe on all charts with axes?)\n\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        leftX = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        topX = y.range()[0] + margin.top + ( offsetElement.offsetTop || 0),\n        leftY = x.range()[0] + margin.left + ( offsetElement.offsetLeft || 0 ),\n        topY = e.pos[1] + ( offsetElement.offsetTop || 0),\n        xVal = xAxis.tickFormat()(scatter.x()(e.point, e.pointIndex)),\n        yVal = yAxis.tickFormat()(scatter.y()(e.point, e.pointIndex));\n\n      if( tooltipX != null )\n          nv.tooltip.show([leftX, topX], tooltipX(e.series.key, xVal, yVal, e, chart), 'n', 1, offsetElement, 'x-nvtooltip');\n      if( tooltipY != null )\n          nv.tooltip.show([leftY, topY], tooltipY(e.series.key, xVal, yVal, e, chart), 'e', 1, offsetElement, 'y-nvtooltip');\n      if( tooltip != null )\n          nv.tooltip.show([left, top], tooltip(e.series.key, xVal, yVal, e.point.tooltip, e, chart), e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  var controlsData = [\n    { key: 'Magnify', disabled: true }\n  ];\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart); };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display noData message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = scatter.xScale();\n      y = scatter.yScale();\n\n      x0 = x0 || x;\n      y0 = y0 || y;\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-scatterChart').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatterChart nv-chart-' + scatter.id());\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g')\n\n      // background for pointer events\n      gEnter.append('rect').attr('class', 'nvd3 nv-background').style(\"pointer-events\",\"none\");\n\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-scatterWrap');\n      gEnter.append('g').attr('class', 'nv-regressionLinesWrap');\n      gEnter.append('g').attr('class', 'nv-distWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        legend.width( availableWidth / 2 );\n\n        wrap.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        wrap.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + (availableWidth / 2) + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Controls\n\n      if (showControls) {\n        controls.width(180).color(['#444']);\n        g.select('.nv-controlsWrap')\n            .datum(controlsData)\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\n            .call(controls);\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      scatter\n          .width(availableWidth)\n          .height(availableHeight)\n          .color(data.map(function(d,i) {\n            return d.color || color(d, i);\n          }).filter(function(d,i) { return !data[i].disabled }))\n\n      wrap.select('.nv-scatterWrap')\n          .datum(data.filter(function(d) { return !d.disabled }))\n          .call(scatter);\n\n      wrap.select('.nv-regressionLinesWrap')\n          .attr('clip-path', 'url(#nv-edge-clip-' + scatter.id() + ')');\n\n      var regWrap = wrap.select('.nv-regressionLinesWrap').selectAll('.nv-regLines')\n                      .data(function(d) {return d });\n      \n      regWrap.enter().append('g').attr('class', 'nv-regLines');\n\n      var regLine = regWrap.selectAll('.nv-regLine').data(function(d){return [d]});\n      var regLineEnter = regLine.enter()\n                       .append('line').attr('class', 'nv-regLine')\n                       .style('stroke-opacity', 0);\n\n      regLine\n          \n          .attr('x1', x.range()[0])\n          .attr('x2', x.range()[1])\n          .attr('y1', function(d,i) {return y(x.domain()[0] * d.slope + d.intercept) })\n          .attr('y2', function(d,i) { return y(x.domain()[1] * d.slope + d.intercept) })\n          .style('stroke', function(d,i,j) { return color(d,j) })\n          .style('stroke-opacity', function(d,i) {\n            return (d.disabled || typeof d.slope === 'undefined' || typeof d.intercept === 'undefined') ? 0 : 1 \n          });\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n        xAxis\n            .scale(x)\n            .ticks( xAxis.ticks() ? xAxis.ticks() : availableWidth / 100 )\n            .tickSize( -availableHeight , 0);\n\n        g.select('.nv-x.nv-axis')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n            .call(xAxis);\n      }\n\n      if (showYAxis) {\n        yAxis\n            .scale(y)\n            .ticks( yAxis.ticks() ? yAxis.ticks() : availableHeight / 36 )\n            .tickSize( -availableWidth, 0);\n\n        g.select('.nv-y.nv-axis')\n            .call(yAxis);\n      }\n\n\n      if (showDistX) {\n        distX\n            .getData(scatter.x())\n            .scale(x)\n            .width(availableWidth)\n            .color(data.map(function(d,i) {\n              return d.color || color(d, i);\n            }).filter(function(d,i) { return !data[i].disabled }));\n        gEnter.select('.nv-distWrap').append('g')\n            .attr('class', 'nv-distributionX');\n        g.select('.nv-distributionX')\n            .attr('transform', 'translate(0,' + y.range()[0] + ')')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distX);\n      }\n\n      if (showDistY) {\n        distY\n            .getData(scatter.y())\n            .scale(y)\n            .width(availableHeight)\n            .color(data.map(function(d,i) {\n              return d.color || color(d, i);\n            }).filter(function(d,i) { return !data[i].disabled }));\n        gEnter.select('.nv-distWrap').append('g')\n            .attr('class', 'nv-distributionY');\n        g.select('.nv-distributionY')\n            .attr('transform', 'translate(' + (rightAlignYAxis ? availableWidth : -distY.size() ) + ',0)')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distY);\n      }\n\n      //------------------------------------------------------------\n\n\n\n\n      if (d3.fisheye) {\n        g.select('.nv-background')\n            .attr('width', availableWidth)\n            .attr('height', availableHeight)\n            ;\n\n        g.select('.nv-background').on('mousemove', updateFisheye);\n        g.select('.nv-background').on('click', function() { pauseFisheye = !pauseFisheye;});\n        scatter.dispatch.on('elementClick.freezeFisheye', function() {\n          pauseFisheye = !pauseFisheye;\n        });\n      }\n\n\n      function updateFisheye() {\n        if (pauseFisheye) {\n          g.select('.nv-point-paths').style('pointer-events', 'all');\n          return false;\n        }\n\n        g.select('.nv-point-paths').style('pointer-events', 'none' );\n\n        var mouse = d3.mouse(this);\n        x.distortion(fisheye).focus(mouse[0]);\n        y.distortion(fisheye).focus(mouse[1]);\n\n        g.select('.nv-scatterWrap')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(scatter);\n\n        if (showXAxis)\n          g.select('.nv-x.nv-axis').call(xAxis);\n\n        if (showYAxis)\n          g.select('.nv-y.nv-axis').call(yAxis);\n        \n        g.select('.nv-distributionX')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distX);\n        g.select('.nv-distributionY')\n            .datum(data.filter(function(d) { return !d.disabled }))\n            .call(distY);\n      }\n\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      controls.dispatch.on('legendClick', function(d,i) {\n        d.disabled = !d.disabled;\n\n        fisheye = d.disabled ? 0 : 2.5;\n        g.select('.nv-background') .style('pointer-events', d.disabled ? 'none' : 'all');\n        g.select('.nv-point-paths').style('pointer-events', d.disabled ? 'all' : 'none' );\n\n        if (d.disabled) {\n          x.distortion(fisheye).focus(0);\n          y.distortion(fisheye).focus(0);\n\n          g.select('.nv-scatterWrap').call(scatter);\n          g.select('.nv-x.nv-axis').call(xAxis);\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } else {\n          pauseFisheye = false;\n        }\n\n        chart.update();\n      });\n\n      legend.dispatch.on('stateChange', function(newState) { \n        state = newState;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n\n      scatter.dispatch.on('elementMouseover.tooltip', function(e) {\n        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n            .attr('y1', e.pos[1] - availableHeight);\n        d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n            .attr('x2', e.pos[0] + distX.size());\n\n        e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\n        dispatch.tooltipShow(e);\n      });\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined') {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        chart.update();\n      });\n\n      //============================================================\n\n\n      //store old scales for use in transitions on update\n      x0 = x.copy();\n      y0 = y.copy();\n\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  scatter.dispatch.on('elementMouseout.tooltip', function(e) {\n    dispatch.tooltipHide(e);\n\n    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-distx-' + e.pointIndex)\n        .attr('y1', 0);\n    d3.select('.nv-chart-' + scatter.id() + ' .nv-series-' + e.seriesIndex + ' .nv-disty-' + e.pointIndex)\n        .attr('x2', distY.size());\n  });\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.scatter = scatter;\n  chart.legend = legend;\n  chart.controls = controls;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n  chart.distX = distX;\n  chart.distY = distY;\n\n  d3.rebind(chart, scatter, 'id', 'interactive', 'pointActive', 'x', 'y', 'shape', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange', 'sizeDomain', 'sizeRange', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'clipRadius', 'useVoronoi');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    distX.color(color);\n    distY.color(color);\n    return chart;\n  };\n\n  chart.showDistX = function(_) {\n    if (!arguments.length) return showDistX;\n    showDistX = _;\n    return chart;\n  };\n\n  chart.showDistY = function(_) {\n    if (!arguments.length) return showDistY;\n    showDistY = _;\n    return chart;\n  };\n\n  chart.showControls = function(_) {\n    if (!arguments.length) return showControls;\n    showControls = _;\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.fisheye = function(_) {\n    if (!arguments.length) return fisheye;\n    fisheye = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.tooltipXContent = function(_) {\n    if (!arguments.length) return tooltipX;\n    tooltipX = _;\n    return chart;\n  };\n\n  chart.tooltipYContent = function(_) {\n    if (!arguments.length) return tooltipY;\n    tooltipY = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.sparkline = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 2, right: 0, bottom: 2, left: 0}\n    , width = 400\n    , height = 32\n    , animate = true\n    , x = d3.scale.linear()\n    , y = d3.scale.linear()\n    , getX = function(d) { return d.x }\n    , getY = function(d) { return d.y }\n    , color = nv.utils.getColor(['#000'])\n    , xDomain\n    , yDomain\n    , xRange\n    , yRange\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x   .domain(xDomain || d3.extent(data, getX ))\n          .range(xRange || [0, availableWidth]);\n\n      y   .domain(yDomain || d3.extent(data, getY ))\n          .range(yRange || [availableHeight, 0]);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-sparkline').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparkline');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n      //------------------------------------------------------------\n\n\n      var paths = wrap.selectAll('path')\n          .data(function(d) { return [d] });\n      paths.enter().append('path');\n      paths.exit().remove();\n      paths\n          .style('stroke', function(d,i) { return d.color || color(d, i) })\n          .attr('d', d3.svg.line()\n            .x(function(d,i) { return x(getX(d,i)) })\n            .y(function(d,i) { return y(getY(d,i)) })\n          );\n\n\n      // TODO: Add CURRENT data point (Need Min, Mac, Current / Most recent)\n      var points = wrap.selectAll('circle.nv-point')\n          .data(function(data) {\n              var yValues = data.map(function(d, i) { return getY(d,i); });\n              function pointIndex(index) {\n                  if (index != -1) {\n\t              var result = data[index];\n                      result.pointIndex = index;\n                      return result;\n                  } else {\n                      return null;\n                  }\n              }\n              var maxPoint = pointIndex(yValues.lastIndexOf(y.domain()[1])),\n                  minPoint = pointIndex(yValues.indexOf(y.domain()[0])),\n                  currentPoint = pointIndex(yValues.length - 1);\n              return [minPoint, maxPoint, currentPoint].filter(function (d) {return d != null;});\n          });\n      points.enter().append('circle');\n      points.exit().remove();\n      points\n          .attr('cx', function(d,i) { return x(getX(d,d.pointIndex)) })\n          .attr('cy', function(d,i) { return y(getY(d,d.pointIndex)) })\n          .attr('r', 2)\n          .attr('class', function(d,i) {\n            return getX(d, d.pointIndex) == x.domain()[1] ? 'nv-point nv-currentValue' :\n                   getY(d, d.pointIndex) == y.domain()[0] ? 'nv-point nv-minValue' : 'nv-point nv-maxValue'\n          });\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = d3.functor(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = d3.functor(_);\n    return chart;\n  };\n\n  chart.xScale = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return chart;\n  };\n\n  chart.yScale = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return chart;\n  };\n\n  chart.xDomain = function(_) {\n    if (!arguments.length) return xDomain;\n    xDomain = _;\n    return chart;\n  };\n\n  chart.yDomain = function(_) {\n    if (!arguments.length) return yDomain;\n    yDomain = _;\n    return chart;\n  };\n\n  chart.xRange = function(_) {\n    if (!arguments.length) return xRange;\n    xRange = _;\n    return chart;\n  };\n\n  chart.yRange = function(_) {\n    if (!arguments.length) return yRange;\n    yRange = _;\n    return chart;\n  };\n\n  chart.animate = function(_) {\n    if (!arguments.length) return animate;\n    animate = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.sparklinePlus = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var sparkline = nv.models.sparkline();\n\n  var margin = {top: 15, right: 100, bottom: 10, left: 50}\n    , width = null\n    , height = null\n    , x\n    , y\n    , index = []\n    , paused = false\n    , xTickFormat = d3.format(',r')\n    , yTickFormat = d3.format(',.2f')\n    , showValue = true\n    , alignValue = true\n    , rightAlignValue = false\n    , noData = \"No Data Available.\"\n    ;\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this);\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      \n\n      chart.update = function() { chart(selection) };\n      chart.container = this;\n\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      var currentValue = sparkline.y()(data[data.length-1], data.length-1);\n\n      //------------------------------------------------------------\n\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = sparkline.xScale();\n      y = sparkline.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-sparklineplus').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparklineplus');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-sparklineWrap');\n      gEnter.append('g').attr('class', 'nv-valueWrap');\n      gEnter.append('g').attr('class', 'nv-hoverArea');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      var sparklineWrap = g.select('.nv-sparklineWrap');\n\n      sparkline\n        .width(availableWidth)\n        .height(availableHeight);\n\n      sparklineWrap\n          .call(sparkline);\n\n      //------------------------------------------------------------\n\n\n      var valueWrap = g.select('.nv-valueWrap');\n      \n      var value = valueWrap.selectAll('.nv-currentValue')\n          .data([currentValue]);\n\n      value.enter().append('text').attr('class', 'nv-currentValue')\n          .attr('dx', rightAlignValue ? -8 : 8)\n          .attr('dy', '.9em')\n          .style('text-anchor', rightAlignValue ? 'end' : 'start');\n\n      value\n          .attr('x', availableWidth + (rightAlignValue ? margin.right : 0))\n          .attr('y', alignValue ? function(d) { return y(d) } : 0)\n          .style('fill', sparkline.color()(data[data.length-1], data.length-1))\n          .text(yTickFormat(currentValue));\n\n\n\n      gEnter.select('.nv-hoverArea').append('rect')\n          .on('mousemove', sparklineHover)\n          .on('click', function() { paused = !paused })\n          .on('mouseout', function() { index = []; updateValueLine(); });\n          //.on('mouseout', function() { index = null; updateValueLine(); });\n\n      g.select('.nv-hoverArea rect')\n          .attr('transform', function(d) { return 'translate(' + -margin.left + ',' + -margin.top + ')' })\n          .attr('width', availableWidth + margin.left + margin.right)\n          .attr('height', availableHeight + margin.top);\n\n\n\n      function updateValueLine() { //index is currently global (within the chart), may or may not keep it that way\n        if (paused) return;\n\n        var hoverValue = g.selectAll('.nv-hoverValue').data(index)\n\n        var hoverEnter = hoverValue.enter()\n          .append('g').attr('class', 'nv-hoverValue')\n            .style('stroke-opacity', 0)\n            .style('fill-opacity', 0);\n\n        hoverValue.exit()\n          \n            .style('stroke-opacity', 0)\n            .style('fill-opacity', 0)\n            .remove();\n\n        hoverValue\n            .attr('transform', function(d) { return 'translate(' + x(sparkline.x()(data[d],d)) + ',0)' })\n          \n            .style('stroke-opacity', 1)\n            .style('fill-opacity', 1);\n\n        if (!index.length) return;\n\n        hoverEnter.append('line')\n            .attr('x1', 0)\n            .attr('y1', -margin.top)\n            .attr('x2', 0)\n            .attr('y2', availableHeight);\n\n\n        hoverEnter.append('text').attr('class', 'nv-xValue')\n            .attr('x', -6)\n            .attr('y', -margin.top)\n            .attr('text-anchor', 'end')\n            .attr('dy', '.9em')\n\n\n        g.select('.nv-hoverValue .nv-xValue')\n            .text(xTickFormat(sparkline.x()(data[index[0]], index[0])));\n\n        hoverEnter.append('text').attr('class', 'nv-yValue')\n            .attr('x', 6)\n            .attr('y', -margin.top)\n            .attr('text-anchor', 'start')\n            .attr('dy', '.9em')\n\n        g.select('.nv-hoverValue .nv-yValue')\n            .text(yTickFormat(sparkline.y()(data[index[0]], index[0])));\n\n      }\n\n\n      function sparklineHover() {\n        if (paused) return;\n\n        var pos = d3.mouse(this)[0] - margin.left;\n\n        function getClosestIndex(data, x) {\n          var distance = Math.abs(sparkline.x()(data[0], 0) - x);\n          var closestIndex = 0;\n          for (var i = 0; i < data.length; i++){\n            if (Math.abs(sparkline.x()(data[i], i) - x) < distance) {\n              distance = Math.abs(sparkline.x()(data[i], i) - x);\n              closestIndex = i;\n            }\n          }\n          return closestIndex;\n        }\n\n        index = [getClosestIndex(data, Math.round(x.invert(pos)))];\n\n        updateValueLine();\n      }\n\n    });\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.sparkline = sparkline;\n\n  d3.rebind(chart, sparkline, 'x', 'y', 'xScale', 'yScale', 'color');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  \n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.xTickFormat = function(_) {\n    if (!arguments.length) return xTickFormat;\n    xTickFormat = _;\n    return chart;\n  };\n\n  chart.yTickFormat = function(_) {\n    if (!arguments.length) return yTickFormat;\n    yTickFormat = _;\n    return chart;\n  };\n\n  chart.showValue = function(_) {\n    if (!arguments.length) return showValue;\n    showValue = _;\n    return chart;\n  };\n\n  chart.alignValue = function(_) {\n    if (!arguments.length) return alignValue;\n    alignValue = _;\n    return chart;\n  };\n\n  chart.rightAlignValue = function(_) {\n    if (!arguments.length) return rightAlignValue;\n    rightAlignValue = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.stackedArea = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\n    , width = 960\n    , height = 500\n    , color = nv.utils.defaultColor() // a function that computes the color\n    , id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't selet one\n    , getX = function(d) { return d.x } // accessor to get the x value from a data point\n    , getY = function(d) { return d.y } // accessor to get the y value from a data point\n    , style = 'stack'\n    , offset = 'zero'\n    , order = 'default'\n    , interpolate = 'linear'  // controls the line interpolation\n    , clipEdge = false // if true, masks lines within x and y scale\n    , x //can be accessed via chart.xScale()\n    , y //can be accessed via chart.yScale()\n    , scatter = nv.models.scatter()\n    , dispatch =  d3.dispatch('tooltipShow', 'tooltipHide', 'areaClick', 'areaMouseover', 'areaMouseout')\n    ;\n\n  scatter\n    .size(2.2) // default size\n    .sizeDomain([2.2,2.2]) // all the same size by default\n    ;\n\n  /************************************\n   * offset:\n   *   'wiggle' (stream)\n   *   'zero' (stacked)\n   *   'expand' (normalize to 100%)\n   *   'silhouette' (simple centered)\n   *\n   * order:\n   *   'inside-out' (stream)\n   *   'default' (input order)\n   ************************************/\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var availableWidth = width - margin.left - margin.right,\n          availableHeight = height - margin.top - margin.bottom,\n          container = d3.select(this);\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = scatter.xScale();\n      y = scatter.yScale();\n\n      //------------------------------------------------------------\n\n      var dataRaw = data;\n      // Injecting point index into each point because d3.layout.stack().out does not give index\n      data.forEach(function(aseries, i) {\n        aseries.seriesIndex = i;\n        aseries.values = aseries.values.map(function(d, j) {\n          d.index = j;\n          d.seriesIndex = i;\n          return d;\n        });\n      });\n\n      var dataFiltered = data.filter(function(series) {\n            return !series.disabled;\n      });\n\n      data = d3.layout.stack()\n               .order(order)\n               .offset(offset)\n               .values(function(d) { return d.values })  //TODO: make values customizeable in EVERY model in this fashion\n               .x(getX)\n               .y(getY)\n               .out(function(d, y0, y) {\n                    var yHeight = (getY(d) === 0) ? 0 : y;\n                    d.display = {\n                      y: yHeight,\n                     y0: y0\n                    };\n                })\n              (dataFiltered);\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-stackedarea').data([data]);\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedarea');\n      var defsEnter = wrapEnter.append('defs');\n      var gEnter = wrapEnter.append('g');\n      var g = wrap.select('g');\n\n      gEnter.append('g').attr('class', 'nv-areaWrap');\n      gEnter.append('g').attr('class', 'nv-scatterWrap');\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      //------------------------------------------------------------\n\n\n      scatter\n        .width(availableWidth)\n        .height(availableHeight)\n        .x(getX)\n        .y(function(d) { return d.display.y + d.display.y0 })\n        .forceY([0])\n        .color(data.map(function(d,i) {\n          return d.color || color(d, d.seriesIndex);\n        }));\n\n\n      var scatterWrap = g.select('.nv-scatterWrap')\n          .datum(data);\n\n      scatterWrap.call(scatter);\n\n      defsEnter.append('clipPath')\n          .attr('id', 'nv-edge-clip-' + id)\n        .append('rect');\n\n      wrap.select('#nv-edge-clip-' + id + ' rect')\n          .attr('width', availableWidth)\n          .attr('height', availableHeight);\n\n      g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n      var area = d3.svg.area()\n          .x(function(d,i)  { return x(getX(d,i)) })\n          .y0(function(d) {\n              return y(d.display.y0)\n          })\n          .y1(function(d) {\n              return y(d.display.y + d.display.y0)\n          })\n          .interpolate(interpolate);\n\n      var zeroArea = d3.svg.area()\n          .x(function(d,i)  { return x(getX(d,i)) })\n          .y0(function(d) { return y(d.display.y0) })\n          .y1(function(d) { return y(d.display.y0) });\n\n\n      var path = g.select('.nv-areaWrap').selectAll('path.nv-area')\n          .data(function(d) { return d });\n\n      path.enter().append('path').attr('class', function(d,i) { return 'nv-area nv-area-' + i })\n          .attr('d', function(d,i){\n            return zeroArea(d.values, d.seriesIndex);\n          })\n          .on('mouseover', function(d,i) {\n            d3.select(this).classed('hover', true);\n            dispatch.areaMouseover({\n              point: d,\n              series: d.key,\n              pos: [d3.event.pageX, d3.event.pageY],\n              seriesIndex: d.seriesIndex\n            });\n          })\n          .on('mouseout', function(d,i) {\n            d3.select(this).classed('hover', false);\n            dispatch.areaMouseout({\n              point: d,\n              series: d.key,\n              pos: [d3.event.pageX, d3.event.pageY],\n              seriesIndex: d.seriesIndex\n            });\n          })\n          .on('click', function(d,i) {\n            d3.select(this).classed('hover', false);\n            dispatch.areaClick({\n              point: d,\n              series: d.key,\n              pos: [d3.event.pageX, d3.event.pageY],\n              seriesIndex: d.seriesIndex\n            });\n          })\n\n      path.exit().remove();\n\n      path\n          .style('fill', function(d,i){\n            return d.color || color(d, d.seriesIndex)\n          })\n          .style('stroke', function(d,i){ return d.color || color(d, d.seriesIndex) });\n      path\n          .attr('d', function(d,i) {\n            return area(d.values,i)\n          });\n\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      scatter.dispatch.on('elementMouseover.area', function(e) {\n        g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', true);\n      });\n      scatter.dispatch.on('elementMouseout.area', function(e) {\n        g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', false);\n      });\n\n      //============================================================\n      //Special offset functions\n      chart.d3_stackedOffset_stackPercent = function(stackData) {\n          var n = stackData.length,    //How many series\n          m = stackData[0].length,     //how many points per series\n          k = 1 / n,\n           i,\n           j,\n           o,\n           y0 = [];\n\n          for (j = 0; j < m; ++j) { //Looping through all points\n            for (i = 0, o = 0; i < dataRaw.length; i++)  //looping through series'\n                o += getY(dataRaw[i].values[j])   //total value of all points at a certian point in time.\n\n            if (o) for (i = 0; i < n; i++)\n               stackData[i][j][1] /= o;\n            else\n              for (i = 0; i < n; i++)\n               stackData[i][j][1] = k;\n          }\n          for (j = 0; j < m; ++j) y0[j] = 0;\n          return y0;\n      };\n\n    });\n\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  scatter.dispatch.on('elementClick.area', function(e) {\n    dispatch.areaClick(e);\n  })\n  scatter.dispatch.on('elementMouseover.tooltip', function(e) {\n        e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n        dispatch.tooltipShow(e);\n  });\n  scatter.dispatch.on('elementMouseout.tooltip', function(e) {\n        dispatch.tooltipHide(e);\n  });\n\n  //============================================================\n\n  //============================================================\n  // Global getters and setters\n  //------------------------------------------------------------\n\n  chart.dispatch = dispatch;\n  chart.scatter = scatter;\n\n  d3.rebind(chart, scatter, 'interactive', 'size', 'xScale', 'yScale', 'zScale', 'xDomain', 'yDomain', 'xRange', 'yRange',\n    'sizeDomain', 'forceX', 'forceY', 'forceSize', 'clipVoronoi', 'useVoronoi','clipRadius','highlightPoint','clearHighlights');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.x = function(_) {\n    if (!arguments.length) return getX;\n    getX = d3.functor(_);\n    return chart;\n  };\n\n  chart.y = function(_) {\n    if (!arguments.length) return getY;\n    getY = d3.functor(_);\n    return chart;\n  }\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.clipEdge = function(_) {\n    if (!arguments.length) return clipEdge;\n    clipEdge = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    return chart;\n  };\n\n  chart.offset = function(_) {\n    if (!arguments.length) return offset;\n    offset = _;\n    return chart;\n  };\n\n  chart.order = function(_) {\n    if (!arguments.length) return order;\n    order = _;\n    return chart;\n  };\n\n  //shortcut for offset + order\n  chart.style = function(_) {\n    if (!arguments.length) return style;\n    style = _;\n\n    switch (style) {\n      case 'stack':\n        chart.offset('zero');\n        chart.order('default');\n        break;\n      case 'stream':\n        chart.offset('wiggle');\n        chart.order('inside-out');\n        break;\n      case 'stream-center':\n          chart.offset('silhouette');\n          chart.order('inside-out');\n          break;\n      case 'expand':\n        chart.offset('expand');\n        chart.order('default');\n        break;\n      case 'stack_percent':\n        chart.offset(chart.d3_stackedOffset_stackPercent);\n        chart.order('default');\n        break;\n    }\n\n    return chart;\n  };\n\n  chart.interpolate = function(_) {\n\t    if (!arguments.length) return interpolate;\n\t    interpolate = _;\n\t    return chart;\n  };\n  //============================================================\n\n\n  return chart;\n}\n\nnv.models.stackedAreaChart = function() {\n  \"use strict\";\n  //============================================================\n  // Public Variables with Default Settings\n  //------------------------------------------------------------\n\n  var stacked = nv.models.stackedArea()\n    , xAxis = nv.models.axis()\n    , yAxis = nv.models.axis()\n    , legend = nv.models.legend()\n    , controls = nv.models.legend()\n    , interactiveLayer = nv.interactiveGuideline()\n    ;\n\n  var margin = {top: 30, right: 25, bottom: 50, left: 60}\n    , width = null\n    , height = null\n    , color = nv.utils.defaultColor() // a function that takes in d, i and returns color\n    , showControls = true\n    , showLegend = true\n    , showXAxis = true\n    , showYAxis = true\n    , rightAlignYAxis = false\n    , useInteractiveGuideline = false\n    , tooltips = true\n    , tooltip = function(key, x, y, e, graph) {\n        return '<h3>' + key + '</h3>' +\n               '<p>' +  y + ' on ' + x + '</p>'\n      }\n    , x //can be accessed via chart.xScale()\n    , y //can be accessed via chart.yScale()\n    , yAxisTickFormat = d3.format(',.2f')\n    , state = { style: stacked.style() }\n    , defaultState = null\n    , noData = 'No Data Available.'\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\n    , controlWidth = 250\n    , cData = ['Stacked','Stream','Expanded']\n    , controlLabels = {}\n    , transitionDuration = 0\n    ;\n\n  xAxis\n    .orient('bottom')\n    .tickPadding(7)\n    ;\n  yAxis\n    .orient((rightAlignYAxis) ? 'right' : 'left')\n    ;\n\n  controls.updateState(false);\n  //============================================================\n\n\n  //============================================================\n  // Private Variables\n  //------------------------------------------------------------\n\n  var showTooltip = function(e, offsetElement) {\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\n        x = xAxis.tickFormat()(stacked.x()(e.point, e.pointIndex)),\n        y = yAxis.tickFormat()(stacked.y()(e.point, e.pointIndex)),\n        content = tooltip(e.series.key, x, y, e, chart);\n\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\n  };\n\n  //============================================================\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var container = d3.select(this),\n          that = this;\n\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\n                             - margin.left - margin.right,\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n\n      chart.update = function() { container.call(chart); };\n      chart.container = this;\n\n      //set state.disabled\n      state.disabled = data.map(function(d) { return !!d.disabled });\n\n      if (!defaultState) {\n        var key;\n        defaultState = {};\n        for (key in state) {\n          if (state[key] instanceof Array)\n            defaultState[key] = state[key].slice(0);\n          else\n            defaultState[key] = state[key];\n        }\n      }\n\n      //------------------------------------------------------------\n      // Display No Data message if there's nothing to show.\n\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n        noDataText.enter().append('text')\n          .attr('class', 'nvd3 nv-noData')\n          .attr('dy', '-.7em')\n          .style('text-anchor', 'middle');\n\n        noDataText\n          .attr('x', margin.left + availableWidth / 2)\n          .attr('y', margin.top + availableHeight / 2)\n          .text(function(d) { return d });\n\n        return chart;\n      } else {\n        container.selectAll('.nv-noData').remove();\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Scales\n\n      x = stacked.xScale();\n      y = stacked.yScale();\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup containers and skeleton of chart\n\n      var wrap = container.selectAll('g.nv-wrap.nv-stackedAreaChart').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedAreaChart').append('g');\n      var g = wrap.select('g');\n\n      gEnter.append(\"rect\").style(\"opacity\",0);\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\n      gEnter.append('g').attr('class', 'nv-stackedWrap');\n      gEnter.append('g').attr('class', 'nv-legendWrap');\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\n      gEnter.append('g').attr('class', 'nv-interactive');\n\n      g.select(\"rect\").attr(\"width\",availableWidth).attr(\"height\",availableHeight);\n      //------------------------------------------------------------\n      // Legend\n\n      if (showLegend) {\n        var legendWidth = (showControls) ? availableWidth - controlWidth : availableWidth;\n        legend\n          .width(legendWidth);\n\n        g.select('.nv-legendWrap')\n            .datum(data)\n            .call(legend);\n\n        if ( margin.top != legend.height()) {\n          margin.top = legend.height();\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n        g.select('.nv-legendWrap')\n            .attr('transform', 'translate(' + (availableWidth-legendWidth) + ',' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Controls\n\n      if (showControls) {\n        var controlsData = [\n          {\n            key: controlLabels.stacked || 'Stacked',\n            metaKey: 'Stacked',\n            disabled: stacked.style() != 'stack',\n            style: 'stack'\n          },\n          {\n            key: controlLabels.stream || 'Stream',\n            metaKey: 'Stream',\n            disabled: stacked.style() != 'stream',\n            style: 'stream'\n          },\n          {\n            key: controlLabels.expanded || 'Expanded',\n            metaKey: 'Expanded',\n            disabled: stacked.style() != 'expand',\n            style: 'expand'\n          },\n          {\n            key: controlLabels.stack_percent || 'Stack %',\n            metaKey: 'Stack_Percent',\n            disabled: stacked.style() != 'stack_percent',\n            style: 'stack_percent'\n          }\n        ];\n\n        controlWidth = (cData.length/3) * 260;\n\n        controlsData = controlsData.filter(function(d) {\n          return cData.indexOf(d.metaKey) !== -1;\n        })\n\n        controls\n          .width( controlWidth )\n          .color(['#444', '#444', '#444']);\n\n        g.select('.nv-controlsWrap')\n            .datum(controlsData)\n            .call(controls);\n\n\n        if ( margin.top != Math.max(controls.height(), legend.height()) ) {\n          margin.top = Math.max(controls.height(), legend.height());\n          availableHeight = (height || parseInt(container.style('height')) || 400)\n                             - margin.top - margin.bottom;\n        }\n\n\n        g.select('.nv-controlsWrap')\n            .attr('transform', 'translate(0,' + (-margin.top) +')');\n      }\n\n      //------------------------------------------------------------\n\n\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\")\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n      }\n\n      //------------------------------------------------------------\n      // Main Chart Component(s)\n\n      //------------------------------------------------------------\n      //Set up interactive layer\n      if (useInteractiveGuideline) {\n        interactiveLayer\n           .width(availableWidth)\n           .height(availableHeight)\n           .margin({left: margin.left, top: margin.top})\n           .svgContainer(container)\n           .xScale(x);\n        wrap.select(\".nv-interactive\").call(interactiveLayer);\n      }\n\n      stacked\n        .width(availableWidth)\n        .height(availableHeight)\n\n      var stackedWrap = g.select('.nv-stackedWrap')\n          .datum(data);\n\n      stackedWrap.call(stacked);\n\n      //------------------------------------------------------------\n\n\n      //------------------------------------------------------------\n      // Setup Axes\n\n      if (showXAxis) {\n        xAxis\n          .scale(x)\n          .ticks( availableWidth / 100 )\n          .tickSize( -availableHeight, 0);\n\n        g.select('.nv-x.nv-axis')\n            .attr('transform', 'translate(0,' + availableHeight + ')');\n\n        g.select('.nv-x.nv-axis')\n          \n            .call(xAxis);\n      }\n\n      if (showYAxis) {\n        yAxis\n          .scale(y)\n          .ticks(stacked.offset() == 'wiggle' ? 0 : availableHeight / 36)\n          .tickSize(-availableWidth, 0)\n          .setTickFormat( (stacked.style() == 'expand' || stacked.style() == 'stack_percent')\n                ? d3.format('%') : yAxisTickFormat);\n\n        g.select('.nv-y.nv-axis')\n          \n            .call(yAxis);\n      }\n\n      //------------------------------------------------------------\n\n\n      //============================================================\n      // Event Handling/Dispatching (in chart's scope)\n      //------------------------------------------------------------\n\n      stacked.dispatch.on('areaClick.toggle', function(e) {\n        if (data.filter(function(d) { return !d.disabled }).length === 1)\n          data.forEach(function(d) {\n            d.disabled = false;\n          });\n        else\n          data.forEach(function(d,i) {\n            d.disabled = (i != e.seriesIndex);\n          });\n\n        state.disabled = data.map(function(d) { return !!d.disabled });\n        dispatch.stateChange(state);\n\n        chart.update();\n      });\n\n      legend.dispatch.on('stateChange', function(newState) {\n        state.disabled = newState.disabled;\n        dispatch.stateChange(state);\n        chart.update();\n      });\n\n      controls.dispatch.on('legendClick', function(d,i) {\n        if (!d.disabled) return;\n\n        controlsData = controlsData.map(function(s) {\n          s.disabled = true;\n          return s;\n        });\n        d.disabled = false;\n\n        stacked.style(d.style);\n\n\n        state.style = stacked.style();\n        dispatch.stateChange(state);\n\n        chart.update();\n      });\n\n\n      interactiveLayer.dispatch.on('elementMousemove', function(e) {\n          stacked.clearHighlights();\n          var singlePoint, pointIndex, pointXLocation, allData = [];\n          data\n          .filter(function(series, i) {\n            series.seriesIndex = i;\n            return !series.disabled;\n          })\n          .forEach(function(series,i) {\n              pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n              stacked.highlightPoint(i, pointIndex, true);\n              var point = series.values[pointIndex];\n              if (typeof point === 'undefined') return;\n              if (typeof singlePoint === 'undefined') singlePoint = point;\n              if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n\n              //If we are in 'expand' mode, use the stacked percent value instead of raw value.\n              var tooltipValue = (stacked.style() == 'expand') ? point.display.y : chart.y()(point,pointIndex);\n              allData.push({\n                  key: series.key,\n                  value: tooltipValue,\n                  color: color(series,series.seriesIndex),\n                  stackedValue: point.display\n              });\n          });\n\n          allData.reverse();\n\n          //Highlight the tooltip entry based on which stack the mouse is closest to.\n          if (allData.length > 2) {\n            var yValue = chart.yScale().invert(e.mouseY);\n            var yDistMax = Infinity, indexToHighlight = null;\n            allData.forEach(function(series,i) {\n\n               //To handle situation where the stacked area chart is negative, we need to use absolute values\n               //when checking if the mouse Y value is within the stack area.\n               yValue = Math.abs(yValue);\n               var stackedY0 = Math.abs(series.stackedValue.y0);\n               var stackedY = Math.abs(series.stackedValue.y);\n               if ( yValue >= stackedY0 && yValue <= (stackedY + stackedY0))\n               {\n                  indexToHighlight = i;\n                  return;\n               }\n            });\n            if (indexToHighlight != null)\n               allData[indexToHighlight].highlight = true;\n          }\n\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex));\n\n          //If we are in 'expand' mode, force the format to be a percentage.\n          var valueFormatter = (stacked.style() == 'expand') ?\n               function(d,i) {return d3.format(\".1%\")(d);} :\n               function(d,i) {return yAxis.tickFormat()(d); };\n          interactiveLayer.tooltip\n                  .position({left: pointXLocation + margin.left, top: e.mouseY + margin.top})\n                  .chartContainer(that.parentNode)\n                  .enabled(tooltips)\n                  .valueFormatter(valueFormatter)\n                  .data(\n                      {\n                        value: xValue,\n                        series: allData\n                      }\n                  )();\n\n          interactiveLayer.renderGuideLine(pointXLocation);\n\n      });\n\n      interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n          dispatch.tooltipHide();\n          stacked.clearHighlights();\n      });\n\n\n      dispatch.on('tooltipShow', function(e) {\n        if (tooltips) showTooltip(e, that.parentNode);\n      });\n\n      // Update chart from a state object passed to event handler\n      dispatch.on('changeState', function(e) {\n\n        if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n          data.forEach(function(series,i) {\n            series.disabled = e.disabled[i];\n          });\n\n          state.disabled = e.disabled;\n        }\n\n        if (typeof e.style !== 'undefined') {\n          stacked.style(e.style);\n        }\n\n        chart.update();\n      });\n\n    });\n\n\n    return chart;\n  }\n\n\n  //============================================================\n  // Event Handling/Dispatching (out of chart's scope)\n  //------------------------------------------------------------\n\n  stacked.dispatch.on('tooltipShow', function(e) {\n    //disable tooltips when value ~= 0\n    //// TODO: consider removing points from voronoi that have 0 value instead of this hack\n    /*\n    if (!Math.round(stacked.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\n      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\n      return false;\n    }\n   */\n\n    e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top],\n    dispatch.tooltipShow(e);\n  });\n\n  stacked.dispatch.on('tooltipHide', function(e) {\n    dispatch.tooltipHide(e);\n  });\n\n  dispatch.on('tooltipHide', function() {\n    if (tooltips) nv.tooltip.cleanup();\n  });\n\n  //============================================================\n\n\n  //============================================================\n  // Expose Public Variables\n  //------------------------------------------------------------\n\n  // expose chart's sub-components\n  chart.dispatch = dispatch;\n  chart.stacked = stacked;\n  chart.legend = legend;\n  chart.controls = controls;\n  chart.xAxis = xAxis;\n  chart.yAxis = yAxis;\n  chart.interactiveLayer = interactiveLayer;\n\n  d3.rebind(chart, stacked, 'x', 'y', 'size', 'xScale', 'yScale', 'xDomain', 'yDomain', 'xRange', 'yRange', 'sizeDomain', 'interactive', 'useVoronoi', 'offset', 'order', 'style', 'clipEdge', 'forceX', 'forceY', 'forceSize', 'interpolate');\n\n  chart.options = nv.utils.optionsFunc.bind(chart);\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = nv.utils.getColor(_);\n    legend.color(color);\n    stacked.color(color);\n    return chart;\n  };\n\n  chart.showControls = function(_) {\n    if (!arguments.length) return showControls;\n    showControls = _;\n    return chart;\n  };\n\n  chart.showLegend = function(_) {\n    if (!arguments.length) return showLegend;\n    showLegend = _;\n    return chart;\n  };\n\n  chart.showXAxis = function(_) {\n    if (!arguments.length) return showXAxis;\n    showXAxis = _;\n    return chart;\n  };\n\n  chart.showYAxis = function(_) {\n    if (!arguments.length) return showYAxis;\n    showYAxis = _;\n    return chart;\n  };\n\n  chart.rightAlignYAxis = function(_) {\n    if(!arguments.length) return rightAlignYAxis;\n    rightAlignYAxis = _;\n    yAxis.orient( (_) ? 'right' : 'left');\n    return chart;\n  };\n\n  chart.useInteractiveGuideline = function(_) {\n    if(!arguments.length) return useInteractiveGuideline;\n    useInteractiveGuideline = _;\n    if (_ === true) {\n       chart.interactive(false);\n       chart.useVoronoi(false);\n    }\n    return chart;\n  };\n\n  chart.tooltip = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.tooltips = function(_) {\n    if (!arguments.length) return tooltips;\n    tooltips = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function(_) {\n    if (!arguments.length) return tooltip;\n    tooltip = _;\n    return chart;\n  };\n\n  chart.state = function(_) {\n    if (!arguments.length) return state;\n    state = _;\n    return chart;\n  };\n\n  chart.defaultState = function(_) {\n    if (!arguments.length) return defaultState;\n    defaultState = _;\n    return chart;\n  };\n\n  chart.noData = function(_) {\n    if (!arguments.length) return noData;\n    noData = _;\n    return chart;\n  };\n\n  chart.transitionDuration = function(_) {\n    if (!arguments.length) return transitionDuration;\n    transitionDuration = _;\n    return chart;\n  };\n\n  chart.controlsData = function(_) {\n    if (!arguments.length) return cData;\n    cData = _;\n    return chart;\n  };\n\n  chart.controlLabels = function(_) {\n    if (!arguments.length) return controlLabels;\n    if (typeof _ !== 'object') return controlLabels;\n    controlLabels = _;\n    return chart;\n  };\n\n  yAxis.setTickFormat = yAxis.tickFormat;\n\n  yAxis.tickFormat = function(_) {\n    if (!arguments.length) return yAxisTickFormat;\n    yAxisTickFormat = _;\n    return yAxis;\n  };\n\n\n  //============================================================\n\n  return chart;\n}\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/plugins/nvd3/nv.d3.js\n ** module id = 10\n ** module chunks = 7 8 9 10 11 12 13 14 15 16 17 18 19\n **/","/** This is the common wrapper for nvd3 based visualizations. */\ndefine( [ 'visualizations/utilities/tabular-utilities', 'plugins/nvd3/nv.d3', 'style!css!plugins/nvd3/nv.d3.css' ], function( Utilities ) {\n    return Backbone.View.extend({\n        initialize: function( options ) {\n            var self = this;\n            this.options = options;\n            options.render = function( canvas_id, groups ) {\n                return self.render( canvas_id, groups )\n            };\n            Utilities.panelHelper( options );\n        },\n\n        render: function( canvas_id, groups ) {\n            var self = this;\n            var chart       = this.options.chart;\n            var type        = this.options.type;\n            var makeConfig  = this.options.makeConfig;\n            var d3chart = nv.models[ type ]();\n            nv.addGraph( function() {\n                try {\n                    d3chart.xAxis.axisLabel( chart.settings.get( 'x_axis_label' ) );\n                    d3chart.yAxis.axisLabel( chart.settings.get( 'y_axis_label' ) ).axisLabelDistance( 30 );\n                    d3chart.options( { showControls: false } );\n                    d3chart.showLegend && d3chart.showLegend(chart.settings.get('show_legend') == 'true');\n                    self._makeAxes( d3chart, groups, chart.settings );\n                    makeConfig && makeConfig( d3chart );\n                    chart.settings.get( '__use_panels' ) === 'true' && d3chart.options( { showControls: false } );\n                    d3chart.xAxis.showMaxMin( false );\n                    d3chart.yAxis.showMaxMin( chart.definition.showmaxmin );\n                    d3chart.tooltipContent( function( key, x, y, graph ) {\n                        return '<h3>' + ( graph.point.tooltip || key ) + '</h3>';\n                    });\n                    if ( $( '#' + canvas_id ).length > 0 ) {\n                        var canvas = d3.select( '#' + canvas_id );\n                        canvas.datum( groups ).call( d3chart );\n                        if ( chart.definition.zoomable && chart.definition.zoomable != 'native' ) {\n                            d3chart.clipEdge && d3chart.clipEdge( true );\n                            Utilities.addZoom({\n                                xAxis  : d3chart.xAxis,\n                                yAxis  : d3chart.yAxis,\n                                yDomain: d3chart.yDomain,\n                                xDomain: d3chart.xDomain,\n                                redraw : function() { d3chart.update() },\n                                svg    : canvas\n                            });\n                        }\n                        nv.utils.windowResize( d3chart.update );\n                    }\n                } catch ( err ) {\n                    chart.state( 'failed', err );\n                }\n            });\n            return true;\n        },\n\n        /** Format axes ticks */\n        _makeAxes: function( d3chart, groups, settings ) {\n            var categories = Utilities.makeCategories( groups, [ 'x', 'y' ] );\n            function makeTickFormat( id ) {\n                Utilities.makeTickFormat({\n                    categories  : categories.array[ id ],\n                    type        : settings.get( id + '_axis_type|type' ),\n                    precision   : settings.get( id + '_axis_type|precision' ),\n                    formatter   : function( formatter ) {\n                        formatter && d3chart[ id + 'Axis' ].tickFormat( function( value ) {\n                            return formatter( value );\n                        });\n                    }\n                });\n            };\n            makeTickFormat( 'x' );\n            makeTickFormat( 'y' );\n        }\n    });\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/visualizations/nvd3/common/wrapper.js\n ** module id = 11\n ** module chunks = 7 8 9 10 11 12 13 14 15 16 17 18\n **/","/** This class handles job submissions to the Galaxy API. */\ndefine( [ 'utilities/utils' ], function( Utils ) {\n\n    /** Time to wait before refreshing to check if job has completed */\n    var WAITTIME = 1000;\n\n    /** Submit job request to charts tool */\n    var request = function( chart, parameters, success, error ) {\n        chart.state( 'wait', 'Requesting job results...' );\n         if ( chart.get( 'modified' ) ) {\n            cleanup( chart );\n            chart.set( 'modified', false );\n        }\n        var dataset_id_job = chart.get( 'dataset_id_job' );\n        if ( dataset_id_job != '' ) {\n            wait( chart, success, error );\n        } else {\n            var chart_id            = chart.id;\n            var chart_type          = chart.get( 'type' );\n            var chart_definition    = chart.definition;\n            chart.state( 'wait', 'Sending job request...' );\n            Utils.request({\n                type    : 'POST',\n                url     : Galaxy.root + 'api/tools',\n                data    : parameters,\n                success : function( response ) {\n                    if ( !response.outputs || response.outputs.length == 0 ) {\n                        chart.state( 'failed', 'Job submission failed. No response.' );\n                        error && error();\n                    } else {\n                        refreshHdas();\n                        var job = response.outputs[0];\n                        chart.state( 'wait', 'Your job has been queued. You may close the browser window. The job will run in the background.' );\n                        chart.set( 'dataset_id_job', job.id );\n                        chart.save();\n                        wait( chart, success, error );\n                    }\n                },\n                error   : function( response ) {\n                    var message = '';\n                    if ( response && response.message && response.message.data && response.message.data.input ) {\n                        message = response.message.data.input + '.';\n                    }\n                    chart.state( 'failed', 'This visualization requires the \\'' + parameters.tool_id + '\\' tool. Please make sure it is installed. ' + message );\n                    error && error();\n                          \n                }\n            });\n        }\n    };\n\n    /* Remove previous data when re-running jobs */\n    var cleanup = function( chart ) {\n        var self = this;\n        var previous =  chart.get( 'dataset_id_job' );\n        if (previous != '') {\n            Utils.request({\n                type    : 'PUT',\n                url     : Galaxy.root + 'api/histories/none/contents/' + previous,\n                data    : { deleted: true },\n                success : function() { refreshHdas() }\n            });\n            chart.set( 'dataset_id_job', '' );\n        }\n    };\n\n    /** Request job details */\n    var wait = function( chart, success, error ) {\n        var self = this;\n        Utils.request({\n            type    : 'GET',\n            url     : Galaxy.root + 'api/datasets/' + chart.get( 'dataset_id_job' ),\n            data    : {},\n            success : function( dataset ) {\n                var ready = false;\n                switch ( dataset.state ) {\n                    case 'ok':\n                        chart.state( 'wait', 'Job completed successfully...' );\n                        success && success( dataset );\n                        ready = true;\n                        break;\n                    case 'error':\n                        chart.state( 'failed', 'Job has failed. Please check the history for details.' );\n                        error && error( dataset );\n                        ready = true;\n                        break;\n                    case 'running':\n                        chart.state( 'wait', 'Your job is running. You may close the browser window. The job will continue in the background.' );\n                }\n                !ready && setTimeout( function() { wait( chart, success, error ) }, WAITTIME );\n            }\n        });\n    };\n\n    /** Refresh history panel */\n    var refreshHdas = function() {\n        Galaxy && Galaxy.currHistoryPanel && Galaxy.currHistoryPanel.refreshContents();\n    };\n\n    return { request: request }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/repository/utilities/jobs.js\n ** module id = 20\n ** module chunks = 2 3 7 8 21\n **/"],"sourceRoot":""}