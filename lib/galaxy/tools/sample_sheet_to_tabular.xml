<tool id="__SAMPLE_SHEET_TO_TABULAR__"
      name="Sample sheet to tabular"
      version="1.0.0">
  <description></description>
  <edam_operations>
    <edam_operation>operation_3359</edam_operation>
  </edam_operations>
  <configfiles>
    <configfile name="out_config">#for $key in $input.keys()#
#set $row = $input.sample_sheet_row($key)#
#set $row_as_string = '&#009;'.join(map(lambda x: str($none_replace) if x is None else (str($empty_replace) if x == "" else (str($bool_true_replace) if x is True else (str($bool_false_replace) if x is False else str(x)))), $row))#
$key&#009;$row_as_string
#end for#</configfile>
  </configfiles>
    <command><![CDATA[
cp '$out_config' '$output'
    ]]></command>

  <inputs>
    <param type="data_collection" collection_type="sample_sheet,sample_sheet:paired,sample_sheet:paired_or_unpaired,sample_sheet:record" name="input" label="Sample sheet to convert" />
    <param name="none_replace" label="Replace 'null' values with" type="text" value="" help="Default is just an empty string '', but in some cases '-' might read better.">
    </param>
    <param name="empty_replace" label="Replace empty string values with" type="text" value="" help="Default is just to keep the empty string '', but in some cases '-' might read better.">
    </param>
    <param name="bool_true_replace" label="Replace boolean 'true' values with" type="text" value="TRUE">
    </param>
    <param name="bool_false_replace" label="Replace boolean 'false' values with" type="text" value="FALSE">
    </param>
  </inputs>
  <outputs>
    <data name="output" label="${on_string} (as tabular)" format="tabular"/>
  </outputs>
  <help><![CDATA[

========
Synopsis
========

Takes a sample sheet dataset collection and converts the sample sheet metadata into a tabular dataset.

  ]]></help>
</tool>
