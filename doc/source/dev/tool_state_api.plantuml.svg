<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="618px" preserveAspectRatio="none" style="width:805px;height:618px;background:#FFFFFF;" version="1.1" viewBox="0 0 805 618" width="805px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="67.4883" y2="539.7676"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="196" x2="196" y1="67.4883" y2="539.7676"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="340.5" x2="340.5" y1="67.4883" y2="539.7676"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="656" x2="656" y1="67.4883" y2="539.7676"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="749" x2="749" y1="67.4883" y2="539.7676"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="12" y="56.5352">API Request</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="5" y="538.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="12" y="559.3027">API Request</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="166" y="64.5352">Jobs API</text><path d="M176,23 L176,47 M176,35 L193,35 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="205" cy="35" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="166" y="552.3027">Jobs API</text><path d="M176,559.2559 L176,583.2559 M176,571.2559 L193,571.2559 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="205" cy="571.2559" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="296.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="303.5" y="56.5352">Job Service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="296.5" y="538.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="303.5" y="559.3027">Job Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="622" y="64.5352">Database</text><path d="M638.5,15 C638.5,5 656.5,5 656.5,5 C656.5,5 674.5,5 674.5,15 L674.5,41 C674.5,51 656.5,51 656.5,51 C656.5,51 638.5,51 638.5,41 L638.5,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M638.5,15 C638.5,25 656.5,25 656.5,25 C656.5,25 674.5,25 674.5,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="622" y="552.3027">Database</text><path d="M638.5,565.2559 C638.5,555.2559 656.5,555.2559 656.5,555.2559 C656.5,555.2559 674.5,555.2559 674.5,565.2559 L674.5,591.2559 C674.5,601.2559 656.5,601.2559 656.5,601.2559 C656.5,601.2559 638.5,601.2559 638.5,591.2559 L638.5,565.2559 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M638.5,565.2559 C638.5,575.2559 656.5,575.2559 656.5,575.2559 C656.5,575.2559 674.5,575.2559 674.5,565.2559 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><path d="M706,41 L793,41 C798,41 798,54.2441 798,54.2441 C798,54.2441 798,67.4883 793,67.4883 L706,67.4883 C701,67.4883 701,54.2441 701,54.2441 C701,54.2441 701,41 706,41 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M793,41 C788,41 788,54.2441 788,54.2441 C788,67.4883 793,67.4883 793,67.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="706" y="59.5352">TaskQueue</text><path d="M706,538.7676 L793,538.7676 C798,538.7676 798,552.0117 798,552.0117 C798,552.0117 798,565.2559 793,565.2559 L706,565.2559 C701,565.2559 701,552.0117 701,552.0117 C701,552.0117 701,538.7676 706,538.7676 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M793,538.7676 C788,538.7676 788,552.0117 788,552.0117 C788,565.2559 793,565.2559 793,565.2559 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="706" y="557.3027">TaskQueue</text><polygon fill="#181818" points="184.5,94.7988,194.5,98.7988,184.5,102.7988,188.5,98.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="52.5" x2="190.5" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="59.5" y="94.0566">HTTP JSON</text><polygon fill="#181818" points="328.5,124.1094,338.5,128.1094,328.5,132.1094,332.5,128.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196.5" x2="334.5" y1="128.1094" y2="128.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="203.5" y="123.3672">create()</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="172.7305" y2="172.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="172.7305" y2="185.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="185.7305" y2="185.7305"/><polygon fill="#181818" points="351.5,181.7305,341.5,185.7305,351.5,189.7305,347.5,185.7305" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="347.5" y="152.6777">If not strict, build and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="347.5" y="167.9883">verify RelaxedRequestToolState</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="230.3516" y2="230.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="230.3516" y2="243.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="243.3516" y2="243.3516"/><polygon fill="#181818" points="351.5,239.3516,341.5,243.3516,351.5,247.3516,347.5,243.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="347.5" y="210.2988">If not strict, strictify() RelaxedRequestToolState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="347.5" y="225.6094">into RequestToolState</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="287.9727" y2="287.9727"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="287.9727" y2="300.9727"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="300.9727" y2="300.9727"/><polygon fill="#181818" points="351.5,296.9727,341.5,300.9727,351.5,304.9727,347.5,300.9727" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="347.5" y="267.9199">If strict, build and validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="347.5" y="283.2305">RequestToolState from request</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="345.5938" y2="345.5938"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="345.5938" y2="358.5938"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="358.5938" y2="358.5938"/><polygon fill="#181818" points="351.5,354.5938,341.5,358.5938,351.5,362.5938,347.5,358.5938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="347.5" y="325.541">decode() RequestToolState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="347.5" y="340.8516">into RequestInternalToolState</text><polygon fill="#181818" points="644.5,383.9043,654.5,387.9043,644.5,391.9043,648.5,387.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="650.5" y1="387.9043" y2="387.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="347.5" y="383.1621">Serialize RequestInternalToolState</text><polygon fill="#181818" points="737.5,428.5254,747.5,432.5254,737.5,436.5254,741.5,432.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="743.5" y1="432.5254" y2="432.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="347.5" y="412.4727">Queue QueueJobs with reference to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="347.5" y="427.7832">persisted RequestInternalToolState</text><polygon fill="#181818" points="207.5,473.1465,197.5,477.1465,207.5,481.1465,203.5,477.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201.5" x2="339.5" y1="477.1465" y2="477.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="213.5" y="457.0938">JobCreateResponse</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="217.5" y="472.4043">(pydantic model)</text><polygon fill="#181818" points="63.5,517.7676,53.5,521.7676,63.5,525.7676,59.5,521.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="195.5" y1="521.7676" y2="521.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="69.5" y="501.7148">JobCreateResponse</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="73.5" y="517.0254">(as json)</text><!--MD5=[ea94ec69193104993e434abdc01073ca]
@startuml

'!include plantuml_options.txt
participant "API Request" as apireq
boundary    "Jobs API"    as api
participant     "Job Service" as service
database    Database    as database
queue       TaskQueue   as queue
apireq -> api : HTTP JSON
api -> service : create()
service -> service : If not strict, build and \nverify RelaxedRequestToolState
service -> service : If not strict, strictify() RelaxedRequestToolState \ninto RequestToolState
service -> service : If strict, build and validate \nRequestToolState from request
service -> service : decode() RequestToolState \ninto RequestInternalToolState
service -> database : Serialize RequestInternalToolState
service -> queue : Queue QueueJobs with reference to\npersisted RequestInternalToolState
service -> api : JobCreateResponse\n (pydantic model)
api -> apireq : JobCreateResponse\n (as json)
@enduml

@startuml

participant "API Request" as apireq
boundary    "Jobs API"    as api
participant     "Job Service" as service
database    Database    as database
queue       TaskQueue   as queue
apireq -> api : HTTP JSON
api -> service : create()
service -> service : If not strict, build and \nverify RelaxedRequestToolState
service -> service : If not strict, strictify() RelaxedRequestToolState \ninto RequestToolState
service -> service : If strict, build and validate \nRequestToolState from request
service -> service : decode() RequestToolState \ninto RequestInternalToolState
service -> database : Serialize RequestInternalToolState
service -> queue : Queue QueueJobs with reference to\npersisted RequestInternalToolState
service -> api : JobCreateResponse\n (pydantic model)
api -> apireq : JobCreateResponse\n (as json)
@enduml

PlantUML version 1.2022.8(Sun Sep 25 05:00:33 EDT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>