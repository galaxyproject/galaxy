<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="530px" preserveAspectRatio="none" style="width:732px;height:530px;background:#FFFFFF;" version="1.1" viewBox="0 0 732 530" width="732px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="67.4883" y2="451.5254"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="196" x2="196" y1="67.4883" y2="451.5254"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="340.5" x2="340.5" y1="67.4883" y2="451.5254"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="583" x2="583" y1="67.4883" y2="451.5254"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="676" x2="676" y1="67.4883" y2="451.5254"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="12" y="56.5352">API Request</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="5" y="450.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="12" y="471.0605">API Request</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="166" y="64.5352">Jobs API</text><path d="M176,23 L176,47 M176,35 L193,35 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="205" cy="35" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="166" y="464.0605">Jobs API</text><path d="M176,471.0137 L176,495.0137 M176,483.0137 L193,483.0137 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="205" cy="483.0137" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="296.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="303.5" y="56.5352">Job Service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="296.5" y="450.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="303.5" y="471.0605">Job Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="549" y="64.5352">Database</text><path d="M565.5,15 C565.5,5 583.5,5 583.5,5 C583.5,5 601.5,5 601.5,15 L601.5,41 C601.5,51 583.5,51 583.5,51 C583.5,51 565.5,51 565.5,41 L565.5,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M565.5,15 C565.5,25 583.5,25 583.5,25 C583.5,25 601.5,25 601.5,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="549" y="464.0605">Database</text><path d="M565.5,477.0137 C565.5,467.0137 583.5,467.0137 583.5,467.0137 C583.5,467.0137 601.5,467.0137 601.5,477.0137 L601.5,503.0137 C601.5,513.0137 583.5,513.0137 583.5,513.0137 C583.5,513.0137 565.5,513.0137 565.5,503.0137 L565.5,477.0137 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M565.5,477.0137 C565.5,487.0137 583.5,487.0137 583.5,487.0137 C583.5,487.0137 601.5,487.0137 601.5,477.0137 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><path d="M633,41 L720,41 C725,41 725,54.2441 725,54.2441 C725,54.2441 725,67.4883 720,67.4883 L633,67.4883 C628,67.4883 628,54.2441 628,54.2441 C628,54.2441 628,41 633,41 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M720,41 C715,41 715,54.2441 715,54.2441 C715,67.4883 720,67.4883 720,67.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="633" y="59.5352">TaskQueue</text><path d="M633,450.5254 L720,450.5254 C725,450.5254 725,463.7695 725,463.7695 C725,463.7695 725,477.0137 720,477.0137 L633,477.0137 C628,477.0137 628,463.7695 628,463.7695 C628,463.7695 628,450.5254 633,450.5254 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M720,450.5254 C715,450.5254 715,463.7695 715,463.7695 C715,477.0137 720,477.0137 720,477.0137 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="633" y="469.0605">TaskQueue</text><polygon fill="#181818" points="184.5,94.7988,194.5,98.7988,184.5,102.7988,188.5,98.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="52.5" x2="190.5" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="59.5" y="94.0566">HTTP JSON</text><polygon fill="#181818" points="328.5,124.1094,338.5,128.1094,328.5,132.1094,332.5,128.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196.5" x2="334.5" y1="128.1094" y2="128.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="203.5" y="123.3672">To boundary</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="157.4199" y2="157.4199"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="157.4199" y2="170.4199"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="170.4199" y2="170.4199"/><polygon fill="#181818" points="351.5,166.4199,341.5,170.4199,351.5,174.4199,347.5,170.4199" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="347.5" y="152.6777">Build RequestToolState</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="199.7305" y2="199.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="199.7305" y2="212.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="212.7305" y2="212.7305"/><polygon fill="#181818" points="351.5,208.7305,341.5,212.7305,351.5,216.7305,347.5,212.7305" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="347.5" y="194.9883">Validate RequestToolState (pydantic)</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="257.3516" y2="257.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="257.3516" y2="270.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="270.3516" y2="270.3516"/><polygon fill="#181818" points="351.5,266.3516,341.5,270.3516,351.5,274.3516,347.5,270.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="347.5" y="237.2988">decode() RequestToolState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="347.5" y="252.6094">into RequestInternalToolState</text><polygon fill="#181818" points="571.5,295.6621,581.5,299.6621,571.5,303.6621,575.5,299.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="577.5" y1="299.6621" y2="299.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="347.5" y="294.9199">Serialize RequestInternalToolState</text><polygon fill="#181818" points="664.5,340.2832,674.5,344.2832,664.5,348.2832,668.5,344.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="670.5" y1="344.2832" y2="344.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="347.5" y="324.2305">Queue QueueJobs with reference to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="347.5" y="339.541">persisted RequestInternalToolState</text><polygon fill="#181818" points="207.5,384.9043,197.5,388.9043,207.5,392.9043,203.5,388.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201.5" x2="339.5" y1="388.9043" y2="388.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="213.5" y="368.8516">JobCreateResponse</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="217.5" y="384.1621">(pydantic model)</text><polygon fill="#181818" points="63.5,429.5254,53.5,433.5254,63.5,437.5254,59.5,433.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57.5" x2="195.5" y1="433.5254" y2="433.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="69.5" y="413.4727">JobCreateResponse</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="73.5" y="428.7832">(as json)</text><!--MD5=[d339d14969a14a06d7ae0fd7df2a6dba]
@startuml

'!include plantuml_options.txt
participant "API Request" as apireq
boundary    "Jobs API"    as api
participant     "Job Service" as service
database    Database    as database
queue       TaskQueue   as queue
apireq -> api : HTTP JSON
api -> service : To boundary
service -> service : Build RequestToolState
service -> service : Validate RequestToolState (pydantic)
service -> service : decode() RequestToolState \ninto RequestInternalToolState
service -> database : Serialize RequestInternalToolState
service -> queue : Queue QueueJobs with reference to\npersisted RequestInternalToolState
service -> api : JobCreateResponse\n (pydantic model)
api -> apireq : JobCreateResponse\n (as json)
@enduml

@startuml

participant "API Request" as apireq
boundary    "Jobs API"    as api
participant     "Job Service" as service
database    Database    as database
queue       TaskQueue   as queue
apireq -> api : HTTP JSON
api -> service : To boundary
service -> service : Build RequestToolState
service -> service : Validate RequestToolState (pydantic)
service -> service : decode() RequestToolState \ninto RequestInternalToolState
service -> database : Serialize RequestInternalToolState
service -> queue : Queue QueueJobs with reference to\npersisted RequestInternalToolState
service -> api : JobCreateResponse\n (pydantic model)
api -> apireq : JobCreateResponse\n (as json)
@enduml

PlantUML version 1.2022.8(Sun Sep 25 05:00:33 EDT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>