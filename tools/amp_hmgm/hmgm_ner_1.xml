<tool id="hmgm_ner" name="HMGM NER Correction" version="1.1.0">
  <description>Manual NER correction by a human</description>
  <requirements>
	<requirement type="package" version="3.8">python</requirement>
	<requirement type="package" version="2.0">jira</requirement>
  </requirements>
  <command detect_errors="exit_code">
	'$__tool_directory__/ner_to_iiif.py' '$__root_dir__' '$amp_entities_uncorrected' '$iiif_uncorrected' '$context_json';
	'$__tool_directory__/hmgm_main.py' 'NER' '$__root_dir__' '$iiif_uncorrected' '$iiif_corrected' '$task_info' '$context_json';
	'$__tool_directory__/iiif_to_ner_1.py' '$__root_dir__' '$iiif_corrected' '$amp_entities_uncorrected' '$amp_entities_corrected' '$amp_entities_csv'
  </command>
  <inputs>
    <param name="amp_entities_uncorrected" type="data" format="ner" label="AMP Named Entities Uncorrected" help="Original AMP NER file to be corrected" />
    <param name="context_json" type="text" label="HMGM Task Context" help="JSON string containing context information needed for creating Human MGM task" >
    	<sanitizer sanitize="false">
    	</sanitizer>
	</param>
  </inputs>
  <outputs>
    <data name="iiif_uncorrected" format="json" label="IIIF Uncorrected" help="IIIF file converted from the original AMP named entity file" />
    <data name="iiif_corrected" format="json" label="IIIF Corrected" help="IIIF file with corrected named entities" />
    <data name="amp_entities_corrected" format="ner" label="AMP Entities Corrected" help="AMP NER file converted from the corrected IIIF JSON file" />
    <data name="amp_entities_csv" format="csv" label="AMP Entities Extracted CSV"/>
    <data name="task_info" format="json" label="HMGM Task INFO" help="Information about the Human MMGM task created for NER Correction" />
  </outputs>
  <tests>
  </tests>
  <help>
.. class:: infomark

This is a human MGM that facilitates manual Named Entity Recognition correction by providing a human with the Timeliner editor.
Note that, if the tool is run by a job submitted from AMPPD, the context parameter will be automatically generated by AMPPD; any user defined value will be overwritten.

  </help>
</tool>
