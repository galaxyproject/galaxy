{"version":3,"file":"circster.js","sources":["../../src/viz/circster.js"],"names":["require","mod_utils","cssLoadFile","define","_","d3","visualization","config","mod_icon_btn","SVGUtils","Backbone","Model","extend","is_visible","svg_elt","eltBRect","getBoundingClientRect","svgBRect","$","right","left","bottom","top","UsesTicks","drawTicks","parent_elt","data","dataHandler","textTransform","horizontal","ticks","append","selectAll","enter","attr","d","angle","Math","PI","radius","tick_coords","text_coords","text_anchor","style","text","label","formatNum","num","sigDigits","undefined","rval","abs","toPrecision","roundedNum","round","toFixed","CircsterLabelTrack","CircsterView","View","className","initialize","options","this","genome","label_arc_height","scale","circular_views","chords_views","model","get","on","add_track","remove_track","vis_config","update_track_bounds","get_circular_tracks","filter","track","get_chord_tracks","get_tracks_bounds","circular_tracks","dataset_arc_height","get_value","track_gap","min_dimension","min","$el","width","height","radius_start","length","tracks_start_radii","range","map","render","self","chords_tracks","total_gap","tracks_bounds","svg","select","call","behavior","zoom","event","translate","zoom_drag_timeout","clearTimeout","setTimeout","index","view","CircsterBigWigTrackView","el","radius_bounds","CircsterChromInteractionsTrackView","outermost_radius","track_bounds","label_track_view","CircsterChromLabelTrackView","new_track","innermost_radius_bounds","new_view","push","new_track_bounds","each","track_view","i","update_radius_bounds","track_index","tracks","splice","remove","CircsterTrackView","tagName","bg_stroke","loading_bg_fill","bg_fill","chroms_layout","_chroms_layout","data_bounds","get_fill_color","color","track_parent_elt","genome_arcs","arc_gen","arc","innerRadius","outerRadius","chroms_elts","chroms_paths","chrom","data_manager","data_ready_deferred","data_is_ready","when","then","_render_data","render_labels","new_d","transition","duration","_transition_chrom_data","_transition_labels","update_scale","new_scale","old_scale","utils","data_deferred","path_elt","chrom_region","get_chrom_region","can_get_more_detailed_data","get_more_detailed_data","_update_data_bounds","chrom_arc","find","layout","_render_chrom_data","chrom_arcs","chrom_data_paths","num_paths","get_genome_wide_data","genome_wide_data","path_data","reject","chrom_data","path_fn","_get_path_function","p_data","path","new_bounds","get_data_bounds","rendered_deferred","Deferred","set_value","silent","layout_and_data","zip","chroms_data_layout","chrom_info","resolve","chroms_info","get_chroms_info","pie_layout","pie","value","len","sort","init_arcs","gap_per_chrom","new_endAngle","endAngle","startAngle","prototype","min_arc_len","chromArcTicks","k","v","visibleChroms","c","CircsterQuantitativeTrackView","track_config","_update_min_max","_quantile","numbers","quantile","ascending","parent","datum","linear","domain","clamp","line","radial","interpolate","area","_data_bounds_ticks_fn","classed","tick","click","ConfigSettingCollectionView","collection","render_in_modal","labeledChroms","new_data","flatten","values","p","parseInt","max","chord_data","cur_chrom","chrom_chord_data","source_angle","_get_region_angle","target_angle","source","target","concat","chord","position","chrom_angle_data","chrom_layout","Circster","Genome","galaxy_config","app","vis","GenomeVisualization","viz_config","add","key","type","hidden","viz_view","title","dbkey","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","Galaxy","root","add_tracks","modal","show","body","ajax","url","dataType","id","vis_json","JSON","stringify","success","vis_info","hide","set","vis_id","error","buttons","Cancel","window","location","tooltip_config","placement","tooltip","GalaxyApp"],"mappings":"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"}