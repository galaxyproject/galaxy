{"version":3,"file":"trackster.js","sources":["../../src/viz/trackster.js"],"names":["ui","view","browser_router","require","mod_utils","cssLoadFile","define","_","base","tracks","visualization","mod_icon_btn","query_string","TracksterUI","Base","extend","initialize","baseURL","this","save_viz","Galaxy","modal","show","title","body","bookmarks","$","each","push","position","children","text","annotation","overview_track_name","overview_drawable","config","get_value","viz_config","to_dict","viewport","chrom","start","low","end","high","overview","ajax","url","galaxy_config","root","type","dataType","data","id","vis_id","dbkey","vis_json","JSON","stringify","success","vis_info","hide","has_changes","window","history","pushState","location","hash","error","buttons","Cancel","createButtonMenu","self","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","f-dbkey","new_tracks","track","add_drawable","object_from_template","DrawableGroup","name","force_right_panel","css","handle_unsaved_changes","tooltip_config","placement","buttonMenu","add_bookmarks","alert","table_html","Insert","first","val","attr","hda_id","ldda_id","then","i","length","row","add_bookmark","editable","bookmarks_container","new_bookmark","addClass","appendTo","position_div","annotation_div","click","go_to","delete_icon_container","prependTo","slideUp","remove","make_text_editable","num_rows","use_textarea","help_text","create_visualization","view_config","viewport_config","drawables_config","bookmarks_config","TracksterView","header","editor","when","load_chroms_deferred","chrom_info","overview_drawable_name","undefined","change_chrom","drawables","set_overview","bookmark","set_up_router","options","TrackBrowserRouter","Backbone","init_keyboard_nav","document","keyup","e","srcElement","is","which","move_fraction","Math","round","viewport_container","height","scrollTop","Leave without Saving","off","Save","View","$el","append","resize_window","app","view_existing","get","choose_existing_or_new","view_new","listTracksParams","dataset_params","dataset_id","hda_ldda","param","view_in_saved","show_choice","Add to visualization","parent","find","View in saved visualization","View in new visualization","container","init_editor","response","template_view_new","Create","create_browser","dbkeys_in_genomes","map","r","default_dbkey","contains","focus","select2","html","trigger","gene_region","add_dataset","data_type","track_data","on","GalaxyApp"],"mappings":"AAKA,GAAIA,IAAkB,KAClBC,KAAkB,KAClBC,eAAkB,IAGtBC,UAGI,cACA,gCACA,iCACA,gCACA,wBACA,sBACA,kBACA,0BACA,6BACD,SAASC,GAGRA,EAAUC,YAAY,kCACtBD,EAAUC,YAAY,yCACtBD,EAAUC,YAAY,mDACtBD,EAAUC,YAAY,4BACtBD,EAAUC,YAAY,gCAI1BC,QAAS,kBAAmB,OAAQ,uBAAwB,oBAAqB,qBAAsB,8BAC/F,SAASC,EAAGC,EAAMC,EAAQC,EAAeC,EAAcC,GAI/D,GAAIC,GAAcL,EAAKM,KAAKC,QACxBC,WAAY,SAAUC,GAClBC,KAAKD,QAAUA,GAMnBE,SAAU,WAENC,OAAOC,MAAMC,MAAMC,MAAO,YAAaC,KAAM,YAG7C,IAAIC,KACJC,GAAE,aAAaC,KAAK,WAChBF,EAAUG,MACNC,SAAUH,EAAER,MAAMY,SAAS,aAAaC,OACxCC,WAAYN,EAAER,MAAMY,SAAS,eAAeC,UAKpD,IAAIE,GAAuBhC,KAAKiC,kBAAoBjC,KAAKiC,kBAAkBC,OAAOC,UAAU,QAAU,KAClGC,GACIpC,KAAQA,KAAKqC,UACbC,UAAcC,MAASvC,KAAKuC,MAAOC,MAASxC,KAAKyC,IAAMC,IAAO1C,KAAK2C,KAAMC,SAAYZ,GACrFR,UAAaA,EAIrB,OAAOC,GAAEoB,MACLC,IAAKC,cAAcC,KAAO,qBAC1BC,KAAM,OACNC,SAAU,OACVC,MACIC,GAAcpD,KAAKqD,OACnB/B,MAActB,KAAKkC,OAAOC,UAAU,QACpCmB,MAActD,KAAKsD,MACnBL,KAAc,YACdM,SAAcC,KAAKC,UAAUrB,MAElCsB,QAAQ,SAASC,GAChBxC,OAAOC,MAAMwC,OACb5D,KAAKqD,OAASM,EAASN,OACvBrD,KAAK6D,aAAc,EAGnBC,OAAOC,QAAQC,aAAc,GAAIL,EAASb,IAAMgB,OAAOG,SAASC,QACjEC,MAAM,WAELhD,OAAOC,MAAMC,MACTC,MAAU,iBACVC,KAAU,wDACV6C,SAAYC,OAAU,WAAalD,OAAOC,MAAMwC,cAQ5DU,iBAAkB,WACd,GAAIC,GAAOtD,KACPuD,EAAO9D,EAAa+D,2BAClBC,WAAY,cAAepD,MAAO,aAAcqD,SAAU,WACxDlE,EAAcmE,gBAAgB7B,cAAcC,KAAO,8CAA+CD,cAAcC,KAAO,gBAAkB6B,UAAW7E,KAAKsD,OACzJ,SAASwB,GACLxE,EAAEoB,KAAKoD,EAAY,SAASC,GACxB/E,KAAKgF,aAAcxE,EAAOyE,qBAAqBF,EAAO/E,KAAMA,cAItE0E,WAAY,cAAepD,MAAO,YAAaqD,SAAU,WACvD3E,KAAKgF,aAAc,GAAIxE,GAAO0E,cAAclF,KAAMA,MAAQmF,KAAM,kBAElET,WAAY,YAAapD,MAAO,YAAaqD,SAAU,WAErDS,kBAAkD,OAA/B3D,EAAE,aAAa4D,IAAI,SAAoB,OAAS,WAGnEX,WAAY,QACZpD,MAAO,WACPqD,SAAU,WACNb,OAAOG,SAAWM,EAAKvD,QAAU,6BAA+BhB,KAAKqD,UAG3EqB,WAAY,cAAepD,MAAO,OAAQqD,SAAU,WAClDJ,EAAKrD,cAGLwD,WAAY,eACZpD,MAAO,QACPqD,SAAU,WACNJ,EAAKe,uBAAuBtF,UAKpCuF,gBAAkBC,UAAW,WAGjC,OADAvE,MAAKwE,WAAajB,EACXA,GAMXkB,cAAe,WACX,CAAA,GAAInB,GAAOtD,IACGA,MAAKD,QAGnBG,OAAOC,MAAMC,MAAMC,MAAO,mCAAoCC,KAAM,aAEpEE,EAAEoB,MACEC,IAAK7B,KAAKD,QAAU,gCACpBmC,MAAQ0B,UAAW7E,KAAKsD,OACxBa,MAAO,WAAawB,MAAO,gBAC3BjC,QAAS,SAASkC,GAGdzE,OAAOC,MAAMC,MAETC,MAAU,mCACVC,KAAUqE,EACVxB,SAEIC,OAAU,WAENlD,OAAOC,MAAMwC,QAGjBiC,OAAU,WAGNpE,EAAE,uDAAuDqE,QAAQpE,KAAK,WAElE,GAAIyB,GAAMC,EAAK3B,EAAER,MAAM8E,KAEnB5C,GADyB,OAAzB1B,EAAER,MAAM+E,KAAK,SACJC,OAAQ7C,IAER8C,QAAS9C,GAEtB3B,EAAEoB,MACEC,IAAK7B,KAAKD,QAAU,wCACpBmC,KAAMA,EACND,SAAU,SACXiD,KAAM,SAAShD,GACd,IAAKiD,EAAI,EAAGA,EAAIjD,EAAKA,KAAKkD,OAAQD,IAAM,CACpC,GAAIE,GAAMnD,EAAKA,KAAKiD,EACpB7B,GAAKgC,aAAcD,EAAI,GAAIA,EAAI,SAI3CnF,OAAOC,MAAMwC,eAWrC2C,aAAc,SAAS3E,EAAUG,EAAYyE,GAEzC,GAAIC,GAAsBhF,EAAE,8BACxBiF,EAAejF,EAAE,UAAUkF,SAAS,YAAYC,SAASH,GAEzDI,EAAepF,EAAE,UAAUkF,SAAS,YAAYC,SAASF,GAKzDI,GAJgBrF,EAAE,gBAAgBK,KAAKF,GAAUgF,SAASC,GAAcE,MAAM,WAE1E,MADA/G,MAAKgH,MAAMpF,IACJ,IAEMH,EAAE,UAAUK,KAAKC,GAAY6E,SAASF,GAG3D,IAAIF,EAAU,CACV,CAAA,GAAIS,GAAwBxF,EAAE,UAAUkF,SAAS,yBAAyBO,UAAUR,GAAcK,MAAM,WAKhG,MAHAL,GAAaS,QAAQ,QACrBT,EAAaU,SACbpH,KAAK6D,aAAc,GACZ,GAEGpC,GAAE,gBAAgBkF,SAAS,sBAAsBC,SAASK,GAC5EH,EAAeO,oBACXC,SAAU,EACVC,cAAc,EACdC,UAAW,uBACZb,SAAS,cAIhB,MADA3G,MAAK6D,aAAc,EACZ6C,GAMXe,qBAAsB,SAASC,EAAaC,EAAiBC,EAAkBC,EAAkBrB,GAG7F,GAAIjC,GAAOtD,KACPjB,EAAO,GAAIQ,GAAOsH,cAAcxH,EAAEQ,OAAO4G,GAAcK,QAAQ,IA2DnE,OA1DA/H,GAAKgI,QAAS,EACdvG,EAAEwG,KAAMjI,EAAKkI,sBAAuB/B,KAAK,SAASgC,GAE9C,GAAIR,EAAiB,CACjB,GAAIpF,GAAQoF,EAAgBpF,MACxBC,EAAQmF,EAAgBnF,MACxBE,EAAMiF,EAAgBjF,IACtB0F,EAAyBT,EAAgB/E,QAEzCL,IAAoB8F,SAAV7F,GAAwBE,EAClC1C,EAAKsI,aAAa/F,EAAOC,EAAOE,GAIhC1C,EAAKsI,aAAaH,EAAW,GAAG5F,WAKpCvC,GAAKsI,aAAaH,EAAW,GAAG5F,MAIpC,IAAIqF,EAKA,IAAK,GAAIxB,GAAI,EAAGA,EAAIwB,EAAiBvB,OAAQD,IACzCpG,EAAKgF,aAAcxE,EAAOyE,qBAAsB2C,EAAiBxB,GAAIpG,EAAMA,GAMnF,KAAK,GAAIoG,GAAI,EAAGA,EAAIpG,EAAKuI,UAAUlC,OAAQD,IACvC,GAAIpG,EAAKuI,UAAUnC,GAAGlE,OAAOC,UAAU,UAAYiG,EAAwB,CACvEpI,EAAKwI,aAAaxI,EAAKuI,UAAUnC,GACjC,OAKR,GAAIyB,EAEA,IAAK,GADDY,GACKrC,EAAI,EAAGA,EAAIyB,EAAiBxB,OAAQD,IACzCqC,EAAWZ,EAAiBzB,GAC5B7B,EAAKgC,aAAakC,EAAmB,SAAGA,EAAqB,WAAGjC,EAKxExG,GAAK6D,aAAc,IAIvB5C,KAAKyH,eAAe1I,KAAMA,IAEnBA,GAMX0I,cAAgB,SAASC,GAErB,GAAIlI,GAAcmI,mBAAmBD,GACrCE,SAAS9E,QAAQvB,SAMrBsG,kBAAmB,SAAS9I,GAExByB,EAAEsH,UAAUC,MAAM,SAASC,GAEvB,IAAIxH,EAAEwH,EAAEC,YAAYC,GAAG,UAKvB,OAAOF,EAAEG,OACL,IAAK,IACDpJ,EAAKqJ,cAAc,IACnB,MACJ,KAAK,IACD,CAAaC,KAAKC,MAAMvJ,EAAKwJ,mBAAmBC,SAAS,IACzDzJ,EAAKwJ,mBAAmBE,UAAW1J,EAAKwJ,mBAAmBE,YAAc,GACzE,MACJ,KAAK,IACD1J,EAAKqJ,eAAe,IACpB,MACJ,KAAK,IACD,CAAaC,KAAKC,MAAMvJ,EAAKwJ,mBAAmBC,SAAS,IACzDzJ,EAAKwJ,mBAAmBE,UAAW1J,EAAKwJ,mBAAmBE,YAAc,QASzFpE,uBAAwB,SAAStF,GAC7B,GAAIA,EAAK6D,YAAa,CAClB,GAAIU,GAAOtD,IACXE,QAAOC,MAAMC,MACTC,MAAO,sBACPC,KAAM,8FACN6C,SACIC,OAAU,WAAalD,OAAOC,MAAMwC,QACpC+F,uBAAyB,WACrBlI,EAAEqC,QAAQ8F,IAAI,gBACd9F,OAAOG,SAAWlB,cAAcC,KAAO,iBAE3C6G,KAAS,WACLpI,EAAEwG,KAAK1D,EAAKrD,YAAYiF,KAAK,WACzBrC,OAAOG,SAAWlB,cAAcC,KAAO,0BAQvDc,QAAOG,SAAWlB,cAAcC,KAAO,mBAM/C8E,EAAgBe,SAASiB,KAAKhJ,QAG9BC,WAAa,WAGThB,GAAK,GAAIa,GAAYmC,cAAcC,MAGnCjD,GAAGuE,mBAGHvE,GAAG0F,WAAWsE,IAAI/D,KAAK,QAAS,gBAGhCvE,EAAE,uCAAuCuI,OAAOjK,GAAG0F,WAAWsE,KAG9DtI,EAAE,+BAA+BuI,OAAO,aACxCvI,EAAE,+BAA+BuI,OAAO,gIAGxCvI,EAAE,iBAAiBsF,MAAM,WAAa/G,KAAKiK,kBAG3C7E,kBAAkB,QAIdrC,cAAcmH,IAAI9G,GAClBnC,KAAKkJ,gBACExJ,EAAayJ,IAAK,cACzBnJ,KAAKoJ,yBAELpJ,KAAKqJ,YAIbD,uBAAyB,WACrB,GAAI9F,GAAOtD,KACPqC,EAAQ3C,EAAayJ,IAAK,SAC1BG,KACAC,GACIlH,MAAcA,EACdmH,WAAc9J,EAAayJ,IAAK,cAChCM,SAAc/J,EAAayJ,IAAK,YAEpC9G,KACAiH,EAAkB,WAAcjH,GAEpC7B,EAAEoB,MACEC,IAAKC,cAAcC,KAAO,6BAA+BvB,EAAEkJ,MAAOJ,GAClErH,SAAU,OACViB,MAAO,WAAawB,MAAO,2CAE3BjC,QAAS,SAASkC,GAEd,QAASgF,KAELzJ,OAAOC,MAAMC,MACTC,MAAQ,kCACRC,KAAOqE,EACPxB,SACIC,OAAU,WAENwG,KAEJC,uBAAwB,WACpBrJ,EAAEsJ,OAAOhC,UAAUiC,KAAK,0BAA0BtJ,KAAK,WACnD,GAAI2B,GAAS5B,EAAER,MAAM8E,KACrByE,GAAepH,GAAKC,EACpBS,OAAOG,SAAWlB,cAAcC,KAAO,2BAA6BvB,EAAEkJ,MAAMH,SAMhG,QAASK,KACL1J,OAAOC,MAAMC,MACTC,MAAQ,6CAERC,KAEI,gLAEqD+B,EAAQ,yFAIjEc,SACIC,OAAU,WACNP,OAAOG,SAAWlB,cAAcC,KAAO,sBAE3CiI,8BAA+B,WAC3BL,KAEJM,4BAA6B,WACzB3G,EAAK+F,eAKrBO,QAMZV,cAAgB,WAGZ,GAAI/H,GAAaW,cAAcmH,IAAI9H,UAGnCpC,MAAOD,GAAG0H,sBAEN0D,UAAW1J,EAAE,+BACb0D,KAAM/C,EAAWd,MACjB+B,OAAQjB,EAAWiB,OACnBC,MAAOlB,EAAWkB,OACnBlB,EAAWE,SAAUF,EAAW5B,OAAQ4B,EAAWZ,WAAW,GAGjEP,KAAKmK,eAITd,SAAW,WAUP,GAAI/F,GAAOtD,IAGXQ,GAAEoB,MAEEC,IAAKC,cAAcC,KAAO,8BAC1BG,QACAgB,MAAO,WAAawB,MAAO,iCAC3BjC,QAAS,SAAS2H,GAGdlK,OAAOC,MAAMC,MACTC,MAAU,oBACVC,KAAUgD,EAAK+G,kBAAkBD,GACjCjH,SACIC,OAAU,WAAaP,OAAOG,SAAWlB,cAAcC,KAAO,sBAC9DuI,OAAU,WAAahH,EAAKiH,eAAe/J,EAAE,cAAcsE,MAAOtE,EAAE,cAAcsE,OAAQ5E,OAAOC,MAAMwC,UAK/G,IAAI6H,GAAoBJ,EAASK,IAAK,SAAUC,GAAK,MAAOA,GAAE,IAC1D5I,eAAcmH,IAAI0B,eAAiBtL,EAAEuL,SAASJ,EAAkB1I,cAAcmH,IAAI0B,gBAClFnK,EAAE,cAAcsE,IAAKhD,cAAcmH,IAAI0B,eAI3CnK,EAAE,cAAcqK,QAChBrK,EAAE,wBAAwBsK,UAG1BtK,EAAE,YAAY4D,IAAI,WAAY,YAM1CiG,kBAAmB,SAASD,GAiBxB,IAAK,GAdDW,GAAQ,ycAcH5F,EAAI,EAAGA,EAAIiF,EAAShF,OAAQD,IACjC4F,GAAQ,kBAAoBX,EAASjF,GAAG,GAAK,KAAOiF,EAASjF,GAAG,GAAK,WAezE,OAXA4F,IAAwB,qHAMUjJ,cAAcC,KAAO,oEAS3DwI,eAAiB,SAASrG,EAAM7B,GAE5B7B,EAAEsH,UAAUkD,QAAQ,qBAEpBjM,KAAOD,GAAG0H,sBAEN0D,UAAW1J,EAAE,+BACb0D,KAAMA,EACN7B,MAAOA,GACRP,cAAcmH,IAAIgC,aAGrBjL,KAAKmK,cAGLpL,KAAKgI,QAAS,GAIlBoD,YAAc,WAGV3J,EAAE,gCAAgCK,KAAK9B,KAAKkC,OAAOC,UAAU,QAAU,KAAOnC,KAAKsD,MAAQ,KAGvFP,cAAcmH,IAAIiC,aAClB1K,EAAEoB,MACEC,IAAKC,cAAcC,KAAO,gBAAkBD,cAAcmH,IAAIiC,YAC9DhJ,MAAQuH,SAAU,MAAO0B,UAAW,gBACpClJ,SAAU,OACVQ,QAAS,SAAS2I,GAAcrM,KAAKgF,aAAcxE,EAAOyE,qBAAqBoH,EAAYrM,KAAMA,UAIzGyB,EAAE,wBAAwBsF,MAAM,WAG5B,GAAInF,GAAW5B,KAAKuC,MAAQ,IAAMvC,KAAKyC,IAAM,IAAMzC,KAAK2C,KACpDZ,EAAa,sBACjB,OAAOhC,IAAGwG,aAAa3E,EAAUG,GAAY,KAIjDhC,GAAG+I,kBAAkB9I,MAErByB,EAAEqC,QAAQwI,GAAG,eAAgB,WACzB,MAAItM,MAAK6D,YACE,4FADX,WAOZ,QACIjD,YAAaA,EACb2L,UAAYzE"}