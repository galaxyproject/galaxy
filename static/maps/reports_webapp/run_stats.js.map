{"version":3,"sources":["reports_webapp/run_stats.js"],"names":["date_by_subtracting_days","date","days","Date","getFullYear","create_chart","create_histogram","getHours","d3","getMinutes","getSeconds","getMilliseconds","date_by_subtracting_hours","hours","getMonth","getDate","get_utc_time_hours","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","inp_data","name","time","title","i","data","hours_array","now","push","days_array","margin","top","bottom","left","barWidth","zoom","chart_width","right","chart_zoom","width","max","chart_height","$","css","chart","select","curr_margin","attr","on","this","height","classes","filter","transition","duration","click","style","bar","size","enter","append","d","target","wdth","m_x","parentElement","m_y","l_x","l_y","text","_d","event","yAxis","svg","round","axis","left_pad","top_pad","trans","range","_y2","first","tickFormat","curr_day","call","curr_day_text","locale","node","getBoundingClientRect","text_height","String","curr_month","curr_month_text","this_width","toLocaleString","month","getBBox","layout","lengths","selectAll","minutes","floor","bar_x","xAxis","scale","x","linear","histogram","bins","ticks","length","y","domain","split","undefined","dx","orient","Math"],"mappings":"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","file":"../../scripts/reports_webapp/run_stats.js","sourcesContent":["import * as d3 from \"../libs/d3\";\nimport { event as currentEvent } from \"../libs/d3\";\n\nfunction date_by_subtracting_days(date, days) {\n    return new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate() - days,\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\nfunction date_by_subtracting_hours(date, hours) {\n    return new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours() - hours,\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\n// Gets the utc time without minutes and seconds\nfunction get_utc_time_hours() {\n    var date = new Date();\n    return new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), 0, 0);\n}\n\n// This is commented out until we make Reports more responsive.\n// setTimeout(refresh, 60000); //1 minute = 60000 ms\n\nexport function create_chart(inp_data, name, time, title) {\n    // Initialize starting variables\n    var data = inp_data;\n\n    var hours_array = [];\n    var now = get_utc_time_hours();\n    var i;\n    for (i = 0; i < 24; i++) {\n        hours_array.push(date_by_subtracting_hours(now, i));\n    }\n\n    var days_array = [];\n    for (i = 0; i < 30; i++) {\n        days_array.push(date_by_subtracting_days(now, i));\n    }\n\n    var margin = { top: 60, right: 30, bottom: 50, left: 60 };\n    var width = 300;\n    var barWidth = 0;\n    if (time == \"hours\") {\n        barWidth = width / 24;\n    } else if (time == \"days\") {\n        barWidth = width / 30;\n    }\n    var chart_width = width + margin.left + margin.right;\n\n    var chart_zoom = 1.75;\n    var height = 150;\n    var zoom;\n    if (d3.max(data) !== 0) {\n        zoom = height / d3.max(data);\n    } else {\n        zoom = 1.0;\n    }\n    var chart_height = height + margin.top + margin.bottom;\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3\n            .selectAll(`.${classes[0]}`)\n            .filter(`.${classes[1]}`)\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height)\n            .attr(\"width\", chart_width);\n\n        d3\n            .select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom);\n    }\n\n    // Initialize all chart containers to have the correct height\n    $(\".charts\").css(\"height\", chart_height * chart_zoom);\n\n    // Create the chart object\n    var chart = d3\n        .select(`#${name}`)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .attr(\"viewBox\", `0 0 ${chart_width} ${chart_height}`)\n        .on(\"click\", click);\n\n    // Create bars on the chart and assosciate data with it\n    var bar = chart\n        .selectAll(\"g\")\n        .data(data)\n        .enter()\n        .append(\"g\")\n        .attr(\"transform\", (d, i) => {\n            // Place the bar in the correct place\n            var curr_margin = margin.left;\n            curr_margin += +(i * barWidth);\n            return `translate(${curr_margin},${margin.top})`;\n        })\n        .on(\"mouseenter\", d => {\n            // Show tool tip\n            var i = 1;\n            var size = d;\n\n            while (size >= 10) {\n                size = size / 10;\n                i++;\n            }\n\n            var wdth = i * 4 + 10;\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\"transform\", `translate( ${margin.left - 5}, ${height - d * zoom + margin.top + 10} )`)\n                .attr(\"visibility\", \"visible\")\n                .text(d);\n\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .attr(\"width\", `${wdth}px`)\n                .attr(\"height\", \"15px\")\n                .select(\"rect\")\n                .attr(\"transform\", `translate( ${margin.left - wdth}, ${height - d * zoom + margin.top} )`)\n                .attr(\"width\", `${wdth}px`)\n                .attr(\"height\", \"15px\")\n                .attr(\"fill\", \"#ebd9b2\");\n        })\n        .on(\"mouseleave\", d => {\n            // Remove tool tip\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\"visibility\", \"hidden\");\n\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .select(\"rect\")\n                .attr(\"width\", \"0\")\n                .attr(\"height\", \"0\")\n                .attr(\"fill\", \"\")\n                .text(d);\n        });\n\n    // Add a title to the chart\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", () => `translate( ${width},15 )`)\n        .text(title);\n\n    // Add an x axis line to the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"axis\")\n        .append(\"path\")\n        .attr(\"class\", \"x\")\n        .attr(\"d\", () => {\n            var m_x = margin.left;\n            var m_y = margin.top + height;\n            var l_x = m_x + width;\n            var l_y = m_y;\n\n            return `M${m_x} ${m_y} L ${l_x} ${l_y}`;\n        });\n\n    // Declare how high the y axis goes\n    var y = d3.scale.linear().range([height, 0]);\n\n    // Create a yAxis object\n    var yAxis = d3.svg\n        .axis()\n        .scale(y)\n        .orient(\"left\")\n        .tickFormat(d => d3.round(d * d3.max(data), 0));\n\n    // Put the y axis on the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", `y_${name}`)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", `translate( ${margin.left},${margin.top})`)\n        .call(yAxis)\n        .select(\".domain\");\n\n    // Put a title for y axis on chart\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"ax_title\")\n        .attr(\"transform\", () => {\n            var axis = d3.select(`#y_${name}`).node();\n            var left_pad = margin.left - axis.getBoundingClientRect().width - 5;\n            var top_pad = margin.top + axis.getBoundingClientRect().height / 2 - 30;\n            var trans = `translate(${left_pad},${top_pad})rotate(-90)`;\n\n            return trans;\n        })\n        .text(\"Number of Jobs\");\n\n    // Add color to the chart's bars\n    bar\n        .append(\"rect\")\n        .attr(\"y\", d => height - d * zoom)\n        .attr(\"height\", d => d * zoom)\n        .attr(\"width\", barWidth - 1);\n\n    var first = false;\n\n    // Append x axis\n    if (time == \"hours\") {\n        // Append hour lines\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", () => `translate( ${barWidth / 2}, ${height})`);\n\n        // Append hour numbers\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", `translate( 10, ${height + 10} )`)\n            .text((d, i) => {\n                var time = \"0000\";\n\n                if (hours_array[i].getHours() < 10) {\n                    time = `0${String(hours_array[i].getHours())}`;\n                } else {\n                    time = hours_array[i].getHours();\n                }\n\n                return time;\n            });\n\n        // Append day lines\n        var curr_day = \"\";\n        first = false;\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", (d, i) => {\n                var _y2 = 0;\n\n                if (hours_array[i].getDate() != curr_day) {\n                    if (!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n\n                    curr_day = hours_array[i].getDate();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", () => `translate( 0, ${height})`);\n\n        // Append day numbers\n        curr_day = \"\";\n        var curr_day_text = \"\";\n        first = false;\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text((d, i) => {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if (hours_array[i].getDate() != curr_day_text) {\n                    time = String(hours_array[i].toLocaleString(locale, { month: \"long\" }));\n                    time += ` ${String(hours_array[i].getDate())}`;\n\n                    curr_day_text = hours_array[i].getDate();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3\n                    .select(this)\n                    .node()\n                    .getBBox().width;\n\n                if (hours_array[i].getDate() != curr_day) {\n                    if (!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n\n                    curr_day = hours_array[i].getDate();\n                }\n\n                return `translate( ${this_width + 2}, ${text_height} )`;\n            });\n    } else if (time == \"days\") {\n        // Append day lines\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", () => `translate( ${barWidth / 2}, ${height})`);\n\n        // Append day numbers\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", `translate( 9, ${height + 10} )`)\n            .text((d, i) => {\n                var time = \"0000\";\n\n                if (days_array[i].getDate() < 10) {\n                    time = `0${String(days_array[i].getDate())}`;\n                } else {\n                    time = days_array[i].getDate();\n                }\n\n                return time;\n            });\n\n        // Append month lines\n        var curr_month = \"\";\n        first = false;\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", (d, i) => {\n                var _y2 = 0;\n\n                if (days_array[i].getMonth() != curr_month) {\n                    if (!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n\n                    curr_month = days_array[i].getMonth();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", () => `translate( 0, ${height})`);\n\n        // Append month numbers\n        curr_month = \"\";\n        var curr_month_text = \"\";\n        first = false;\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,100,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text((d, i) => {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if (days_array[i].getMonth() != curr_month_text) {\n                    time = String(days_array[i].toLocaleString(locale, { month: \"long\" }));\n                    time += ` ${String(days_array[i].getFullYear())}`;\n\n                    curr_month_text = days_array[i].getMonth();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3\n                    .select(this)\n                    .node()\n                    .getBBox().width;\n\n                if (days_array[i].getMonth() != curr_month) {\n                    if (!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n\n                    curr_month = days_array[i].getMonth();\n                }\n\n                return `translate( ${this_width + 2}, ${text_height} )`;\n            });\n    }\n\n    // Put an invisible tool tip on the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\").append(\"text\");\n\n    // Initialize initial zoomed charts\n    if (name == \"jc_dy_chart\" || name == \"jc_hr_chart\") {\n        d3\n            .select(`#${name}`)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom)\n            .style(\"cursor\", \"default\");\n    }\n}\n\n//============================================================================================================\n\nexport function create_histogram(inp_data, name, title) {\n    // Initialize initial variables\n    // inp_data is an array of numbers that are the amount of minutes per run\n    var data = inp_data;\n\n    var chart_zoom = 1.75;\n    var margin = { top: 60, right: 30, bottom: 50, left: 60 };\n\n    var height = 150;\n    var chart_height = height + margin.top + margin.bottom;\n\n    var width = 300;\n    var chart_width = width + margin.left + margin.right;\n\n    // Cereate x axis metadata\n    // Used for x axis, histogram creation, and bar initialization\n    var x = d3.scale\n        .linear()\n        .domain([0, d3.max(data)])\n        .range([0, width]);\n\n    // Generate a histogram using twenty uniformly-spaced bins.\n    data = d3.layout.histogram().bins(x.ticks(20))(data);\n\n    // Create an array of the sizes of the bars\n    var lengths = [];\n    for (var i = 0; i < data.length; i++) {\n        lengths.push(data[i].length);\n    }\n\n    var zoom;\n    // Find the amount needed to magnify the bars\n    if (d3.max(data) !== 0) {\n        zoom = height / d3.max(lengths);\n    } else {\n        zoom = 1.0;\n    }\n\n    // Create y axis metadata\n    // Used for y axis and bar initialization\n    var y = d3.scale\n        .linear()\n        .domain([0, d3.max(data, d => d.y)])\n        .range([height, 0]);\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3\n            .selectAll(`.${classes[0]}`)\n            .filter(`.${classes[1]}`)\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height)\n            .attr(\"width\", chart_width);\n\n        d3\n            .select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom);\n    }\n\n    // Formatter for x axis times (converting minutes to HH:MM).\n    var formatMinutes = d => {\n        var hours = Math.floor(d / 60);\n        var minutes = Math.floor(d - hours * 60);\n\n        if (hours < 10) {\n            hours = `0${hours}`;\n        }\n        if (minutes < 10) {\n            minutes = `0${minutes}`;\n        }\n\n        return `${hours}:${minutes}`;\n    };\n\n    // Create a chart object\n    var chart = d3\n        .select(`#${name}`)\n        .attr(\"viewBox\", `0 0 ${chart_width} ${chart_height}`)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .on(\"click\", click);\n\n    // Put title on chart\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"transform\", () => `translate( ${width},15 )`)\n        .text(title);\n\n    // Put bars on chart\n    var bar = chart\n        .selectAll(\".bar\")\n        .data(data)\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"bar\")\n        .attr(\"transform\", d => `translate(${+x(d.x) + margin.left},${+y(d.y) + margin.top})`)\n        .on(\"mouseenter\", d => {\n            // Show tool tip\n            var i = 0;\n\n            var size = d.length;\n\n            while (size >= 1) {\n                size = size / 10;\n                i++;\n            }\n            var wdth = i * 4 + 10;\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\"transform\", `translate( ${margin.left - 5}, ${height - d.length * zoom + margin.top + 10} )`)\n                .attr(\"visibility\", \"visible\")\n                .text(d.length);\n\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .attr(\"width\", `${wdth}px`)\n                .attr(\"height\", \"15px\")\n                .select(\"rect\")\n                .attr(\"transform\", `translate( ${margin.left - wdth}, ${height - d.length * zoom + margin.top} )`)\n                .attr(\"width\", `${wdth}px`)\n                .attr(\"height\", \"15px\")\n                .attr(\"fill\", \"#ebd9b2\");\n        })\n        .on(\"mouseleave\", () => {\n            // Remove tool tip\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\"visibility\", \"hidden\");\n\n            d3\n                .select(currentEvent.target.parentElement)\n                .select(\".tool_tip\")\n                .select(\"rect\")\n                .attr(\"width\", \"0\")\n                .attr(\"height\", \"0\")\n                .attr(\"fill\", \"\");\n        });\n\n    // Create bar width\n    var bar_x;\n    if (data[0] === undefined) {\n        bar_x = 1;\n    } else {\n        bar_x = x(data[0].dx);\n    }\n\n    // Add color to bar\n    bar\n        .append(\"rect\")\n        .attr(\"x\", 1)\n        .attr(\"width\", bar_x - 1)\n        .attr(\"height\", d => height - y(d.y));\n\n    // Create x axis\n    var xAxis = d3.svg\n        .axis()\n        .scale(x)\n        .orient(\"bottom\")\n        .tickFormat(formatMinutes);\n\n    // Add x axis to chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"id\", `x_${name}`)\n        .attr(\"transform\", `translate( ${margin.left},${+height + margin.top})`)\n        .call(xAxis);\n\n    // Add a title to the x axis\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"ax_title\")\n        .attr(\"transform\", () => {\n            var axis = d3.select(`#x_${name}`).node();\n            var left_pad = margin.left + axis.getBoundingClientRect().width / 2 + 30;\n            var top_pad = margin.top + height + axis.getBoundingClientRect().height + 10;\n            var trans = `translate(${left_pad},${top_pad})`;\n\n            return trans;\n        })\n        .text(\"ETA - hrs:mins\");\n\n    // Create y axis\n    var yAxis = d3.svg\n        .axis()\n        .scale(y)\n        .orient(\"left\");\n\n    // Add y axis to chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", `y_${name}`)\n        .attr(\"transform\", `translate( ${margin.left},${margin.top})`)\n        .call(yAxis);\n\n    // Add a title to the y axis\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"ax_title\")\n        .attr(\"transform\", () => {\n            var axis = d3.select(`#y_${name}`).node();\n            var left_pad = margin.left - axis.getBoundingClientRect().width - 5;\n            var top_pad = margin.top + axis.getBoundingClientRect().height / 2 - 30;\n            var trans = `translate(${left_pad},${top_pad})rotate(-90)`;\n\n            return trans;\n        })\n        .text(\"Number of Jobs\");\n\n    // Put an invisible tool tip on the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\").append(\"text\");\n}\n"]}