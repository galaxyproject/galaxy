{"version":3,"sources":["mvc/grid/grid-shared.js"],"names":["View","Backbone","extend","initialize","options","self","this","setElement","$","model","Model","item","get","title","ajax","url","Galaxy","root","param","params","success","response","set","render","grid","attributes","$el","append","_templateShared","shared_by_others","length","$table","it","index","$tmpl","slug","display_url","_","escape","toLowerCase"],"mappings":"sMAEIA,EAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KACXA,KAAKC,WAAWC,EAAE,WAClBF,KAAKG,MAAQ,IAAIR,SAASS,MAAMN,GAChCE,KAAKK,KAAOL,KAAKG,MAAMG,IAAI,QAC3BN,KAAKO,MAAQP,KAAKG,MAAMG,IAAI,UAC5BJ,EAAEM,MACEC,IAAQC,OAAOC,KAAOX,KAAKK,KAA3B,IAAmCL,KAAKG,MAAMG,IAAI,aAAlD,IAAkEJ,EAAEU,MAAMF,OAAOG,QACjFC,QAAS,SAASC,GACdA,EAAA,aAA0B,EAC1BhB,EAAKI,MAAMa,IAAID,GACfhB,EAAKkB,aARbA,OAAA,WACA,IAAAC,EAAKb,IAAAA,EAAAA,QAAYF,KAAMG,MAAIa,YAC3BnB,KAAAoB,IAAKb,QAAQc,OAAKlB,EAAMG,KACxBJ,KAAAA,IAAEM,OAAKR,KAAAsB,oBAGCP,gBAAAA,WACAhB,IAAAA,EAAAA,KACAA,EAAAA,EAAAA,YAAAC,KAAAG,MAAAG,IAAA,UAAAP,yCACHD,EAAAE,KAAAG,MAAAgB,WANE,GAAArB,EAAPyB,kBAAAzB,EAAAyB,iBAAAC,OAAA,EAAA,CAPwB,IAAAC,EAAAvB,EA6BhB,+IANZoB,EAAAA,KAAAA,EAAiBC,iBAAA,SAAAG,EAAAC,GACT5B,IAAAA,EAAJW,OAAAC,KAAAZ,EAAAM,KAAIN,0CACA6B,EAAAA,SADA7B,SAEAD,EAAU+B,KACV/B,EAAAA,OAAAA,oBAEIgC,EAFJhC,KAEIiC,EAAAC,OAAAN,EAAAnB,OAFJT,gBAEIiC,EAAAC,OAOGlC,EAAAA,UATPA,gBAmBA8B,EAAAA,OAAMP,QAENO,EAAAA,OAAAA,MAAA5B,KAAAG,MAAwBA,IAAAA,UAAU8B,cAAlCL,+BAEJ,OAAAA,gBAIOlC,KACLA","file":"../../../scripts/mvc/grid/grid-shared.js","sourcesContent":["/** This class renders the grid list with shared section. */\nimport GridView from \"mvc/grid/grid-view\";\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.setElement($(\"<div/>\"));\n        this.model = new Backbone.Model(options);\n        this.item = this.model.get(\"item\");\n        this.title = this.model.get(\"plural\");\n        $.ajax({\n            url: `${Galaxy.root + this.item}/${this.model.get(\"action_id\")}?${$.param(Galaxy.params)}`,\n            success: function(response) {\n                response[\"dict_format\"] = true;\n                self.model.set(response);\n                self.render();\n            }\n        });\n    },\n\n    render: function() {\n        var grid = new GridView(this.model.attributes);\n        this.$el.empty().append(grid.$el);\n        this.$el.append(this._templateShared());\n    },\n\n    _templateShared: function() {\n        var self = this;\n        var $tmpl = $(`<div><h2>${this.model.get(\"plural\")} shared with you by others</h2></div>`);\n        var options = this.model.attributes;\n        if (options.shared_by_others && options.shared_by_others.length > 0) {\n            var $table = $(\n                '<table class=\"colored\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">' +\n                    '<tr class=\"header\">' +\n                    \"<th>Title</th>\" +\n                    \"<th>Owner</th>\" +\n                    \"</tr>\" +\n                    \"</table>\"\n            );\n            _.each(options.shared_by_others, (it, index) => {\n                var display_url = `${Galaxy.root + self.item}/display_by_username_and_slug?username=${\n                    it.username\n                }&slug=${it.slug}`;\n                $table.append(\n                    `<tr><td><a href=\"${display_url}\">${_.escape(it.title)}</a></td><td>${_.escape(\n                        it.username\n                    )}</td></tr>`\n                );\n            });\n            $tmpl.append($table);\n        } else {\n            $tmpl.append(`No ${this.model.get(\"plural\").toLowerCase()} have been shared with you.`);\n        }\n        return $tmpl;\n    }\n});\n\nexport default {\n    View: View\n};\n"]}