{"version":3,"file":"tool-form-composite.js","sources":["../../../src/mvc/tool/tool-form-composite.js"],"names":["define","Utils","Deferred","Ui","Form","FormData","ToolFormBase","View","Backbone","extend","initialize","options","this","model","Model","deferred","setElement","$","addClass","append","$message","$header","$parameters","$steps","$history","$execute","$el","_configure","render","_handleWorkflowParameter","value","callback","wp_name","self","_isWorkflowParameter","wp_inputs","label","name","type","color","wp_count","style","links","forms","steps","parms","_","each","get","step","i","Galaxy","emit","debug","merge","index","parseInt","icon","help","description","annotation","citations","collapsible","collapsed","_isDataStep","sustain_version","sustain_repeats","sustain_conditionals","narrow","text_enable","text_disable","cls_enable","cls_disable","errors","messages","initial_errors","visitInputs","inputs","input","output_connections","output_connection","sub_step","step_id","input_step_id","push","j","connections_by_name","connection","input_name","step_linked","output_name","wp_input","wp_linked","backdrop","post_job_actions","pja","action_arguments","arg","step_type","data_resolved","context","is_data_input","indexOf","data_ref","length","is_workflow","__class__","flavor","optional","isEmpty","collapsible_value","collapsible_preview","reset","_renderHeader","_renderMessage","_renderParameters","_renderHistory","_renderStep","execute","_renderExecute","empty","Label","title","Button","onclick","form","portlet","collapse","expand","Message","message","status","persistent","wp_form","onchange","input_list","input_def","_refreshStep","_append","current","promise","html","reduce","memo","short_str","link","_resolve","setTimeout","ready","resolve","field","field_list","data","match","new_value","undefined","values","source_step","create","v","multiple","wp_field","trigger","history_form","test_param","cases","execute_btn","cls","floating","_execute","job_def","new_history_name","wf_parm","validated","job_inputs","job_input_id","input_value","input_id","highlight","_enabled","request","url","root","workflow_id","success","response","_templateSuccess","parent","currHistoryPanel","refreshContents","error","err_data","step_related_errors","error_messages","matchResponse","modal","show","body","_templateError","err_msg","buttons","Close","hide","complete","$container","enabled","unwait","wait","enable","disable","String","substring","sanitize","lst","isArray","startsWith","text","JSON","stringify"],"mappings":"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"}