{"version":3,"file":"workflow-canvas.js","sources":["../../../src/mvc/workflow/workflow-canvas.js"],"names":["define","CanvasManager","app","canvas_viewport","overview","this","cv","cc","find","oc","ov","init_drag","ScrollPanel","panel","$","extend","prototype","self","move","x","y","Math","min","width","max","height","css","left","top","background-position-x","background-position-y","update_viewport_overlay","each","scroll_panel","x_adjust","y_adjust","bind","o","offset","p","position","e","d","offsetX","offsetY","workflow","fit_canvas_to_nodes","draw_overview","click","hasClass","removeClass","in_w","in_h","o_w","o_h","new_x_offset","pageX","new_y_offset","pageY","addClass","op","offsetParent","opo","new_size","cc_pos","shift_h","shift_w","canvas_el","size","parent","c","get","getContext","cv_w","cv_h","ceil","attr","nodes","id","node","fillStyle","strokeStyle","lineWidth","node_element","element","w","h","tool_errors","undefined","workflow_outputs","length","fillRect","strokeRect","test","onmove","clearTimeout","timeout","panel_pos","panel_w","panel_h","viewport","viewport_w","viewport_h","viewport_offset","min_x","min_y","max_x","max_y","p_min_x","p_min_y","p_max_x","p_max_y","moved","close_dist","nudge","t","setTimeout","stop"],"mappings":"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"}