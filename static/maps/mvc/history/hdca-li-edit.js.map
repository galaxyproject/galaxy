{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["_super","_hdcaLi2","default","HDCAListItemView","HDCAListItemEdit","extend","initialize","attributes","prototype","call","this","purgeAllowed","_collectionViewEdit2","CollectionViewEdit","_renderPrimaryActions","log","concat","_renderDeleteButton","$","_localization2","events","_","clone","click .delete-collection","ev","model","click .delete-collection-and-datasets","click .delete-collection-and-purge-datasets","toString"],"mappings":"wTAMIA,EAASC,EAAAC,QAAQC,iBAGjBC,EAAmBJ,EAAOK,QAKtBC,WAAY,SAASC,GACjBP,EAAOQ,UAAUF,WAAWG,KAAKC,KAAMH,GAGvCG,KAAKC,aAAeJ,EAAWI,eAAgB,GAZvDX,sBAAS,WACb,OAAAY,EAAAV,QAAAW,oBAKQC,sBAAA,WAGId,OAFJU,KAAAK,IAAAL,KAAA,0BAEWF,EAAAA,UAAUF,sBAAsBC,KAAvCG,MAAAM,QAAAN,KAAAO,yBAGAA,oBAAA,WARiC,OAAAC,EAAAA,wGAWrC,EAAAC,EAAAjB,SAAA,UAXqC,6TAiBrC,EAAAiB,EAAAjB,SAAA,mBAjBqC,sNAAA,EAAAiB,EAAAjB,SAAA,mBAAA,mHAyB1BgB,KAAAA,aAAAA,UAAAA,QAzB0B,+HA2CX,EAAAC,EAAAjB,SAAG,+BA3CQ,yHAyDhCkB,OAN8CC,EAAAhB,OAAAgB,EAAAC,MAAAtB,EAAAQ,UAAAY,SAO/CG,2BAAA,SAAAC,GACId,KAAKe,MAAL,UA3D6BC,wCAAA,SAAAF,GAwD7Bd,KAAKe,MAAL,QAAqB,IAQ7BE,8CAAA,SAAAH,GACAI,KAAUH,MAAVG,QAAU,GAAW,MAO7BA,SAAA,WAEIxB,MAAAA,qBADWM,KAAAe,MAAA,GAAAf,KAAAe,MAAA,cACXrB,kBAAAA,iBAAkBA","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["import HDCA_LI from \"mvc/history/hdca-li\";\nimport DC_VIEW_EDIT from \"mvc/collection/collection-view-edit\";\nimport faIconButton from \"ui/fa-icon-button\";\nimport _l from \"utils/localization\";\n\n//==============================================================================\nvar _super = HDCA_LI.HDCAListItemView;\n/** @class Editing view for HistoryDatasetCollectionAssociation.\n */\nvar HDCAListItemEdit = _super.extend(\n    /** @lends HDCAListItemEdit.prototype */ {\n        /** logger used to record this.log messages, commonly set to console */\n        //logger              : console,\n        /** set up: options */\n        initialize: function(attributes) {\n            _super.prototype.initialize.call(this, attributes);\n\n            /** allow user purge of dataset files? */\n            this.purgeAllowed = attributes.purgeAllowed || false;\n        },\n\n        /** Override to return editable versions of the collection panels */\n        _getFoldoutPanelClass: function() {\n            return DC_VIEW_EDIT.CollectionViewEdit;\n        },\n\n        // ......................................................................... delete\n        /** In this override, add the delete button. */\n        _renderPrimaryActions: function() {\n            this.log(`${this}._renderPrimaryActions`);\n            // render the display, edit attr and delete icon-buttons\n            return _super.prototype._renderPrimaryActions.call(this).concat([this._renderDeleteButton()]);\n        },\n\n        _renderDeleteButton: function() {\n            return $(`\n                <div class=\"dropdown\">\n                    <a class=\"delete-btn icon-btn\" title=\"${_l(\"Delete\")}\" data-toggle=\"dropdown\">\n                        <span class=\"fa fa-times\"></span>\n                    </a>\n                    <ul class=\"dropdown-menu pull-right\" role=\"menu\">\n                        <li>\n                            <a href=\"#\" class=\"delete-collection\">\n                                ${_l(\"Collection Only\")}\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"#\" class=\"delete-collection-and-datasets\">\n                                ${_l(\"Delete Datasets\")}\n                            </a>\n                        </li>\n                        <li style=\"display: ${this.purgeAllowed ? \"inherit\" : \"none\"}\">\n                            <a href=\"#\" class=\"delete-collection-and-purge-datasets\">\n                                ${_l(\"Permanently Delete Datasets\")}\n                            </a>\n                        </li>\n                    </ul>\n                </div>`);\n        },\n\n        // ......................................................................... misc\n        events: _.extend(_.clone(_super.prototype.events), {\n            \"click .delete-collection\": function(ev) {\n                this.model[\"delete\"]();\n            },\n            \"click .delete-collection-and-datasets\": function(ev) {\n                this.model[\"delete\"](true);\n            },\n            \"click .delete-collection-and-purge-datasets\": function(ev) {\n                this.model[\"delete\"](true, true);\n            }\n        }),\n\n        // ......................................................................... misc\n        /** string rep */\n        toString: function() {\n            var modelString = this.model ? `${this.model}` : \"(no model)\";\n            return `HDCAListItemEdit(${modelString})`;\n        }\n    }\n);\n\n//==============================================================================\nexport default {\n    HDCAListItemEdit: HDCAListItemEdit\n};\n"]}