webpackJsonp([3],{10:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3)],void 0!==(l=function(t){var e=s.View.extend({initialize:function(e){this.model=e&&e.model||new s.Model({id:t.uid(),title:"",icon:"",cls:"btn btn-default",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1}).set(e),this.setElement(a("<button/>").attr("type","button").append(this.$icon=a("<i/>")).append(this.$title=a("<span/>")).append(this.$progress=a("<div/>").append(this.$progress_bar=a("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(e.disabled&&"disabled").attr("id",e.id).attr("disabled",e.disabled).off("click").on("click",function(){a(".tooltip").hide(),e.onclick&&!t.disabled&&e.onclick()}).tooltip({title:e.tooltip,placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==e.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:e.percentage+"%"}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),e.wait?(this.$el.addClass(e.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin ui-margin-right"),this.$title.html(e.wait_text)):(this.$el.addClass(e.cls),this.$icon.addClass(e.icon),this.$title.html(e.title),e.icon&&e.title&&this.$icon.addClass("ui-margin-right"))},show:function(){this.$el.show()},hide:function(){this.$el.hide()},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(t){this.model.set("icon",t)}}),i=e.extend({initialize:function(e){this.model=e&&e.model||new s.Model({id:t.uid(),title:"",icon:"",cls:""}).set(e),this.setElement(a("<a/>").append(this.$icon=a("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).attr({id:t.id,href:t.href||"javascript:void(0)",title:t.title,target:t.target||"_top",disabled:t.disabled}).tooltip({placement:"bottom"}).off("click").on("click",function(){t.onclick&&!t.disabled&&t.onclick()}),this.$icon.removeClass().addClass(t.icon)}}),n=s.View.extend({initialize:function(e){this.model=e&&e.model||new s.Model({id:t.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,onchange:function(){}}).set(e),this.setElement(a("<div/>").append(this.$icon=a("<span/>")).append(this.$title=a("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var e=this,t=this.model.attributes;this.$el.addClass("ui-button-check").off("click").on("click",function(){e.model.set("value",0===e.model.get("value")&&2||0),t.onclick&&t.onclick()}),this.$title.html(t.title),this.$icon.removeClass().addClass("icon fa ui-margin-right").addClass(t.icons[t.value])},value:function(t,e){return void 0!==t&&(e&&0!==t&&(t=t!==e&&1||2),this.model.set("value",t),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}});return{ButtonDefault:e,ButtonLink:i,ButtonIcon:e.extend({initialize:function(e){this.model=e&&e.model||new s.Model({id:t.uid(),title:"",icon:"",cls:"ui-button-icon",disabled:!1}).set(e),this.setElement(a("<div/>").append(this.$button=a("<div/>").append(this.$icon=a("<i/>")).append(this.$title=a("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).addClass(t.disabled&&"disabled").attr("disabled",t.disabled).attr("id",t.id).off("click").on("click",function(){a(".tooltip").hide(),!t.disabled&&t.onclick&&t.onclick()}),this.$button.addClass("button").tooltip({title:t.tooltip,placement:"bottom"}),this.$icon.removeClass().addClass("icon fa").addClass(t.icon),this.$title.addClass("title").html(t.title),t.icon&&t.title&&this.$icon.addClass("ui-margin-right")}}),ButtonCheck:n,ButtonMenu:e.extend({$menu:null,initialize:function(t){this.model=t&&t.model||new s.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"ui-button-icon ui-button-menu",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(t),this.collection=new s.Collection,this.setElement(a("<div/>").append(this.$root=a("<div/>").append(this.$icon=a("<i/>")).append(this.$title=a("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("dropdown").addClass(e.cls).attr("id",e.id).css({display:e.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass("root button dropdown-toggle").attr("data-toggle","dropdown").tooltip({title:e.tooltip,placement:"bottom"}).off("click").on("click",function(t){a(".tooltip").hide(),t.preventDefault(),e.onclick&&e.onclick()}),this.$icon.removeClass().addClass("icon fa").addClass(e.icon),this.$title.removeClass().addClass("title").html(e.title),e.icon&&e.title&&this.$icon.addClass("ui-margin-right"),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=a("<ul/>").addClass("menu dropdown-menu").addClass("pull-"+t.model.get("pull")).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each(function(e){var i=e.attributes;if(i.visible){var s=a("<a/>").addClass("dropdown-item").attr({href:i.href,target:i.target}).append(a("<i/>").addClass("fa").addClass(i.icon).css("display",i.icon?"inline-block":"none")).append(i.title).on("click",function(t){i.onclick&&(t.preventDefault(),i.onclick())});t.$menu.append(a("<li/>").append(s)),i.divider&&t.$menu.append(a("<li/>").addClass("divider"))}})},addMenu:function(e){this.collection.add(t.merge(e,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}})}}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0))},158:function(t,e,i){"use strict";(function(t){var e=i(0),s=e,a=i(42).GalaxyApp,n=i(159),l=i(58),o=i(16),r=(i(5),i(11)),d=i(44),c=i(3),h=i(43);window.app=function(e,i){window.Galaxy=new a(e,i),Galaxy.debug("admin app");var u=d.extend({routes:{"(/)admin(/)users":"show_users","(/)admin(/)roles":"show_roles","(/)admin(/)groups":"show_groups","(/)admin(/)tool_versions":"show_tool_versions","(/)admin(/)quotas":"show_quotas","(/)admin(/)repositories":"show_repositories","(/)admin(/)forms":"show_forms","(/)admin(/)form(/)(:form_id)":"show_form"},authenticate:function(t,e){return Galaxy.user&&Galaxy.user.id&&Galaxy.user.get("is_admin")},show_users:function(){this.page.display(new o({url_base:Galaxy.root+"admin/users_list",url_data:Galaxy.params,dict_format:!0}))},show_roles:function(){this.page.display(new o({url_base:Galaxy.root+"admin/roles_list",url_data:Galaxy.params,dict_format:!0}))},show_groups:function(){this.page.display(new o({url_base:Galaxy.root+"admin/groups_list",url_data:Galaxy.params,dict_format:!0}))},show_repositories:function(){this.page.display(new o({url_base:Galaxy.root+"admin_toolshed/browse_repositories",url_data:Galaxy.params,dict_format:!0}))},show_tool_versions:function(){this.page.display(new o({url_base:Galaxy.root+"admin/tool_versions_list",url_data:Galaxy.params,dict_format:!0}))},show_quotas:function(){this.page.display(new o({url_base:Galaxy.root+"admin/quotas_list",url_data:Galaxy.params,dict_format:!0}))},show_forms:function(){this.page.display(new o({url_base:Galaxy.root+"forms/forms_list",url_data:Galaxy.params,dict_format:!0}))},show_form:function(t){var e="?id="+r.get("id"),i={reset_user_password:{title:"Reset passwords",url:"admin/reset_user_password"+e,icon:"fa-user",submit_title:"Save new password",redirect:"admin/users"},manage_roles_and_groups_for_user:{url:"admin/manage_roles_and_groups_for_user"+e,icon:"fa-users",redirect:"admin/users"},manage_users_and_groups_for_role:{url:"admin/manage_users_and_groups_for_role"+e,redirect:"admin/roles"},manage_users_and_roles_for_group:{url:"admin/manage_users_and_roles_for_group"+e,redirect:"admin/groups"},manage_users_and_groups_for_quota:{url:"admin/manage_users_and_groups_for_quota"+e,redirect:"admin/quotas"},create_role:{url:"admin/create_role",redirect:"admin/roles"},create_group:{url:"admin/create_group",redirect:"admin/groups"},create_quota:{url:"admin/create_quota",redirect:"admin/quotas"},rename_role:{url:"admin/rename_role"+e,redirect:"admin/roles"},rename_group:{url:"admin/rename_group"+e,redirect:"admin/groups"},rename_quota:{url:"admin/rename_quota"+e,redirect:"admin/quotas"},edit_quota:{url:"admin/edit_quota"+e,redirect:"admin/quotas"},set_quota_default:{url:"admin/set_quota_default"+e,redirect:"admin/quotas"},create_form:{url:"forms/create_form",redirect:"admin/forms"},edit_form:{url:"forms/edit_form"+e,redirect:"admin/forms"}};this.page.display(new l.View(i[t]))}});s(function(){t.extend(e.config,{active_view:"admin"}),c.setWindowTitle("Administration"),Galaxy.page=new h.View(t.extend(e,{Left:n,Router:u}))})}}).call(e,i(2))},159:function(t,e,i){"use strict";(function(e,s,a){var n=i(4),l=e.View.extend({initialize:function(t,i){var s=this;this.page=t,this.root=i.root,this.config=i.config,this.settings=i.settings,this.message=i.message,this.status=i.status,this.model=new e.Model({title:n("Administration")}),this.categories=new e.Collection([{title:"Server",items:[{title:"Data types registry",url:"admin/view_datatypes_registry"},{title:"Data tables registry",url:"admin/view_tool_data_tables"},{title:"Display applications",url:"admin/display_applications"},{title:"Manage jobs",url:"admin/jobs"}]},{title:"Tools and Tool Shed",items:[{title:"Search Tool Shed",url:"admin_toolshed/browse_tool_sheds",enabled:s.settings.is_tool_shed_installed},{title:"Search Tool Shed (Beta)",url:"admin_toolshed/browse_toolsheds",enabled:s.settings.is_tool_shed_installed&&s.config.enable_beta_ts_api_install},{title:"Monitor installing repositories",url:"admin_toolshed/monitor_repository_installation?installing_repository_ids="+s.settings.installing_repository_ids,enabled:s.settings.installing_repository_ids},{title:"Manage installed tools",url:"admin/repositories",enabled:s.settings.is_repo_installed,target:"__use_router__"},{title:"Reset metadata",url:"admin_toolshed/reset_metadata_on_selected_installed_repositories",enabled:s.settings.is_repo_installed},{title:"Download local tool",url:"admin/package_tool"},{title:"Tool lineage",url:"admin/tool_versions",target:"__use_router__"},{title:"Reload a tool's configuration",url:"admin/reload_tool"},{title:"Review tool migration stages",url:"admin/review_tool_migration_stages"},{title:"View Tool Error Logs",url:"admin/tool_errors"},{title:"Manage Display Whitelist",url:"admin/sanitize_whitelist"},{title:"Manage Tool Dependencies",url:"admin/manage_tool_dependencies"}]},{title:"User Management",items:[{title:"Users",url:"admin/users",target:"__use_router__"},{title:"Groups",url:"admin/groups",target:"__use_router__"},{title:"Roles",url:"admin/roles",target:"__use_router__"},{title:"API keys",url:"userskeys/all_users"},{title:"Impersonate a user",url:"admin/impersonate",enabled:s.config.allow_user_impersonation}]},{title:"Data",items:[{title:"Quotas",url:"admin/quotas",target:"__use_router__",enabled:s.config.enable_quotas},{title:"Data libraries",url:"library_admin/browse_libraries"},{title:"Roles",url:"admin/roles",target:"__use_router__"},{title:"Local data",url:"data_manager"}]},{title:"Form Definitions",items:[{title:"Form definitions",url:"admin/forms",target:"__use_router__"}]},{title:"Sample Tracking",items:[{title:"Sequencers and external services",url:"external_service/browse_external_services"},{title:"Request types",url:"request_type/browse_request_types"},{title:"Sequencing requests",url:"requests_admin/browse_requests"},{title:"Find samples",url:"requests_common/find_samples?cntrller=requests_admin"}]}]),this.setElement(this._template())},render:function(){var t=this;this.$el.empty(),this.categories.each(function(e){var i=s(t._templateSection(e.attributes)),l=i.find(".ui-side-section-body");a.each(e.get("items"),function(e){if(void 0===e.enabled||e.enabled){var i=s("<a/>").attr({href:t.root+e.url}).text(n(e.title));"__use_router__"==e.target?i.on("click",function(i){i.preventDefault(),t.page.router.push(e.url)}):i.attr("target","galaxy_main"),l.append(s("<div/>").addClass("ui-side-section-body-title").append(i))}}),t.$el.append(i)}),this.page.$("#galaxy_main").prop("src",this.root+"admin/center?message="+this.message+"&status="+this.status)},_templateSection:function(t){return["<div>",'<div class="ui-side-section-title">'+n(t.title)+"</div>",'<div class="ui-side-section-body"/>',"</div>"].join("")},_template:function(){return'<div class="ui-side-panel"/>'},toString:function(){return"adminPanel"}});t.exports=l}).call(e,i(1),i(0),i(2))},16:function(t,e,i){"use strict";(function(s,a,n,l){var o,r;s.ajaxSettings.traditional=!0,o=[i(3),i(27),i(28),i(20)],void 0!==(r=function(t,e,i,s){return a.View.extend({grid:null,initialize:function(t){this.grid=new e,this.dict_format=t.dict_format,this.title=t.title;var i=this;if(window.add_tag_to_grid_filter=function(t,e){var s=t+(void 0!==e&&""!==e?":"+e:"");n("#advanced-search").is(":visible")||(n("#standard-search").slideToggle("fast"),n("#advanced-search").slideToggle("fast")),i.add_filter_condition("tags",s)},this.dict_format)if(this.setElement("<div/>"),t.url_base&&!t.items){var s=t.url_data||{};l.each(t.filters,function(t,e){s["f-"+e]=t}),n.ajax({url:t.url_base+"?"+n.param(s),success:function(e){e.embedded=t.embedded,e.filters=t.filters||{},i.init_grid(e)}})}else this.init_grid(t);else this.setElement("#grid-container"),this.init_grid(t);t.use_panels&&n("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(t){t&&n.inArray("history",t)>-1&&top.Galaxy&&top.Galaxy.currHistoryPanel&&top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(e){this.grid.set(e);var s=this.grid.attributes;this.allow_title_display&&s.title&&t.setWindowTitle(s.title),this.handle_refresh(s.refresh_frames);var a=this.grid.get("url_base");if(a=a.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",a),this.$el.html(i.grid(s)),this.$el.find("#grid-table-header").html(i.header(s)),this.$el.find("#grid-table-body").html(i.body(s)),this.$el.find("#grid-table-footer").html(i.footer(s)),s.message){this.$el.find("#grid-message").html(i.message(s));var n=this;s.use_hide_message&&setTimeout(function(){n.$el.find("#grid-message").html("")},5e3)}this.init_grid_elements(),this.init_grid_controls(),init_refresh_on_change()},init_grid_controls:function(){var t=this;this.$el.find(".operation-button").each(function(){n(this).off(),n(this).click(function(){return t.submit_operation(this),!1})}),this.$el.find("input[type=text]").each(function(){n(this).off(),n(this).click(function(){n(this).select()}).keyup(function(){n(this).css("font-style","normal")})}),this.$el.find(".sort-link").each(function(){n(this).off(),n(this).click(function(){return t.set_sort_condition(n(this).attr("sort_key")),!1})}),this.$el.find(".text-filter-form").each(function(){n(this).off(),n(this).submit(function(){var e=n(this).attr("column_key"),i=n("#input-"+e+"-filter"),s=i.val();return i.val(""),t.add_filter_condition(e,s),!1})}),this.$el.find(".text-filter-val > a").each(function(){n(this).off(),n(this).click(function(){return n(this).parent().remove(),t.remove_filter_condition(n(this).attr("filter_key"),n(this).attr("filter_val")),!1})}),this.$el.find(".categorical-filter > a").each(function(){n(this).off(),n(this).click(function(){return t.set_categorical_filter(n(this).attr("filter_key"),n(this).attr("filter_val")),!1})}),this.$el.find(".advanced-search-toggle").each(function(){n(this).off(),n(this).click(function(){return t.$el.find("#standard-search").slideToggle("fast"),t.$el.find("#advanced-search").slideToggle("fast"),!1})}),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",function(){t.check_all_items()})},init_grid_elements:function(){this.$el.find(".grid").each(function(){var t=n(this).find("input.grid-row-select-checkbox"),e=n(this).find("span.grid-selected-count"),i=function(){e.text(n(t).filter(":checked").length)};n(t).each(function(){n(this).change(i)}),i()}),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var t=this.grid.attributes,e=this;this.$el.find(".page-link > a").each(function(){n(this).click(function(){return e.set_page(n(this).attr("page_num")),!1})}),this.$el.find(".use-target").each(function(){n(this).click(function(t){return e.execute({href:n(this).attr("href"),target:n(this).attr("target")}),!1})}),0!=t.items.length&&l.each(t.items,function(i,a){var n=e.$("#grid-"+a+"-popup").off(),o=new s(n);l.each(t.operations,function(t){e._add_operation(o,t,i)})})},_add_operation:function(t,e,i){var s=this,a=i.operation_config[e.label];a.allowed&&e.allow_popup&&t.addItem({html:e.label,href:a.url_args,target:a.target,confirmation_text:e.confirm,func:function(t){t.preventDefault();var a=n(t.target).html();e.onclick?e.onclick(i.encode_id):s.execute(this.findItemByHtml(a))}})},add_filter_condition:function(t,e){if(""===e)return!1;this.grid.add_filter(t,e,!0);var s=n(i.filter_element(t,e)),a=this;s.click(function(){n(this).remove(),a.remove_filter_condition(t,e)}),this.$el.find("#"+t+"-filtering-criteria").append(s),this.go_page_one(),this.execute()},remove_filter_condition:function(t,e){this.grid.remove_filter(t,e),this.go_page_one(),this.execute()},set_sort_condition:function(t){var e=this.grid.get("sort_key"),i=t;-1!==e.indexOf(t)&&"-"!==e.substring(0,1)&&(i="-"+t),this.$el.find(".sort-arrow").remove();var s="-"==i.substring(0,1)?"&uarr;":"&darr;",a=n("<span>"+s+"</span>").addClass("sort-arrow");this.$el.find("#"+t+"-header").append(a),this.grid.set("sort_key",i),this.go_page_one(),this.execute()},set_categorical_filter:function(t,e){var i=this.grid.get("categorical_filters")[t],s=this.grid.get("filters")[t],a=this;this.$el.find("."+t+"-filter").each(function(){var l=n.trim(n(this).text()),o=i[l],r=o[t];if(r==e)n(this).empty(),n(this).addClass("current-filter"),n(this).append(l);else if(r==s){n(this).empty();var d=n('<a href="#">'+l+"</a>");d.click(function(){a.set_categorical_filter(t,r)}),n(this).removeClass("current-filter"),n(this).append(d)}}),this.grid.add_filter(t,e),this.go_page_one(),this.execute()},set_page:function(t){var e=this;this.$el.find(".page-link").each(function(){var i,s=n(this).attr("id"),a=parseInt(s.split("-")[2],10),l=e.grid.get("cur_page");if(a===t)i=n(this).children().text(),n(this).empty(),n(this).addClass("inactive-link"),n(this).text(i);else if(a===l){i=n(this).text(),n(this).empty(),n(this).removeClass("inactive-link");var o=n('<a href="#">'+i+"</a>");o.click(function(){e.set_page(a)}),n(this).append(o)}}),"all"===t?this.grid.set("cur_page",t):this.grid.set("cur_page",parseInt(t,10)),this.execute()},submit_operation:function(t,e){var i=n(t).val();if(!this.$el.find('input[name="id"]:checked').length>0)return!1;var s=l.findWhere(this.grid.attributes.operations,{label:i});s&&!e&&(e=s.confirm||"");var a=[];this.$el.find("input[name=id]:checked").each(function(){a.push(n(this).val())});var o={operation:i,id:a,confirmation_text:e};return"top"==s.target&&(o=l.extend(o,{href:s.href,target:s.target})),this.execute(o),!0},check_all_items:function(){var t=this.$(".grid-row-select-checkbox"),e=this.$("#check_all").prop("checked");l.each(t,function(t){n(t).prop("checked",e)}),this.init_grid_elements()},go_page_one:function(){var t=this.grid.get("cur_page");null!==t&&void 0!==t&&"all"!==t&&this.grid.set("cur_page",1)},execute:function(t){var e=null,i=null,s=null,a=null,l=null;if(t&&(i=t.href,s=t.operation,e=t.id,a=t.confirmation_text,l=t.target,void 0!==i&&-1!=i.indexOf("operation="))){var o=i.split("?");if(o.length>1)for(var r=o[1],d=r.split("&"),c=0;c<d.length;c++)-1!=d[c].indexOf("operation")?(s=d[c].split("=")[1],s=s.replace(/\+/g," ")):-1!=d[c].indexOf("id")&&(e=d[c].split("=")[1])}return s&&e?!(a&&""!=a&&"None"!=a&&"null"!=a&&!confirm(a))&&(s=s.toLowerCase(),this.grid.set({operation:s,item_ids:e}),"top"==l?window.top.location=i+"?"+n.param(this.grid.get_url_data()):this.grid.can_async_op(s)||this.dict_format?this.update_grid():this.go_to(l,i),!1):i?(this.go_to(l,i),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(l,i),!1)},go_to:function(t,e){var i=this.grid.get("async");this.grid.set("async",!1);var s=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",s),e||(e=this.grid.get("url_base")+"?"+n.param(this.grid.get_url_data())),this.grid.set({operation:void 0,item_ids:void 0,async:i}),t){case"center":n("#galaxy_main").attr("src",e);break;case"top":window.top.location=e;break;default:window.location=e}},update_grid:function(){var t=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var e=this;n.ajax({type:t,url:e.grid.get("url_base"),data:e.grid.get_url_data(),error:function(t){alert("Grid refresh failed")},success:function(t){var i=e.grid.get("embedded"),s=e.grid.get("insert"),a=e.$el.find("#advanced-search").is(":visible"),l=e.dict_format?t:n.parseJSON(t);l.embedded=i,l.insert=s,l.advanced_search=a,e.init_grid(l),e.$el.find(".loading-elt-overlay").hide()},complete:function(){e.grid.set({operation:void 0,item_ids:void 0})}})}})}.apply(e,o))&&(t.exports=r)}).call(e,i(0),i(1),i(0),i(2))},17:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(10)],void 0!==(o=function(t,e){return{View:s.View.extend({initialize:function(e){var i=this;this.data=[],this.data2=[],this.model=e&&e.model||new s.Model({id:t.uid(),cls:"ui-select",error_text:"No options available",empty_text:"Nothing selected",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1,disabled:!1,readonly:!1,onchange:function(){},value:null,individual:!1,pagesize:20}).set(e),this.on("change",function(){i.model.get("onchange")&&i.model.get("onchange")(i.value())}),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:disabled",this._changeDisabled,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:multiple change:searchable change:cls change:id",this.render,this),this.render()},render:function(){var t=this;this.model.get("searchable")?this._renderSearchable():this._renderClassic(),this.$el.addClass(this.model.get("cls")).attr("id",this.model.get("id")),this.$select.empty().addClass("select").attr("id",this.model.get("id")+"_select").prop("multiple",this.model.get("multiple")).on("change",function(){t.value(t._getValue()),t.trigger("change")}),this._changeData(),this._changeWait(),this._changeVisible(),this._changeDisabled()},_renderClassic:function(){var t=this;this.$el.addClass(this.model.get("multiple")?"ui-select-multiple":"ui-select").append(this.$select=a("<select/>")).append(this.$dropdown=a("<div/>")).append(this.$resize=a("<div/>").append(this.$resize_icon=a("<i/>"))),this.model.get("multiple")?(this.$dropdown.hide(),this.$resize_icon.addClass("fa fa-angle-double-right fa-rotate-45").show(),this.$resize.removeClass().addClass("icon-resize").show().off("mousedown").on("mousedown",function(e){var i=e.pageY,s=t.$select.height();t.minHeight=t.minHeight||s,a("#dd-helper").show().on("mousemove",function(e){t.$select.height(Math.max(s+(e.pageY-i),t.minHeight))}).on("mouseup mouseleave",function(){a("#dd-helper").hide().off()})})):(this.$dropdown.show(),this.$resize.hide(),this.$resize_icon.hide())},_renderSearchable:function(){var t=this;this.$el.append(this.$select=a("<div/>")).append(this.$dropdown=a("<div/>")),this.$dropdown.hide(),this.model.get("multiple")||this.$dropdown.show().on("click",function(){t.$select.select2&&t.$select.select2("open")}),this.all_button=null,!this.model.get("multiple")||this.model.get("individual")||this.model.get("readonly")||(this.all_button=new e.ButtonCheck({onclick:function(){var e=[];0!==t.all_button.value()&&n.each(t.model.get("data"),function(t){e.push(t.value)}),t.value(e),t.trigger("change")}}),this.$el.prepend(this.all_button.$el))},_match:function(t,e){return!t||""==t||String(e).toUpperCase().indexOf(t.toUpperCase())>=0},_changeData:function(){var t=this;this.data=[],!this.model.get("multiple")&&this.model.get("optional")&&this.data.push({value:"__null__",label:t.model.get("empty_text")}),n.each(this.model.get("data"),function(e){t.data.push(e)}),0==this.length()&&this.data.push({value:"__null__",label:this.model.get("error_text")}),this.model.get("searchable")?(this.data2=[],n.each(this.data,function(e,i){t.data2.push({order:i,id:e.value,text:e.label,tags:e.tags})}),this.$select.data("select2")&&this.$select.select2("destroy"),this.matched_tags={},this.$select.select2({data:t.data2,closeOnSelect:!this.model.get("multiple"),multiple:this.model.get("multiple"),query:function(e){t.matched_tags={};var i=t.model.get("pagesize"),s=n.filter(t.data2,function(i){var s=!1;return n.each(i.tags,function(i){t._match(e.term,i)&&(s=t.matched_tags[i]=!0)}),s||t._match(e.term,i.text)});e.callback({results:s.slice((e.page-1)*i,e.page*i),more:s.length>=e.page*i})},formatResult:function(e){return n.escape(e.text)+'<div class="ui-tags">'+n.reduce(e.tags,function(e,i){return t.matched_tags[i]?e+'&nbsp;<div class="label label-info">'+n.escape(i)+"</div>":e},"")+"</div>"}}),this.$(".select2-container .select2-search input").off("blur")):(this.$select.find("option").remove(),n.each(this.data,function(e){t.$select.append(a("<option/>").attr("value",e.value).html(n.escape(e.label)))})),this.model.set("disabled",this.model.get("readonly")||0==this.length()),this._changeValue()},_changeDisabled:function(){this.model.get("searchable")?this.$select.select2(this.model.get("disabled")?"disable":"enable"):this.$select.prop("disabled",this.model.get("disabled"))},_changeWait:function(){this.$dropdown.removeClass().addClass("icon-dropdown fa").addClass(this.model.get("wait")?"fa-spinner fa-spin":"fa-caret-down")},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"](),this.$select[this.model.get("visible")?"show":"hide"]()},_changeValue:function(){if(this._setValue(this.model.get("value")),this.model.get("multiple")){if(this.all_button){var t=this._getValue();this.all_button.value(a.isArray(t)?t.length:0,this.length())}}else null!==this._getValue()||this.model.get("optional")||this._setValue(this.first())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){return this.data.length>0?this.data[0].value:null},exists:function(t){return n.findWhere(this.data,{value:t})},text:function(){var t=this._getValue(),e=this.exists(a.isArray(t)?t[0]:t);return e?e.label:""},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},disabled:function(){return this.model.get("disabled")},enable:function(){this.model.set("disabled",!1)},disable:function(){this.model.set("disabled",!0)},add:function(t,e){n.each(this.model.get("data"),function(e){e.keep&&!n.findWhere(t,{value:e.value})&&t.push(e)}),e&&t&&t.sort(e),this.model.set("data",t)},update:function(t){this.model.set("data",t)},setOnChange:function(t){this.model.set("onchange",t)},length:function(){return a.isArray(this.model.get("data"))?this.model.get("data").length:0},_setValue:function(t){var e=this;if(null!==t&&void 0!==t||(t="__null__"),this.model.get("multiple")?t=a.isArray(t)?t:[t]:a.isArray(t)&&(t=t.length>0?t[0]:"__null__"),this.model.get("searchable")){if(a.isArray(t)){var i=[];n.each(t,function(t){var s=n.findWhere(e.data2,{id:t});s&&i.push(s)}),t=i}else{t=n.findWhere(this.data2,{id:t})}this.$select.select2("data",t)}else this.$select.val(t)},_getValue:function(){var e=null;if(this.model.get("searchable")){var i=this.$select.select2("data");i&&(a.isArray(i)?(e=[],i.sort(function(t,e){return t.order-e.order}),n.each(i,function(t){e.push(t.id)})):e=i.id)}else e=this.$select.val();return t.isEmpty(e)?null:e}})}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2))},18:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(10)],void 0!==(o=function(t,e){var i=s.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new s.Model({visible:!0,data:[],id:t.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(e),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.on("change",function(){i.model.get("onchange")(i.value())}),this.render()},render:function(){var t=this;this.$el.empty().removeClass().addClass("ui-options").append(this.$message=a("<div/>")).append(this.$menu=a("<div/>").addClass("ui-options-menu")).append(this.$options=a(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new e.ButtonCheck({onclick:function(){t.$("input").prop("checked",0!==t.all_button.value()),t.value(t._getValue()),t.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(t){this.model.set("data",t)},_changeData:function(){var t=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):n.each(this.model.get("data"),function(e){t.$options.append(a(t._templateOption(e)).addClass("ui-option").tooltip({title:e.tooltip,placement:"bottom"}))});var t=this;this.$("input").on("change",function(){t.value(t._getValue()),t.trigger("change")}),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value(a.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){var t=this.$("input").first();return t.length>0?t.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},_setValue:function(t){var e=this;if(void 0!==t&&(this.$("input").prop("checked",!1),null!==t)){var i=a.isArray(t)?t:[t];n.each(i,function(t){e.$('input[value="'+t+'"]').first().prop("checked",!0)})}},_getValue:function(){var e=[];return this.$(":checked").each(function(){e.push(a(this).val())}),t.isEmpty(e)?null:this.model.get("multiple")?e:e[0]},_messageShow:function(t,e){this.$message.show().removeClass().addClass("ui-message alert alert-"+e).html(t)},_template:function(){return a("<div/>").addClass("ui-options-list")}}),l=i.extend({_templateOption:function(e){var i=t.uid();return a("<div/>").addClass("ui-option").append(a("<input/>").attr({id:i,type:this.model.get("type"),name:this.model.id,value:e.value})).append(a("<label/>").addClass("ui-options-label").attr("for",i).html(e.label))}}),o={};o.View=l.extend({initialize:function(t){t.type="radio",l.prototype.initialize.call(this,t)}});var r={};r.View=l.extend({initialize:function(t){t.type="checkbox",t.multiple=!0,l.prototype.initialize.call(this,t)}});var d={};return d.View=i.extend({initialize:function(t){i.prototype.initialize.call(this,t)},_setValue:function(t){void 0!==t&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'+t+'"]').prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(t){var e=a("<label/>").addClass("btn btn-default");return t.icon&&e.append(a("<i/>").addClass("fa").addClass(t.icon).addClass(!t.label&&"no-padding")),e.append(a("<input/>").attr({type:"radio",name:this.model.id,value:t.value})),t.label&&e.append(t.label),e},_template:function(){return a("<div/>").addClass("btn-group ui-radiobutton").attr("data-toggle","buttons")}}),{Base:i,BaseIcons:l,Radio:o,RadioButton:d,Checkbox:r}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2))},19:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3),i(8),i(5)],void 0!==(l=function(t,e,i){return{View:s.View.extend({initialize:function(t){var s=this;this.options=t,this.name=t.name||"element",this.multiple=t.multiple||!1,this.message=new i.Message,this.portlet=new e.View({cls:"ui-portlet-section"}),this.select=new i.Select.View({optional:t.optional}),this.button=new i.ButtonIcon({icon:"fa fa-sign-in",tooltip:"Insert new "+this.name,onclick:function(){s.add({id:s.select.value(),name:s.select.text()})}}),this.setElement(this._template(t)),this.$(".ui-list-message").append(this.message.$el),this.$(".ui-list-portlet").append(this.portlet.$el),this.$(".ui-list-button").append(this.button.$el),this.$(".ui-list-select").append(this.select.$el)},value:function(t){if(void 0!==t){if(this.portlet.empty(),a.isArray(t))for(var e in t){var i=t[e],s=null,n=null;"string"!=a.type(i)?(s=i.id,n=i.name):s=n=i,null!=s&&this.add({id:s,name:n})}this._refresh()}var l=[];return this.$(".ui-list-id").each(function(){l.push({id:a(this).prop("id"),name:a(this).find(".ui-list-name").html()})}),0==l.length?null:l},add:function(e){var i=this;if(0===this.$('[id="'+e.id+'"]').length)if(t.isEmpty(e.id))this.message.update({message:"Please select a valid "+this.name+".",status:"danger"});else{var s=a(this._templateRow({id:e.id,name:e.name}));s.on("click",function(){s.remove(),i._refresh()}),s.on("mouseover",function(){s.addClass("portlet-highlight")}),s.on("mouseout",function(){s.removeClass("portlet-highlight")}),this.portlet.append(s),this._refresh()}else this.message.update({message:"This "+this.name+" is already in the list."})},update:function(t){this.select.update(t)},_refresh:function(){this.$(".ui-list-id").length>0?(!this.multiple&&this.button.disable(),this.$(".ui-list-portlet").show()):(this.button.enable(),this.$(".ui-list-portlet").hide()),this.options.onchange&&this.options.onchange()},_template:function(t){return'<div class="ui-list"><div class="ui-margin-top"><span class="ui-list-button"/><span class="ui-list-select"/></div><div class="ui-list-message"/><div class="ui-list-portlet"/></div>'},_templateRow:function(t){return'<div id="'+t.id+'" class="ui-list-id"><span class="ui-list-delete fa fa-trash"/><span class="ui-list-name">'+t.name+"</span></div>"}})}}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0))},20:function(t,e,i){"use strict";(function(i,s,a,n){var l,o;l=[],void 0!==(o=function(){var t=i.View.extend({initialize:function(t,e){this.$button=t,this.$button.length||(this.$button=s("<div/>")),this.options=e||[],this.$button.data("popupmenu",this);var i=this;this.$button.click(function(t){return s(".popmenu-wrapper").remove(),i._renderAndShow(t),!1})},_renderAndShow:function(t){this.render(),this.$el.appendTo("body").css(this._getShownPosition(t)).show(),this._setUpCloseBehavior()},render:function(){if(this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length){var t=this;this.$el.find("li").each(function(e,i){var a=t.options[e];a.func&&s(this).children("a.popupmenu-option").click(function(e){a.func.call(t,e,a),e.preventDefault()})})}return this},template:function(t,e){return['<ul id="',t,'-menu" class="dropdown-menu">',this._templateOptions(e),"</ul>"].join("")},_templateOptions:function(t){return t.length?a.map(t,function(t){return t.divider?'<li class="divider"></li>':t.header?['<li class="head"><a href="javascript:void(0);">',t.html,"</a></li>"].join(""):['<li><a class="popupmenu-option" href="',t.href||"javascript:void(0);",'"',t.target?' target="'+t.target+'"':"",">",t.checked?'<span class="fa fa-check"></span>':"",t.html,"</a></li>"].join("")}).join(""):"<li>(no options)</li>"},_getShownPosition:function(t){var e=this.$el.width(),i=t.pageX-e/2;return i=Math.min(i,s(document).scrollLeft()+s(window).width()-e-5),i=Math.max(i,s(document).scrollLeft()+5),{top:t.pageY,left:i}},_setUpCloseBehavior:function(){function t(t){if(s(document).off("click.close_popup"),window&&window.parent!==window)try{s(window.parent.document).off("click.close_popup")}catch(t){}else try{s("iframe#galaxy_main").contents().off("click.close_popup")}catch(t){}e.remove()}var e=this;if(s("html").one("click.close_popup",t),window&&window.parent!==window)try{s(window.parent.document).find("html").one("click.close_popup",t)}catch(t){}else try{s("iframe#galaxy_main").contents().one("click.close_popup",t)}catch(t){}},addItem:function(t,e){return e=e>=0?e:this.options.length,this.options.splice(e,0,t),this},removeItem:function(t){return t>=0&&this.options.splice(t,1),this},findIndexByHtml:function(t){for(var e=0;e<this.options.length;e++)if(a.has(this.options[e],"html")&&this.options[e].html===t)return e;return null},findItemByHtml:function(t){return this.options[this.findIndexByHtml(t)]},toString:function(){return"PopupMenu"}});return t.create=function(e,i){return new t(e,i)},t.make_popupmenu=function(e,i){var l=[];return a.each(i,function(t,e){var i={html:e};null===t?i.header=!0:"function"===n.type(t)&&(i.func=t),l.push(i)}),new t(s(e),l)},t.convertLinksToOptions=function(t,e){t=s(t),e=e||"a";var i=[];return t.find(e).each(function(t,e){var a={},n=s(t);if(a.html=n.text(),n.attr("href")){var l=n.attr("href"),o=n.attr("target"),r=n.attr("confirm");a.func=function(){if(!r||confirm(r))switch(o){case"_parent":window.parent.location=l;break;case"_top":window.top.location=l;break;default:window.location=l}}}i.push(a)}),i},t.fromExistingDom=function(e,i,a){e=s(e),i=s(i);var n=t.convertLinksToOptions(i,a);return i.remove(),new t(e,n)},t.make_popup_menus=function(e,i,a){e=e||document,i=i||"div[popupmenu]",a=a||function(t,e){return"#"+t.attr("popupmenu")};var n=[];return s(e).find(i).each(function(){var i=s(this),l=s(e).find(a(i,e));n.push(t.fromDom(l,i)),l.addClass("popup")}),n},t}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2),i(0))},22:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3)],void 0!==(l=function(t){return{View:s.View.extend({initialize:function(e){this.options=t.merge(e,{content:"No content available.",onchange:null,ondblclick:null,onconfirm:null,cls:"ui-table",selectable:!0,cls_tr:""}),this.setElement(this._template()),this.$thead=this.$("thead"),this.$tbody=this.$("tbody"),this.$tmessage=this.$("tmessage"),this.row=this._row(),this.row_count=0},events:{click:"_onclick",dblclick:"_ondblclick"},addHeader:function(t){this.row.append(a("<th/>").append(t))},appendHeader:function(){this.$thead.append(this.row),this.row=a("<tr/>")},add:function(t,e,i){var s=a("<td/>");e&&s.css("width",e),i&&s.css("text-align",i),this.row.append(s.append(t))},append:function(t,e){this._commit(t,e,!1)},prepend:function(t,e){this._commit(t,e,!0)},get:function(t){return this.$("#"+t)},del:function(t){var e=this.$tbody.find("#"+t);e.length>0&&(e.remove(),this.row_count--,this._refresh())},delAll:function(){this.$tbody.empty(),this.row_count=0,this._refresh()},value:function(t){if(this.options.selectable){this.before=this.$tbody.find(".current").attr("id"),void 0!==t&&(this.$tbody.find("tr").removeClass("current"),t&&this.$tbody.find("#"+t).addClass("current"));var e=this.$tbody.find(".current").attr("id");return void 0===e?null:(e!=this.before&&this.options.onchange&&this.options.onchange(t),e)}},size:function(){return this.$tbody.find("tr").length},_commit:function(t,e,i){this.del(t),this.row.attr("id",t),i?this.$tbody.prepend(this.row):this.$tbody.append(this.row),e&&(this.row.hide(),this.row.fadeIn()),this.row=this._row(),this.row_count++,this._refresh()},_row:function(){return a('<tr class="'+this.options.cls_tr+'"></tr>')},_onclick:function(t){var e=this.value(),i=a(t.target).closest("tr").attr("id");""!=i&&i&&e!=i&&(this.options.onconfirm?this.options.onconfirm(i):this.value(i))},_ondblclick:function(t){var e=this.value();e&&this.options.ondblclick&&this.options.ondblclick(e)},_refresh:function(){0==this.row_count?this.$tmessage.show():this.$tmessage.hide()},_template:function(){return'<div><table class="'+this.options.cls+'"><thead/><tbody/></table><tmessage>'+this.options.content+"</tmessage><div>"}})}}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0))},23:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3)],void 0!==(o=function(t){var e=s.Model.extend({initialize:function(t){this.app=t},checksum:function(){var t="",e=this;return this.app.section.$el.find(".section-row").each(function(){var i=a(this).attr("id"),s=e.app.field_list[i];s&&(t+=i+":"+JSON.stringify(s.value&&s.value())+":"+s.collapsed+";")}),t},create:function(){function t(t,e,i){s.flat_dict[t]=e,n[t]=i,s.app.element_list[e]&&s.app.element_list[e].$el.attr("tour_id",t)}function e(a,n){for(var l in n){var o=n[l];if(o.input){var r=o.input,d=a;switch(""!=a&&(d+="|"),d+=r.name,r.type){case"repeat":var c=[],h=null;for(var u in o){var p=u.indexOf("section-");-1!=p&&(p+="section-".length,c.push(parseInt(u.substr(p))),h||(h=u.substr(0,p)))}c.sort(function(t,e){return t-e});var l=0;for(var f in c)e(d+"_"+l++,o[h+c[f]]);break;case"conditional":var m=s.app.field_list[r.id].value();t(d+"|"+r.test_param.name,r.id,m);var g=i(r,m);-1!=g&&e(d,n[r.id+"-section-"+g]);break;case"section":e(!r.flat&&d||"",o);break;default:var _=s.app.field_list[r.id];if(_&&_.value){var m=_.value();if((void 0===r.ignore||r.ignore!=m)&&(_.collapsed&&r.collapsible_value&&(m=r.collapsible_value),t(d,r.id,m),r.payload))for(var v in r.payload)t(v,r.id,r.payload[v])}}}}}var s=this,a={};this._iterate(this.app.section.$el,a);var n={};return this.flat_dict={},e("",a),n},match:function(t){return this.flat_dict&&this.flat_dict[t]},matchCase:function(t,e){return i(t,e)},matchModel:function(t,e){var i=this;l(t.inputs,function(t,s){i.flat_dict[s]&&e(t,i.flat_dict[s])})},matchResponse:function(t){function e(t,a){if("string"==typeof a){var n=s.flat_dict[t];n&&(i[n]=a)}else for(var l in a){var o=l;if(""!==t){var r="|";a instanceof Array&&(r="_"),o=t+r+o}e(o,a[l])}}var i={},s=this;return e("",t),i},_iterate:function(t,e){var i=this;a(t).children().each(function(){var t=this,s=a(t).attr("id");if(a(t).hasClass("section-row")){var n=i.app.input_list[s];e[s]=n&&{input:n}||{},i._iterate(t,e[s])}else i._iterate(t,e)})}}),i=function(t,e){"boolean"==t.test_param.type&&(e="true"==e?t.test_param.truevalue||"true":t.test_param.falsevalue||"false");for(var i in t.cases)if(t.cases[i].value==e)return i;return-1},l=function t(e,s,l,o){o=a.extend(!0,{},o),n.each(e,function(t){t&&t.type&&t.name&&(o[t.name]=t)});for(var r in e){var d=e[r];d.name=d.name||r;var c=l?l+"|"+d.name:d.name;switch(d.type){case"repeat":n.each(d.cache,function(e,i){t(e,s,c+"_"+i,o)});break;case"conditional":if(d.test_param){s(d.test_param,c+"|"+d.test_param.name,o);var h=i(d,d.test_param.value);-1!=h?t(d.cases[h].inputs,s,c,o):Galaxy.emit.debug("form-data::visitInputs() - Invalid case for "+c+".")}else Galaxy.emit.debug("form-data::visitInputs() - Conditional test parameter missing for "+c+".");break;case"section":t(d.inputs,s,c,o);break;default:s(d,c,o)}}};return{Manager:e,visitInputs:l}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2))},27:function(t,e,i){"use strict";(function(i,s,a){var n,l;n=[],void 0!==(l=function(){return i.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(t){return-1!==s.indexOf(this.attributes.async_ops,t)},add_filter:function(t,e,i){if(i){var s,a=this.attributes.filters[t];if(null===a||void 0===a)s=e;else if("string"==typeof a)if("All"==a||a==e)s=e;else{var n=[];n[0]=a,n[1]=e,s=n}else s=a,-1===s.indexOf(e)&&s.push(e);this.attributes.filters[t]=s}else this.attributes.filters[t]=e},remove_filter:function(t,e){var i=this.attributes.filters[t];if(null===i||void 0===i)return!1;if("string"==typeof i)this.attributes.filters[t]="";else{var a=s.indexOf(i,e);-1!==a&&(i[a]="")}},get_url_data:function(){var t={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(t.operation=this.attributes.operation),this.attributes.item_ids&&(t.id=this.attributes.item_ids);var e=this;return s.each(s.pairs(e.attributes.filters),function(e){t["f-"+e[0]]=e[1]}),t},get_url:function(t){return this.get("url_base")+"?"+a.param(this.get_url_data())+"&"+a.param(t)}})}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(2),i(0))},28:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3)],void 0!==(l=function(t){return{grid:function(t){var e="";return e=t.embedded?this.grid_header(t)+this.grid_table(t):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'+this.grid_header(t)+'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>'+this.grid_table(t),t.info_text&&(e+='<br><div class="toolParamHelp" style="clear: both;">'+t.info_text+"</div>"),e},grid_table:function(t){return'<form method="post" onsubmit="return false;"><table id="grid-table" class="grid"><thead id="grid-table-header"></thead><tbody id="grid-table-body"></tbody><tfoot id="grid-table-footer"></tfoot></table></form>'},grid_header:function(t){var e='<div class="grid-header">';if(t.embedded||(e+="<h2>"+t.title+"</h2>"),t.global_actions){e+='<ul class="manage-table-actions">';var i=t.global_actions.length>=3;i&&(e+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');for(var s in t.global_actions){var a=t.global_actions[s];e+='<li><a class="action-button use-target" target="'+a.target+'" href="'+a.url_args+'" onclick="return false;" >'+a.label+"</a></li>"}i&&(e+="</div>"),e+="</ul>"}return t.insert&&(e+=t.insert),e+=this.grid_filters(t),e+="</div>"},header:function(t){var e="<tr>";t.show_item_checkboxes&&(e+="<th>",t.items.length>0&&(e+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),e+="</th>");for(var i in t.columns){var s=t.columns[i];s.visible&&(e+='<th id="'+s.key+'-header">',s.href?e+='<a href="'+s.href+'" class="sort-link" sort_key="'+s.key+'">'+s.label+"</a>":e+=s.label,e+='<span class="sort-arrow">'+s.extra+"</span></th>")}return e+="</tr>"},body:function(t){var e="",i=0;0==t.items.length&&(e+='<tr><td colspan="100"><em>No Items</em></td></tr>',i=1);for(var a in t.items){var n=t.items[a],l=n.encode_id;e+="<tr ",t.current_item_id==n.id&&(e+='class="current"'),e+=">",t.show_item_checkboxes&&(e+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'+l+'" id="'+l+'" class="grid-row-select-checkbox" /></td>');for(var o in t.columns){var r=t.columns[o];if(r.visible){var d="";r.nowrap&&(d='style="white-space:nowrap;"');var c=n.column_config[r.label],h=c.link,u=c.value,p=c.target;"string"===s.type(u)&&(u=u.replace(/\/\//g,"/"));var f="",m="";r.attach_popup&&(f="grid-"+a+"-popup",m="menubutton",""!=h&&(m+=" split"),m+=" popup"),e+="<td "+d+">",h?(0!=t.operations.length&&(e+='<div id="'+f+'" class="'+m+'" style="float: left;">'),e+='<a class="menubutton-label use-target" target="'+p+'" href="'+h+'" onclick="return false;">'+u+"</a>",0!=t.operations.length&&(e+="</div>")):e+='<div id="'+f+'" class="'+m+'"><label id="'+r.label_id_prefix+l+'" for="'+l+'">'+(u||"")+"</label></div>",e+="</td>"}}e+="</tr>",i++}return e},footer:function(t){var e="";if(t.use_paging&&t.num_pages>1){var i=t.num_page_links,s=t.cur_page_num,a=t.num_pages,n=i/2,l=s-n,o=0;l<=0&&(l=1,o=n-(s-l));var r,d=n+o,c=s+d;c<=a?r=0:(c=a,r=d-(c+1-s)),0!=r&&(l-=r)<1&&(l=1),e+='<tr id="page-links-row">',t.show_item_checkboxes&&(e+="<td></td>"),e+='<td colspan="100"><span id="page-link-container">Page:',l>1&&(e+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var h=l;h<c+1;h++)h==t.cur_page_num?e+='<span class="page-link inactive-link" id="page-link-'+h+'">'+h+"</span>":e+='<span class="page-link" id="page-link-'+h+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+h+'">'+h+"</a></span>";c<a&&(e+='...<span class="page-link" id="page-link-'+a+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+a+'">'+a+"</a></span>"),e+="</span>",e+='<span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span></td></tr>'}if(t.show_item_checkboxes){e+='<tr><input type="hidden" id="operation" name="operation" value=""><td></td><td colspan="100">For <span class="grid-selected-count"></span> selected items: ';for(var u in t.operations){var p=t.operations[u];p.allow_multiple&&(e+='<input type="button" value="'+p.label+'" class="operation-button action-button">&nbsp;')}e+="</td></tr>"}var f=!1;for(u in t.operations)if(t.operations[u].global_operation){f=!0;break}if(f){e+='<tr><td colspan="100">';for(u in t.operations){var p=t.operations[u];p.global_operation&&(e+='<a class="action-button" href="'+p.global_operation+'">'+p.label+"</a>")}e+="</td></tr>"}return t.legend&&(e+='<tr><td colspan="100">'+t.legend+"</td></tr>"),e},message:function(t){return'<p><div class="'+("success"==t.status?"done":t.status)+'message transient-message">'+a.escape(t.message)+'</div><div style="clear: both"></div></p>'},grid_filters:function(t){var e=t.default_filter_dict,i=t.filters,s="none";t.advanced_search&&(s="block");var a=!1;for(var n in t.columns){var l=t.columns[n];if("advanced"==l.filterable){var o=l.key,r=i[o],d=e[o];r&&d&&r!=d&&(s="block"),a=!0}}var c="block";"block"==s&&(c="none");var h='<div id="standard-search" style="display: '+c+';"><table><tr><td style="padding: 0;"><table>';for(var n in t.columns){var l=t.columns[n];"standard"==l.filterable&&(h+=this.grid_column_filter(t,l))}h+="</table></td></tr><tr><td>",a&&(h+='<a href="" class="advanced-search-toggle">Advanced Search</a>'),h+="</td></tr></table></div>",h+='<div id="advanced-search" style="display: '+s+'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="" class="advanced-search-toggle">Close Advanced Search</a></td></tr>';for(var n in t.columns){var l=t.columns[n];"advanced"==l.filterable&&(h+=this.grid_column_filter(t,l))}return h+="</table></div>"},grid_column_filter:function(t,e){var i=(t.default_filter_dict,t.filters),a=e.label,n=e.key;"advanced"==e.filterable&&(a=a.toLowerCase());var l="<tr>";if("advanced"==e.filterable&&(l+='<td align="left" style="padding-left: 10px">'+a+":</td>"),l+='<td style="padding-bottom: 1px;">',e.is_text){l+='<form class="text-filter-form" column_key="'+n+'" action="'+t.url+'" method="get" >';for(h in t.columns){var o=t.columns[h],r=i[o.key];r&&"All"!=r&&(o.is_text&&(r=JSON.stringify(r)),l+='<input type="hidden" id="'+o.key+'" name="f-'+o.key+'" value="'+r+'"/>')}l+='<span id="'+n+'-filtering-criteria">';var d=i[n];if(d){var c=s.type(d);if("string"==c&&"All"!=d&&(l+=this.filter_element(n,d)),"array"==c)for(var h in d){var u=d[h],p=d;p=p.slice(h),l+=this.filter_element(n,u)}}l+="</span>";var f="";if("standard"==e.filterable){f=e.label.toLowerCase();var m=f.length;m<20&&(m=20),m+=4}l+='<span class="search-box"><input class="search-box-input" id="input-'+n+'-filter" name="f-'+n+'" type="text" placeholder="'+f+'" size="'+m+'"/><button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;"><i class="fa fa-search"></i></button></span></form>'}else{l+='<span id="'+n+'-filtering-criteria">';var g=!1;for(var _ in t.categorical_filters[n]){var v=t.categorical_filters[n][_],b="",w="";for(var $ in v)b=$,w=v[$];g&&(l+=" | "),g=!0;var u=i[n];u&&v[n]&&u==w?l+='<span class="categorical-filter '+n+'-filter current-filter">'+_+"</span>":l+='<span class="categorical-filter '+n+'-filter"><a href="javascript:void(0);" filter_key="'+b+'" filter_val="'+w+'">'+_+"</a></span>"}l+="</span>"}return l+="</td></tr>"},filter_element:function(e,i){return'<span class="text-filter-val">'+(i=t.sanitize(i))+'<a href="javascript:void(0);" filter_key="'+e+'" filter_val="'+i+'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>'}}}.apply(e,n))&&(t.exports=l)}).call(e,i(0),i(2))},29:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3)],void 0!==(l=function(t){return{View:s.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new s.Model({id:t.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var n=[];this.$text.on("change",function(){i.value(a(this).val())}).on("keyup",function(t){n[t.which]=!1}).on("keydown",function(t){var e=t.which;n[e]=!0,i.model.get("is_workflow")&&n[16]&&52==e?(i.value("$"),event.preventDefault()):8==e||9==e||13==e||37==e||39==e||e>=48&&e<=57&&!n[16]||e>=96&&e<=105||(190==e||110==e)&&-1==a(this).val().indexOf(".")&&i.model.get("precise")||(189==e||109==e)&&-1==a(this).val().indexOf("-")||i._isParameter(a(this).val())||n[91]||n[17]||event.preventDefault()});var l=this.model.attributes;this.has_slider=null!==l.max&&null!==l.min&&l.max>l.min;var o=l.step;o||(o=l.precise&&this.has_slider?(l.max-l.min)/l.split:1),this.has_slider?(this.$text.addClass("ui-form-slider-left"),this.$slider.slider({min:l.min,max:l.max,step:o}).on("slide",function(t,e){i.value(e.value)})):this.$slider.hide(),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.get("value");this.has_slider&&this.$slider.slider("value",t),t!==this.$text.val()&&this.$text.val(t)},value:function(t){var e=this.model.attributes;return void 0!==t&&(null===t||""===t||this._isParameter(t)||(isNaN(t)&&(t=0),!e.precise&&(t=Math.round(t)),null!==e.max&&(t=Math.min(t,e.max)),null!==e.min&&(t=Math.max(t,e.min))),this.model.set("value",t),this.model.trigger("change"),e.onchange(t)),this.model.get("value")},_isParameter:function(t){return this.model.get("is_workflow")&&"$"===String(t).substring(0,1)},_template:function(){return'<div class="ui-form-slider"><input class="ui-form-slider-text" type="text"/><div class="ui-form-slider-element"/></div>'}})}}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0))},30:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3),i(18)],void 0!==(l=function(t,e){return{View:e.BaseIcons.extend({initialize:function(t){t.type=t.display||"checkbox",t.multiple="checkbox"==t.type,e.BaseIcons.prototype.initialize.call(this,t)},_setValue:function(t){if(e.BaseIcons.prototype._setValue.call(this,t),void 0!==t&&null!==t&&this.header_index){var i=this,n=s.isArray(t)?t:[t];a.each(n,function(t){var e=i.header_index[t];a.each(e,function(t){i._setState(t,!0)})})}},_setState:function(t,e){var i=this.$(".button-"+t),s=this.$(".subgroup-"+t);i.data("is_expanded",e),e?(s.show(),i.removeClass("fa-plus-square").addClass("fa-minus-square")):(s.hide(),i.removeClass("fa-minus-square").addClass("fa-plus-square"))},_templateOptions:function(){function e(t,e){var i=t.find(".button-"+e);i.on("click",function(){a._setState(e,!i.data("is_expanded"))})}function i(n,l,o){o=o||[];for(var r in l){var d=l[r],c=d.options&&d.options.length>0,h=o.slice(0);a.header_index[d.value]=h.slice(0);var u=s("<div/>");if(c){var p=t.uid(),f=s("<span/>").addClass("button-"+p).addClass("ui-drilldown-button fa fa-plus-square"),m=s("<div/>").addClass("subgroup-"+p).addClass("ui-drilldown-subgroup");u.append(s("<div/>").append(f).append(a._templateOption({label:d.name,value:d.value}))),h.push(p),i(m,d.options,h),u.append(m),e(u,p)}else u.append(a._templateOption({label:d.name,value:d.value}));n.append(u)}}var a=this;this.header_index={};var n=s("<div/>");return i(n,this.model.get("data")),n},_template:function(){return s("<div/>").addClass("ui-options-list drilldown-container").attr("id",this.model.id)}})}}.apply(e,n))&&(t.exports=l)}).call(e,i(0),i(2))},31:function(t,e,i){"use strict";(function(s,a,n,l){var o,r;o=[i(3),i(5),i(8),i(32),i(33),i(34)],void 0!==(r=function(t,e,i,o,r,d){var c=s.View.extend({initialize:function(t,e){this.app=t,this.inputs=e.inputs,this.parameters=new d,this.setElement(a("<div/>")),this.render()},render:function(){var t=this;this.$el.empty(),n.each(this.inputs,function(e){t.add(e)})},add:function(e){var i=l.extend(!0,{},e);switch(i.id=e.id=t.uid(),this.app.input_list[i.id]=i,i.type){case"conditional":this._addConditional(i);break;case"repeat":this._addRepeat(i);break;case"section":this._addSection(i);break;default:this._addRow(i)}},_addConditional:function(t){var e=this;t.test_param.id=t.id,this.app.model.get("sustain_conditionals")&&(t.test_param.disabled=!0);var i=this._addRow(t.test_param);i.model&&i.model.set("onchange",function(i){var s=e.app.data.matchCase(t,i);for(var a in t.cases){var n=t.cases[a],l=e.$("#"+t.id+"-section-"+a),o=!1;for(var r in n.inputs)if(!n.inputs[r].hidden){o=!0;break}a==s&&o?l.fadeIn("fast"):l.hide()}e.app.trigger("change")});for(var s in t.cases){var a=new c(this.app,{inputs:t.cases[s].inputs});this._append(a.$el.addClass("ui-form-section"),t.id+"-section-"+s)}i.trigger("change")},_addRepeat:function(t){function e(e){var n=t.id+"-section-"+s++,l=new c(i.app,{inputs:e});a.add({id:n,$el:l.$el,ondel:function(){a.del(n),i.app.trigger("change")}})}for(var i=this,s=0,a=new o.View({title:t.title||"Repeat",min:t.min,max:t.max,onnew:function(){e(t.inputs),i.app.trigger("change")}}),l=n.size(t.cache),d=0;d<Math.max(Math.max(l,t.min||0),t.default||0);d++)e(d<l?t.cache[d]:t.inputs);this.app.model.get("sustain_repeats")&&a.hideOptions();var h=new r(this.app,{label:t.title||t.name,help:t.help,field:a});this._append(h.$el,t.id)},_addSection:function(t){var e=new i.View({title:t.title||t.name,cls:"ui-portlet-section",collapsible:!0,collapsible_button:!0,collapsed:!t.expanded});e.append(new c(this.app,{inputs:t.inputs}).$el),e.append(a("<div/>").addClass("ui-form-info").html(t.help)),this.app.on("expand",function(t){e.$("#"+t).length>0&&e.expand()}),this._append(e.$el,t.id)},_addRow:function(t){var e=this,i=t.id;t.onchange=t.onchange||function(){e.app.trigger("change",i)};var s=this.parameters.create(t);this.app.field_list[i]=s;var a=new r(this.app,{name:t.name,label:t.hide_label?"":t.label||t.name,value:t.value,text_value:t.text_value,collapsible_value:t.collapsible_value,collapsible_preview:t.collapsible_preview,help:t.help,argument:t.argument,disabled:t.disabled,color:t.color,style:t.style,backdrop:t.backdrop,hidden:t.hidden,fixed:t.fixed,field:s});return this.app.element_list[i]=a,this._append(a.$el,t.id),s},_append:function(t,e){this.$el.append(t.addClass("section-row").attr("id",e))}});return{View:c}}.apply(e,o))&&(t.exports=r)}).call(e,i(1),i(0),i(2),i(0))},32:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(8),i(5)],void 0!==(o=function(t,e,i){return{View:s.View.extend({initialize:function(e){this.list={},this.options=t.merge(e,{title:"Repeat",empty_text:"Not available.",max:null,min:null}),this.button_new=new i.ButtonIcon({icon:"fa-plus",title:"Insert "+this.options.title,tooltip:"Add new "+this.options.title+" block",cls:"ui-button-icon ui-clear-float form-repeat-add",onclick:function(){e.onnew&&e.onnew()}}),this.setElement(a("<div/>").append(this.$list=a("<div/>")).append(a("<div/>").append(this.button_new.$el)))},size:function(){return n.size(this.list)},add:function(t){if(!t.id||this.list[t.id])return void Galaxy.emit.debug("form-repeat::add()","Duplicate or invalid repeat block id.");var s=new i.ButtonIcon({icon:"fa-trash-o",tooltip:"Delete this repeat block",cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){t.ondel&&t.ondel()}}),a=new e.View({id:t.id,title:"placeholder",cls:t.cls||"ui-portlet-repeat",operations:{button_delete:s}});a.append(t.$el),a.$el.addClass("section-row").hide(),this.list[t.id]=a,this.$list.append(a.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()},del:function(t){if(!this.list[t])return void Galaxy.emit.debug("form-repeat::del()","Invalid repeat block id.");this.$list.find("#"+t).remove(),delete this.list[t],this.button_new.enable(),this._refresh()},delAll:function(){for(var t in this.list)this.del(t)},hideOptions:function(){this.button_new.$el.hide(),n.each(this.list,function(t){t.hideOperation("button_delete")}),n.isEmpty(this.list)&&this.$el.append(a("<div/>").addClass("ui-form-info").html(this.options.empty_text))},_refresh:function(){var t=0;for(var e in this.list){var i=this.list[e];i.title(++t+": "+this.options.title),i[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}})}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2))},33:function(t,e,i){"use strict";(function(i,s,a){var n,l;n=[],void 0!==(l=function(){return i.View.extend({initialize:function(t,e){this.app=t,this.app_options=t.model?t.model.attributes:{},this.field=e&&e.field||new i.View,this.model=e&&e.model||new i.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(e),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var s=this.model.get("collapsible_value");this.field.collapsed=void 0!==s&&JSON.stringify(this.model.get("value"))==JSON.stringify(s),this.listenTo(this.model,"change",this.render,this),this.render();var a=this;this.$collapsible.on("click",function(){a.field.collapsed=!a.field.collapsed,t.trigger&&t.trigger("change"),a.render()}),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",function(){a.reset()})},backdrop:function(){this.model.set("backdrop",!0)},error:function(t){this.model.set("error_text",t)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){s(".tooltip").hide();var t=this.model.get("help",""),e=this.model.get("argument");e&&-1==t.indexOf("("+e+")")&&(t+=" ("+e+")"),this.$info.html(t),this.$el[this.model.get("hidden")?"hide":"show"](),this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(a.escape(this.model.get("text_value")));var i=this.model.get("error_text");if(this.$error[i?"show":"hide"](),this.$el[i?"addClass":"removeClass"]("ui-error"),this.$error_text.html(i),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")}),this.model.get("disabled")||void 0===this.model.get("collapsible_value"))this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide();else{var n=this.field.collapsed?"enable":"disable";this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),this.$collapsible_icon.removeClass().addClass("icon").addClass(this.model.get("cls_"+n)).attr("data-original-title",this.model.get("text_"+n)).tooltip({placement:"bottom"})}},_template:function(){return s("<div/>").addClass("ui-form-element").append(s("<div/>").addClass("ui-form-error ui-error").append(s("<span/>").addClass("fa fa-arrow-down")).append(s("<span/>").addClass("ui-form-error-text"))).append(s("<div/>").addClass("ui-form-title").append(s("<div/>").addClass("ui-form-collapsible").append(s("<i/>").addClass("ui-form-collapsible-icon")).append(s("<span/>").addClass("ui-form-collapsible-text"))).append(s("<span/>").addClass("ui-form-title-text"))).append(s("<div/>").addClass("ui-form-field").append(s("<span/>").addClass("ui-form-info")).append(s("<div/>").addClass("ui-form-backdrop"))).append(s("<div/>").addClass("ui-form-preview"))}})}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0),i(2))},34:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(5),i(35),i(36),i(37),i(38),i(40)],void 0!==(o=function(t,e,i,l,o,r,d){return s.Model.extend({types:{text:"_fieldText",password:"_fieldText",select:"_fieldSelect",data_column:"_fieldSelect",genomebuild:"_fieldSelect",data:"_fieldData",data_collection:"_fieldData",integer:"_fieldSlider",float:"_fieldSlider",boolean:"_fieldBoolean",drill_down:"_fieldDrilldown",color:"_fieldColor",hidden:"_fieldHidden",hidden_data:"_fieldHidden",baseurl:"_fieldHidden",library_data:"_fieldLibrary",ftpfile:"_fieldFtp",upload:"_fieldUpload",genomespacefile:"_fieldGenomeSpace"},create:function(t){var e=this.types[t.type],i="function"==typeof this[e]?this[e].call(this,t):null;return i||(i=t.options?this._fieldSelect(t):this._fieldText(t),Galaxy.emit.debug("form-parameters::_addRow()","Auto matched field type ("+t.type+").")),void 0===t.value&&(t.value=null),i.value(t.value),i},_fieldData:function(t){return new i.View({id:"field-"+t.id,extensions:t.extensions,optional:t.optional,multiple:t.multiple,type:t.type,flavor:t.flavor,data:t.options,onchange:t.onchange})},_fieldSelect:function(t){if(t.is_workflow)return this._fieldText(t);"data_column"==t.type&&(t.error_text="Missing columns in referenced dataset.");var i=t.data;i||(i=[],a.each(t.options,function(t){i.push({label:t[0],value:t[1]})}));var s=e.Select;switch(t.display){case"checkboxes":s=e.Checkbox;break;case"radio":s=e.Radio;break;case"radiobutton":s=e.RadioButton}return new s.View({id:"field-"+t.id,data:i,error_text:t.error_text||"No options available",readonly:t.readonly,multiple:t.multiple,optional:t.optional,onchange:t.onchange,individual:t.individual,searchable:"workflow"!==t.flavor})},_fieldDrilldown:function(t){return t.is_workflow?this._fieldText(t):new e.Drilldown.View({id:"field-"+t.id,data:t.options,display:t.display,optional:t.optional,onchange:t.onchange})},_fieldText:function(i){if(i.options&&i.data)if(i.area=i.multiple,t.isEmpty(i.value))i.value=null;else if(n.isArray(i.value)){var s="";for(var a in i.value){if(s+=String(i.value[a]),!i.multiple)break;s+="\n"}i.value=s}return new e.Input({id:"field-"+i.id,type:i.type,area:i.area,readonly:i.readonly,placeholder:i.placeholder,datalist:i.datalist,onchange:i.onchange})},_fieldSlider:function(t){return new e.Slider.View({id:"field-"+t.id,precise:"float"==t.type,is_workflow:t.is_workflow,min:t.min,max:t.max,onchange:t.onchange})},_fieldHidden:function(t){return new e.Hidden({id:"field-"+t.id,info:t.info})},_fieldBoolean:function(t){return new e.RadioButton.View({id:"field-"+t.id,data:[{label:"Yes",value:"true"},{label:"No",value:"false"}],onchange:t.onchange})},_fieldColor:function(t){return new d({id:"field-"+t.id,onchange:t.onchange})},_fieldLibrary:function(t){return new l.View({id:"field-"+t.id,optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldFtp:function(t){return new o.View({id:"field-"+t.id,optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldGenomeSpace:function(t){var e=this;return new r.View({id:"field-"+t.id,onchange:function(){e.app.trigger("change")}})},_fieldUpload:function(t){return new e.Upload({id:"field-"+t.id,onchange:t.onchange})}})}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(2),i(0))},35:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(5),i(17)],void 0!==(o=function(t,e,i){var l={DISABLED:"disabled",ENABLED:"enabled",LINKED:"linked"},o={data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:l.DISABLED},{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:l.LINKED},{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:l.LINKED}],data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:l.DISABLED},{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collections",multiple:!0,batch:l.DISABLED}],data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:l.DISABLED}],workflow_data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:l.DISABLED}],workflow_data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:l.DISABLED}],workflow_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:l.DISABLED}],module_data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:l.DISABLED},{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:l.ENABLED}],module_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:l.DISABLED},{src:"hdca",icon:"fa-folder",tooltip:"Multiple collections",multiple:!0,batch:l.ENABLED}]};return{View:s.View.extend({initialize:function(t){var i=this;this.model=t&&t.model||new s.Model({src_labels:{hda:"dataset",hdca:"dataset collection"},pagelimit:100,statustimer:1e3}).set(t),this.setElement(a("<div/>").addClass("ui-select-content")),this.button_product=new e.RadioButton.View({value:"false",data:[{icon:"fa fa-chain",value:"false",tooltip:"Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads."},{icon:"fa fa-chain-broken",value:"true",tooltip:"Unlinked dataset inputs will be run against *all* other inputs."}]});var n=a("<div/>").addClass("ui-form-info").append(a("<i/>").addClass("fa fa-sitemap")).append(a("<span/>").html("This is a batch mode input field. Separate jobs will be triggered for each dataset selection."));this.$batch={linked:n.clone(),enabled:n.clone().append(a("<div/>").append(a("<div/>").addClass("ui-form-title").html("Batch options:")).append(this.button_product.$el)).append(a("<div/>").css("clear","both"))},this.$el.on("dragenter",function(t){this.lastenter=t.target,i.$el.addClass("ui-dragover")}).on("dragover",function(t){t.preventDefault()}).on("dragleave",function(t){this.lastenter===t.target&&i.$el.removeClass("ui-dragover")}).on("drop",function(t){i._handleDrop(t)}),this.history={},this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:current",this._changeCurrent,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:type change:optional change:multiple change:extensions",this._changeType,this),this.render(),this.on("change",function(){t.onchange&&t.onchange(i.value())})},render:function(){this._changeType(),this._changeValue(),this._changeWait()},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},update:function(t){this.model.set("data",t)},value:function(t){void 0!==t&&this.model.set("value",t);var e=this.model.get("current");if(this.config[e]){var i=this.fields[e].value();if(null!==i&&(i=a.isArray(i)?i:[i],i.length>0)){var s=this._batch({values:[]});for(var n in i){var l=this.history[i[n]+"_"+this.config[e].src];if(!l)return Galaxy.emit.debug("ui-select-content::value()","Requested details not found for '"+i[n]+"'."),null;s.values.push(l)}return s.values.sort(function(t,e){return t.hid-e.hid}),s}}else Galaxy.emit.debug("ui-select-content::value()","Invalid value/source '"+t+"'.");return null},_changeCurrent:function(){var t=this;n.each(this.fields,function(e,i){t.model.get("current")==i?(e.$el.show(),n.each(t.$batch,function(e,s){e[t.config[i].batch==s?"show":"hide"]()}),t.button_type.value(i)):e.$el.hide()})},_changeType:function(){var s=this,a=(this.model.get("flavor")?this.model.get("flavor")+"_":"")+String(this.model.get("type"))+(this.model.get("multiple")?"_multiple":"");o[a]?this.config=o[a]:(this.config=o.data,Galaxy.emit.debug("ui-select-content::_changeType()","Invalid configuration/type id '"+a+"'."));var l=s.model.get("data"),r=t.textify(this.model.get("extensions")),d=this.model.get("src_labels");this.fields=[],this.button_data=[],n.each(this.config,function(t,e){s.button_data.push({value:e,icon:t.icon,tooltip:t.tooltip}),s.fields.push(new i.View({optional:s.model.get("optional"),multiple:t.multiple,searchable:!t.multiple||l&&l[t.src]&&l[t.src].length>s.model.get("pagelimit"),individual:!0,error_text:"No "+(r?r+" ":"")+(d[t.src]||"content")+" available.",onchange:function(){s.trigger("change")}}))}),this.button_type=new e.RadioButton.View({value:this.model.get("current"),data:this.button_data,onchange:function(t){s.model.set("current",t),s.trigger("change")}}),this.$el.empty();var c=0;this.fields.length>1&&(this.$el.append(this.button_type.$el),c=Math.max(0,36*this.fields.length)+"px"),n.each(this.fields,function(t){s.$el.append(t.$el.css({"margin-left":c}))}),n.each(this.$batch,function(t,e){s.$el.append(t.css({"margin-left":c}))}),this.model.set("current",0),this._changeCurrent(),this._changeData()},_changeWait:function(){var t=this;n.each(this.fields,function(e){e[t.model.get("wait")?"wait":"unwait"]()})},_changeData:function(){var t=this.model.get("data"),e=this,i={};n.each(t,function(t,s){i[s]=[],n.each(t,function(t){i[s].push({hid:t.hid,keep:t.keep,label:t.hid+": "+t.name,value:t.id,tags:t.tags}),e.history[t.id+"_"+s]=t})}),n.each(this.config,function(t,s){i[t.src]&&e.fields[s].add(i[t.src],function(t,e){return e.hid-t.hid})})},_changeValue:function(){var t=this.model.get("value");if(t&&t.values&&t.values.length>0){var e=[];n.each(t.values,function(t){e.push(t.id)});for(var i=t.values[0].src,s=t.values.length>1,a=0;a<this.config.length;a++){var l=this.fields[a],o=this.config[a];if(o.src==i&&-1!==[s,!0].indexOf(o.multiple)){this.model.set("current",a),l.value(e);break}}}else n.each(this.fields,function(t){t.value(null)})},_handleDrop:function(t){try{var e=this.model.get("data"),i=this.model.get("current"),s=this.config[i],a=this.fields[i],l=JSON.parse(t.originalEvent.dataTransfer.getData("text"))[0],o=l.id,r="dataset"==l.history_content_type?"hda":"hdca",d={id:o,src:r};if(e&&n.findWhere(e[r],d)){if(s.src==r){var c=a.value();c&&s.multiple?-1==c.indexOf(o)&&c.push(o):c=o,a.value(c)}else this.model.set("value",{values:[d]}),this.model.trigger("change:value");this.trigger("change"),this._handleDropStatus("success")}else this._handleDropStatus("danger")}catch(t){this._handleDropStatus("danger")}t.preventDefault()},_handleDropStatus:function(t){var e=this;this.$el.removeClass("ui-dragover").addClass("ui-dragover-"+t),setTimeout(function(){e.$el.removeClass("ui-dragover-"+t)},this.model.get("statustimer"))},_batch:function(t){t.batch=!1;var e=this.model.get("current"),i=this.config[e];if("hdca"==i.src&&!i.multiple){var s=this.history[this.fields[e].value()+"_hdca"];s&&s.map_over_type&&(t.batch=!0)}return i.batch!=l.LINKED&&i.batch!=l.ENABLED||(t.batch=!0,i.batch==l.ENABLED&&"true"===this.button_product.value()&&(t.product=!0)),t}})}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2))},36:function(t,e,i){"use strict";(function(s){var a,n;a=[i(3),i(5),i(22),i(19)],void 0!==(n=function(t,e,i,a){var n=s.Collection.extend({url:Galaxy.root+"api/libraries?deleted=false"}),l=s.Collection.extend({initialize:function(){var t=this;this.config=new s.Model({library_id:null}),this.config.on("change",function(){t.fetch({reset:!0})})},url:function(){return Galaxy.root+"api/libraries/"+this.config.get("library_id")+"/contents"}});return{View:s.View.extend({initialize:function(t){var i=this;this.libraries=new n,this.datasets=new l,this.options=t,this.library_select=new e.Select.View({onchange:function(t){i.datasets.config.set("library_id",t)}}),this.dataset_list=new a.View({name:"dataset",optional:t.optional,multiple:t.multiple,onchange:function(){i.trigger("change")}}),this.libraries.on("reset",function(){var t=[];i.libraries.each(function(e){t.push({value:e.id,label:e.get("name")})}),i.library_select.update(t)}),this.datasets.on("reset",function(){var t=[];null!==i.library_select.text()&&i.datasets.each(function(e){"file"===e.get("type")&&t.push({value:e.id,label:e.get("name")})}),i.dataset_list.update(t)}),this.on("change",function(){t.onchange&&t.onchange(i.value())}),this.setElement(this._template()),this.$(".library-select").append(this.library_select.$el),this.$el.append(this.dataset_list.$el),this.libraries.fetch({reset:!0,success:function(){i.library_select.trigger("change"),void 0!==i.options.value&&i.value(i.options.value)}})},value:function(t){return this.dataset_list.value(t)},_template:function(){return'<div class="ui-select-library"><div class="library ui-margin-bottom"><span class="library-title">Select Library</span><span class="library-select"/></div></div>'}})}}.apply(e,a))&&(t.exports=n)}).call(e,i(1))},37:function(t,e,i){"use strict";(function(s){var a,n;a=[i(3),i(19)],void 0!==(n=function(t,e){return{View:s.View.extend({initialize:function(i){var s=this;this.ftpfile_list=new e.View({name:"file",optional:i.optional,multiple:i.multiple,onchange:function(){i.onchange&&i.onchange(s.value())}}),this.setElement(this.ftpfile_list.$el),t.get({url:Galaxy.root+"api/remote_files",success:function(t){var e=[];for(var i in t)e.push({value:t[i].path,label:t[i].path});s.ftpfile_list.update(e)}})},value:function(t){return this.ftpfile_list.value(t)}})}}.apply(e,a))&&(t.exports=n)}).call(e,i(1))},38:function(t,e,i){"use strict";(function(s){var a,n;a=[i(3),i(5),i(39)],void 0!==(n=function(t,e,i){return{View:s.View.extend({initialize:function(t){var i=this;this.browse_button=new e.ButtonIcon({title:"Browse",icon:"fa fa-sign-in",tooltip:"Browse GenomeSpace",onclick:function(){i.browseGenomeSpace()}}),this.filename_textbox=new e.Input,this.token_textbox=new e.Input({type:"password"}),this.setElement(this._template(t)),this.$(".ui-gs-browse-button").append(this.browse_button.$el),this.$(".ui-gs-filename-textbox").append(this.filename_textbox.$el),this.$(".ui-gs-token-textbox").append(this.token_textbox.$el)},browseGenomeSpace:function(t){var e=this;i.openFileBrowser({successCallback:function(t){e.value(t.destination+"^"+t.token)}})},_template:function(t){return'<div class="ui-gs-select-file"><div class="ui-gs-browse-field"><span class="ui-gs-browse-button" /><span class="ui-gs-filename-textbox" /></div><div class="ui-gs-token-field"><span class=ui-gs-label"><div class="ui-gs-token-label">Token</div></span><span class="ui-gs-token-textbox" /></div></div>'},value:function(t){if(void 0===t)return this._getValue();this._setValue(t)},_getValue:function(){return this.filename_textbox.value()+"^"+this.token_textbox.value()},_setValue:function(t){t&&(values=t.split("^"),this.filename_textbox.value(values[0]),this.token_textbox.value(values[1]))}})}}.apply(e,a))&&(t.exports=n)}).call(e,i(1))},39:function(t,e,i){"use strict";var s,a;s=[],void 0!==(a=function(){return{openFileBrowser:function(t){var e=window.Galaxy.config.genomespace_ui_url,i=e+"upload/loadUrlToGenomespace.html?getLocation=true",s=window.open(i,"GenomeSpace File Browser","height=360px,width=600px");successCalBack=t.successCallback,window.addEventListener("message",function(t){successCalBack(t.data)},!1),s.focus(),null!=t.errorCallback&&(s.setCallbackOnGSUploadError=config.errorCallback)}}}.apply(e,s))&&(t.exports=a)},40:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(3)],void 0!==(l=function(t){return s.View.extend({colors:{standard:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],base:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],theme:[["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada"],["d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5"],["bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f"],["a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09"],["7f7f7e","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"]]},initialize:function(e){this.options=t.merge(e,{}),this.setElement(this._template()),this.$panel=this.$(".ui-color-picker-panel"),this.$view=this.$(".ui-color-picker-view"),this.$value=this.$(".ui-color-picker-value"),this.$header=this.$(".ui-color-picker-header"),this._build(),this.visible=!1,this.value(this.options.value),this.$boxes=this.$(".ui-color-picker-box");var i=this;this.$boxes.on("click",function(){i.value(a(this).css("background-color")),i.$header.trigger("click")}),this.$header.on("click",function(){i.visible=!i.visible,i.visible?i.$view.fadeIn("fast"):i.$view.fadeOut("fast")})},value:function(t){return void 0!==t&&null!==t&&(this.$value.css("background-color",t),this.$(".ui-color-picker-box").empty(),this.$(this._getValue()).html(this._templateCheck()),this.options.onchange&&this.options.onchange(t)),this._getValue()},_getValue:function(){var t=this.$value.css("background-color");if(t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)){var e=function(t){return("0"+parseInt(t).toString(16)).slice(-2)};return"#"+e(t[1])+e(t[2])+e(t[3])}return null},_build:function(){this._content({colors:this.colors.base});for(var t in this.colors.theme){var e={};0==t?e.bottom=!0:t!=this.colors.theme.length-1?(e.top=!0,e.bottom=!0):e.top=!0,e.colors=this.colors.theme[t],this._content(e)}this._content({colors:this.colors.standard})},_content:function(t){var e=t.colors,i=a(this._templateContent()),s=i.find(".line");this.$panel.append(i);for(var n in e){var l=a(this._templateBox(e[n]));t.top&&(l.css("border-top","none"),l.css("border-top-left-radius","0px"),l.css("border-top-right-radius","0px")),t.bottom&&(l.css("border-bottom","none"),l.css("border-bottom-left-radius","0px"),l.css("border-bottom-right-radius","0px")),s.append(l)}return i},_templateCheck:function(){return'<div class="ui-color-picker-check fa fa-check"/>'},_templateContent:function(){return'<div class="ui-color-picker-content"><div class="line"/></div>'},_templateBox:function(t){return'<div id="'+t+'" class="ui-color-picker-box" style="background-color: #'+t+';"/>'},_template:function(){return'<div class="ui-color-picker"><div class="ui-color-picker-header"><div class="ui-color-picker-value"/><div class="ui-color-picker-label">Select a color</div></div><div class="ui-color-picker-view ui-input"><div class="ui-color-picker-panel"/></div>'}})}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0))},44:function(t,e,i){"use strict";(function(e){var s=i(0),a=s,n=i(11),l=i(5),o=e.Router.extend({initialize:function(t,e){this.page=t,this.options=e},push:function(t,e){e=e||{},e.__identifer=Math.random().toString(36).substr(2),a.isEmptyObject(e)||(t+=-1==t.indexOf("?")?"?":"&",t+=a.param(e,!0)),Galaxy.params=e,this.navigate(t,{trigger:!0})},execute:function(t,e,i){Galaxy.debug("router execute:",t,e,i);var s=n.parse(e.pop());e.push(s),t&&(this.authenticate(e,i)?t.apply(this,e):this.access_denied())},authenticate:function(t,e){return!0},access_denied:function(){this.page.display(new l.Message({status:"danger",message:"You must be logged in with proper credentials to make this request.",persistent:!0}))}});t.exports=o}).call(e,i(1))},5:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(17),i(29),i(18),i(30),i(10),i(7)],void 0!==(o=function(t,e,i,l,o,r,d){var c=s.View.extend({tagName:"label",initialize:function(t){this.model=t&&t.model||new s.Model(t),this.tagName=t.tagName||this.tagName,this.setElement(a("<"+this.tagName+"/>")),this.listenTo(this.model,"change",this.render,this),this.render()},title:function(t){this.model.set("title",t)},value:function(){return this.model.get("title")},render:function(){return this.$el.removeClass().addClass("ui-label").addClass(this.model.get("cls")).html(this.model.get("title")),this}}),h=s.View.extend({initialize:function(t){this.model=t&&t.model||new s.Model({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(t),this.listenTo(this.model,"change",this.render,this),this.render()},update:function(t){this.model.set(t)},render:function(){this.$el.removeClass().addClass("ui-message").addClass(this.model.get("cls"));var t=this.model.get("status");if(this.model.get("large")?this.$el.addClass(("success"==t&&"done"||"danger"==t&&"error"||t)+"messagelarge"):this.$el.addClass("alert").addClass("alert-"+t),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var e=this;this.timeout=window.setTimeout(function(){e.model.set("message","")},3e3)}}else this.$el.fadeOut();return this},messageForDisplay:function(){return n.escape(this.model.get("message"))}}),u=h.extend({messageForDisplay:function(){return this.model.get("message")}}),p=s.View.extend({initialize:function(t){this.model=t&&t.model||new s.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(t),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(a("<"+this.tagName+"/>")),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(t){return void 0!==t&&this.model.set("value","string"==typeof t?t:""),this.model.get("value")},render:function(){var t=this;this.$el.removeClass().addClass("ui-"+this.tagName).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var e=this.model.get("datalist");return a.isArray(e)&&e.length>0&&this.$el.autocomplete({source:function(e,i){i(t.model.get("datalist"))},change:function(){t._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),n.each(["readonly","disabled"],function(e){t.model.get(e)?t.$el.attr(e,!0):t.$el.removeAttr(e)}),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}}),f=s.View.extend({initialize:function(t){this.model=t&&t.model||new s.Model(t),this.setElement(a("<div/>").append(this.$info=a("<div/>")).append(this.$hidden=a("<div/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.$hidden.val(this.model.get("value")),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this}}),m=s.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new s.Model(t),this.setElement(a("<div/>").append(this.$info=a("<div/>")).append(this.$file=a("<input/>").attr("type","file").addClass("ui-margin-bottom")).append(this.$text=a("<textarea/>").addClass("ui-textarea").attr("disabled",!0)).append(this.$wait=a("<i/>").addClass("fa fa-spinner fa-spin"))),this.listenTo(this.model,"change",this.render,this),this.$file.on("change",function(t){e._readFile(t)}),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this.model.get("value")?this.$text.text(this.model.get("value")).show():this.$text.hide(),this.model.get("wait")?this.$wait.show():this.$wait.hide(),this},_readFile:function(t){var e=this,i=t.target.files&&t.target.files[0];if(i){var s=new FileReader;s.onload=function(){e.model.set({wait:!1,value:this.result})},this.model.set({wait:!0,value:null}),s.readAsText(i)}}});return{Button:r.ButtonDefault,ButtonIcon:r.ButtonIcon,ButtonCheck:r.ButtonCheck,ButtonMenu:r.ButtonMenu,ButtonLink:r.ButtonLink,Input:p,Label:c,Message:h,UnescapedMessage:u,Upload:m,Modal:d,RadioButton:l.RadioButton,Checkbox:l.Checkbox,Radio:l.Radio,Select:e,Hidden:f,Slider:i,Drilldown:o}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(0),i(2))},58:function(t,e,i){"use strict";(function(s,a){var n,l;n=[i(9),i(5)],void 0!==(l=function(t,e){return{View:s.View.extend({initialize:function(t){this.model=new s.Model(t),this.url=this.model.get("url"),this.redirect=this.model.get("redirect"),this.setElement("<div/>"),this.render()},render:function(){var i=this;a.ajax({url:Galaxy.root+this.url,type:"GET"}).done(function(s){var n=a.extend({},i.model.attributes,s),l=new t({title:n.title,message:n.message,status:n.status||"warning",icon:n.icon,inputs:n.inputs,buttons:{submit:new e.Button({tooltip:n.submit_tooltip,title:n.submit_title||"Save",icon:n.submit_icon||"fa-save",cls:"btn btn-primary ui-clear-float",onclick:function(){i._submit(l)}})}});i.$el.empty().append(l.$el)}).fail(function(t){i.$el.empty().append(new e.Message({message:"Failed to load resource "+i.url+".",status:"danger",persistent:!0}).$el)})},_submit:function(t){var e=this;a.ajax({url:Galaxy.root+e.url,data:JSON.stringify(t.data.create()),type:"PUT",contentType:"application/json"}).done(function(i){var s={message:i.message,status:"success",persistent:!1};e.redirect?window.location=Galaxy.root+e.redirect+"?"+a.param(s):(t.data.matchModel(i,function(e,i){t.field_list[i].value(e.value)}),e._showMessage(t,s))}).fail(function(i){e._showMessage(t,{message:i.responseJSON.err_msg,status:"danger",persistent:!1})})},_showMessage:function(t,e){t.$el.parents().filter(function(){return-1!=["auto","scroll"].indexOf(a(this).css("overflow"))}).first().animate({scrollTop:0},500),t.message.update(e)}})}}.apply(e,n))&&(t.exports=l)}).call(e,i(1),i(0))},8:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(5)],void 0!==(o=function(t,e){return{View:s.View.extend({visible:!1,initialize:function(i){var a=this;this.model=i&&i.model||new s.Model({id:t.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,nopadding:!1,operations:null,collapsible:!1,collapsible_button:!1,collapsed:!1,onchange_title:null}).set(i),this.setElement(this._template()),this.$body=this.$(".portlet-body"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new e.ButtonIcon({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){a[a.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var t=this,e=this.model.attributes;return this.$el.removeClass().addClass(e.cls).attr("id",e.id),this.$header[e.title?"show":"hide"](),this.$title_text.html(e.title),a.each([this.$content,this.$body],function(t){t[e.nopadding?"addClass":"removeClass"]("no-padding")}),e.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa").addClass(e.icon).show():this.$title_icon.hide(),this.$title_text[e.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),e.collapsible&&(this.$title_text.on("click",function(){t[t.collapsed?"expand":"collapse"]()}),e.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!e.onchange_title),e.onchange_title&&this.$title_text.make_text_editable({on_finish:function(t){e.onchange_title(t)}}),e.buttons?(this.$buttons.empty().show(),n.each(this.model.get("buttons"),function(e,i){i.$el.prop("id",e),t.$buttons.append(i.$el)})):this.$buttons.hide(),this.$operations.empty,e.collapsible_button&&this.$operations.append(this.collapsible_button.$el),e.operations&&n.each(e.operations,function(e,i){i.$el.prop("id",e),t.$operations.append(i.$el)}),this},append:function(t){this.$body.append(t)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(t){this.$buttons.find("#"+t).prop("disabled",!1)},disableButton:function(t){this.$buttons.find("#"+t).prop("disabled",!0)},hideOperation:function(t){this.$operations.find("#"+t).hide()},showOperation:function(t){this.$operations.find("#"+t).show()},setOperation:function(t,e){this.$operations.find("#"+t).off("click").on("click",e)},title:function(t){return t&&this.$title_text.html(t),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.height("0%"),this.$body.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.$content.height("100%"),this.$body.fadeIn("fast"),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return n("<div/>").append(n("<div/>").addClass("portlet-header").append(n("<div/>").addClass("portlet-operations")).append(n("<div/>").addClass("portlet-title").append(n("<i/>").addClass("portlet-title-icon")).append(n("<span/>").addClass("portlet-title-text")))).append(n("<div/>").addClass("portlet-content").append(n("<div/>").addClass("portlet-body")).append(n("<div/>").addClass("portlet-buttons"))).append(n("<div/>").addClass("portlet-backdrop"))}})}}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(2),i(0))},9:function(t,e,i){"use strict";(function(s,a,n){var l,o;l=[i(3),i(8),i(5),i(31),i(23)],void 0!==(o=function(t,e,i,l,o){return s.View.extend({initialize:function(t){this.model=new s.Model({initial_errors:!1,cls:"ui-portlet-limited",icon:null,always_refresh:!0,status:"warning",hide_operations:!1,onchange:function(){}}).set(t),this.setElement("<div/>"),this.render()},update:function(t){var e=this;this.data.matchModel(t,function(t,i){var s=e.input_list[i];if(s&&s.options&&!a.isEqual(s.options,t.options)){s.options=t.options;var n=e.field_list[i];if(n.update){var l=[];if(-1!=["data","data_collection","drill_down"].indexOf(s.type))l=s.options;else for(var o in t.options){var r=t.options[o];r.length>2&&l.push({label:r[0],value:r[1]})}n.update(l),n.trigger("change"),Galaxy.emit.debug("form-view::update()","Updating options for "+i)}}})},wait:function(t){for(var e in this.input_list){var i=this.field_list[e];this.input_list[e].is_dynamic&&i.wait&&i.unwait&&i[t?"wait":"unwait"]()}},highlight:function(t,e,i){var s=this.element_list[t];if(s&&(s.error(e||"Please verify this parameter."),this.portlet.expand(),this.trigger("expand",t),!i)){var a=this.$el.parents().filter(function(){return-1!=["auto","scroll"].indexOf(n(this).css("overflow"))}).first();a.animate({scrollTop:a.scrollTop()+s.$el.offset().top-120},500)}},errors:function(t){if(this.trigger("reset"),t&&t.errors){var e=this.data.matchResponse(t.errors);for(var i in this.element_list){this.element_list[i];e[i]&&this.highlight(i,e[i],!0)}}},render:function(){var t=this;this.off("change"),this.off("reset"),this.field_list={},this.input_list={},this.element_list={},this.data=new o.Manager(this),this._renderForm(),this.data.create(),this.model.get("initial_errors")&&this.errors(this.model.attributes);var e=this.data.checksum();return this.on("change",function(i){var s=t.input_list[i];if(!s||s.refresh_on_change||t.model.get("always_refresh")){var a=t.data.checksum();a!=e&&(e=a,t.model.get("onchange")())}}),this.on("reset",function(){a.each(t.element_list,function(t){t.reset()})}),this},_renderForm:function(){n(".tooltip").remove();var t=this.model.attributes;this.message=new i.UnescapedMessage,this.section=new l.View(this,{inputs:t.inputs}),this.portlet=new e.View({icon:t.icon,title:t.title,cls:t.cls,operations:!t.hide_operations&&t.operations,buttons:t.buttons,collapsible:t.collapsible,collapsed:t.collapsed,onchange_title:t.onchange_title}),this.portlet.append(this.message.$el),this.portlet.append(this.section.$el),this.$el.empty(),t.inputs&&this.$el.append(this.portlet.$el),t.message&&this.message.update({persistent:!0,status:t.status,message:t.message}),Galaxy.emit.debug("form-view::initialize()","Completed")}})}.apply(e,l))&&(t.exports=o)}).call(e,i(1),i(2),i(0))}},[158]);
//# sourceMappingURL=admin.bundled.js.map