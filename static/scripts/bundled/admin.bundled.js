webpackJsonp([4],[function(t,e,i){(function(t){var e=i(1),a=e,s=i(52).GalaxyApp,n=i(102),l=i(62),o=i(12),r=(i(5),i(19)),d=i(55),c=i(4),h=i(53);window.app=function(e,i){window.Galaxy=new s(e,i),Galaxy.debug("admin app");var u=d.extend({routes:{"(/)admin(/)users":"show_users","(/)admin(/)roles":"show_roles","(/)admin(/)groups":"show_groups","(/)admin(/)tool_versions":"show_tool_versions","(/)admin(/)quotas":"show_quotas","(/)admin(/)forms(/)(:form_id)":"show_forms"},authenticate:function(t,e){return Galaxy.user&&Galaxy.user.id&&Galaxy.user.get("is_admin")},show_users:function(){this.page.display(new o({url_base:Galaxy.root+"admin/users_list",url_data:Galaxy.params,dict_format:!0}))},show_roles:function(){this.page.display(new o({url_base:Galaxy.root+"admin/roles_list",url_data:Galaxy.params,dict_format:!0}))},show_groups:function(){this.page.display(new o({url_base:Galaxy.root+"admin/groups_list",url_data:Galaxy.params,dict_format:!0}))},show_tool_versions:function(){this.page.display(new o({url_base:Galaxy.root+"admin/tool_versions_list",url_data:Galaxy.params,dict_format:!0}))},show_quotas:function(){this.page.display(new o({url_base:Galaxy.root+"admin/quotas_list",url_data:Galaxy.params,dict_format:!0}))},show_forms:function(t){var e="?id="+r.get("id"),i={reset_user_password:{title:"Reset passwords",url:"admin/reset_user_password"+e,icon:"fa-user",submit_title:"Save new password",redirect:"admin/users"},manage_roles_and_groups_for_user:{url:"admin/manage_roles_and_groups_for_user"+e,icon:"fa-users",redirect:"admin/users"},manage_users_and_groups_for_role:{url:"admin/manage_users_and_groups_for_role"+e,redirect:"admin/roles"},manage_users_and_roles_for_group:{url:"admin/manage_users_and_roles_for_group"+e,redirect:"admin/groups"},manage_users_and_groups_for_quota:{url:"admin/manage_users_and_groups_for_quota"+e,redirect:"admin/quotas"},create_role:{url:"admin/create_role",redirect:"admin/roles"},create_group:{url:"admin/create_group",redirect:"admin/groups"},create_quota:{url:"admin/create_quota",redirect:"admin/quotas"},rename_role:{url:"admin/rename_role"+e,redirect:"admin/roles"},rename_group:{url:"admin/rename_group"+e,redirect:"admin/groups"},rename_quota:{url:"admin/rename_quota"+e,redirect:"admin/quotas"},edit_quota:{url:"admin/edit_quota"+e,redirect:"admin/quotas"},set_quota_default:{url:"admin/set_quota_default"+e,redirect:"admin/quotas"}};this.page.display(new l.View(i[t]))}});a(function(){t.extend(e.config,{active_view:"admin"}),c.setWindowTitle("Administration"),Galaxy.page=new h.View(t.extend(e,{Left:n,Router:u}))})}}).call(e,i(3))},,,,,function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(15),i(42),i(14),i(37),i(11),i(8)],s=function(t,e,i,a,s,r,d){var c=n.View.extend({tagName:"label",initialize:function(t){this.model=t&&t.model||new n.Model(t),this.tagName=t.tagName||this.tagName,this.setElement(l("<"+this.tagName+"/>")),this.listenTo(this.model,"change",this.render,this),this.render()},title:function(t){this.model.set("title",t)},value:function(){return this.model.get("title")},render:function(){return this.$el.removeClass().addClass("ui-label").addClass(this.model.get("cls")).html(this.model.get("title")),this}}),h=n.View.extend({initialize:function(t){this.model=t&&t.model||new n.Model({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(t),this.listenTo(this.model,"change",this.render,this),this.render()},update:function(t){this.model.set(t)},render:function(){this.$el.removeClass().addClass("ui-message").addClass(this.model.get("cls"));var t=this.model.get("status");if(this.model.get("large")?this.$el.addClass(("success"==t&&"done"||"danger"==t&&"error"||t)+"messagelarge"):this.$el.addClass("alert").addClass("alert-"+t),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var e=this;this.timeout=window.setTimeout(function(){e.model.set("message","")},3e3)}}else this.$el.fadeOut();return this},messageForDisplay:function(){return o.escape(this.model.get("message"))}}),u=h.extend({messageForDisplay:function(){return this.model.get("message")}}),p=n.View.extend({initialize:function(t){this.model=t&&t.model||new n.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(t),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(l("<"+this.tagName+"/>")),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(t){return void 0!==t&&this.model.set("value","string"==typeof t?t:""),this.model.get("value")},render:function(){var t=this;this.$el.removeClass().addClass("ui-"+this.tagName).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var e=this.model.get("datalist");return l.isArray(e)&&e.length>0&&this.$el.autocomplete({source:function(e,i){i(t.model.get("datalist"))},change:function(){t._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),o.each(["readonly","disabled"],function(e){t.model.get(e)?t.$el.attr(e,!0):t.$el.removeAttr(e)}),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}}),f=n.View.extend({initialize:function(t){this.model=t&&t.model||new n.Model(t),this.setElement(l("<div/>").append(this.$info=l("<div/>")).append(this.$hidden=l("<div/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.$hidden.val(this.model.get("value")),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this}}),m=n.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new n.Model(t),this.setElement(l("<div/>").append(this.$info=l("<div/>")).append(this.$file=l("<input/>").attr("type","file").addClass("ui-margin-bottom")).append(this.$text=l("<textarea/>").addClass("ui-textarea").attr("disabled",!0)).append(this.$wait=l("<i/>").addClass("fa fa-spinner fa-spin"))),this.listenTo(this.model,"change",this.render,this),this.$file.on("change",function(t){e._readFile(t)}),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this.model.get("value")?this.$text.text(this.model.get("value")).show():this.$text.hide(),this.model.get("wait")?this.$wait.show():this.$wait.hide(),this},_readFile:function(t){var e=this,i=t.target.files&&t.target.files[0];if(i){var a=new FileReader;a.onload=function(){e.model.set({wait:!1,value:this.result})},this.model.set({wait:!0,value:null}),a.readAsText(i)}}});return{Button:r.ButtonDefault,ButtonIcon:r.ButtonIcon,ButtonCheck:r.ButtonCheck,ButtonMenu:r.ButtonMenu,ButtonLink:r.ButtonLink,Input:p,Label:c,Message:h,UnescapedMessage:u,Upload:m,Modal:d,RadioButton:a.RadioButton,Checkbox:a.Checkbox,Radio:a.Radio,Select:e,Hidden:f,Slider:i,Drilldown:s}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},,,,function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(5)],s=function(t,e){var i=n.View.extend({visible:!1,initialize:function(i){var a=this;this.model=i&&i.model||new n.Model({id:t.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,nopadding:!1,operations:null,collapsible:!1,collapsible_button:!1,collapsed:!1,onchange_title:null}).set(i),this.setElement(this._template()),this.$body=this.$(".portlet-body"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new e.ButtonIcon({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){a[a.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var t=this,e=this.model.attributes;return this.$el.removeClass().addClass(e.cls).attr("id",e.id),this.$header[e.title?"show":"hide"](),this.$title_text.html(e.title),l.each([this.$content,this.$body],function(t){t[e.nopadding?"addClass":"removeClass"]("no-padding")}),e.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa").addClass(e.icon).show():this.$title_icon.hide(),this.$title_text[e.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),e.collapsible&&(this.$title_text.on("click",function(){t[t.collapsed?"expand":"collapse"]()}),e.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!e.onchange_title),e.onchange_title&&this.$title_text.make_text_editable({on_finish:function(t){e.onchange_title(t)}}),e.buttons?(this.$buttons.empty().show(),o.each(this.model.get("buttons"),function(e,i){i.$el.prop("id",e),t.$buttons.append(i.$el)})):this.$buttons.hide(),this.$operations.empty,e.collapsible_button&&this.$operations.append(this.collapsible_button.$el),e.operations&&o.each(e.operations,function(e,i){i.$el.prop("id",e),t.$operations.append(i.$el)}),this},append:function(t){this.$body.append(t)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(t){this.$buttons.find("#"+t).prop("disabled",!1)},disableButton:function(t){this.$buttons.find("#"+t).prop("disabled",!0)},hideOperation:function(t){this.$operations.find("#"+t).hide()},showOperation:function(t){this.$operations.find("#"+t).show()},setOperation:function(t,e){this.$operations.find("#"+t).off("click").on("click",e)},title:function(t){return t&&this.$title_text.html(t),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.height("0%"),this.$body.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.$content.height("100%"),this.$body.fadeIn("fast"),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return o("<div/>").append(o("<div/>").addClass("portlet-header").append(o("<div/>").addClass("portlet-operations")).append(o("<div/>").addClass("portlet-title").append(o("<i/>").addClass("portlet-title-icon")).append(o("<span/>").addClass("portlet-title-text")))).append(o("<div/>").addClass("portlet-content").append(o("<div/>").addClass("portlet-body")).append(o("<div/>").addClass("portlet-buttons"))).append(o("<div/>").addClass("portlet-backdrop"))}});return{View:i}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(3),i(1))},function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(9),i(5),i(32),i(20)],s=function(t,e,i,a,s){return n.View.extend({initialize:function(t){this.model=new n.Model({initial_errors:!1,cls:"ui-portlet-limited",icon:null,always_refresh:!0,status:"warning",onchange:function(){}}).set(t),this.setElement("<div/>"),this.render()},update:function(t){var e=this;this.data.matchModel(t,function(t,i){var a=e.input_list[i];if(a&&a.options&&!l.isEqual(a.options,t.options)){a.options=t.options;var s=e.field_list[i];if(s.update){var n=[];if(["data","data_collection","drill_down"].indexOf(a.type)!=-1)n=a.options;else for(var o in t.options){var r=t.options[o];r.length>2&&n.push({label:r[0],value:r[1]})}s.update(n),s.trigger("change"),Galaxy.emit.debug("form-view::update()","Updating options for "+i)}}})},wait:function(t){for(var e in this.input_list){var i=this.field_list[e],a=this.input_list[e];a.is_dynamic&&i.wait&&i.unwait&&i[t?"wait":"unwait"]()}},highlight:function(t,e,i){var a=this.element_list[t];if(a&&(a.error(e||"Please verify this parameter."),this.portlet.expand(),this.trigger("expand",t),!i)){var s=this.$el.parents().filter(function(){return["auto","scroll"].indexOf(o(this).css("overflow"))!=-1}).first();s.animate({scrollTop:s.scrollTop()+a.$el.offset().top-120},500)}},errors:function(t){if(this.trigger("reset"),t&&t.errors){var e=this.data.matchResponse(t.errors);for(var i in this.element_list){this.element_list[i];e[i]&&this.highlight(i,e[i],!0)}}},render:function(){var t=this;this.off("change"),this.off("reset"),this.field_list={},this.input_list={},this.element_list={},this.data=new s.Manager(this),this._renderForm(),this.data.create(),this.model.get("initial_errors")&&this.errors(this.model.attributes);var e=this.data.checksum();return this.on("change",function(i){var a=t.input_list[i];if(!a||a.refresh_on_change||t.model.get("always_refresh")){var s=t.data.checksum();s!=e&&(e=s,t.model.get("onchange")())}}),this.on("reset",function(){l.each(t.element_list,function(t){t.reset()})}),this},_renderForm:function(){o(".tooltip").remove();var t=this.model.attributes;this.message=new i.UnescapedMessage,this.section=new a.View(this,{inputs:t.inputs}),this.portlet=new e.View({icon:t.icon,title:t.title,cls:t.cls,operations:t.operations,buttons:t.buttons,collapsible:t.collapsible,collapsed:t.collapsed,onchange_title:t.onchange_title}),this.portlet.append(this.message.$el),this.portlet.append(this.section.$el),this.$el.empty(),t.inputs&&this.$el.append(this.portlet.$el),t.message&&this.message.update({persistent:!0,status:t.status,message:t.message}),Galaxy.emit.debug("form-view::initialize()","Completed")}})}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(3),i(1))},function(t,e,i){var a,s;(function(n,l){a=[i(4)],s=function(t){var e=n.View.extend({initialize:function(e){this.model=e&&e.model||new n.Model({id:t.uid(),title:"",icon:"",cls:"btn btn-default",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1}).set(e),this.setElement(l("<button/>").attr("type","button").append(this.$icon=l("<i/>")).append(this.$title=l("<span/>")).append(this.$progress=l("<div/>").append(this.$progress_bar=l("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(e.disabled&&"disabled").attr("id",e.id).attr("disabled",e.disabled).off("click").on("click",function(){l(".tooltip").hide(),e.onclick&&!t.disabled&&e.onclick()}).tooltip({title:e.tooltip,placement:"bottom"}),this.$progress.addClass("progress").css("display",e.percentage!==-1?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:e.percentage+"%"}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),e.wait?(this.$el.addClass(e.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin ui-margin-right"),this.$title.html(e.wait_text)):(this.$el.addClass(e.cls),this.$icon.addClass(e.icon),this.$title.html(e.title),e.icon&&e.title&&this.$icon.addClass("ui-margin-right"))},show:function(){this.$el.show()},hide:function(){this.$el.hide()},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(t){this.model.set("icon",t)}}),i=e.extend({initialize:function(e){this.model=e&&e.model||new n.Model({id:t.uid(),title:"",icon:"",cls:""}).set(e),this.setElement(l("<a/>").append(this.$icon=l("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).attr({id:t.id,href:t.href||"javascript:void(0)",title:t.title,target:t.target||"_top",disabled:t.disabled}).tooltip({placement:"bottom"}).off("click").on("click",function(){t.onclick&&!t.disabled&&t.onclick()}),this.$icon.removeClass().addClass(t.icon)}}),a=n.View.extend({initialize:function(e){this.model=e&&e.model||new n.Model({id:t.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,onchange:function(){}}).set(e),this.setElement(l("<div/>").append(this.$icon=l("<span/>")).append(this.$title=l("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var e=this,t=this.model.attributes;this.$el.addClass("ui-button-check").off("click").on("click",function(){e.model.set("value",0===e.model.get("value")&&2||0),t.onclick&&t.onclick()}),this.$title.html(t.title),this.$icon.removeClass().addClass("icon fa ui-margin-right").addClass(t.icons[t.value])},value:function(t,e){return void 0!==t&&(e&&0!==t&&(t=t!==e&&1||2),this.model.set("value",t),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}}),s=e.extend({initialize:function(e){this.model=e&&e.model||new n.Model({id:t.uid(),title:"",icon:"",cls:"ui-button-icon",disabled:!1}).set(e),this.setElement(l("<div/>").append(this.$button=l("<div/>").append(this.$icon=l("<i/>")).append(this.$title=l("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).addClass(t.disabled&&"disabled").attr("disabled",t.disabled).attr("id",t.id).off("click").on("click",function(){l(".tooltip").hide(),!t.disabled&&t.onclick&&t.onclick()}),this.$button.addClass("button").tooltip({title:t.tooltip,placement:"bottom"}),this.$icon.removeClass().addClass("icon fa").addClass(t.icon),this.$title.addClass("title").html(t.title),t.icon&&t.title&&this.$icon.addClass("ui-margin-right")}}),o=e.extend({$menu:null,initialize:function(t){this.model=t&&t.model||new n.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"ui-button-icon ui-button-menu",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(t),this.collection=new n.Collection,this.setElement(l("<div/>").append(this.$root=l("<div/>").append(this.$icon=l("<i/>")).append(this.$title=l("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("dropdown").addClass(e.cls).attr("id",e.id).css({display:e.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass("root button dropdown-toggle").attr("data-toggle","dropdown").tooltip({title:e.tooltip,placement:"bottom"}).off("click").on("click",function(t){l(".tooltip").hide(),t.preventDefault(),e.onclick&&e.onclick()}),this.$icon.removeClass().addClass("icon fa").addClass(e.icon),this.$title.removeClass().addClass("title").html(e.title),e.icon&&e.title&&this.$icon.addClass("ui-margin-right"),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=l("<ul/>").addClass("menu dropdown-menu").addClass("pull-"+t.model.get("pull")).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each(function(e){var i=e.attributes;if(i.visible){var a=l("<a/>").addClass("dropdown-item").attr({href:i.href,target:i.target}).append(l("<i/>").addClass("fa").addClass(i.icon).css("display",i.icon?"inline-block":"none")).append(i.title).on("click",function(t){i.onclick&&(t.preventDefault(),i.onclick())});t.$menu.append(l("<li/>").append(a)),i.divider&&t.$menu.append(l("<li/>").addClass("divider"))}})},addMenu:function(e){this.collection.add(t.merge(e,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}});return{ButtonDefault:e,ButtonLink:i,ButtonIcon:s,ButtonCheck:a,ButtonMenu:o}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1))},function(t,e,i){var a,s;(function(n,l,o,r){n.ajaxSettings.traditional=!0,a=[i(4),i(33),i(34),i(18)],s=function(t,e,i,a){return l.View.extend({grid:null,initialize:function(t){this.grid=new e,this.dict_format=t.dict_format,this.title=t.title;var i=this;if(window.add_tag_to_grid_filter=function(t,e){var a=t+(void 0!==e&&""!==e?":"+e:""),s=o("#advanced-search").is(":visible");s||(o("#standard-search").slideToggle("fast"),o("#advanced-search").slideToggle("fast")),i.add_filter_condition("tags",a)},this.dict_format)if(this.setElement("<div/>"),t.url_base&&!t.items){var a=t.url_data||{};r.each(t.filters,function(t,e){a["f-"+e]=t}),o.ajax({url:t.url_base+"?"+o.param(a),success:function(e){e.embedded=t.embedded,e.filters=t.filters||{},i.init_grid(e)}})}else this.init_grid(t);else this.setElement("#grid-container"),this.init_grid(t);t.use_panels&&o("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(t){t&&o.inArray("history",t)>-1&&top.Galaxy&&top.Galaxy.currHistoryPanel&&top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(e){this.grid.set(e);var a=this.grid.attributes;this.allow_title_display&&a.title&&t.setWindowTitle(a.title),this.handle_refresh(a.refresh_frames);var s=this.grid.get("url_base");if(s=s.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",s),this.$el.html(i.grid(a)),this.$el.find("#grid-table-header").html(i.header(a)),this.$el.find("#grid-table-body").html(i.body(a)),this.$el.find("#grid-table-footer").html(i.footer(a)),a.message){this.$el.find("#grid-message").html(i.message(a));var n=this;a.use_hide_message&&setTimeout(function(){n.$el.find("#grid-message").html("")},5e3)}this.init_grid_elements(),this.init_grid_controls(),init_refresh_on_change()},init_grid_controls:function(){var t=this;this.$el.find(".operation-button").each(function(){o(this).off(),o(this).click(function(){return t.submit_operation(this),!1})}),this.$el.find("input[type=text]").each(function(){o(this).off(),o(this).click(function(){o(this).select()}).keyup(function(){o(this).css("font-style","normal")})}),this.$el.find(".sort-link").each(function(){o(this).off(),o(this).click(function(){return t.set_sort_condition(o(this).attr("sort_key")),!1})}),this.$el.find(".text-filter-form").each(function(){o(this).off(),o(this).submit(function(){var e=o(this).attr("column_key"),i=o("#input-"+e+"-filter"),a=i.val();return i.val(""),t.add_filter_condition(e,a),!1})}),this.$el.find(".text-filter-val > a").each(function(){o(this).off(),o(this).click(function(){return o(this).parent().remove(),t.remove_filter_condition(o(this).attr("filter_key"),o(this).attr("filter_val")),!1})}),this.$el.find(".categorical-filter > a").each(function(){o(this).off(),o(this).click(function(){return t.set_categorical_filter(o(this).attr("filter_key"),o(this).attr("filter_val")),!1})}),this.$el.find(".advanced-search-toggle").each(function(){o(this).off(),o(this).click(function(){return t.$el.find("#standard-search").slideToggle("fast"),t.$el.find("#advanced-search").slideToggle("fast"),!1})}),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",function(){t.check_all_items()})},init_grid_elements:function(){this.$el.find(".grid").each(function(){var t=o(this).find("input.grid-row-select-checkbox"),e=o(this).find("span.grid-selected-count"),i=function(){e.text(o(t).filter(":checked").length)};o(t).each(function(){o(this).change(i)}),i()}),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var t=this.grid.attributes,e=this;this.$el.find(".page-link > a").each(function(){o(this).click(function(){return e.set_page(o(this).attr("page_num")),!1})}),this.$el.find(".use-target").each(function(){o(this).click(function(t){return e.execute({href:o(this).attr("href"),target:o(this).attr("target")}),!1})});var i=t.items.length;0!=i&&r.each(t.items,function(i,s){var n=e.$("#grid-"+s+"-popup").off(),l=new a(n);r.each(t.operations,function(t){e._add_operation(l,t,i)})})},_add_operation:function(t,e,i){var a=this,s=i.operation_config[e.label];s.allowed&&e.allow_popup&&t.addItem({html:e.label,href:s.url_args,target:s.target,confirmation_text:e.confirm,func:function(t){t.preventDefault();var s=o(t.target).html();e.onclick?e.onclick(i.encode_id):a.execute(this.findItemByHtml(s))}})},add_filter_condition:function(t,e){if(""===e)return!1;this.grid.add_filter(t,e,!0);var a=o(i.filter_element(t,e)),s=this;a.click(function(){o(this).remove(),s.remove_filter_condition(t,e)});var n=this.$el.find("#"+t+"-filtering-criteria");n.append(a),this.go_page_one(),this.execute()},remove_filter_condition:function(t,e){this.grid.remove_filter(t,e),this.go_page_one(),this.execute()},set_sort_condition:function(t){var e=this.grid.get("sort_key"),i=t;e.indexOf(t)!==-1&&"-"!==e.substring(0,1)&&(i="-"+t),this.$el.find(".sort-arrow").remove();var a="-"==i.substring(0,1)?"&uarr;":"&darr;",s=o("<span>"+a+"</span>").addClass("sort-arrow");this.$el.find("#"+t+"-header").append(s),this.grid.set("sort_key",i),this.go_page_one(),this.execute()},set_categorical_filter:function(t,e){var i=this.grid.get("categorical_filters")[t],a=this.grid.get("filters")[t],s=this;this.$el.find("."+t+"-filter").each(function(){var n=o.trim(o(this).text()),l=i[n],r=l[t];if(r==e)o(this).empty(),o(this).addClass("current-filter"),o(this).append(n);else if(r==a){o(this).empty();var d=o('<a href="#">'+n+"</a>");d.click(function(){s.set_categorical_filter(t,r)}),o(this).removeClass("current-filter"),o(this).append(d)}}),this.grid.add_filter(t,e),this.go_page_one(),this.execute()},set_page:function(t){var e=this;this.$el.find(".page-link").each(function(){var i,a=o(this).attr("id"),s=parseInt(a.split("-")[2],10),n=e.grid.get("cur_page");if(s===t)i=o(this).children().text(),o(this).empty(),o(this).addClass("inactive-link"),o(this).text(i);else if(s===n){i=o(this).text(),o(this).empty(),o(this).removeClass("inactive-link");var l=o('<a href="#">'+i+"</a>");l.click(function(){e.set_page(s)}),o(this).append(l)}}),"all"===t?this.grid.set("cur_page",t):this.grid.set("cur_page",parseInt(t,10)),this.execute()},submit_operation:function(t,e){var i=o(t).val(),a=this.$el.find('input[name="id"]:checked').length;if(!a>0)return!1;var s=r.findWhere(this.grid.attributes.operations,{label:i});s&&!e&&(e=s.confirm||"");var n=[];this.$el.find("input[name=id]:checked").each(function(){n.push(o(this).val())});var l={operation:i,id:n,confirmation_text:e};return"top"==s.target&&(l=r.extend(l,{href:s.href,target:s.target})),this.execute(l),!0},check_all_items:function(){var t=this.$(".grid-row-select-checkbox"),e=this.$("#check_all").prop("checked");r.each(t,function(t){o(t).prop("checked",e)}),this.init_grid_elements()},go_page_one:function(){var t=this.grid.get("cur_page");null!==t&&void 0!==t&&"all"!==t&&this.grid.set("cur_page",1)},execute:function(t){var e=null,i=null,a=null,s=null,n=null;if(t&&(i=t.href,a=t.operation,e=t.id,s=t.confirmation_text,n=t.target,void 0!==i&&i.indexOf("operation=")!=-1)){var l=i.split("?");if(l.length>1)for(var r=l[1],d=r.split("&"),c=0;c<d.length;c++)d[c].indexOf("operation")!=-1?(a=d[c].split("=")[1],a=a.replace(/\+/g," ")):d[c].indexOf("id")!=-1&&(e=d[c].split("=")[1])}return a&&e?!(s&&""!=s&&"None"!=s&&"null"!=s&&!confirm(s))&&(a=a.toLowerCase(),this.grid.set({operation:a,item_ids:e}),"top"==n?window.top.location=i+"?"+o.param(this.grid.get_url_data()):this.grid.can_async_op(a)||this.dict_format?this.update_grid():this.go_to(n,i),!1):i?(this.go_to(n,i),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(n,i),!1)},go_to:function(t,e){var i=this.grid.get("async");this.grid.set("async",!1);var a=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",a),e||(e=this.grid.get("url_base")+"?"+o.param(this.grid.get_url_data())),this.grid.set({operation:void 0,item_ids:void 0,async:i}),t){case"inbound":var s=o(".grid-header").closest(".inbound");if(0!==s.length)return void s.load(e);break;case"top":window.top.location=e;break;default:window.location=e}},update_grid:function(){var t=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var e=this;o.ajax({type:t,url:e.grid.get("url_base"),data:e.grid.get_url_data(),error:function(t){alert("Grid refresh failed")},success:function(t){var i=e.grid.get("embedded"),a=e.grid.get("insert"),s=e.$el.find("#advanced-search").is(":visible"),n=e.dict_format?t:o.parseJSON(t);n.embedded=i,n.insert=a,n.advanced_search=s,e.init_grid(n),e.$el.find(".loading-elt-overlay").hide()},complete:function(){e.grid.set({operation:void 0,item_ids:void 0})}})}})}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(1),i(2),i(1),i(3))},function(t,e,i){var a,s;(function(n,l){a=[i(4),i(9),i(5)],s=function(t,e,i){var a=n.View.extend({initialize:function(t){var a=this;this.options=t,this.name=t.name||"element",this.multiple=t.multiple||!1,this.message=new i.Message,this.portlet=new e.View({cls:"ui-portlet-section"}),this.select=new i.Select.View({optional:t.optional}),this.button=new i.ButtonIcon({icon:"fa fa-sign-in",tooltip:"Insert new "+this.name,onclick:function(){a.add({id:a.select.value(),name:a.select.text()})}}),this.setElement(this._template(t)),this.$(".ui-list-message").append(this.message.$el),this.$(".ui-list-portlet").append(this.portlet.$el),this.$(".ui-list-button").append(this.button.$el),this.$(".ui-list-select").append(this.select.$el)},value:function(t){if(void 0!==t){if(this.portlet.empty(),l.isArray(t))for(var e in t){var i=t[e],a=null,s=null;"string"!=l.type(i)?(a=i.id,s=i.name):a=s=i,null!=a&&this.add({id:a,name:s})}this._refresh()}var n=[];return this.$(".ui-list-id").each(function(){n.push({id:l(this).prop("id"),name:l(this).find(".ui-list-name").html()})}),0==n.length?null:n},add:function(e){var i=this;if(0===this.$('[id="'+e.id+'"]').length)if(t.isEmpty(e.id))this.message.update({message:"Please select a valid "+this.name+".",status:"danger"});else{var a=l(this._templateRow({id:e.id,name:e.name}));a.on("click",function(){a.remove(),i._refresh()}),a.on("mouseover",function(){a.addClass("portlet-highlight")}),a.on("mouseout",function(){a.removeClass("portlet-highlight")}),this.portlet.append(a),this._refresh()}else this.message.update({message:"This "+this.name+" is already in the list."})},update:function(t){this.select.update(t)},_refresh:function(){this.$(".ui-list-id").length>0?(!this.multiple&&this.button.disable(),this.$(".ui-list-portlet").show()):(this.button.enable(),this.$(".ui-list-portlet").hide()),this.options.onchange&&this.options.onchange()},_template:function(t){return'<div class="ui-list"><div class="ui-margin-top"><span class="ui-list-button"/><span class="ui-list-select"/></div><div class="ui-list-message"/><div class="ui-list-portlet"/></div>'},_templateRow:function(t){return'<div id="'+t.id+'" class="ui-list-id"><span class="ui-list-delete fa fa-trash"/><span class="ui-list-name">'+t.name+"</span></div>"}});return{View:a}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1))},function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(11)],s=function(t,e){var i=n.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new n.Model({visible:!0,data:[],id:t.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(e),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.on("change",function(){i.model.get("onchange")(i.value())}),this.render()},render:function(){var t=this;this.$el.empty().removeClass().addClass("ui-options").append(this.$message=l("<div/>")).append(this.$menu=l("<div/>").addClass("ui-options-menu")).append(this.$options=l(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new e.ButtonCheck({onclick:function(){
t.$("input").prop("checked",0!==t.all_button.value()),t.value(t._getValue()),t.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(t){this.model.set("data",t)},_changeData:function(){var t=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):o.each(this.model.get("data"),function(e){t.$options.append(l(t._templateOption(e)).addClass("ui-option").tooltip({title:e.tooltip,placement:"bottom"}))});var t=this;this.$("input").on("change",function(){t.value(t._getValue()),t.trigger("change")}),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value(l.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){var t=this.$("input").first();return t.length>0?t.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},_setValue:function(t){var e=this;if(void 0!==t&&(this.$("input").prop("checked",!1),null!==t)){var i=l.isArray(t)?t:[t];o.each(i,function(t){e.$('input[value="'+t+'"]').first().prop("checked",!0)})}},_getValue:function(){var e=[];return this.$(":checked").each(function(){e.push(l(this).val())}),t.isEmpty(e)?null:this.model.get("multiple")?e:e[0]},_messageShow:function(t,e){this.$message.show().removeClass().addClass("ui-message alert alert-"+e).html(t)},_template:function(){return l("<div/>").addClass("ui-options-list")}}),a=i.extend({_templateOption:function(e){var i=t.uid();return l("<div/>").addClass("ui-option").append(l("<input/>").attr({id:i,type:this.model.get("type"),name:this.model.id,value:e.value})).append(l("<label/>").addClass("ui-options-label").attr("for",i).html(e.label))}}),s={};s.View=a.extend({initialize:function(t){t.type="radio",a.prototype.initialize.call(this,t)}});var r={};r.View=a.extend({initialize:function(t){t.type="checkbox",t.multiple=!0,a.prototype.initialize.call(this,t)}});var d={};return d.View=i.extend({initialize:function(t){i.prototype.initialize.call(this,t)},_setValue:function(t){void 0!==t&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'+t+'"]').prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(t){var e=l("<label/>").addClass("btn btn-default");return t.icon&&e.append(l("<i/>").addClass("fa").addClass(t.icon).addClass(!t.label&&"no-padding")),e.append(l("<input/>").attr({type:"radio",name:this.model.id,value:t.value})),t.label&&e.append(t.label),e},_template:function(){return l("<div/>").addClass("btn-group ui-radiobutton").attr("data-toggle","buttons")}}),{Base:i,BaseIcons:a,Radio:s,RadioButton:d,Checkbox:r}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(11)],s=function(t,e){var i=n.View.extend({initialize:function(e){var i=this;this.data=[],this.data2=[],this.model=e&&e.model||new n.Model({id:t.uid(),cls:"ui-select",error_text:"No options available",empty_text:"Nothing selected",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1,disabled:!1,onchange:function(){},value:null,individual:!1,pagesize:20}).set(e),this.on("change",function(){i.model.get("onchange")&&i.model.get("onchange")(i.value())}),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:disabled",this._changeDisabled,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:multiple change:searchable change:cls change:id",this.render,this),this.render()},render:function(){var t=this;this.model.get("searchable")?this._renderSearchable():this._renderClassic(),this.$el.addClass(this.model.get("cls")).attr("id",this.model.get("id")),this.$select.empty().addClass("select").attr("id",this.model.get("id")+"_select").prop("multiple",this.model.get("multiple")).on("change",function(){t.value(t._getValue()),t.trigger("change")}),this._changeData(),this._changeWait(),this._changeVisible(),this._changeDisabled()},_renderClassic:function(){var t=this;this.$el.addClass(this.model.get("multiple")?"ui-select-multiple":"ui-select").append(this.$select=l("<select/>")).append(this.$dropdown=l("<div/>")).append(this.$resize=l("<div/>").append(this.$resize_icon=l("<i/>"))),this.model.get("multiple")?(this.$dropdown.hide(),this.$resize_icon.addClass("fa fa-angle-double-right fa-rotate-45").show(),this.$resize.removeClass().addClass("icon-resize").show().off("mousedown").on("mousedown",function(e){var i=e.pageY,a=t.$select.height();t.minHeight=t.minHeight||a,l("#dd-helper").show().on("mousemove",function(e){t.$select.height(Math.max(a+(e.pageY-i),t.minHeight))}).on("mouseup mouseleave",function(){l("#dd-helper").hide().off()})})):(this.$dropdown.show(),this.$resize.hide(),this.$resize_icon.hide())},_renderSearchable:function(){var t=this;this.$el.append(this.$select=l("<div/>")).append(this.$dropdown=l("<div/>")),this.$dropdown.hide(),this.model.get("multiple")||this.$dropdown.show().on("click",function(){t.$select.select2&&t.$select.select2("open")}),this.all_button=null,this.model.get("multiple")&&!this.model.get("individual")&&(this.all_button=new e.ButtonCheck({onclick:function(){var e=[];0!==t.all_button.value()&&o.each(t.model.get("data"),function(t){e.push(t.value)}),t.value(e),t.trigger("change")}}),this.$el.prepend(this.all_button.$el))},_match:function(t,e){return!t||""==t||String(e).toUpperCase().indexOf(t.toUpperCase())>=0},_changeData:function(){var t=this;this.data=[],!this.model.get("multiple")&&this.model.get("optional")&&this.data.push({value:"__null__",label:t.model.get("empty_text")}),o.each(this.model.get("data"),function(e){t.data.push(e)}),0==this.length()&&this.data.push({value:"__null__",label:this.model.get("error_text")}),this.model.get("searchable")?(this.data2=[],o.each(this.data,function(e,i){t.data2.push({order:i,id:e.value,text:e.label,tags:e.tags})}),this.$select.data("select2")&&this.$select.select2("destroy"),this.matched_tags={},this.$select.select2({data:t.data2,closeOnSelect:!this.model.get("multiple"),multiple:this.model.get("multiple"),query:function(e){t.matched_tags={};var i=t.model.get("pagesize"),a=o.filter(t.data2,function(i){var a=!1;return o.each(i.tags,function(i){t._match(e.term,i)&&(a=t.matched_tags[i]=!0)}),a||t._match(e.term,i.text)});e.callback({results:a.slice((e.page-1)*i,e.page*i),more:a.length>=e.page*i})},formatResult:function(e){return o.escape(e.text)+'<div class="ui-tags">'+o.reduce(e.tags,function(e,i){return t.matched_tags[i]?e+'&nbsp;<div class="label label-info">'+o.escape(i)+"</div>":e},"")+"</div>"}}),this.$(".select2-container .select2-search input").off("blur")):(this.$select.find("option").remove(),o.each(this.data,function(e){t.$select.append(l("<option/>").attr("value",e.value).html(o.escape(e.label)))})),this.model.set("disabled",0==this.length()),this._changeValue()},_changeDisabled:function(){this.model.get("searchable")?this.$select.select2(this.model.get("disabled")?"disable":"enable"):this.$select.prop("disabled",this.model.get("disabled"))},_changeWait:function(){this.$dropdown.removeClass().addClass("icon-dropdown fa").addClass(this.model.get("wait")?"fa-spinner fa-spin":"fa-caret-down")},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"](),this.$select[this.model.get("visible")?"show":"hide"]()},_changeValue:function(){if(this._setValue(this.model.get("value")),this.model.get("multiple")){if(this.all_button){var t=this._getValue();this.all_button.value(l.isArray(t)?t.length:0,this.length())}}else null!==this._getValue()||this.model.get("optional")||this._setValue(this.first())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){return this.data.length>0?this.data[0].value:null},exists:function(t){return o.findWhere(this.data,{value:t})},text:function(){var t=this._getValue(),e=this.exists(l.isArray(t)?t[0]:t);return e?e.label:""},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},disabled:function(){return this.model.get("disabled")},enable:function(){this.model.set("disabled",!1)},disable:function(){this.model.set("disabled",!0)},add:function(t,e){o.each(this.model.get("data"),function(e){e.keep&&!o.findWhere(t,{value:e.value})&&t.push(e)}),e&&t&&t.sort(e),this.model.set("data",t)},update:function(t){this.model.set("data",t)},setOnChange:function(t){this.model.set("onchange",t)},length:function(){return l.isArray(this.model.get("data"))?this.model.get("data").length:0},_setValue:function(t){var e=this;if(null!==t&&void 0!==t||(t="__null__"),this.model.get("multiple")?t=l.isArray(t)?t:[t]:l.isArray(t)&&(t=t.length>0?t[0]:"__null__"),this.model.get("searchable")){if(l.isArray(t)){var i=[];o.each(t,function(t){var a=o.findWhere(e.data2,{id:t});a&&i.push(a)}),t=i}else{var a=o.findWhere(this.data2,{id:t});t=a}this.$select.select2("data",t)}else this.$select.val(t)},_getValue:function(){var e=null;if(this.model.get("searchable")){var i=this.$select.select2("data");i&&(l.isArray(i)?(e=[],i.sort(function(t,e){return t.order-e.order}),o.each(i,function(t){e.push(t.id)})):e=i.id)}else e=this.$select.val();return t.isEmpty(e)?null:e}});return{View:i}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},,,function(t,e,i){var a,s;(function(i,n,l,o){a=[],s=function(){var t=i.View.extend({initialize:function(t,e){this.$button=t,this.$button.length||(this.$button=n("<div/>")),this.options=e||[],this.$button.data("popupmenu",this);var i=this;this.$button.click(function(t){return n(".popmenu-wrapper").remove(),i._renderAndShow(t),!1})},_renderAndShow:function(t){this.render(),this.$el.appendTo("body").css(this._getShownPosition(t)).show(),this._setUpCloseBehavior()},render:function(){if(this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length){var t=this;this.$el.find("li").each(function(e,i){var a=t.options[e];a.func&&n(this).children("a.popupmenu-option").click(function(e){a.func.call(t,e,a),e.preventDefault()})})}return this},template:function(t,e){return['<ul id="',t,'-menu" class="dropdown-menu">',this._templateOptions(e),"</ul>"].join("")},_templateOptions:function(t){return t.length?l.map(t,function(t){if(t.divider)return'<li class="divider"></li>';if(t.header)return['<li class="head"><a href="javascript:void(0);">',t.html,"</a></li>"].join("");var e=t.href||"javascript:void(0);",i=t.target?' target="'+t.target+'"':"",a=t.checked?'<span class="fa fa-check"></span>':"";return['<li><a class="popupmenu-option" href="',e,'"',i,">",a,t.html,"</a></li>"].join("")}).join(""):"<li>(no options)</li>"},_getShownPosition:function(t){var e=this.$el.width(),i=t.pageX-e/2;return i=Math.min(i,n(document).scrollLeft()+n(window).width()-e-5),i=Math.max(i,n(document).scrollLeft()+5),{top:t.pageY,left:i}},_setUpCloseBehavior:function(){function t(t){if(n(document).off("click.close_popup"),window&&window.parent!==window)try{n(window.parent.document).off("click.close_popup")}catch(t){}else try{n("iframe#galaxy_main").contents().off("click.close_popup")}catch(t){}e.remove()}var e=this;if(n("html").one("click.close_popup",t),window&&window.parent!==window)try{n(window.parent.document).find("html").one("click.close_popup",t)}catch(t){}else try{n("iframe#galaxy_main").contents().one("click.close_popup",t)}catch(t){}},addItem:function(t,e){return e=e>=0?e:this.options.length,this.options.splice(e,0,t),this},removeItem:function(t){return t>=0&&this.options.splice(t,1),this},findIndexByHtml:function(t){for(var e=0;e<this.options.length;e++)if(l.has(this.options[e],"html")&&this.options[e].html===t)return e;return null},findItemByHtml:function(t){return this.options[this.findIndexByHtml(t)]},toString:function(){return"PopupMenu"}});return t.create=function(e,i){return new t(e,i)},t.make_popupmenu=function(e,i){var a=[];return l.each(i,function(t,e){var i={html:e};null===t?i.header=!0:"function"===o.type(t)&&(i.func=t),a.push(i)}),new t(n(e),a)},t.convertLinksToOptions=function(t,e){t=n(t),e=e||"a";var i=[];return t.find(e).each(function(t,e){var a={},s=n(t);if(a.html=s.text(),s.attr("href")){var l=s.attr("href"),o=s.attr("target"),r=s.attr("confirm");a.func=function(){if(!r||confirm(r))switch(o){case"_parent":window.parent.location=l;break;case"_top":window.top.location=l;break;default:window.location=l}}}i.push(a)}),i},t.fromExistingDom=function(e,i,a){e=n(e),i=n(i);var s=t.convertLinksToOptions(i,a);return i.remove(),new t(e,s)},t.make_popup_menus=function(e,i,a){e=e||document,i=i||"div[popupmenu]",a=a||function(t,e){return"#"+t.attr("popupmenu")};var s=[];return n(e).find(i).each(function(){var i=n(this),l=n(e).find(a(i,e));s.push(t.fromDom(l,i)),l.addClass("popup")}),s},t}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3),i(1))},,function(t,e,i){var a,s;(function(n,l,o){a=[i(4)],s=function(t){var e=n.Model.extend({initialize:function(t){this.app=t},checksum:function(){var t="",e=this;return this.app.section.$el.find(".section-row").each(function(){var i=l(this).attr("id"),a=e.app.field_list[i];a&&(t+=i+":"+JSON.stringify(a.value&&a.value())+":"+a.collapsed+";")}),t},create:function(){function t(t,e,i){a.flat_dict[t]=e,n[t]=i,a.app.element_list[e]&&a.app.element_list[e].$el.attr("tour_id",t)}function e(s,n){for(var l in n){var o=n[l];if(o.input){var r=o.input,d=s;switch(""!=s&&(d+="|"),d+=r.name,r.type){case"repeat":var c="section-",h=[],u=null;for(var p in o){var f=p.indexOf(c);f!=-1&&(f+=c.length,h.push(parseInt(p.substr(f))),u||(u=p.substr(0,f)))}h.sort(function(t,e){return t-e});var l=0;for(var m in h)e(d+"_"+l++,o[u+h[m]]);break;case"conditional":var g=a.app.field_list[r.id].value();t(d+"|"+r.test_param.name,r.id,g);var _=i(r,g);_!=-1&&e(d,n[r.id+"-section-"+_]);break;case"section":e(!r.flat&&d||"",o);break;default:var v=a.app.field_list[r.id];if(v&&v.value){var g=v.value();if((void 0===r.ignore||r.ignore!=g)&&(v.collapsed&&r.collapsible_value&&(g=r.collapsible_value),t(d,r.id,g),r.payload))for(var b in r.payload)t(b,r.id,r.payload[b])}}}}}var a=this,s={};this._iterate(this.app.section.$el,s);var n={};return this.flat_dict={},e("",s),n},match:function(t){return this.flat_dict&&this.flat_dict[t]},matchCase:function(t,e){return i(t,e)},matchModel:function(t,e){var i=this;a(t.inputs,function(t,a){i.flat_dict[a]&&e(t,i.flat_dict[a])})},matchResponse:function(t){function e(t,s){if("string"==typeof s){var n=a.flat_dict[t];n&&(i[n]=s)}else for(var l in s){var o=l;if(""!==t){var r="|";s instanceof Array&&(r="_"),o=t+r+o}e(o,s[l])}}var i={},a=this;return e("",t),i},_iterate:function(t,e){var i=this,a=l(t).children();a.each(function(){var t=this,a=l(t).attr("id");if(l(t).hasClass("section-row")){var s=i.app.input_list[a];e[a]=s&&{input:s}||{},i._iterate(t,e[a])}else i._iterate(t,e)})}}),i=function(t,e){"boolean"==t.test_param.type&&(e="true"==e?t.test_param.truevalue||"true":t.test_param.falsevalue||"false");for(var i in t.cases)if(t.cases[i].value==e)return i;return-1},a=function(t,e,s,n){n=l.extend(!0,{},n),o.each(t,function(t){t&&t.type&&t.name&&(n[t.name]=t)});for(var r in t){var d=t[r];d.name=d.name||r;var c=s?s+"|"+d.name:d.name;switch(d.type){case"repeat":o.each(d.cache,function(t,i){a(t,e,c+"_"+i,n)});break;case"conditional":if(d.test_param){e(d.test_param,c+"|"+d.test_param.name,n);var h=i(d,d.test_param.value);h!=-1?a(d.cases[h].inputs,e,c,n):Galaxy.emit.debug("form-data::visitInputs() - Invalid case for "+c+".")}else Galaxy.emit.debug("form-data::visitInputs() - Conditional test parameter missing for "+c+".");break;case"section":a(d.inputs,e,c,n);break;default:e(d,c,n)}}};return{Manager:e,visitInputs:a}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},,,,function(t,e,i){var a,s;(function(n,l){a=[i(4)],s=function(t){var e=n.View.extend({initialize:function(e){this.options=t.merge(e,{content:"No content available.",onchange:null,ondblclick:null,onconfirm:null,cls:"ui-table",selectable:!0,cls_tr:""}),this.setElement(this._template()),this.$thead=this.$("thead"),this.$tbody=this.$("tbody"),this.$tmessage=this.$("tmessage"),this.row=this._row(),this.row_count=0},events:{click:"_onclick",dblclick:"_ondblclick"},addHeader:function(t){this.row.append(l("<th/>").append(t))},appendHeader:function(){this.$thead.append(this.row),this.row=l("<tr/>")},add:function(t,e,i){var a=l("<td/>");e&&a.css("width",e),i&&a.css("text-align",i),this.row.append(a.append(t))},append:function(t,e){this._commit(t,e,!1)},prepend:function(t,e){this._commit(t,e,!0)},get:function(t){return this.$("#"+t)},del:function(t){var e=this.$tbody.find("#"+t);e.length>0&&(e.remove(),this.row_count--,this._refresh())},delAll:function(){this.$tbody.empty(),this.row_count=0,this._refresh()},value:function(t){if(this.options.selectable){this.before=this.$tbody.find(".current").attr("id"),void 0!==t&&(this.$tbody.find("tr").removeClass("current"),t&&this.$tbody.find("#"+t).addClass("current"));var e=this.$tbody.find(".current").attr("id");return void 0===e?null:(e!=this.before&&this.options.onchange&&this.options.onchange(t),e)}},size:function(){return this.$tbody.find("tr").length},_commit:function(t,e,i){this.del(t),this.row.attr("id",t),i?this.$tbody.prepend(this.row):this.$tbody.append(this.row),e&&(this.row.hide(),this.row.fadeIn()),this.row=this._row(),this.row_count++,this._refresh()},_row:function(){return l('<tr class="'+this.options.cls_tr+'"></tr>')},_onclick:function(t){var e=this.value(),i=l(t.target).closest("tr").attr("id");""!=i&&i&&e!=i&&(this.options.onconfirm?this.options.onconfirm(i):this.value(i))},_ondblclick:function(t){var e=this.value();e&&this.options.ondblclick&&this.options.ondblclick(e)},_refresh:function(){0==this.row_count?this.$tmessage.show():this.$tmessage.hide()},_template:function(){return'<div><table class="'+this.options.cls+'"><thead/><tbody/></table><tmessage>'+this.options.content+"</tmessage><div>"}});return{View:e}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1))},,,,,function(t,e,i){var a,s;(function(i,n,l){a=[],s=function(){return i.View.extend({initialize:function(t,e){this.app=t,this.app_options=t.model?t.model.attributes:{},this.field=e&&e.field||new i.View,this.model=e&&e.model||new i.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(e),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var a=this.model.get("collapsible_value");this.field.collapsed=void 0!==a&&JSON.stringify(this.model.get("value"))==JSON.stringify(a),this.listenTo(this.model,"change",this.render,this),this.render();var s=this;this.$collapsible.on("click",function(){s.field.collapsed=!s.field.collapsed,t.trigger&&t.trigger("change"),s.render()}),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",function(){s.reset()})},backdrop:function(){this.model.set("backdrop",!0)},error:function(t){this.model.set("error_text",t)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){n(".tooltip").hide();var t=this.model.get("help",""),e=this.model.get("argument");e&&t.indexOf("("+e+")")==-1&&(t+=" ("+e+")"),this.$info.html(t),this.$el[this.model.get("hidden")?"hide":"show"](),this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(l.escape(this.model.get("text_value")));var i=this.model.get("error_text");if(this.$error[i?"show":"hide"](),this.$el[i?"addClass":"removeClass"]("ui-error"),this.$error_text.html(i),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")}),this.model.get("disabled")||void 0===this.model.get("collapsible_value"))this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide();else{var a=this.field.collapsed?"enable":"disable";this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),this.$collapsible_icon.removeClass().addClass("icon").addClass(this.model.get("cls_"+a)).attr("data-original-title",this.model.get("text_"+a)).tooltip({placement:"bottom"})}},_template:function(){return n("<div/>").addClass("ui-form-element").append(n("<div/>").addClass("ui-form-error ui-error").append(n("<span/>").addClass("fa fa-arrow-down")).append(n("<span/>").addClass("ui-form-error-text"))).append(n("<div/>").addClass("ui-form-title").append(n("<div/>").addClass("ui-form-collapsible").append(n("<i/>").addClass("ui-form-collapsible-icon")).append(n("<span/>").addClass("ui-form-collapsible-text"))).append(n("<span/>").addClass("ui-form-title-text"))).append(n("<div/>").addClass("ui-form-field").append(n("<span/>").addClass("ui-form-info")).append(n("<div/>").addClass("ui-form-backdrop"))).append(n("<div/>").addClass("ui-form-preview"))}})}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(5),i(38),i(41),i(39),i(40),i(36)],s=function(t,e,i,a,s,r,d){return n.Model.extend({types:{text:"_fieldText",password:"_fieldText",select:"_fieldSelect",data_column:"_fieldSelect",genomebuild:"_fieldSelect",data:"_fieldData",data_collection:"_fieldData",integer:"_fieldSlider",float:"_fieldSlider",boolean:"_fieldBoolean",drill_down:"_fieldDrilldown",color:"_fieldColor",hidden:"_fieldHidden",hidden_data:"_fieldHidden",baseurl:"_fieldHidden",library_data:"_fieldLibrary",ftpfile:"_fieldFtp",upload:"_fieldUpload",genomespacefile:"_fieldGenomeSpace"},create:function(t){var e=this.types[t.type],i="function"==typeof this[e]?this[e].call(this,t):null;return i||(i=t.options?this._fieldSelect(t):this._fieldText(t),Galaxy.emit.debug("form-parameters::_addRow()","Auto matched field type ("+t.type+").")),void 0===t.value&&(t.value=null),i.value(t.value),i},_fieldData:function(t){return new i.View({id:"field-"+t.id,extensions:t.extensions,optional:t.optional,multiple:t.multiple,type:t.type,flavor:t.flavor,data:t.options,onchange:t.onchange})},_fieldSelect:function(t){if(t.is_workflow)return this._fieldText(t);"data_column"==t.type&&(t.error_text="Missing columns in referenced dataset.");var i=t.data;i||(i=[],l.each(t.options,function(t){i.push({label:t[0],value:t[1]})}));var a=e.Select;switch(t.display){case"checkboxes":a=e.Checkbox;break;case"radio":a=e.Radio;break;case"radiobutton":a=e.RadioButton}return new a.View({id:"field-"+t.id,data:i,error_text:t.error_text||"No options available",multiple:t.multiple,optional:t.optional,onchange:t.onchange,individual:t.individual,searchable:"workflow"!==t.flavor})},_fieldDrilldown:function(t){return t.is_workflow?this._fieldText(t):new e.Drilldown.View({id:"field-"+t.id,data:t.options,display:t.display,optional:t.optional,onchange:t.onchange})},_fieldText:function(i){if(i.options&&i.data)if(i.area=i.multiple,t.isEmpty(i.value))i.value=null;else if(o.isArray(i.value)){var a="";for(var s in i.value){if(a+=String(i.value[s]),!i.multiple)break;a+="\n"}i.value=a}return new e.Input({id:"field-"+i.id,type:i.type,area:i.area,readonly:i.readonly,placeholder:i.placeholder,datalist:i.datalist,onchange:i.onchange})},_fieldSlider:function(t){return new e.Slider.View({id:"field-"+t.id,precise:"float"==t.type,is_workflow:t.is_workflow,min:t.min,max:t.max,onchange:t.onchange})},_fieldHidden:function(t){return new e.Hidden({id:"field-"+t.id,info:t.info})},_fieldBoolean:function(t){return new e.RadioButton.View({id:"field-"+t.id,data:[{label:"Yes",value:"true"},{label:"No",value:"false"}],onchange:t.onchange})},_fieldColor:function(t){return new d({id:"field-"+t.id,onchange:t.onchange})},_fieldLibrary:function(t){return new a.View({id:"field-"+t.id,optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldFtp:function(t){return new s.View({id:"field-"+t.id,optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldGenomeSpace:function(t){var e=this;return new r.View({id:"field-"+t.id,onchange:function(){e.app.trigger("change")}})},_fieldUpload:function(t){return new e.Upload({id:"field-"+t.id,onchange:t.onchange})}})}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(3),i(1))},function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(9),i(5)],s=function(t,e,i){var a=n.View.extend({initialize:function(e){this.list={},this.options=t.merge(e,{title:"Repeat",empty_text:"Not available.",max:null,min:null}),this.button_new=new i.ButtonIcon({icon:"fa-plus",title:"Insert "+this.options.title,tooltip:"Add new "+this.options.title+" block",cls:"ui-button-icon ui-clear-float form-repeat-add",onclick:function(){e.onnew&&e.onnew()}}),this.setElement(l("<div/>").append(this.$list=l("<div/>")).append(l("<div/>").append(this.button_new.$el)))},size:function(){return o.size(this.list)},add:function(t){if(!t.id||this.list[t.id])return void Galaxy.emit.debug("form-repeat::add()","Duplicate or invalid repeat block id.");var a=new i.ButtonIcon({icon:"fa-trash-o",tooltip:"Delete this repeat block",cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){t.ondel&&t.ondel()}}),s=new e.View({id:t.id,title:"placeholder",cls:t.cls||"ui-portlet-repeat",operations:{button_delete:a}});s.append(t.$el),s.$el.addClass("section-row").hide(),this.list[t.id]=s,this.$list.append(s.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()},del:function(t){return this.list[t]?(this.$list.find("#"+t).remove(),delete this.list[t],this.button_new.enable(),void this._refresh()):void Galaxy.emit.debug("form-repeat::del()","Invalid repeat block id.")},delAll:function(){for(var t in this.list)this.del(t)},hideOptions:function(){this.button_new.$el.hide(),o.each(this.list,function(t){t.hideOperation("button_delete")}),o.isEmpty(this.list)&&this.$el.append(l("<div/>").addClass("ui-form-info").html(this.options.empty_text))},_refresh:function(){var t=0;for(var e in this.list){var i=this.list[e];i.title(++t+": "+this.options.title),i[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}});return{View:a}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},function(t,e,i){var a,s;(function(n,l,o,r){a=[i(4),i(5),i(9),i(31),i(29),i(30)],s=function(t,e,i,a,s,d){var c=n.View.extend({initialize:function(t,e){this.app=t,this.inputs=e.inputs,this.parameters=new d,this.setElement(l("<div/>")),this.render()},render:function(){var t=this;this.$el.empty(),o.each(this.inputs,function(e){t.add(e)})},add:function(e){var i=r.extend(!0,{},e);switch(i.id=e.id=t.uid(),this.app.input_list[i.id]=i,i.type){case"conditional":this._addConditional(i);break;case"repeat":this._addRepeat(i);break;case"section":this._addSection(i);break;default:this._addRow(i)}},_addConditional:function(t){var e=this;t.test_param.id=t.id,this.app.model.get("sustain_conditionals")&&(t.test_param.disabled=!0);var i=this._addRow(t.test_param);i.model&&i.model.set("onchange",function(i){var a=e.app.data.matchCase(t,i);for(var s in t.cases){var n=t.cases[s],l=e.$("#"+t.id+"-section-"+s),o=!1;for(var r in n.inputs)if(!n.inputs[r].hidden){o=!0;break}s==a&&o?l.fadeIn("fast"):l.hide()}e.app.trigger("change")});for(var a in t.cases){var s=new c(this.app,{inputs:t.cases[a].inputs});this._append(s.$el.addClass("ui-form-section"),t.id+"-section-"+a)}i.trigger("change")},_addRepeat:function(t){function e(e){var a=t.id+"-section-"+n++,s=new c(i.app,{inputs:e});l.add({id:a,$el:s.$el,ondel:function(){l.del(a),i.app.trigger("change")}})}for(var i=this,n=0,l=new a.View({title:t.title||"Repeat",min:t.min,max:t.max,onnew:function(){e(t.inputs),i.app.trigger("change")}}),r=o.size(t.cache),d=0;d<Math.max(Math.max(r,t.min||0),t.default||0);d++)e(d<r?t.cache[d]:t.inputs);this.app.model.get("sustain_repeats")&&l.hideOptions();var h=new s(this.app,{label:t.title||t.name,help:t.help,field:l});this._append(h.$el,t.id)},_addSection:function(t){var e=new i.View({title:t.title||t.name,cls:"ui-portlet-section",collapsible:!0,collapsible_button:!0,collapsed:!t.expanded});e.append(new c(this.app,{inputs:t.inputs}).$el),e.append(l("<div/>").addClass("ui-form-info").html(t.help)),this.app.on("expand",function(t){e.$("#"+t).length>0&&e.expand()}),this._append(e.$el,t.id)},_addRow:function(t){var e=this,i=t.id;t.onchange=t.onchange||function(){e.app.trigger("change",i)};var a=this.parameters.create(t);this.app.field_list[i]=a;var n=new s(this.app,{name:t.name,label:t.hide_label?"":t.label||t.name,value:t.value,text_value:t.text_value,collapsible_value:t.collapsible_value,collapsible_preview:t.collapsible_preview,help:t.help,argument:t.argument,disabled:t.disabled,color:t.color,style:t.style,backdrop:t.backdrop,hidden:t.hidden,fixed:t.fixed,field:a});return this.app.element_list[i]=n,this._append(n.$el,t.id),a},_append:function(t,e){this.$el.append(t.addClass("section-row").attr("id",e))}});return{View:c}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3),i(1))},function(t,e,i){var a,s;(function(i,n,l){a=[],s=function(){return i.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(t){return n.indexOf(this.attributes.async_ops,t)!==-1},add_filter:function(t,e,i){if(i){var a,s=this.attributes.filters[t];if(null===s||void 0===s)a=e;else if("string"==typeof s)if("All"==s||s==e)a=e;else{var n=[];n[0]=s,n[1]=e,a=n}else a=s,a.indexOf(e)===-1&&a.push(e);this.attributes.filters[t]=a}else this.attributes.filters[t]=e},remove_filter:function(t,e){var i=this.attributes.filters[t];if(null===i||void 0===i)return!1;if("string"==typeof i)this.attributes.filters[t]="";else{var a=n.indexOf(i,e);a!==-1&&(i[a]="")}},get_url_data:function(){var t={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(t.operation=this.attributes.operation),this.attributes.item_ids&&(t.id=this.attributes.item_ids);var e=this;return n.each(n.pairs(e.attributes.filters),function(e){t["f-"+e[0]]=e[1]}),t},get_url:function(t){
return this.get("url_base")+"?"+l.param(this.get_url_data())+"&"+l.param(t)}})}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(3),i(1))},function(t,e,i){var a,s;(function(n,l){a=[i(4)],s=function(t){return{grid:function(t){var e="";return e=t.embedded?this.grid_header(t)+this.grid_table(t):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'+this.grid_header(t)+'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>'+this.grid_table(t),t.info_text&&(e+='<br><div class="toolParamHelp" style="clear: both;">'+t.info_text+"</div>"),e},grid_table:function(t){return'<form method="post" onsubmit="return false;"><table id="grid-table" class="grid"><thead id="grid-table-header"></thead><tbody id="grid-table-body"></tbody><tfoot id="grid-table-footer"></tfoot></table></form>'},grid_header:function(t){var e='<div class="grid-header">';if(t.embedded||(e+="<h2>"+t.title+"</h2>"),t.global_actions){e+='<ul class="manage-table-actions">';var i=t.global_actions.length>=3;i&&(e+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');for(var a in t.global_actions){var s=t.global_actions[a];e+='<li><a class="action-button use-target" target="'+s.target+'" href="'+s.url_args+'" onclick="return false;" >'+s.label+"</a></li>"}i&&(e+="</div>"),e+="</ul>"}return t.insert&&(e+=t.insert),e+=this.grid_filters(t),e+="</div>"},header:function(t){var e="<tr>";t.show_item_checkboxes&&(e+="<th>",t.items.length>0&&(e+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),e+="</th>");for(var i in t.columns){var a=t.columns[i];a.visible&&(e+='<th id="'+a.key+'-header">',e+=a.href?'<a href="'+a.href+'" class="sort-link" sort_key="'+a.key+'">'+a.label+"</a>":a.label,e+='<span class="sort-arrow">'+a.extra+"</span></th>")}return e+="</tr>"},body:function(t){var e="",i=0,a=t.items.length;0==a&&(e+='<tr><td colspan="100"><em>No Items</em></td></tr>',i=1);for(var s in t.items){var l=t.items[s],o=l.encode_id;e+="<tr ",t.current_item_id==l.id&&(e+='class="current"'),e+=">",t.show_item_checkboxes&&(e+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'+o+'" id="'+o+'" class="grid-row-select-checkbox" /></td>');for(var r in t.columns){var d=t.columns[r];if(d.visible){var c="";d.nowrap&&(c='style="white-space:nowrap;"');var h=l.column_config[d.label],u=h.link,p=h.value,f=h.target;"string"===n.type(p)&&(p=p.replace(/\/\//g,"/"));var m="",g="";d.attach_popup&&(m="grid-"+s+"-popup",g="menubutton",""!=u&&(g+=" split"),g+=" popup"),e+="<td "+c+">",u?(0!=t.operations.length&&(e+='<div id="'+m+'" class="'+g+'" style="float: left;">'),e+='<a class="menubutton-label use-target" target="'+f+'" href="'+u+'" onclick="return false;">'+p+"</a>",0!=t.operations.length&&(e+="</div>")):e+='<div id="'+m+'" class="'+g+'"><label id="'+d.label_id_prefix+o+'" for="'+o+'">'+(p||"")+"</label></div>",e+="</td>"}}e+="</tr>",i++}return e},footer:function(t){var e="";if(t.use_paging&&t.num_pages>1){var i=t.num_page_links,a=t.cur_page_num,s=t.num_pages,n=i/2,l=a-n,o=0;l<=0&&(l=1,o=n-(a-l));var r,d=n+o,c=a+d;c<=s?r=0:(c=s,r=d-(c+1-a)),0!=r&&(l-=r,l<1&&(l=1)),e+='<tr id="page-links-row">',t.show_item_checkboxes&&(e+="<td></td>"),e+='<td colspan="100"><span id="page-link-container">Page:',l>1&&(e+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var h=l;h<c+1;h++)e+=h==t.cur_page_num?'<span class="page-link inactive-link" id="page-link-'+h+'">'+h+"</span>":'<span class="page-link" id="page-link-'+h+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+h+'">'+h+"</a></span>";c<s&&(e+='...<span class="page-link" id="page-link-'+s+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+s+'">'+s+"</a></span>"),e+="</span>",e+='<span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span></td></tr>'}if(t.show_item_checkboxes){e+='<tr><input type="hidden" id="operation" name="operation" value=""><td></td><td colspan="100">For <span class="grid-selected-count"></span> selected items: ';for(var u in t.operations){var p=t.operations[u];p.allow_multiple&&(e+='<input type="button" value="'+p.label+'" class="operation-button action-button">&nbsp;')}e+="</td></tr>"}var f=!1;for(u in t.operations)if(t.operations[u].global_operation){f=!0;break}if(f){e+='<tr><td colspan="100">';for(u in t.operations){var p=t.operations[u];p.global_operation&&(e+='<a class="action-button" href="'+p.global_operation+'">'+p.label+"</a>")}e+="</td></tr>"}return t.legend&&(e+='<tr><td colspan="100">'+t.legend+"</td></tr>"),e},message:function(t){var e="success"==t.status?"done":t.status;return'<p><div class="'+e+'message transient-message">'+l.escape(t.message)+'</div><div style="clear: both"></div></p>'},grid_filters:function(t){var e=t.default_filter_dict,i=t.filters,a="none";t.advanced_search&&(a="block");var s=!1;for(var n in t.columns){var l=t.columns[n];if("advanced"==l.filterable){var o=l.key,r=i[o],d=e[o];r&&d&&r!=d&&(a="block"),s=!0}}var c="block";"block"==a&&(c="none");var h='<div id="standard-search" style="display: '+c+';"><table><tr><td style="padding: 0;"><table>';for(var n in t.columns){var l=t.columns[n];"standard"==l.filterable&&(h+=this.grid_column_filter(t,l))}h+="</table></td></tr><tr><td>",s&&(h+='<a href="" class="advanced-search-toggle">Advanced Search</a>'),h+="</td></tr></table></div>",h+='<div id="advanced-search" style="display: '+a+'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="" class="advanced-search-toggle">Close Advanced Search</a></td></tr>';for(var n in t.columns){var l=t.columns[n];"advanced"==l.filterable&&(h+=this.grid_column_filter(t,l))}return h+="</table></div>"},grid_column_filter:function(t,e){var i=(t.default_filter_dict,t.filters),a=e.label,s=e.key;"advanced"==e.filterable&&(a=a.toLowerCase());var l="<tr>";if("advanced"==e.filterable&&(l+='<td align="left" style="padding-left: 10px">'+a+":</td>"),l+='<td style="padding-bottom: 1px;">',e.is_text){l+='<form class="text-filter-form" column_key="'+s+'" action="'+t.url+'" method="get" >';for(h in t.columns){var o=t.columns[h],r=i[o.key];r&&"All"!=r&&(o.is_text&&(r=JSON.stringify(r)),l+='<input type="hidden" id="'+o.key+'" name="f-'+o.key+'" value="'+r+'"/>')}l+='<span id="'+s+'-filtering-criteria">';var d=i[s];if(d){var c=n.type(d);if("string"==c&&"All"!=d&&(l+=this.filter_element(s,d)),"array"==c)for(var h in d){var u=d[h],p=d;p=p.slice(h),l+=this.filter_element(s,u)}}l+="</span>";var f="";if("standard"==e.filterable){f=e.label.toLowerCase();var m=f.length;m<20&&(m=20),m+=4}l+='<span class="search-box"><input class="search-box-input" id="input-'+s+'-filter" name="f-'+s+'" type="text" placeholder="'+f+'" size="'+m+'"/><button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;"><i class="fa fa-search"></i></button></span></form>'}else{l+='<span id="'+s+'-filtering-criteria">';var g=!1;for(var _ in t.categorical_filters[s]){var v=t.categorical_filters[s][_],b="",w="";for(var $ in v)b=$,w=v[$];g&&(l+=" | "),g=!0;var u=i[s];l+=u&&v[s]&&u==w?'<span class="categorical-filter '+s+'-filter current-filter">'+_+"</span>":'<span class="categorical-filter '+s+'-filter"><a href="javascript:void(0);" filter_key="'+b+'" filter_val="'+w+'">'+_+"</a></span>"}l+="</span>"}return l+="</td></tr>"},filter_element:function(e,i){return i=t.sanitize(i),'<span class="text-filter-val">'+i+'<a href="javascript:void(0);" filter_key="'+e+'" filter_val="'+i+'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>'}}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(1),i(3))},function(t,e,i){var a,s;a=[],s=function(){return{openFileBrowser:function(t){var e=window.Galaxy.config.genomespace_ui_url,i=e+"upload/loadUrlToGenomespace.html?getLocation=true",a=window.open(i,"GenomeSpace File Browser","height=360px,width=600px");successCalBack=t.successCallback,window.addEventListener("message",function(t){successCalBack(t.data)},!1),a.focus(),null!=t.errorCallback&&(a.setCallbackOnGSUploadError=config.errorCallback)}}}.apply(e,a),!(void 0!==s&&(t.exports=s))},function(t,e,i){var a,s;(function(n,l){a=[i(4)],s=function(t){return n.View.extend({colors:{standard:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],base:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],theme:[["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada"],["d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5"],["bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f"],["a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09"],["7f7f7e","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"]]},initialize:function(e){this.options=t.merge(e,{}),this.setElement(this._template()),this.$panel=this.$(".ui-color-picker-panel"),this.$view=this.$(".ui-color-picker-view"),this.$value=this.$(".ui-color-picker-value"),this.$header=this.$(".ui-color-picker-header"),this._build(),this.visible=!1,this.value(this.options.value),this.$boxes=this.$(".ui-color-picker-box");var i=this;this.$boxes.on("click",function(){i.value(l(this).css("background-color")),i.$header.trigger("click")}),this.$header.on("click",function(){i.visible=!i.visible,i.visible?i.$view.fadeIn("fast"):i.$view.fadeOut("fast")})},value:function(t){return void 0!==t&&null!==t&&(this.$value.css("background-color",t),this.$(".ui-color-picker-box").empty(),this.$(this._getValue()).html(this._templateCheck()),this.options.onchange&&this.options.onchange(t)),this._getValue()},_getValue:function(){function t(t){return("0"+parseInt(t).toString(16)).slice(-2)}var e=this.$value.css("background-color");return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e?"#"+t(e[1])+t(e[2])+t(e[3]):null},_build:function(){this._content({colors:this.colors.base});for(var t in this.colors.theme){var e={};0==t?e.bottom=!0:t!=this.colors.theme.length-1?(e.top=!0,e.bottom=!0):e.top=!0,e.colors=this.colors.theme[t],this._content(e)}this._content({colors:this.colors.standard})},_content:function(t){var e=t.colors,i=l(this._templateContent()),a=i.find(".line");this.$panel.append(i);for(var s in e){var n=l(this._templateBox(e[s]));t.top&&(n.css("border-top","none"),n.css("border-top-left-radius","0px"),n.css("border-top-right-radius","0px")),t.bottom&&(n.css("border-bottom","none"),n.css("border-bottom-left-radius","0px"),n.css("border-bottom-right-radius","0px")),a.append(n)}return i},_templateCheck:function(){return'<div class="ui-color-picker-check fa fa-check"/>'},_templateContent:function(){return'<div class="ui-color-picker-content"><div class="line"/></div>'},_templateBox:function(t){return'<div id="'+t+'" class="ui-color-picker-box" style="background-color: #'+t+';"/>'},_template:function(){return'<div class="ui-color-picker"><div class="ui-color-picker-header"><div class="ui-color-picker-value"/><div class="ui-color-picker-label">Select a color</div></div><div class="ui-color-picker-view ui-input"><div class="ui-color-picker-panel"/></div>'}})}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1))},function(t,e,i){var a,s;(function(n,l){a=[i(4),i(14)],s=function(t,e){var i=e.BaseIcons.extend({initialize:function(t){t.type=t.display||"checkbox",t.multiple="checkbox"==t.type,e.BaseIcons.prototype.initialize.call(this,t)},_setValue:function(t){if(e.BaseIcons.prototype._setValue.call(this,t),void 0!==t&&null!==t&&this.header_index){var i=this,a=n.isArray(t)?t:[t];l.each(a,function(t){var e=i.header_index[t];l.each(e,function(t){i._setState(t,!0)})})}},_setState:function(t,e){var i=this.$(".button-"+t),a=this.$(".subgroup-"+t);i.data("is_expanded",e),e?(a.show(),i.removeClass("fa-plus-square").addClass("fa-minus-square")):(a.hide(),i.removeClass("fa-minus-square").addClass("fa-plus-square"))},_templateOptions:function(){function e(t,e){var i=t.find(".button-"+e);i.on("click",function(){a._setState(e,!i.data("is_expanded"))})}function i(s,l,o){o=o||[];for(var r in l){var d=l[r],c=d.options&&d.options.length>0,h=o.slice(0);a.header_index[d.value]=h.slice(0);var u=n("<div/>");if(c){var p=t.uid(),f=n("<span/>").addClass("button-"+p).addClass("ui-drilldown-button fa fa-plus-square"),m=n("<div/>").addClass("subgroup-"+p).addClass("ui-drilldown-subgroup");u.append(n("<div/>").append(f).append(a._templateOption({label:d.name,value:d.value}))),h.push(p),i(m,d.options,h),u.append(m),e(u,p)}else u.append(a._templateOption({label:d.name,value:d.value}));s.append(u)}}var a=this;this.header_index={};var s=n("<div/>");return i(s,this.model.get("data")),s},_template:function(){return n("<div/>").addClass("ui-options-list drilldown-container").attr("id",this.model.id)}});return{View:i}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(1),i(3))},function(t,e,i){var a,s;(function(n,l,o){a=[i(4),i(5),i(15)],s=function(t,e,i){var a={DISABLED:"disabled",ENABLED:"enabled",LINKED:"linked"},s={data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:a.DISABLED},{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:a.LINKED},{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:a.LINKED}],data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:a.DISABLED},{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collections",multiple:!0,batch:a.DISABLED}],data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:a.DISABLED}],workflow_data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:a.DISABLED}],workflow_data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:a.DISABLED}],workflow_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:a.DISABLED}],module_data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:a.DISABLED},{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:a.ENABLED}],module_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:a.DISABLED},{src:"hdca",icon:"fa-folder",tooltip:"Multiple collections",multiple:!0,batch:a.ENABLED}]},r=n.View.extend({initialize:function(t){var i=this;this.model=t&&t.model||new n.Model({src_labels:{hda:"dataset",hdca:"dataset collection"},pagelimit:100,statustimer:1e3}).set(t),this.setElement(l("<div/>").addClass("ui-select-content")),this.button_product=new e.RadioButton.View({value:"false",data:[{icon:"fa fa-chain",value:"false",tooltip:"Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads."},{icon:"fa fa-chain-broken",value:"true",tooltip:"Unlinked dataset inputs will be run against *all* other inputs."}]});var a=l("<div/>").addClass("ui-form-info").append(l("<i/>").addClass("fa fa-sitemap")).append(l("<span/>").html("This is a batch mode input field. Separate jobs will be triggered for each dataset selection."));this.$batch={linked:a.clone(),enabled:a.clone().append(l("<div/>").append(l("<div/>").addClass("ui-form-title").html("Batch options:")).append(this.button_product.$el)).append(l("<div/>").css("clear","both"))},this.$el.on("dragenter",function(t){this.lastenter=t.target,i.$el.addClass("ui-dragover")}).on("dragover",function(t){t.preventDefault()}).on("dragleave",function(t){this.lastenter===t.target&&i.$el.removeClass("ui-dragover")}).on("drop",function(t){i._handleDrop(t)}),this.history={},this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:current",this._changeCurrent,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:type change:optional change:multiple change:extensions",this._changeType,this),this.render(),this.on("change",function(){t.onchange&&t.onchange(i.value())})},render:function(){this._changeType(),this._changeValue(),this._changeWait()},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},update:function(t){this.model.set("data",t)},value:function(t){void 0!==t&&this.model.set("value",t);var e=this.model.get("current");if(this.config[e]){var i=this.fields[e].value();if(null!==i&&(i=l.isArray(i)?i:[i],i.length>0)){var a=this._batch({values:[]});for(var s in i){var n=this.history[i[s]+"_"+this.config[e].src];if(!n)return Galaxy.emit.debug("ui-select-content::value()","Requested details not found for '"+i[s]+"'."),null;a.values.push(n)}return a.values.sort(function(t,e){return t.hid-e.hid}),a}}else Galaxy.emit.debug("ui-select-content::value()","Invalid value/source '"+t+"'.");return null},_changeCurrent:function(){var t=this;o.each(this.fields,function(e,i){t.model.get("current")==i?(e.$el.show(),o.each(t.$batch,function(e,a){e[t.config[i].batch==a?"show":"hide"]()}),t.button_type.value(i)):e.$el.hide()})},_changeType:function(){var a=this,n=(this.model.get("flavor")?this.model.get("flavor")+"_":"")+String(this.model.get("type"))+(this.model.get("multiple")?"_multiple":"");s[n]?this.config=s[n]:(this.config=s.data,Galaxy.emit.debug("ui-select-content::_changeType()","Invalid configuration/type id '"+n+"'."));var l=a.model.get("data"),r=t.textify(this.model.get("extensions")),d=this.model.get("src_labels");this.fields=[],this.button_data=[],o.each(this.config,function(t,e){a.button_data.push({value:e,icon:t.icon,tooltip:t.tooltip}),a.fields.push(new i.View({optional:a.model.get("optional"),multiple:t.multiple,searchable:!t.multiple||l&&l[t.src]&&l[t.src].length>a.model.get("pagelimit"),individual:!0,error_text:"No "+(r?r+" ":"")+(d[t.src]||"content")+" available.",onchange:function(){a.trigger("change")}}))}),this.button_type=new e.RadioButton.View({value:this.model.get("current"),data:this.button_data,onchange:function(t){a.model.set("current",t),a.trigger("change")}}),this.$el.empty();var c=0;this.fields.length>1&&(this.$el.append(this.button_type.$el),c=Math.max(0,36*this.fields.length)+"px"),o.each(this.fields,function(t){a.$el.append(t.$el.css({"margin-left":c}))}),o.each(this.$batch,function(t,e){a.$el.append(t.css({"margin-left":c}))}),this.model.set("current",0),this._changeCurrent(),this._changeData()},_changeWait:function(){var t=this;o.each(this.fields,function(e){e[t.model.get("wait")?"wait":"unwait"]()})},_changeData:function(){var t=this.model.get("data"),e=this,i={};o.each(t,function(t,a){i[a]=[],o.each(t,function(t){i[a].push({hid:t.hid,keep:t.keep,label:t.hid+": "+t.name,value:t.id,tags:t.tags}),e.history[t.id+"_"+a]=t})}),o.each(this.config,function(t,a){i[t.src]&&e.fields[a].add(i[t.src],function(t,e){return e.hid-t.hid})})},_changeValue:function(){var t=this.model.get("value");if(t&&t.values&&t.values.length>0){var e=[];o.each(t.values,function(t){e.push(t.id)});for(var i=t.values[0].src,a=t.values.length>1,s=0;s<this.config.length;s++){var n=this.fields[s],l=this.config[s];if(l.src==i&&[a,!0].indexOf(l.multiple)!==-1){this.model.set("current",s),n.value(e);break}}}else o.each(this.fields,function(t){t.value(null)})},_handleDrop:function(t){try{var e=this.model.get("data"),i=this.model.get("current"),a=this.config[i],s=this.fields[i],n=JSON.parse(t.originalEvent.dataTransfer.getData("text"))[0],l=n.id,r="dataset"==n.history_content_type?"hda":"hdca",d={id:l,src:r};if(e&&o.findWhere(e[r],d)){if(a.src==r){var c=s.value();c&&a.multiple?c.indexOf(l)==-1&&c.push(l):c=l,s.value(c)}else this.model.set("value",{values:[d]}),this.model.trigger("change:value");this.trigger("change"),this._handleDropStatus("success")}else this._handleDropStatus("danger")}catch(t){this._handleDropStatus("danger")}t.preventDefault()},_handleDropStatus:function(t){var e=this;this.$el.removeClass("ui-dragover").addClass("ui-dragover-"+t),setTimeout(function(){e.$el.removeClass("ui-dragover-"+t)},this.model.get("statustimer"))},_batch:function(t){t.batch=!1;var e=this.model.get("current"),i=this.config[e];if("hdca"==i.src&&!i.multiple){var s=this.history[this.fields[e].value()+"_hdca"];s&&s.map_over_type&&(t.batch=!0)}return i.batch!=a.LINKED&&i.batch!=a.ENABLED||(t.batch=!0,i.batch==a.ENABLED&&"true"===this.button_product.value()&&(t.product=!0)),t}});return{View:r}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1),i(3))},function(t,e,i){var a,s;(function(n){a=[i(4),i(13)],s=function(t,e){var i=n.View.extend({initialize:function(i){var a=this;this.ftpfile_list=new e.View({name:"file",optional:i.optional,multiple:i.multiple,onchange:function(){i.onchange&&i.onchange(a.value())}}),this.setElement(this.ftpfile_list.$el),t.get({url:Galaxy.root+"api/remote_files",success:function(t){var e=[];for(var i in t)e.push({value:t[i].path,label:t[i].path});a.ftpfile_list.update(e)}})},value:function(t){return this.ftpfile_list.value(t)}});return{View:i}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2))},function(t,e,i){var a,s;(function(n){a=[i(4),i(5),i(35)],s=function(t,e,i){var a=n.View.extend({initialize:function(t){var i=this;this.browse_button=new e.ButtonIcon({title:"Browse",icon:"fa fa-sign-in",tooltip:"Browse GenomeSpace",onclick:function(){i.browseGenomeSpace()}}),this.filename_textbox=new e.Input,this.token_textbox=new e.Input({type:"password"}),this.setElement(this._template(t)),this.$(".ui-gs-browse-button").append(this.browse_button.$el),this.$(".ui-gs-filename-textbox").append(this.filename_textbox.$el),this.$(".ui-gs-token-textbox").append(this.token_textbox.$el)},browseGenomeSpace:function(t){var e=this;i.openFileBrowser({successCallback:function(t){e.value(t.destination+"^"+t.token)}})},_template:function(t){return'<div class="ui-gs-select-file"><div class="ui-gs-browse-field"><span class="ui-gs-browse-button" /><span class="ui-gs-filename-textbox" /></div><div class="ui-gs-token-field"><span class=ui-gs-label"><div class="ui-gs-token-label">Token</div></span><span class="ui-gs-token-textbox" /></div></div>'},value:function(t){return void 0===t?this._getValue():void this._setValue(t)},_getValue:function(){return this.filename_textbox.value()+"^"+this.token_textbox.value()},_setValue:function(t){t&&(values=t.split("^"),this.filename_textbox.value(values[0]),this.token_textbox.value(values[1]))}});return{View:a}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2))},function(t,e,i){var a,s;(function(n){a=[i(4),i(5),i(24),i(13)],s=function(t,e,i,a){var s=n.Collection.extend({url:Galaxy.root+"api/libraries?deleted=false"}),l=n.Collection.extend({initialize:function(){var t=this;this.config=new n.Model({library_id:null}),this.config.on("change",function(){t.fetch({reset:!0})})},url:function(){return Galaxy.root+"api/libraries/"+this.config.get("library_id")+"/contents"}}),o=n.View.extend({initialize:function(t){var i=this;this.libraries=new s,this.datasets=new l,this.options=t,this.library_select=new e.Select.View({onchange:function(t){i.datasets.config.set("library_id",t)}}),this.dataset_list=new a.View({name:"dataset",optional:t.optional,multiple:t.multiple,onchange:function(){i.trigger("change")}}),this.libraries.on("reset",function(){var t=[];i.libraries.each(function(e){t.push({value:e.id,label:e.get("name")})}),i.library_select.update(t)}),this.datasets.on("reset",function(){var t=[],e=i.library_select.text();null!==e&&i.datasets.each(function(e){"file"===e.get("type")&&t.push({value:e.id,label:e.get("name")})}),i.dataset_list.update(t)}),this.on("change",function(){t.onchange&&t.onchange(i.value())}),this.setElement(this._template()),this.$(".library-select").append(this.library_select.$el),this.$el.append(this.dataset_list.$el),this.libraries.fetch({reset:!0,success:function(){i.library_select.trigger("change"),void 0!==i.options.value&&i.value(i.options.value)}})},value:function(t){return this.dataset_list.value(t)},_template:function(){return'<div class="ui-select-library"><div class="library ui-margin-bottom"><span class="library-title">Select Library</span><span class="library-select"/></div></div>'}});return{View:o}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2))},function(t,e,i){var a,s;(function(n,l){a=[i(4)],s=function(t){var e=n.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new n.Model({id:t.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var a=[];this.$text.on("change",function(){i.value(l(this).val())}).on("keyup",function(t){a[t.which]=!1}).on("keydown",function(t){var e=t.which;a[e]=!0,i.model.get("is_workflow")&&a[16]&&52==e?(i.value("$"),event.preventDefault()):8==e||9==e||13==e||37==e||39==e||e>=48&&e<=57&&!a[16]||e>=96&&e<=105||(190==e||110==e)&&l(this).val().indexOf(".")==-1&&i.model.get("precise")||(189==e||109==e)&&l(this).val().indexOf("-")==-1||i._isParameter(l(this).val())||a[91]||a[17]||event.preventDefault()});var s=this.model.attributes;this.has_slider=null!==s.max&&null!==s.min&&s.max>s.min;var o=s.step;o||(o=s.precise&&this.has_slider?(s.max-s.min)/s.split:1),this.has_slider?(this.$text.addClass("ui-form-slider-left"),this.$slider.slider({min:s.min,max:s.max,step:o}).on("slide",function(t,e){i.value(e.value)})):this.$slider.hide(),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.get("value");this.has_slider&&this.$slider.slider("value",t),t!==this.$text.val()&&this.$text.val(t)},value:function(t){var e=this.model.attributes;return void 0!==t&&(null===t||""===t||this._isParameter(t)||(isNaN(t)&&(t=0),!e.precise&&(t=Math.round(t)),null!==e.max&&(t=Math.min(t,e.max)),null!==e.min&&(t=Math.max(t,e.min))),this.model.set("value",t),this.model.trigger("change"),e.onchange(t)),this.model.get("value")},_isParameter:function(t){return this.model.get("is_workflow")&&"$"===String(t).substring(0,1)},_template:function(){return'<div class="ui-form-slider"><input class="ui-form-slider-text" type="text"/><div class="ui-form-slider-element"/></div>'}});return{View:e}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1))},,,,,,,,,,,,,function(t,e,i){(function(e){var a=i(1),s=a,n=i(19),l=i(5),o=e.Router.extend({initialize:function(t,e){this.page=t,this.options=e},push:function(t,e){e=e||{},e.__identifer=Math.random().toString(36).substr(2),s.isEmptyObject(e)||(t+=t.indexOf("?")==-1?"?":"&",t+=s.param(e,!0)),Galaxy.params={},this.navigate(t,{trigger:!0})},execute:function(t,e,i){Galaxy.debug("router execute:",t,e,i);var a=n.parse(e.pop());e.push(a),t&&(this.authenticate(e,i)?t.apply(this,e):this.access_denied())},authenticate:function(t,e){return!0},access_denied:function(){this.page.display(new l.Message({status:"danger",message:"You must be logged in with proper credentials to make this request.",persistent:!0}))}});t.exports=o}).call(e,i(2))},,,,,,,function(t,e,i){var a,s;(function(n,l){a=[i(10),i(5)],s=function(t,e){var i=n.View.extend({initialize:function(t){this.model=new n.Model(t),this.url=this.model.get("url"),this.redirect=this.model.get("redirect"),this.setElement("<div/>"),this.render()},render:function(){var i=this;l.ajax({url:Galaxy.root+this.url,type:"GET"}).done(function(a){var s=l.extend({},i.model.attributes,a),n=new t({title:s.title,message:s.message,status:s.status||"warning",icon:s.icon,inputs:s.inputs,buttons:{submit:new e.Button({tooltip:s.submit_tooltip,title:s.submit_title||"Save",icon:s.submit_icon||"fa-save",cls:"btn btn-primary ui-clear-float",onclick:function(){i._submit(n)}})}});i.$el.empty().append(n.$el)}).fail(function(t){i.$el.empty().append(new e.Message({message:"Failed to load resource "+i.url+".",status:"danger",persistent:!0}).$el)})},_submit:function(t){var e=this;l.ajax({url:Galaxy.root+e.url,data:JSON.stringify(t.data.create()),type:"PUT",contentType:"application/json"}).done(function(i){var a={message:i.message,status:"success",persistent:!1};e.redirect?window.location=Galaxy.root+e.redirect+"?"+l.param(a):(t.data.matchModel(i,function(e,i){t.field_list[i].value(e.value)}),e._showMessage(t,a))}).fail(function(i){e._showMessage(t,{message:i.responseJSON.err_msg,status:"danger",persistent:!1})})},_showMessage:function(t,e){var i=t.$el.parents().filter(function(){return["auto","scroll"].indexOf(l(this).css("overflow"))!=-1}).first();i.animate({scrollTop:0},500),t.message.update(e)}});return{View:i}}.apply(e,a),!(void 0!==s&&(t.exports=s))}).call(e,i(2),i(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(e,a,s){var n=i(6),l=e.View.extend({initialize:function(t,i){var a=this;this.page=t,this.root=i.root,this.config=i.config,this.settings=i.settings,this.message=i.message,this.status=i.status,this.model=new e.Model({title:n("Administration")}),this.categories=new e.Collection([{title:"Server",items:[{title:"Data types registry",url:"admin/view_datatypes_registry"},{title:"Data tables registry",url:"admin/view_tool_data_tables"},{title:"Display applications",url:"admin/display_applications"},{title:"Manage jobs",url:"admin/jobs"}]},{title:"Tools and Tool Shed",items:[{title:"Search Tool Shed",url:"admin_toolshed/browse_tool_sheds",enabled:a.settings.is_tool_shed_installed},{title:"Search Tool Shed (Beta)",url:"admin_toolshed/browse_toolsheds",enabled:a.settings.is_tool_shed_installed&&a.config.enable_beta_ts_api_install},{title:"Monitor installing repositories",url:"admin_toolshed/monitor_repository_installation?installing_repository_ids="+a.settings.installing_repository_ids,enabled:a.settings.installing_repository_ids},{title:"Manage installed tools",url:"admin_toolshed/browse_repositories",enabled:a.settings.is_repo_installed},{title:"Reset metadata",url:"admin_toolshed/reset_metadata_on_selected_installed_repositories",enabled:a.settings.is_repo_installed},{title:"Download local tool",url:"admin/package_tool"},{title:"Tool lineage",url:"admin/tool_versions",target:"__use_router__"},{title:"Reload a tool's configuration",url:"admin/reload_tool"},{title:"Review tool migration stages",url:"admin/review_tool_migration_stages"},{title:"View Tool Error Logs",url:"admin/tool_errors"},{title:"Manage Display Whitelist",url:"admin/sanitize_whitelist"},{title:"Manage Tool Dependencies",url:"admin/manage_tool_dependencies"}]},{title:"User Management",items:[{title:"Users",url:"admin/users",target:"__use_router__"},{title:"Groups",url:"admin/groups",target:"__use_router__"},{title:"Roles",url:"admin/roles",target:"__use_router__"},{title:"API keys",url:"userskeys/all_users"},{title:"Impersonate a user",url:"admin/impersonate",enabled:a.config.allow_user_impersonation}]},{title:"Data",items:[{title:"Quotas",url:"admin/quotas",target:"__use_router__",enabled:a.config.enable_quotas},{title:"Data libraries",url:"library_admin/browse_libraries"},{title:"Roles",url:"admin/roles",target:"__use_router__"},{title:"Local data",url:"data_manager"}]},{title:"Form Definitions",items:[{title:"Form definitions",url:"forms/browse_form_definitions"}]},{title:"Sample Tracking",items:[{title:"Sequencers and external services",url:"external_service/browse_external_services"},{title:"Request types",url:"request_type/browse_request_types"},{title:"Sequencing requests",url:"requests_admin/browse_requests"},{title:"Find samples",url:"requests_common/find_samples?cntrller=requests_admin"}]}]),this.setElement(this._template())},render:function(){var t=this;this.$el.empty(),this.categories.each(function(e){var i=a(t._templateSection(e.attributes)),l=i.find(".ui-side-section-body");s.each(e.get("items"),function(e){
if(void 0===e.enabled||e.enabled){var i=a("<a/>").attr({href:t.root+e.url}).text(n(e.title));"__use_router__"==e.target?i.on("click",function(i){i.preventDefault(),t.page.router.push(e.url)}):i.attr("target","galaxy_main"),l.append(a("<div/>").addClass("ui-side-section-body-title").append(i))}}),t.$el.append(i)}),this.page.$("#galaxy_main").prop("src",this.root+"admin/center?message="+this.message+"&status="+this.status)},_templateSection:function(t){return["<div>",'<div class="ui-side-section-title">'+n(t.title)+"</div>",'<div class="ui-side-section-body"/>',"</div>"].join("")},_template:function(){return'<div class="ui-side-panel"/>'},toString:function(){return"adminPanel"}});t.exports=l}).call(e,i(2),i(1),i(3))}]);
//# sourceMappingURL=admin.bundled.js.map