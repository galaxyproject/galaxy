!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i=window.webpackJsonp;window.webpackJsonp=function(n,s,o){for(var r,l,h,c=0,u=[];c<n.length;c++)l=n[c],a[l]&&u.push(a[l][0]),a[l]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(i&&i(n,s,o);u.length;)u.shift()();if(o)for(c=0;c<o.length;c++)h=e(e.s=o[c]);return h};var n={},a={3:0};e.e=function(t){function i(){r.onerror=r.onload=null,clearTimeout(l);var e=a[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),a[t]=void 0)}var n=a[t];if(0===n)return new Promise(function(t){t()});if(n)return n[2];var s=new Promise(function(e,i){n=a[t]=[e,i]});n[2]=s;var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.timeout=12e4,e.nc&&r.setAttribute("nonce",e.nc),r.src=e.p+""+t+".bundled.js";var l=setTimeout(i,12e4);return r.onerror=r.onload=i,o.appendChild(r),s},e.m=t,e.c=n,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=89)}([function(t,e,i){var n,a;/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
!function(e,i){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,function(i,s){function o(t){var e=!!t&&"length"in t&&t.length,i=lt.type(t);return"function"!==i&&!lt.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,i){if(lt.isFunction(e))return lt.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return lt.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(_t.test(e))return lt.filter(e,t,i);e=lt.filter(e,t)}return lt.grep(t,function(t){return nt.call(e,t)>-1!==i})}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function h(t){var e={};return lt.each(t.match(kt)||[],function(t,i){e[i]=!0}),e}function c(){Z.removeEventListener("DOMContentLoaded",c),i.removeEventListener("load",c),lt.ready()}function u(){this.expando=lt.expando+u.uid++}function d(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Ot,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Mt.test(i)?lt.parseJSON(i):i)}catch(t){}At.set(t,e,i)}else i=void 0;return i}function f(t,e,i,n){var a,s=1,o=20,r=n?function(){return n.cur()}:function(){return lt.css(t,e,"")},l=r(),h=i&&i[3]||(lt.cssNumber[e]?"":"px"),c=(lt.cssNumber[e]||"px"!==h&&+l)&&$t.exec(lt.css(t,e));if(c&&c[3]!==h){h=h||c[3],i=i||[],c=+l||1;do{s=s||".5",c/=s,lt.style(t,e,c+h)}while(s!==(s=r()/l)&&1!==s&&--o)}return i&&(c=+c||+l||0,a=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=a)),a}function p(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&lt.nodeName(t,e)?lt.merge([t],i):i}function g(t,e){for(var i=0,n=t.length;i<n;i++)Et.set(t[i],"globalEval",!e||Et.get(e[i],"globalEval"))}function m(t,e,i,n,a){for(var s,o,r,l,h,c,u=e.createDocumentFragment(),d=[],f=0,m=t.length;f<m;f++)if((s=t[f])||0===s)if("object"===lt.type(s))lt.merge(d,s.nodeType?[s]:s);else if(zt.test(s)){for(o=o||u.appendChild(e.createElement("div")),r=(It.exec(s)||["",""])[1].toLowerCase(),l=Lt[r]||Lt._default,o.innerHTML=l[1]+lt.htmlPrefilter(s)+l[2],c=l[0];c--;)o=o.lastChild;lt.merge(d,o.childNodes),o=u.firstChild,o.textContent=""}else d.push(e.createTextNode(s));for(u.textContent="",f=0;s=d[f++];)if(n&&lt.inArray(s,n)>-1)a&&a.push(s);else if(h=lt.contains(s.ownerDocument,s),o=p(u.appendChild(s),"script"),h&&g(o),i)for(c=0;s=o[c++];)Nt.test(s.type||"")&&i.push(s);return u}function v(){return!0}function _(){return!1}function b(){try{return Z.activeElement}catch(t){}}function y(t,e,i,n,a,s){var o,r;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(r in e)y(t,r,i,n,e[r],s);return t}if(null==n&&null==a?(a=i,n=i=void 0):null==a&&("string"==typeof i?(a=n,n=void 0):(a=n,n=i,i=void 0)),!1===a)a=_;else if(!a)return t;return 1===s&&(o=a,a=function(t){return lt().off(t),o.apply(this,arguments)},a.guid=o.guid||(o.guid=lt.guid++)),t.each(function(){lt.event.add(this,e,a,n,i)})}function w(t,e){return lt.nodeName(t,"table")&&lt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function x(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function k(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function C(t,e){var i,n,a,s,o,r,l,h;if(1===e.nodeType){if(Et.hasData(t)&&(s=Et.access(t),o=Et.set(e,s),h=s.events)){delete o.handle,o.events={};for(a in h)for(i=0,n=h[a].length;i<n;i++)lt.event.add(e,a,h[a][i])}At.hasData(t)&&(r=At.access(t),l=lt.extend({},r),At.set(e,l))}}function S(t,e){var i=e.nodeName.toLowerCase();"input"===i&&jt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function T(t,e,i,n){e=et.apply([],e);var a,s,o,r,l,h,c=0,u=t.length,d=u-1,f=e[0],g=lt.isFunction(f);if(g||u>1&&"string"==typeof f&&!rt.checkClone&&Gt.test(f))return t.each(function(a){var s=t.eq(a);g&&(e[0]=f.call(this,a,s.html())),T(s,e,i,n)});if(u&&(a=m(e,t[0].ownerDocument,!1,t,n),s=a.firstChild,1===a.childNodes.length&&(a=s),s||n)){for(o=lt.map(p(a,"script"),x),r=o.length;c<u;c++)l=a,c!==d&&(l=lt.clone(l,!0,!0),r&&lt.merge(o,p(l,"script"))),i.call(t[c],l,c);if(r)for(h=o[o.length-1].ownerDocument,lt.map(o,k),c=0;c<r;c++)l=o[c],Nt.test(l.type||"")&&!Et.access(l,"globalEval")&&lt.contains(h,l)&&(l.src?lt._evalUrl&&lt._evalUrl(l.src):lt.globalEval(l.textContent.replace(Ut,"")))}return t}function E(t,e,i){for(var n,a=e?lt.filter(e,t):t,s=0;null!=(n=a[s]);s++)i||1!==n.nodeType||lt.cleanData(p(n)),n.parentNode&&(i&&lt.contains(n.ownerDocument,n)&&g(p(n,"script")),n.parentNode.removeChild(n));return t}function A(t,e){var i=lt(e.createElement(t)).appendTo(e.body),n=lt.css(i[0],"display");return i.detach(),n}function M(t){var e=Z,i=Xt[t];return i||(i=A(t,e),"none"!==i&&i||(Yt=(Yt||lt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Yt[0].contentDocument,e.write(),e.close(),i=A(t,e),Yt.detach()),Xt[t]=i),i}function O(t,e,i){var n,a,s,o,r=t.style;return i=i||Qt(t),o=i?i.getPropertyValue(e)||i[e]:void 0,""!==o&&void 0!==o||lt.contains(t.ownerDocument,t)||(o=lt.style(t,e)),i&&!rt.pixelMarginRight()&&Jt.test(o)&&Kt.test(e)&&(n=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=n,r.minWidth=a,r.maxWidth=s),void 0!==o?o+"":o}function R(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function $(t){if(t in se)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ae.length;i--;)if((t=ae[i]+e)in se)return t}function D(t,e,i){var n=$t.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function P(t,e,i,n,a){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;s<4;s+=2)"margin"===i&&(o+=lt.css(t,i+Dt[s],!0,a)),n?("content"===i&&(o-=lt.css(t,"padding"+Dt[s],!0,a)),"margin"!==i&&(o-=lt.css(t,"border"+Dt[s]+"Width",!0,a))):(o+=lt.css(t,"padding"+Dt[s],!0,a),"padding"!==i&&(o+=lt.css(t,"border"+Dt[s]+"Width",!0,a)));return o}function j(t,e,i){var n=!0,a="width"===e?t.offsetWidth:t.offsetHeight,s=Qt(t),o="border-box"===lt.css(t,"boxSizing",!1,s);if(a<=0||null==a){if(a=O(t,e,s),(a<0||null==a)&&(a=t.style[e]),Jt.test(a))return a;n=o&&(rt.boxSizingReliable()||a===t.style[e]),a=parseFloat(a)||0}return a+P(t,e,i||(o?"border":"content"),n,s)+"px"}function I(t,e){for(var i,n,a,s=[],o=0,r=t.length;o<r;o++)n=t[o],n.style&&(s[o]=Et.get(n,"olddisplay"),i=n.style.display,e?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Pt(n)&&(s[o]=Et.access(n,"olddisplay",M(n.nodeName)))):(a=Pt(n),"none"===i&&a||Et.set(n,"olddisplay",a?i:lt.css(n,"display"))));for(o=0;o<r;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[o]||"":"none"));return t}function N(t,e,i,n,a){return new N.prototype.init(t,e,i,n,a)}function L(){return i.setTimeout(function(){oe=void 0}),oe=lt.now()}function z(t,e){var i,n=0,a={height:t};for(e=e?1:0;n<4;n+=2-e)i=Dt[n],a["margin"+i]=a["padding"+i]=t;return e&&(a.opacity=a.width=t),a}function H(t,e,i){for(var n,a=(V.tweeners[e]||[]).concat(V.tweeners["*"]),s=0,o=a.length;s<o;s++)if(n=a[s].call(i,e,t))return n}function q(t,e,i){var n,a,s,o,r,l,h,c=this,u={},d=t.style,f=t.nodeType&&Pt(t),p=Et.get(t,"fxshow");i.queue||(r=lt._queueHooks(t,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,c.always(function(){c.always(function(){r.unqueued--,lt.queue(t,"fx").length||r.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],h=lt.css(t,"display"),"inline"===("none"===h?Et.get(t,"olddisplay")||M(t.nodeName):h)&&"none"===lt.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(a=e[n],le.exec(a)){if(delete e[n],s=s||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!p||void 0===p[n])continue;f=!0}u[n]=p&&p[n]||lt.style(t,n)}else h=void 0;if(lt.isEmptyObject(u))"inline"===("none"===h?M(t.nodeName):h)&&(d.display=h);else{p?"hidden"in p&&(f=p.hidden):p=Et.access(t,"fxshow",{}),s&&(p.hidden=!f),f?lt(t).show():c.done(function(){lt(t).hide()}),c.done(function(){var e;Et.remove(t,"fxshow");for(e in u)lt.style(t,e,u[e])});for(n in u)o=H(f?p[n]:0,n,c),n in p||(p[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function F(t,e){var i,n,a,s,o;for(i in t)if(n=lt.camelCase(i),a=e[n],s=t[i],lt.isArray(s)&&(a=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(o=lt.cssHooks[n])&&"expand"in o){s=o.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=a)}else e[n]=a}function V(t,e,i){var n,a,s=0,o=V.prefilters.length,r=lt.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=oe||L(),i=Math.max(0,h.startTime+h.duration-e),n=i/h.duration||0,s=1-n,o=0,l=h.tweens.length;o<l;o++)h.tweens[o].run(s);return r.notifyWith(t,[h,s,i]),s<1&&l?i:(r.resolveWith(t,[h]),!1)},h=r.promise({elem:t,props:lt.extend({},e),opts:lt.extend(!0,{specialEasing:{},easing:lt.easing._default},i),originalProperties:e,originalOptions:i,startTime:oe||L(),duration:i.duration,tweens:[],createTween:function(e,i){var n=lt.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(a)return this;for(a=!0;i<n;i++)h.tweens[i].run(1);return e?(r.notifyWith(t,[h,1,0]),r.resolveWith(t,[h,e])):r.rejectWith(t,[h,e]),this}}),c=h.props;for(F(c,h.opts.specialEasing);s<o;s++)if(n=V.prefilters[s].call(h,t,c,h.opts))return lt.isFunction(n.stop)&&(lt._queueHooks(h.elem,h.opts.queue).stop=lt.proxy(n.stop,n)),n;return lt.map(c,H,h),lt.isFunction(h.opts.start)&&h.opts.start.call(t,h),lt.fx.timer(lt.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function B(t){return t.getAttribute&&t.getAttribute("class")||""}function G(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,a=0,s=e.toLowerCase().match(kt)||[];if(lt.isFunction(i))for(;n=s[a++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function W(t,e,i,n){function a(r){var l;return s[r]=!0,lt.each(t[r]||[],function(t,r){var h=r(e,i,n);return"string"!=typeof h||o||s[h]?o?!(l=h):void 0:(e.dataTypes.unshift(h),a(h),!1)}),l}var s={},o=t===Ae;return a(e.dataTypes[0])||!s["*"]&&a("*")}function U(t,e){var i,n,a=lt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((a[i]?t:n||(n={}))[i]=e[i]);return n&&lt.extend(!0,t,n),t}function Y(t,e,i){for(var n,a,s,o,r=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(a in r)if(r[a]&&r[a].test(n)){l.unshift(a);break}if(l[0]in i)s=l[0];else{for(a in i){if(!l[0]||t.converters[a+" "+l[0]]){s=a;break}o||(o=a)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}function X(t,e,i,n){var a,s,o,r,l,h={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=h[l+" "+s]||h["* "+s]))for(a in h)if(r=a.split(" "),r[1]===s&&(o=h[l+" "+r[0]]||h["* "+r[0]])){!0===o?o=h[a]:!0!==h[a]&&(s=r[0],c.unshift(r[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function K(t,e,i,n){var a;if(lt.isArray(e))lt.each(e,function(e,a){i||$e.test(t)?n(t,a):K(t+"["+("object"==typeof a&&null!=a?e:"")+"]",a,i,n)});else if(i||"object"!==lt.type(e))n(t,e);else for(a in e)K(t+"["+a+"]",e[a],i,n)}function J(t){return lt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Q=[],Z=i.document,tt=Q.slice,et=Q.concat,it=Q.push,nt=Q.indexOf,at={},st=at.toString,ot=at.hasOwnProperty,rt={},lt=function(t,e){return new lt.fn.init(t,e)},ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ct=/^-ms-/,ut=/-([\da-z])/gi,dt=function(t,e){return e.toUpperCase()};lt.fn=lt.prototype={jquery:"2.2.4",constructor:lt,selector:"",length:0,toArray:function(){return tt.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:tt.call(this)},pushStack:function(t){var e=lt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return lt.each(this,t)},map:function(t){return this.pushStack(lt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:it,sort:Q.sort,splice:Q.splice},lt.extend=lt.fn.extend=function(){var t,e,i,n,a,s,o=arguments[0]||{},r=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[r]||{},r++),"object"==typeof o||lt.isFunction(o)||(o={}),r===l&&(o=this,r--);r<l;r++)if(null!=(t=arguments[r]))for(e in t)i=o[e],n=t[e],o!==n&&(h&&n&&(lt.isPlainObject(n)||(a=lt.isArray(n)))?(a?(a=!1,s=i&&lt.isArray(i)?i:[]):s=i&&lt.isPlainObject(i)?i:{},o[e]=lt.extend(h,s,n)):void 0!==n&&(o[e]=n));return o},lt.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===lt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!lt.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==lt.type(t)||t.nodeType||lt.isWindow(t))return!1;if(t.constructor&&!ot.call(t,"constructor")&&!ot.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||ot.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?at[st.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=lt.trim(t))&&(1===t.indexOf("use strict")?(e=Z.createElement("script"),e.text=t,Z.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ct,"ms-").replace(ut,dt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,n=0;if(o(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ht,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(o(Object(t))?lt.merge(i,"string"==typeof t?[t]:t):it.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:nt.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,a=t.length;n<i;n++)t[a++]=e[n];return t.length=a,t},grep:function(t,e,i){for(var n=[],a=0,s=t.length,o=!i;a<s;a++)!e(t[a],a)!==o&&n.push(t[a]);return n},map:function(t,e,i){var n,a,s=0,r=[];if(o(t))for(n=t.length;s<n;s++)null!=(a=e(t[s],s,i))&&r.push(a);else for(s in t)null!=(a=e(t[s],s,i))&&r.push(a);return et.apply([],r)},guid:1,proxy:function(t,e){var i,n,a;if("string"==typeof e&&(i=t[e],e=t,t=i),lt.isFunction(t))return n=tt.call(arguments,2),a=function(){return t.apply(e||this,n.concat(tt.call(arguments)))},a.guid=t.guid=t.guid||lt.guid++,a},now:Date.now,support:rt}),"function"==typeof Symbol&&(lt.fn[Symbol.iterator]=Q[Symbol.iterator]),lt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){at["[object "+e+"]"]=e.toLowerCase()});var ft=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){function e(t,e,i,n){var a,s,o,r,h,u,d,f,p=e&&e.ownerDocument,g=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return i;if(!n&&((e?e.ownerDocument||e:L)!==O&&M(e),e=e||O,$)){if(11!==g&&(u=gt.exec(t)))if(a=u[1]){if(9===g){if(!(o=e.getElementById(a)))return i;if(o.id===a)return i.push(o),i}else if(p&&(o=p.getElementById(a))&&I(e,o)&&o.id===a)return i.push(o),i}else{if(u[2])return K.apply(i,e.getElementsByTagName(t)),i;if((a=u[3])&&b.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(a)),i}if(b.qsa&&!V[t+" "]&&(!D||!D.test(t))){if(1!==g)p=e,f=t;else if("object"!==e.nodeName.toLowerCase()){for((r=e.getAttribute("id"))?r=r.replace(vt,"\\$&"):e.setAttribute("id",r=N),d=k(t),s=d.length,h=ct.test(r)?"#"+r:"[id='"+r+"']";s--;)d[s]=h+" "+c(d[s]);f=d.join(","),p=mt.test(t)&&l(e.parentNode)||e}if(f)try{return K.apply(i,p.querySelectorAll(f)),i}catch(t){}finally{r===N&&e.removeAttribute("id")}}}return S(t.replace(st,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>y.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[N]=!0,t}function a(t){var e=O.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=i.length;n--;)y.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function r(t){return n(function(e){return e=+e,n(function(i,n){for(var a,s=t([],i.length,e),o=s.length;o--;)i[a=s[o]]&&(i[a]=!(n[a]=i[a]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function h(){}function c(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function u(t,e,i){var n=e.dir,a=i&&"parentNode"===n,s=H++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||a)return t(e,i,s)}:function(e,i,o){var r,l,h,c=[z,s];if(o){for(;e=e[n];)if((1===e.nodeType||a)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||a){if(h=e[N]||(e[N]={}),l=h[e.uniqueID]||(h[e.uniqueID]={}),(r=l[n])&&r[0]===z&&r[1]===s)return c[2]=r[2];if(l[n]=c,c[2]=t(e,i,o))return!0}}}function d(t){return t.length>1?function(e,i,n){for(var a=t.length;a--;)if(!t[a](e,i,n))return!1;return!0}:t[0]}function f(t,i,n){for(var a=0,s=i.length;a<s;a++)e(t,i[a],n);return n}function p(t,e,i,n,a){for(var s,o=[],r=0,l=t.length,h=null!=e;r<l;r++)(s=t[r])&&(i&&!i(s,n,a)||(o.push(s),h&&e.push(r)));return o}function g(t,e,i,a,s,o){return a&&!a[N]&&(a=g(a)),s&&!s[N]&&(s=g(s,o)),n(function(n,o,r,l){var h,c,u,d=[],g=[],m=o.length,v=n||f(e||"*",r.nodeType?[r]:r,[]),_=!t||!n&&e?v:p(v,d,t,r,l),b=i?s||(n?t:m||a)?[]:o:_;if(i&&i(_,b,r,l),a)for(h=p(b,g),a(h,[],r,l),c=h.length;c--;)(u=h[c])&&(b[g[c]]=!(_[g[c]]=u));if(n){if(s||t){if(s){for(h=[],c=b.length;c--;)(u=b[c])&&h.push(_[c]=u);s(null,b=[],h,l)}for(c=b.length;c--;)(u=b[c])&&(h=s?Q(n,u):d[c])>-1&&(n[h]=!(o[h]=u))}}else b=p(b===o?b.splice(m,b.length):b),s?s(null,o,b,l):K.apply(o,b)})}function m(t){for(var e,i,n,a=t.length,s=y.relative[t[0].type],o=s||y.relative[" "],r=s?1:0,l=u(function(t){return t===e},o,!0),h=u(function(t){return Q(e,t)>-1},o,!0),f=[function(t,i,n){var a=!s&&(n||i!==T)||((e=i).nodeType?l(t,i,n):h(t,i,n));return e=null,a}];r<a;r++)if(i=y.relative[t[r].type])f=[u(d(f),i)];else{if(i=y.filter[t[r].type].apply(null,t[r].matches),i[N]){for(n=++r;n<a&&!y.relative[t[n].type];n++);return g(r>1&&d(f),r>1&&c(t.slice(0,r-1).concat({value:" "===t[r-2].type?"*":""})).replace(st,"$1"),i,r<n&&m(t.slice(r,n)),n<a&&m(t=t.slice(n)),n<a&&c(t))}f.push(i)}return d(f)}function v(t,i){var a=i.length>0,s=t.length>0,o=function(n,o,r,l,h){var c,u,d,f=0,g="0",m=n&&[],v=[],_=T,b=n||s&&y.find.TAG("*",h),w=z+=null==_?1:Math.random()||.1,x=b.length;for(h&&(T=o===O||o||h);g!==x&&null!=(c=b[g]);g++){if(s&&c){for(u=0,o||c.ownerDocument===O||(M(c),r=!$);d=t[u++];)if(d(c,o||O,r)){l.push(c);break}h&&(z=w)}a&&((c=!d&&c)&&f--,n&&m.push(c))}if(f+=g,a&&g!==f){for(u=0;d=i[u++];)d(m,v,o,r);if(n){if(f>0)for(;g--;)m[g]||v[g]||(v[g]=Y.call(l));v=p(v)}K.apply(l,v),h&&!n&&v.length>0&&f+i.length>1&&e.uniqueSort(l)}return h&&(z=w,T=_),m};return a?n(o):o}var _,b,y,w,x,k,C,S,T,E,A,M,O,R,$,D,P,j,I,N="sizzle"+1*new Date,L=t.document,z=0,H=0,q=i(),F=i(),V=i(),B=function(t,e){return t===e&&(A=!0),0},G=1<<31,W={}.hasOwnProperty,U=[],Y=U.pop,X=U.push,K=U.push,J=U.slice,Q=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",nt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",at=new RegExp(tt+"+","g"),st=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),ot=new RegExp("^"+tt+"*,"+tt+"*"),rt=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ht=new RegExp(nt),ct=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,vt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),bt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},yt=function(){M()};try{K.apply(U=J.call(L.childNodes),L.childNodes),U[L.childNodes.length].nodeType}catch(t){K={apply:U.length?function(t,e){X.apply(t,J.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}b=e.support={},x=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},M=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:L;return n!==O&&9===n.nodeType&&n.documentElement?(O=n,R=O.documentElement,$=!x(O),(i=O.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",yt,!1):i.attachEvent&&i.attachEvent("onunload",yt)),b.attributes=a(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=a(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=pt.test(O.getElementsByClassName),b.getById=a(function(t){return R.appendChild(t).id=N,!O.getElementsByName||!O.getElementsByName(N).length}),b.getById?(y.find.ID=function(t,e){if(void 0!==e.getElementById&&$){var i=e.getElementById(t);return i?[i]:[]}},y.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){return t.getAttribute("id")===e}}):(delete y.find.ID,y.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),y.find.TAG=b.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],a=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},y.find.CLASS=b.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&$)return e.getElementsByClassName(t)},P=[],D=[],(b.qsa=pt.test(O.querySelectorAll))&&(a(function(t){R.appendChild(t).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+tt+"*(?:value|"+Z+")"),t.querySelectorAll("[id~="+N+"-]").length||D.push("~="),t.querySelectorAll(":checked").length||D.push(":checked"),t.querySelectorAll("a#"+N+"+*").length||D.push(".#.+[+~]")}),a(function(t){var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(b.matchesSelector=pt.test(j=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&a(function(t){b.disconnectedMatch=j.call(t,"div"),j.call(t,"[s!='']:x"),P.push("!=",nt)}),D=D.length&&new RegExp(D.join("|")),P=P.length&&new RegExp(P.join("|")),e=pt.test(R.compareDocumentPosition),I=e||pt.test(R.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},B=e?function(t,e){if(t===e)return A=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===O||t.ownerDocument===L&&I(L,t)?-1:e===O||e.ownerDocument===L&&I(L,e)?1:E?Q(E,t)-Q(E,e):0:4&i?-1:1)}:function(t,e){if(t===e)return A=!0,0;var i,n=0,a=t.parentNode,s=e.parentNode,r=[t],l=[e];if(!a||!s)return t===O?-1:e===O?1:a?-1:s?1:E?Q(E,t)-Q(E,e):0;if(a===s)return o(t,e);for(i=t;i=i.parentNode;)r.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;r[n]===l[n];)n++;return n?o(r[n],l[n]):r[n]===L?-1:l[n]===L?1:0},O):O},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==O&&M(t),i=i.replace(lt,"='$1']"),b.matchesSelector&&$&&!V[i+" "]&&(!P||!P.test(i))&&(!D||!D.test(i)))try{var n=j.call(t,i);if(n||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&M(t),I(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&M(t);var i=y.attrHandle[e.toLowerCase()],n=i&&W.call(y.attrHandle,e.toLowerCase())?i(t,e,!$):void 0;return void 0!==n?n:b.attributes||!$?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,a=0;if(A=!b.detectDuplicates,E=!b.sortStable&&t.slice(0),t.sort(B),A){for(;e=t[a++];)e===t[a]&&(n=i.push(a));for(;n--;)t.splice(i[n],1)}return E=null,t},w=e.getText=function(t){var e,i="",n=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=w(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[n++];)i+=w(e);return i},y=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ht.test(i)&&(e=k(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(a){var s=e.attr(a,t);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(at," ")+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,a){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),r="of-type"===e;return 1===n&&0===a?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,f,p,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,v=r&&e.nodeName.toLowerCase(),_=!l&&!r,b=!1;if(m){if(s){for(;g;){for(d=e;d=d[g];)if(r?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&_){for(d=m,u=d[N]||(d[N]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),h=c[t]||[],f=h[0]===z&&h[1],b=f&&h[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){c[t]=[z,f,b];break}}else if(_&&(d=e,u=d[N]||(d[N]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),h=c[t]||[],f=h[0]===z&&h[1],b=f),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((r?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(_&&(u=d[N]||(d[N]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),c[t]=[z,b]),d!==e)););return(b-=a)===n||b%n==0&&b/n>=0}}},PSEUDO:function(t,i){var a,s=y.pseudos[t]||y.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[N]?s(i):s.length>1?(a=[t,t,"",i],y.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,a=s(t,i),o=a.length;o--;)n=Q(t,a[o]),t[n]=!(e[n]=a[o])}):function(t){return s(t,0,a)}):s}},pseudos:{not:n(function(t){var e=[],i=[],a=C(t.replace(st,"$1"));return a[N]?n(function(t,e,i,n){for(var s,o=a(t,null,n,[]),r=t.length;r--;)(s=o[r])&&(t[r]=!(e[r]=s))}):function(t,n,s){return e[0]=t,a(e,null,s,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(_t,bt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:n(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,bt).toLowerCase(),function(e){var i;do{if(i=$?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!y.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:r(function(){return[0]}),last:r(function(t,e){return[e-1]}),eq:r(function(t,e,i){return[i<0?i+e:i]}),even:r(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:r(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:r(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:r(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},y.pseudos.nth=y.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[_]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(_);for(_ in{submit:!0,reset:!0})y.pseudos[_]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(_);return h.prototype=y.filters=y.pseudos,y.setFilters=new h,k=e.tokenize=function(t,i){var n,a,s,o,r,l,h,c=F[t+" "];if(c)return i?0:c.slice(0);for(r=t,l=[],h=y.preFilter;r;){n&&!(a=ot.exec(r))||(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),n=!1,(a=rt.exec(r))&&(n=a.shift(),s.push({value:n,type:a[0].replace(st," ")}),r=r.slice(n.length));for(o in y.filter)!(a=ut[o].exec(r))||h[o]&&!(a=h[o](a))||(n=a.shift(),s.push({value:n,type:o,matches:a}),r=r.slice(n.length));if(!n)break}return i?r.length:r?e.error(t):F(t,l).slice(0)},C=e.compile=function(t,e){var i,n=[],a=[],s=V[t+" "];if(!s){for(e||(e=k(t)),i=e.length;i--;)s=m(e[i]),s[N]?n.push(s):a.push(s);s=V(t,v(a,n)),s.selector=t}return s},S=e.select=function(t,e,i,n){var a,s,o,r,h,u="function"==typeof t&&t,d=!n&&k(t=u.selector||t);if(i=i||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&b.getById&&9===e.nodeType&&$&&y.relative[s[1].type]){if(!(e=(y.find.ID(o.matches[0].replace(_t,bt),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(a=ut.needsContext.test(t)?0:s.length;a--&&(o=s[a],!y.relative[r=o.type]);)if((h=y.find[r])&&(n=h(o.matches[0].replace(_t,bt),mt.test(s[0].type)&&l(e.parentNode)||e))){if(s.splice(a,1),!(t=n.length&&c(s)))return K.apply(i,n),i;break}}return(u||C(t,d))(n,e,!$,i,!e||mt.test(t)&&l(e.parentNode)||e),i},b.sortStable=N.split("").sort(B).join("")===N,b.detectDuplicates=!!A,M(),b.sortDetached=a(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),a(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&a(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),a(function(t){return null==t.getAttribute("disabled")})||s(Z,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(i);lt.find=ft,lt.expr=ft.selectors,lt.expr[":"]=lt.expr.pseudos,lt.uniqueSort=lt.unique=ft.uniqueSort,lt.text=ft.getText,lt.isXMLDoc=ft.isXML,lt.contains=ft.contains;var pt=function(t,e,i){for(var n=[],a=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(a&&lt(t).is(i))break;n.push(t)}return n},gt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},mt=lt.expr.match.needsContext,vt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,_t=/^.[^:#\[\.,]*$/;lt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?lt.find.matchesSelector(n,t)?[n]:[]:lt.find.matches(t,lt.grep(e,function(t){return 1===t.nodeType}))},lt.fn.extend({find:function(t){var e,i=this.length,n=[],a=this;if("string"!=typeof t)return this.pushStack(lt(t).filter(function(){for(e=0;e<i;e++)if(lt.contains(a[e],this))return!0}));for(e=0;e<i;e++)lt.find(t,a[e],n);return n=this.pushStack(i>1?lt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&mt.test(t)?lt(t):t||[],!1).length}});var bt,yt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(lt.fn.init=function(t,e,i){var n,a;if(!t)return this;if(i=i||bt,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:yt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof lt?e[0]:e,lt.merge(this,lt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:Z,!0)),vt.test(n[1])&&lt.isPlainObject(e))for(n in e)lt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return a=Z.getElementById(n[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=Z,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):lt.isFunction(t)?void 0!==i.ready?i.ready(t):t(lt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),lt.makeArray(t,this))}).prototype=lt.fn,bt=lt(Z);var wt=/^(?:parents|prev(?:Until|All))/,xt={children:!0,contents:!0,next:!0,prev:!0};lt.fn.extend({has:function(t){var e=lt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(lt.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,a=this.length,s=[],o=mt.test(t)||"string"!=typeof t?lt(t,e||this.context):0;n<a;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&lt.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?lt.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?nt.call(lt(t),this[0]):nt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(lt.uniqueSort(lt.merge(this.get(),lt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),lt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return pt(t,"parentNode")},parentsUntil:function(t,e,i){return pt(t,"parentNode",i)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return pt(t,"nextSibling")},prevAll:function(t){return pt(t,"previousSibling")},nextUntil:function(t,e,i){return pt(t,"nextSibling",i)},prevUntil:function(t,e,i){return pt(t,"previousSibling",i)},siblings:function(t){return gt((t.parentNode||{}).firstChild,t)},children:function(t){return gt(t.firstChild)},contents:function(t){return t.contentDocument||lt.merge([],t.childNodes)}},function(t,e){lt.fn[t]=function(i,n){var a=lt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=lt.filter(n,a)),this.length>1&&(xt[t]||lt.uniqueSort(a),wt.test(t)&&a.reverse()),this.pushStack(a)}});var kt=/\S+/g;lt.Callbacks=function(t){t="string"==typeof t?h(t):lt.extend({},t);var e,i,n,a,s=[],o=[],r=-1,l=function(){for(a=t.once,n=e=!0;o.length;r=-1)for(i=o.shift();++r<s.length;)!1===s[r].apply(i[0],i[1])&&t.stopOnFalse&&(r=s.length,i=!1);t.memory||(i=!1),e=!1,a&&(s=i?[]:"")},c={add:function(){return s&&(i&&!e&&(r=s.length-1,o.push(i)),function e(i){lt.each(i,function(i,n){lt.isFunction(n)?t.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==lt.type(n)&&e(n)})}(arguments),i&&!e&&l()),this},remove:function(){return lt.each(arguments,function(t,e){for(var i;(i=lt.inArray(e,s,i))>-1;)s.splice(i,1),i<=r&&r--}),this},has:function(t){return t?lt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return a=o=[],s=i="",this},disabled:function(){return!s},lock:function(){return a=o=[],i||(s=i=""),this},locked:function(){return!!a},fireWith:function(t,i){return a||(i=i||[],i=[t,i.slice?i.slice():i],o.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},lt.extend({Deferred:function(t){var e=[["resolve","done",lt.Callbacks("once memory"),"resolved"],["reject","fail",lt.Callbacks("once memory"),"rejected"],["notify","progress",lt.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var t=arguments;return lt.Deferred(function(i){lt.each(e,function(e,s){var o=lt.isFunction(t[e])&&t[e];a[s[1]](function(){var t=o&&o.apply(this,arguments);t&&lt.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[s[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?lt.extend(t,n):n}},a={};return n.pipe=n.then,lt.each(e,function(t,s){var o=s[2],r=s[3];n[s[1]]=o.add,r&&o.add(function(){i=r},e[1^t][2].disable,e[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?n:this,arguments),this},a[s[0]+"With"]=o.fireWith}),n.promise(a),t&&t.call(a,a),a},when:function(t){var e,i,n,a=0,s=tt.call(arguments),o=s.length,r=1!==o||t&&lt.isFunction(t.promise)?o:0,l=1===r?t:lt.Deferred(),h=function(t,i,n){return function(a){i[t]=this,n[t]=arguments.length>1?tt.call(arguments):a,n===e?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);a<o;a++)s[a]&&lt.isFunction(s[a].promise)?s[a].promise().progress(h(a,i,e)).done(h(a,n,s)).fail(l.reject):--r;return r||l.resolveWith(n,s),l.promise()}});var Ct;lt.fn.ready=function(t){return lt.ready.promise().done(t),this},lt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?lt.readyWait++:lt.ready(!0)},ready:function(t){(!0===t?--lt.readyWait:lt.isReady)||(lt.isReady=!0,!0!==t&&--lt.readyWait>0||(Ct.resolveWith(Z,[lt]),lt.fn.triggerHandler&&(lt(Z).triggerHandler("ready"),lt(Z).off("ready"))))}}),lt.ready.promise=function(t){return Ct||(Ct=lt.Deferred(),"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?i.setTimeout(lt.ready):(Z.addEventListener("DOMContentLoaded",c),i.addEventListener("load",c))),Ct.promise(t)},lt.ready.promise();var St=function(t,e,i,n,a,s,o){var r=0,l=t.length,h=null==i;if("object"===lt.type(i)){a=!0;for(r in i)St(t,e,r,i[r],!0,s,o)}else if(void 0!==n&&(a=!0,lt.isFunction(n)||(o=!0),h&&(o?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(lt(t),i)})),e))for(;r<l;r++)e(t[r],i,o?n:n.call(t[r],r,e(t[r],i)));return a?t:h?e.call(t):l?e(t[0],i):s},Tt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};u.uid=1,u.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Tt(t))return{};var e=t[this.expando];return e||(e={},Tt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,a=this.cache(t);if("string"==typeof e)a[e]=i;else for(n in e)a[n]=e[n];return a},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,lt.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,a,s=t[this.expando];if(void 0!==s){if(void 0===e)this.register(t);else{lt.isArray(e)?n=e.concat(e.map(lt.camelCase)):(a=lt.camelCase(e),e in s?n=[e,a]:(n=a,n=n in s?[n]:n.match(kt)||[])),i=n.length;for(;i--;)delete s[n[i]]}(void 0===e||lt.isEmptyObject(s))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!lt.isEmptyObject(e)}};var Et=new u,At=new u,Mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ot=/[A-Z]/g;lt.extend({hasData:function(t){return At.hasData(t)||Et.hasData(t)},data:function(t,e,i){return At.access(t,e,i)},removeData:function(t,e){At.remove(t,e)},_data:function(t,e,i){return Et.access(t,e,i)},_removeData:function(t,e){Et.remove(t,e)}}),lt.fn.extend({data:function(t,e){var i,n,a,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(a=At.get(s),1===s.nodeType&&!Et.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=lt.camelCase(n.slice(5)),d(s,n,a[n])));Et.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof t?this.each(function(){At.set(this,t)}):St(this,function(e){var i,n;if(s&&void 0===e){if(void 0!==(i=At.get(s,t)||At.get(s,t.replace(Ot,"-$&").toLowerCase())))return i;if(n=lt.camelCase(t),void 0!==(i=At.get(s,n)))return i;if(void 0!==(i=d(s,n,void 0)))return i}else n=lt.camelCase(t),this.each(function(){var i=At.get(this,n);At.set(this,n,e),t.indexOf("-")>-1&&void 0!==i&&At.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){At.remove(this,t)})}}),lt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Et.get(t,e),i&&(!n||lt.isArray(i)?n=Et.access(t,e,lt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=lt.queue(t,e),n=i.length,a=i.shift(),s=lt._queueHooks(t,e),o=function(){lt.dequeue(t,e)};"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===e&&i.unshift("inprogress"),delete s.stop,a.call(t,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Et.get(t,i)||Et.access(t,i,{empty:lt.Callbacks("once memory").add(function(){Et.remove(t,[e+"queue",i])})})}}),lt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?lt.queue(this[0],t):void 0===e?this:this.each(function(){var i=lt.queue(this,t,e);lt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&lt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){lt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,a=lt.Deferred(),s=this,o=this.length,r=function(){--n||a.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=Et.get(s[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),a.promise(e)}});var Rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$t=new RegExp("^(?:([+-])=|)("+Rt+")([a-z%]*)$","i"),Dt=["Top","Right","Bottom","Left"],Pt=function(t,e){return t=e||t,"none"===lt.css(t,"display")||!lt.contains(t.ownerDocument,t)},jt=/^(?:checkbox|radio)$/i,It=/<([\w:-]+)/,Nt=/^$|\/(?:java|ecma)script/i,Lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td;var zt=/<|&#?\w+;/;!function(){var t=Z.createDocumentFragment(),e=t.appendChild(Z.createElement("div")),i=Z.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),rt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",rt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ht=/^key/,qt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ft=/^([^.]*)(?:\.(.+)|)/;lt.event={global:{},add:function(t,e,i,n,a){var s,o,r,l,h,c,u,d,f,p,g,m=Et.get(t);if(m)for(i.handler&&(s=i,i=s.handler,a=s.selector),i.guid||(i.guid=lt.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return void 0!==lt&&lt.event.triggered!==e.type?lt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(kt)||[""],h=e.length;h--;)r=Ft.exec(e[h])||[],f=g=r[1],p=(r[2]||"").split(".").sort(),f&&(u=lt.event.special[f]||{},f=(a?u.delegateType:u.bindType)||f,u=lt.event.special[f]||{},c=lt.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&lt.expr.match.needsContext.test(a),namespace:p.join(".")},s),(d=l[f])||(d=l[f]=[],d.delegateCount=0,u.setup&&!1!==u.setup.call(t,n,p,o)||t.addEventListener&&t.addEventListener(f,o)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),a?d.splice(d.delegateCount++,0,c):d.push(c),lt.event.global[f]=!0)},remove:function(t,e,i,n,a){var s,o,r,l,h,c,u,d,f,p,g,m=Et.hasData(t)&&Et.get(t);if(m&&(l=m.events)){for(e=(e||"").match(kt)||[""],h=e.length;h--;)if(r=Ft.exec(e[h])||[],f=g=r[1],p=(r[2]||"").split(".").sort(),f){for(u=lt.event.special[f]||{},f=(n?u.delegateType:u.bindType)||f,d=l[f]||[],r=r[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)c=d[s],!a&&g!==c.origType||i&&i.guid!==c.guid||r&&!r.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));o&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,p,m.handle)||lt.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)lt.event.remove(t,f+e[h],i,n,!0);lt.isEmptyObject(l)&&Et.remove(t,"handle events")}},dispatch:function(t){t=lt.event.fix(t);var e,i,n,a,s,o=[],r=tt.call(arguments),l=(Et.get(this,"events")||{})[t.type]||[],h=lt.event.special[t.type]||{};if(r[0]=t,t.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,t)){for(o=lt.event.handlers.call(this,t,l),e=0;(a=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,i=0;(s=a.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(s.namespace)||(t.handleObj=s,t.data=s.data,void 0!==(n=((lt.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,r))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,a,s,o=[],r=e.delegateCount,l=t.target;if(r&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(n=[],i=0;i<r;i++)s=e[i],a=s.selector+" ",void 0===n[a]&&(n[a]=s.needsContext?lt(a,this).index(l)>-1:lt.find(a,this,null,[l]).length),n[a]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return r<e.length&&o.push({elem:this,handlers:e.slice(r)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,a,s=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||Z,n=i.documentElement,a=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[lt.expando])return t;var e,i,n,a=t.type,s=t,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=qt.test(a)?this.mouseHooks:Ht.test(a)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new lt.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=Z),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&lt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return lt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},lt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},lt.Event=function(t,e){if(!(this instanceof lt.Event))return new lt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?v:_):this.type=t,e&&lt.extend(this,e),this.timeStamp=t&&t.timeStamp||lt.now(),this[lt.expando]=!0},lt.Event.prototype={constructor:lt.Event,isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=v,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=v,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=v,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},lt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){lt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,a=t.relatedTarget,s=t.handleObj;return a&&(a===n||lt.contains(n,a))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),lt.fn.extend({on:function(t,e,i,n){return y(this,t,e,i,n)},one:function(t,e,i,n){return y(this,t,e,i,n,1)},off:function(t,e,i){var n,a;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,lt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(a in t)this.off(a,e,t[a]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=_),this.each(function(){lt.event.remove(this,t,i,e)})}});var Vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Bt=/<script|<style|<link/i,Gt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;lt.extend({htmlPrefilter:function(t){return t.replace(Vt,"<$1></$2>")},clone:function(t,e,i){var n,a,s,o,r=t.cloneNode(!0),l=lt.contains(t.ownerDocument,t);if(!(rt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||lt.isXMLDoc(t)))for(o=p(r),s=p(t),n=0,a=s.length;n<a;n++)S(s[n],o[n]);if(e)if(i)for(s=s||p(t),o=o||p(r),n=0,a=s.length;n<a;n++)C(s[n],o[n]);else C(t,r);return o=p(r,"script"),o.length>0&&g(o,!l&&p(t,"script")),r},cleanData:function(t){for(var e,i,n,a=lt.event.special,s=0;void 0!==(i=t[s]);s++)if(Tt(i)){if(e=i[Et.expando]){if(e.events)for(n in e.events)a[n]?lt.event.remove(i,n):lt.removeEvent(i,n,e.handle);i[Et.expando]=void 0}i[At.expando]&&(i[At.expando]=void 0)}}}),lt.fn.extend({domManip:T,detach:function(t){return E(this,t,!0)},remove:function(t){return E(this,t)},text:function(t){return St(this,function(t){return void 0===t?lt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return T(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){w(this,t).appendChild(t)}})},prepend:function(){return T(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return T(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return T(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(lt.cleanData(p(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return lt.clone(this,t,e)})},html:function(t){return St(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Bt.test(t)&&!Lt[(It.exec(t)||["",""])[1].toLowerCase()]){t=lt.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(lt.cleanData(p(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return T(this,arguments,function(e){var i=this.parentNode;lt.inArray(this,t)<0&&(lt.cleanData(p(this)),i&&i.replaceChild(e,this))},t)}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){lt.fn[t]=function(t){for(var i,n=[],a=lt(t),s=a.length-1,o=0;o<=s;o++)i=o===s?this:this.clone(!0),lt(a[o])[e](i),it.apply(n,i.get());return this.pushStack(n)}});var Yt,Xt={HTML:"block",BODY:"block"},Kt=/^margin/,Jt=new RegExp("^("+Rt+")(?!px)[a-z%]+$","i"),Qt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Zt=function(t,e,i,n){var a,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];a=i.apply(t,n||[]);for(s in e)t.style[s]=o[s];return a},te=Z.documentElement;!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",te.appendChild(o);var t=i.getComputedStyle(r);e="1%"!==t.top,s="2px"===t.marginLeft,n="4px"===t.width,r.style.marginRight="50%",a="4px"===t.marginRight,te.removeChild(o)}var e,n,a,s,o=Z.createElement("div"),r=Z.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(r),lt.extend(rt,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==n&&t(),n},pixelMarginRight:function(){return null==n&&t(),a},reliableMarginLeft:function(){return null==n&&t(),s},reliableMarginRight:function(){var t,e=r.appendChild(Z.createElement("div"));return e.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",r.style.width="1px",te.appendChild(o),t=!parseFloat(i.getComputedStyle(e).marginRight),te.removeChild(o),r.removeChild(e),t}}))}();var ee=/^(none|table(?!-c[ea]).+)/,ie={position:"absolute",visibility:"hidden",display:"block"},ne={letterSpacing:"0",fontWeight:"400"},ae=["Webkit","O","Moz","ms"],se=Z.createElement("div").style;lt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=O(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,s,o,r=lt.camelCase(e),l=t.style;if(e=lt.cssProps[r]||(lt.cssProps[r]=$(r)||r),o=lt.cssHooks[e]||lt.cssHooks[r],void 0===i)return o&&"get"in o&&void 0!==(a=o.get(t,!1,n))?a:l[e];s=typeof i,"string"===s&&(a=$t.exec(i))&&a[1]&&(i=f(t,e,a),s="number"),null!=i&&i===i&&("number"===s&&(i+=a&&a[3]||(lt.cssNumber[r]?"":"px")),rt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l[e]=i))}},css:function(t,e,i,n){var a,s,o,r=lt.camelCase(e);return e=lt.cssProps[r]||(lt.cssProps[r]=$(r)||r),o=lt.cssHooks[e]||lt.cssHooks[r],o&&"get"in o&&(a=o.get(t,!0,i)),void 0===a&&(a=O(t,e,n)),"normal"===a&&e in ne&&(a=ne[e]),""===i||i?(s=parseFloat(a),!0===i||isFinite(s)?s||0:a):a}}),lt.each(["height","width"],function(t,e){lt.cssHooks[e]={get:function(t,i,n){if(i)return ee.test(lt.css(t,"display"))&&0===t.offsetWidth?Zt(t,ie,function(){return j(t,e,n)}):j(t,e,n)},set:function(t,i,n){var a,s=n&&Qt(t),o=n&&P(t,e,n,"border-box"===lt.css(t,"boxSizing",!1,s),s);return o&&(a=$t.exec(i))&&"px"!==(a[3]||"px")&&(t.style[e]=i,i=lt.css(t,e)),D(t,i,o)}}}),lt.cssHooks.marginLeft=R(rt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(O(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),lt.cssHooks.marginRight=R(rt.reliableMarginRight,function(t,e){if(e)return Zt(t,{display:"inline-block"},O,[t,"marginRight"])}),lt.each({margin:"",padding:"",border:"Width"},function(t,e){lt.cssHooks[t+e]={expand:function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];n<4;n++)a[t+Dt[n]+e]=s[n]||s[n-2]||s[0];return a}},Kt.test(t)||(lt.cssHooks[t+e].set=D)}),lt.fn.extend({css:function(t,e){return St(this,function(t,e,i){var n,a,s={},o=0;if(lt.isArray(e)){for(n=Qt(t),a=e.length;o<a;o++)s[e[o]]=lt.css(t,e[o],!1,n);return s}return void 0!==i?lt.style(t,e,i):lt.css(t,e)},t,e,arguments.length>1)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pt(this)?lt(this).show():lt(this).hide()})}}),lt.Tween=N,N.prototype={constructor:N,init:function(t,e,i,n,a,s){this.elem=t,this.prop=i,this.easing=a||lt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(lt.cssNumber[i]?"":"px")},cur:function(){var t=N.propHooks[this.prop];return t&&t.get?t.get(this):N.propHooks._default.get(this)},run:function(t){var e,i=N.propHooks[this.prop];return this.options.duration?this.pos=e=lt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=lt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){lt.fx.step[t.prop]?lt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[lt.cssProps[t.prop]]&&!lt.cssHooks[t.prop]?t.elem[t.prop]=t.now:lt.style(t.elem,t.prop,t.now+t.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},lt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},lt.fx=N.prototype.init,lt.fx.step={};var oe,re,le=/^(?:toggle|show|hide)$/,he=/queueHooks$/;lt.Animation=lt.extend(V,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return f(i.elem,t,$t.exec(e),i),i}]},tweener:function(t,e){lt.isFunction(t)?(e=t,t=["*"]):t=t.match(kt);for(var i,n=0,a=t.length;n<a;n++)i=t[n],V.tweeners[i]=V.tweeners[i]||[],V.tweeners[i].unshift(e)},prefilters:[q],prefilter:function(t,e){e?V.prefilters.unshift(t):V.prefilters.push(t)}}),lt.speed=function(t,e,i){var n=t&&"object"==typeof t?lt.extend({},t):{complete:i||!i&&e||lt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!lt.isFunction(e)&&e};return n.duration=lt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in lt.fx.speeds?lt.fx.speeds[n.duration]:lt.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){lt.isFunction(n.old)&&n.old.call(this),n.queue&&lt.dequeue(this,n.queue)},n},lt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Pt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var a=lt.isEmptyObject(t),s=lt.speed(e,i,n),o=function(){var e=V(this,lt.extend({},t),s);(a||Et.get(this,"finish"))&&e.stop(!0)};return o.finish=o,a||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,a=null!=t&&t+"queueHooks",s=lt.timers,o=Et.get(this);if(a)o[a]&&o[a].stop&&n(o[a]);else for(a in o)o[a]&&o[a].stop&&he.test(a)&&n(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=t&&s[a].queue!==t||(s[a].anim.stop(i),e=!1,s.splice(a,1));!e&&i||lt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=Et.get(this),n=i[t+"queue"],a=i[t+"queueHooks"],s=lt.timers,o=n?n.length:0;for(i.finish=!0,lt.queue(this,t,[]),a&&a.stop&&a.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),lt.each(["toggle","show","hide"],function(t,e){var i=lt.fn[e];lt.fn[e]=function(t,n,a){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(z(e,!0),t,n,a)}}),lt.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){lt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),lt.timers=[],lt.fx.tick=function(){var t,e=0,i=lt.timers;for(oe=lt.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||lt.fx.stop(),oe=void 0},lt.fx.timer=function(t){lt.timers.push(t),t()?lt.fx.start():lt.timers.pop()},lt.fx.interval=13,lt.fx.start=function(){re||(re=i.setInterval(lt.fx.tick,lt.fx.interval))},lt.fx.stop=function(){i.clearInterval(re),re=null},lt.fx.speeds={slow:600,fast:200,_default:400},lt.fn.delay=function(t,e){return t=lt.fx?lt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var a=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(a)}})},function(){var t=Z.createElement("input"),e=Z.createElement("select"),i=e.appendChild(Z.createElement("option"));t.type="checkbox",rt.checkOn=""!==t.value,rt.optSelected=i.selected,e.disabled=!0,rt.optDisabled=!i.disabled,t=Z.createElement("input"),t.value="t",t.type="radio",rt.radioValue="t"===t.value}();var ce,ue=lt.expr.attrHandle;lt.fn.extend({attr:function(t,e){return St(this,lt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){lt.removeAttr(this,t)})}}),lt.extend({attr:function(t,e,i){var n,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?lt.prop(t,e,i):(1===s&&lt.isXMLDoc(t)||(e=e.toLowerCase(),a=lt.attrHooks[e]||(lt.expr.match.bool.test(e)?ce:void 0)),void 0!==i?null===i?void lt.removeAttr(t,e):a&&"set"in a&&void 0!==(n=a.set(t,i,e))?n:(t.setAttribute(e,i+""),i):a&&"get"in a&&null!==(n=a.get(t,e))?n:(n=lt.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!rt.radioValue&&"radio"===e&&lt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,a=0,s=e&&e.match(kt);if(s&&1===t.nodeType)for(;i=s[a++];)n=lt.propFix[i]||i,lt.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)}}),ce={set:function(t,e,i){return!1===e?lt.removeAttr(t,i):t.setAttribute(i,i),i}},lt.each(lt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ue[e]||lt.find.attr;ue[e]=function(t,e,n){var a,s;return n||(s=ue[e],ue[e]=a,a=null!=i(t,e,n)?e.toLowerCase():null,ue[e]=s),a}});var de=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;lt.fn.extend({prop:function(t,e){return St(this,lt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[lt.propFix[t]||t]})}}),lt.extend({prop:function(t,e,i){var n,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&lt.isXMLDoc(t)||(e=lt.propFix[e]||e,a=lt.propHooks[e]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(t,i,e))?n:t[e]=i:a&&"get"in a&&null!==(n=a.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=lt.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),rt.optSelected||(lt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),lt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){lt.propFix[this.toLowerCase()]=this});var pe=/[\t\r\n\f]/g;lt.fn.extend({addClass:function(t){var e,i,n,a,s,o,r,l=0;if(lt.isFunction(t))return this.each(function(e){lt(this).addClass(t.call(this,e,B(this)))});if("string"==typeof t&&t)for(e=t.match(kt)||[];i=this[l++];)if(a=B(i),n=1===i.nodeType&&(" "+a+" ").replace(pe," ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=lt.trim(n),a!==r&&i.setAttribute("class",r)}return this},removeClass:function(t){var e,i,n,a,s,o,r,l=0;if(lt.isFunction(t))return this.each(function(e){lt(this).removeClass(t.call(this,e,B(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(kt)||[];i=this[l++];)if(a=B(i),n=1===i.nodeType&&(" "+a+" ").replace(pe," ")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");r=lt.trim(n),a!==r&&i.setAttribute("class",r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):lt.isFunction(t)?this.each(function(i){lt(this).toggleClass(t.call(this,i,B(this),e),e)}):this.each(function(){var e,n,a,s;if("string"===i)for(n=0,a=lt(this),s=t.match(kt)||[];e=s[n++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==i||(e=B(this),e&&Et.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Et.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+B(i)+" ").replace(pe," ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g,me=/[\x20\t\r\n\f]+/g;lt.fn.extend({val:function(t){var e,i,n,a=this[0];{if(arguments.length)return n=lt.isFunction(t),this.each(function(i){var a;1===this.nodeType&&(a=n?t.call(this,i,lt(this).val()):t,null==a?a="":"number"==typeof a?a+="":lt.isArray(a)&&(a=lt.map(a,function(t){return null==t?"":t+""})),(e=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,a,"value")||(this.value=a))});if(a)return(e=lt.valHooks[a.type]||lt.valHooks[a.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(a,"value"))?i:(i=a.value,"string"==typeof i?i.replace(ge,""):null==i?"":i)}}}),lt.extend({valHooks:{option:{get:function(t){var e=lt.find.attr(t,"value");return null!=e?e:lt.trim(lt.text(t)).replace(me," ")}},select:{get:function(t){for(var e,i,n=t.options,a=t.selectedIndex,s="select-one"===t.type||a<0,o=s?null:[],r=s?a+1:n.length,l=a<0?r:s?a:0;l<r;l++)if(i=n[l],(i.selected||l===a)&&(rt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!lt.nodeName(i.parentNode,"optgroup"))){if(e=lt(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,a=t.options,s=lt.makeArray(e),o=a.length;o--;)n=a[o],(n.selected=lt.inArray(lt.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),lt.each(["radio","checkbox"],function(){lt.valHooks[this]={set:function(t,e){if(lt.isArray(e))return t.checked=lt.inArray(lt(t).val(),e)>-1}},rt.checkOn||(lt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ve=/^(?:focusinfocus|focusoutblur)$/;lt.extend(lt.event,{trigger:function(t,e,n,a){var s,o,r,l,h,c,u,d=[n||Z],f=ot.call(t,"type")?t.type:t,p=ot.call(t,"namespace")?t.namespace.split("."):[];if(o=r=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!ve.test(f+lt.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),h=f.indexOf(":")<0&&"on"+f,t=t[lt.expando]?t:new lt.Event(f,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:lt.makeArray(e,[t]),u=lt.event.special[f]||{},a||!u.trigger||!1!==u.trigger.apply(n,e))){if(!a&&!u.noBubble&&!lt.isWindow(n)){for(l=u.delegateType||f,ve.test(l+f)||(o=o.parentNode);o;o=o.parentNode)d.push(o),r=o;r===(n.ownerDocument||Z)&&d.push(r.defaultView||r.parentWindow||i)}for(s=0;(o=d[s++])&&!t.isPropagationStopped();)t.type=s>1?l:u.bindType||f,c=(Et.get(o,"events")||{})[t.type]&&Et.get(o,"handle"),c&&c.apply(o,e),(c=h&&o[h])&&c.apply&&Tt(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=f,a||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),e)||!Tt(n)||h&&lt.isFunction(n[f])&&!lt.isWindow(n)&&(r=n[h],r&&(n[h]=null),lt.event.triggered=f,n[f](),lt.event.triggered=void 0,r&&(n[h]=r)),t.result}},simulate:function(t,e,i){var n=lt.extend(new lt.Event,i,{type:t,isSimulated:!0});lt.event.trigger(n,null,e)}}),lt.fn.extend({trigger:function(t,e){return this.each(function(){lt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return lt.event.trigger(t,e,i,!0)}}),lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){lt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),lt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),rt.focusin="onfocusin"in i,rt.focusin||lt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){lt.event.simulate(e,t.target,lt.event.fix(t))};lt.event.special[e]={setup:function(){var n=this.ownerDocument||this,a=Et.access(n,e);a||n.addEventListener(t,i,!0),Et.access(n,e,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=Et.access(n,e)-1;a?Et.access(n,e,a):(n.removeEventListener(t,i,!0),Et.remove(n,e))}}});var _e=i.location,be=lt.now(),ye=/\?/;lt.parseJSON=function(t){return JSON.parse(t+"")},lt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||lt.error("Invalid XML: "+t),e};var we=/#.*$/,xe=/([?&])_=[^&]*/,ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ce=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Se=/^(?:GET|HEAD)$/,Te=/^\/\//,Ee={},Ae={},Me="*/".concat("*"),Oe=Z.createElement("a");Oe.href=_e.href,lt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:Ce.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":lt.parseJSON,"text xml":lt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?U(U(t,lt.ajaxSettings),e):U(lt.ajaxSettings,t)},ajaxPrefilter:G(Ee),ajaxTransport:G(Ae),ajax:function(t,e){function n(t,e,n,r){var h,u,_,b,w,k=e;2!==y&&(y=2,l&&i.clearTimeout(l),a=void 0,o=r||"",x.readyState=t>0?4:0,h=t>=200&&t<300||304===t,n&&(b=Y(d,x,n)),b=X(d,b,x,h),h?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(lt.lastModified[s]=w),(w=x.getResponseHeader("etag"))&&(lt.etag[s]=w)),204===t||"HEAD"===d.type?k="nocontent":304===t?k="notmodified":(k=b.state,u=b.data,_=b.error,h=!_)):(_=k,!t&&k||(k="error",t<0&&(t=0))),x.status=t,x.statusText=(e||k)+"",h?g.resolveWith(f,[u,k,x]):g.rejectWith(f,[x,k,_]),x.statusCode(v),v=void 0,c&&p.trigger(h?"ajaxSuccess":"ajaxError",[x,d,h?u:_]),m.fireWith(f,[x,k]),c&&(p.trigger("ajaxComplete",[x,d]),--lt.active||lt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var a,s,o,r,l,h,c,u,d=lt.ajaxSetup({},e),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?lt(f):lt.event,g=lt.Deferred(),m=lt.Callbacks("once memory"),v=d.statusCode||{},_={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!r)for(r={};e=ke.exec(o);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,_[t]=e),this},overrideMimeType:function(t){return y||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return a&&a.abort(e),n(0,e),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||_e.href)+"").replace(we,"").replace(Te,_e.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=lt.trim(d.dataType||"*").toLowerCase().match(kt)||[""],null==d.crossDomain){h=Z.createElement("a");try{h.href=d.url,h.href=h.href,d.crossDomain=Oe.protocol+"//"+Oe.host!=h.protocol+"//"+h.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=lt.param(d.data,d.traditional)),W(Ee,d,e,x),2===y)return x;c=lt.event&&d.global,c&&0==lt.active++&&lt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Se.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(ye.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=xe.test(s)?s.replace(xe,"$1_="+be++):s+(ye.test(s)?"&":"?")+"_="+be++)),d.ifModified&&(lt.lastModified[s]&&x.setRequestHeader("If-Modified-Since",lt.lastModified[s]),lt.etag[s]&&x.setRequestHeader("If-None-Match",lt.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Me+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)x.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(!1===d.beforeSend.call(f,x,d)||2===y))return x.abort();w="abort";for(u in{success:1,error:1,complete:1})x[u](d[u]);if(a=W(Ae,d,e,x)){if(x.readyState=1,c&&p.trigger("ajaxSend",[x,d]),2===y)return x;d.async&&d.timeout>0&&(l=i.setTimeout(function(){x.abort("timeout")},d.timeout));try{y=1,a.send(_,n)}catch(t){if(!(y<2))throw t;n(-1,t)}}else n(-1,"No Transport");return x},getJSON:function(t,e,i){return lt.get(t,e,i,"json")},getScript:function(t,e){return lt.get(t,void 0,e,"script")}}),lt.each(["get","post"],function(t,e){lt[e]=function(t,i,n,a){return lt.isFunction(i)&&(a=a||n,n=i,i=void 0),lt.ajax(lt.extend({url:t,type:e,dataType:a,data:i,success:n},lt.isPlainObject(t)&&t))}}),lt._evalUrl=function(t){return lt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},lt.fn.extend({wrapAll:function(t){var e;return lt.isFunction(t)?this.each(function(e){lt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=lt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return lt.isFunction(t)?this.each(function(e){lt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=lt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=lt.isFunction(t);return this.each(function(i){lt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){lt.nodeName(this,"body")||lt(this).replaceWith(this.childNodes)}).end()}}),lt.expr.filters.hidden=function(t){return!lt.expr.filters.visible(t)},lt.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Re=/%20/g,$e=/\[\]$/,De=/\r?\n/g,Pe=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;lt.param=function(t,e){var i,n=[],a=function(t,e){e=lt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=lt.ajaxSettings&&lt.ajaxSettings.traditional),lt.isArray(t)||t.jquery&&!lt.isPlainObject(t))lt.each(t,function(){a(this.name,this.value)});else for(i in t)K(i,t[i],e,a);return n.join("&").replace(Re,"+")},lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=lt.prop(this,"elements");return t?lt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!lt(this).is(":disabled")&&je.test(this.nodeName)&&!Pe.test(t)&&(this.checked||!jt.test(t))}).map(function(t,e){var i=lt(this).val();return null==i?null:lt.isArray(i)?lt.map(i,function(t){return{name:e.name,value:t.replace(De,"\r\n")}}):{name:e.name,value:i.replace(De,"\r\n")}}).get()}}),lt.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Ie={0:200,1223:204},Ne=lt.ajaxSettings.xhr();rt.cors=!!Ne&&"withCredentials"in Ne,rt.ajax=Ne=!!Ne,lt.ajaxTransport(function(t){var e,n;if(rt.cors||Ne&&!t.crossDomain)return{send:function(a,s){var o,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(o in a)r.setRequestHeader(o,a[o]);e=function(t){return function(){e&&(e=n=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(Ie[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=e(),n=r.onerror=e("error"),void 0!==r.onabort?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&i.setTimeout(function(){e&&n()})},e=e("abort");try{r.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),lt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return lt.globalEval(t),t}}}),lt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),lt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,a){e=lt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&a("error"===t.type?404:200,t.type)}),Z.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Le=[],ze=/(=)\?(?=&|$)|\?\?/;lt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Le.pop()||lt.expando+"_"+be++;return this[t]=!0,t}}),lt.ajaxPrefilter("json jsonp",function(t,e,n){var a,s,o,r=!1!==t.jsonp&&(ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=lt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(ze,"$1"+a):!1!==t.jsonp&&(t.url+=(ye.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||lt.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=i[a],i[a]=function(){o=arguments},n.always(function(){void 0===s?lt(i).removeProp(a):i[a]=s,t[a]&&(t.jsonpCallback=e.jsonpCallback,Le.push(a)),o&&lt.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),lt.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||Z;var n=vt.exec(t),a=!i&&[];return n?[e.createElement(n[1])]:(n=m([t],e,a),a&&a.length&&lt(a).remove(),lt.merge([],n.childNodes))};var He=lt.fn.load;lt.fn.load=function(t,e,i){if("string"!=typeof t&&He)return He.apply(this,arguments);var n,a,s,o=this,r=t.indexOf(" ");return r>-1&&(n=lt.trim(t.slice(r)),t=t.slice(0,r)),lt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(a="POST"),o.length>0&&lt.ajax({url:t,type:a||"GET",dataType:"html",data:e}).done(function(t){s=arguments,o.html(n?lt("<div>").append(lt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){o.each(function(){i.apply(this,s||[t.responseText,e,t])})}),this},lt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){lt.fn[e]=function(t){return this.on(e,t)}}),lt.expr.filters.animated=function(t){return lt.grep(lt.timers,function(e){return t===e.elem}).length},lt.offset={setOffset:function(t,e,i){var n,a,s,o,r,l,h,c=lt.css(t,"position"),u=lt(t),d={};"static"===c&&(t.style.position="relative"),r=u.offset(),s=lt.css(t,"top"),l=lt.css(t,"left"),h=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,h?(n=u.position(),o=n.top,a=n.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),lt.isFunction(e)&&(e=e.call(t,i,lt.extend({},r))),null!=e.top&&(d.top=e.top-r.top+o),null!=e.left&&(d.left=e.left-r.left+a),"using"in e?e.using.call(t,d):u.css(d)}},lt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){lt.offset.setOffset(this,t,e)});var e,i,n=this[0],a={top:0,left:0},s=n&&n.ownerDocument;if(s)return e=s.documentElement,lt.contains(e,n)?(a=n.getBoundingClientRect(),i=J(s),{top:a.top+i.pageYOffset-e.clientTop,left:a.left+i.pageXOffset-e.clientLeft}):a},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===lt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),lt.nodeName(t[0],"html")||(n=t.offset()),n.top+=lt.css(t[0],"borderTopWidth",!0),n.left+=lt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-lt.css(i,"marginTop",!0),left:e.left-n.left-lt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===lt.css(t,"position");)t=t.offsetParent;return t||te})}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;lt.fn[t]=function(n){return St(this,function(t,n,a){var s=J(t);if(void 0===a)return s?s[e]:t[n];s?s.scrollTo(i?s.pageXOffset:a,i?a:s.pageYOffset):t[n]=a},t,n,arguments.length)}}),lt.each(["top","left"],function(t,e){lt.cssHooks[e]=R(rt.pixelPosition,function(t,i){if(i)return i=O(t,e),Jt.test(i)?lt(t).position()[e]+"px":i})}),lt.each({Height:"height",Width:"width"},function(t,e){lt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){lt.fn[n]=function(n,a){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===a?"margin":"border");return St(this,function(e,i,n){var a;return lt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===n?lt.css(e,i,o):lt.style(e,i,n,o)},e,s?n:void 0,s,null)}})}),lt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),lt.fn.andSelf=lt.fn.addBack,n=[],void 0!==(a=function(){return lt}.apply(e,n))&&(t.exports=a);var qe=i.jQuery,Fe=i.$;return lt.noConflict=function(t){return i.$===lt&&(i.$=Fe),t&&i.jQuery===lt&&(i.jQuery=qe),lt},s||(i.jQuery=i.$=lt),lt})},function(t,e,i){var n,a;(function(){function i(t){function e(e,i,n,a,s,o){for(;s>=0&&s<o;s+=t){var r=a?a[s]:s;n=i(n,e[r],r,e)}return n}return function(i,n,a,s){n=k(n,s,4);var o=!O(i)&&x.keys(i),r=(o||i).length,l=t>0?0:r-1;return arguments.length<3&&(a=i[o?o[l]:l],l+=t),e(i,n,a,o,l,r)}}function s(t){return function(e,i,n){i=C(i,n);for(var a=M(e),s=t>0?0:a-1;s>=0&&s<a;s+=t)if(i(e[s],s,e))return s;return-1}}function o(t,e,i){return function(n,a,s){var o=0,r=M(n);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+r,o):r=s>=0?Math.min(s+1,r):s+r+1;else if(i&&s&&r)return s=i(n,a),n[s]===a?s:-1;if(a!==a)return s=e(p.call(n,o,r),x.isNaN),s>=0?s+o:-1;for(s=t>0?o:r-1;s>=0&&s<r;s+=t)if(n[s]===a)return s;return-1}}function r(t,e){var i=j.length,n=t.constructor,a=x.isFunction(n)&&n.prototype||u,s="constructor";for(x.has(t,s)&&!x.contains(e,s)&&e.push(s);i--;)(s=j[i])in t&&t[s]!==a[s]&&!x.contains(e,s)&&e.push(s)}var l=this,h=l._,c=Array.prototype,u=Object.prototype,d=Function.prototype,f=c.push,p=c.slice,g=u.toString,m=u.hasOwnProperty,v=Array.isArray,_=Object.keys,b=d.bind,y=Object.create,w=function(){},x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};void 0!==t&&t.exports&&(e=t.exports=x),e._=x,x.VERSION="1.8.3";var k=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,a){return t.call(e,i,n,a)};case 4:return function(i,n,a,s){return t.call(e,i,n,a,s)}}return function(){return t.apply(e,arguments)}},C=function(t,e,i){return null==t?x.identity:x.isFunction(t)?k(t,e,i):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return C(t,e,1/0)};var S=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var a=1;a<n;a++)for(var s=arguments[a],o=t(s),r=o.length,l=0;l<r;l++){var h=o[l];e&&void 0!==i[h]||(i[h]=s[h])}return i}},T=function(t){if(!x.isObject(t))return{};if(y)return y(t);w.prototype=t;var e=new w;return w.prototype=null,e},E=function(t){return function(e){return null==e?void 0:e[t]}},A=Math.pow(2,53)-1,M=E("length"),O=function(t){var e=M(t);return"number"==typeof e&&e>=0&&e<=A};x.each=x.forEach=function(t,e,i){e=k(e,i);var n,a;if(O(t))for(n=0,a=t.length;n<a;n++)e(t[n],n,t);else{var s=x.keys(t);for(n=0,a=s.length;n<a;n++)e(t[s[n]],s[n],t)}return t},x.map=x.collect=function(t,e,i){e=C(e,i);for(var n=!O(t)&&x.keys(t),a=(n||t).length,s=Array(a),o=0;o<a;o++){var r=n?n[o]:o;s[o]=e(t[r],r,t)}return s},x.reduce=x.foldl=x.inject=i(1),x.reduceRight=x.foldr=i(-1),x.find=x.detect=function(t,e,i){var n;if(void 0!==(n=O(t)?x.findIndex(t,e,i):x.findKey(t,e,i))&&-1!==n)return t[n]},x.filter=x.select=function(t,e,i){var n=[];return e=C(e,i),x.each(t,function(t,i,a){e(t,i,a)&&n.push(t)}),n},x.reject=function(t,e,i){return x.filter(t,x.negate(C(e)),i)},x.every=x.all=function(t,e,i){e=C(e,i);for(var n=!O(t)&&x.keys(t),a=(n||t).length,s=0;s<a;s++){var o=n?n[s]:s;if(!e(t[o],o,t))return!1}return!0},x.some=x.any=function(t,e,i){e=C(e,i);for(var n=!O(t)&&x.keys(t),a=(n||t).length,s=0;s<a;s++){var o=n?n[s]:s;if(e(t[o],o,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,i,n){return O(t)||(t=x.values(t)),("number"!=typeof i||n)&&(i=0),x.indexOf(t,e,i)>=0},x.invoke=function(t,e){var i=p.call(arguments,2),n=x.isFunction(e);return x.map(t,function(t){var a=n?e:t[e];return null==a?a:a.apply(t,i)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,i){var n,a,s=-1/0,o=-1/0;if(null==e&&null!=t){t=O(t)?t:x.values(t);for(var r=0,l=t.length;r<l;r++)(n=t[r])>s&&(s=n)}else e=C(e,i),x.each(t,function(t,i,n){((a=e(t,i,n))>o||a===-1/0&&s===-1/0)&&(s=t,o=a)});return s},x.min=function(t,e,i){var n,a,s=1/0,o=1/0;if(null==e&&null!=t){t=O(t)?t:x.values(t);for(var r=0,l=t.length;r<l;r++)(n=t[r])<s&&(s=n)}else e=C(e,i),x.each(t,function(t,i,n){((a=e(t,i,n))<o||a===1/0&&s===1/0)&&(s=t,o=a)});return s},x.shuffle=function(t){for(var e,i=O(t)?t:x.values(t),n=i.length,a=Array(n),s=0;s<n;s++)e=x.random(0,s),e!==s&&(a[s]=a[e]),a[e]=i[s];return a},x.sample=function(t,e,i){return null==e||i?(O(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,i){return e=C(e,i),x.pluck(x.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var R=function(t){return function(e,i,n){var a={};return i=C(i,n),x.each(e,function(n,s){var o=i(n,s,e);t(a,n,o)}),a}};x.groupBy=R(function(t,e,i){x.has(t,i)?t[i].push(e):t[i]=[e]}),x.indexBy=R(function(t,e,i){t[i]=e}),x.countBy=R(function(t,e,i){x.has(t,i)?t[i]++:t[i]=1}),x.toArray=function(t){return t?x.isArray(t)?p.call(t):O(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:O(t)?t.length:x.keys(t).length},x.partition=function(t,e,i){e=C(e,i);var n=[],a=[];return x.each(t,function(t,i,s){(e(t,i,s)?n:a).push(t)}),[n,a]},x.first=x.head=x.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:x.initial(t,t.length-e)},x.initial=function(t,e,i){return p.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},x.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:x.rest(t,Math.max(0,t.length-e))},x.rest=x.tail=x.drop=function(t,e,i){return p.call(t,null==e||i?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var $=function(t,e,i,n){for(var a=[],s=0,o=n||0,r=M(t);o<r;o++){var l=t[o];if(O(l)&&(x.isArray(l)||x.isArguments(l))){e||(l=$(l,e,i));var h=0,c=l.length;for(a.length+=c;h<c;)a[s++]=l[h++]}else i||(a[s++]=l)}return a};x.flatten=function(t,e){return $(t,e,!1)},x.without=function(t){return x.difference(t,p.call(arguments,1))},x.uniq=x.unique=function(t,e,i,n){x.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=C(i,n));for(var a=[],s=[],o=0,r=M(t);o<r;o++){var l=t[o],h=i?i(l,o,t):l;e?(o&&s===h||a.push(l),s=h):i?x.contains(s,h)||(s.push(h),a.push(l)):x.contains(a,l)||a.push(l)}return a},x.union=function(){return x.uniq($(arguments,!0,!0))},x.intersection=function(t){for(var e=[],i=arguments.length,n=0,a=M(t);n<a;n++){var s=t[n];if(!x.contains(e,s)){for(var o=1;o<i&&x.contains(arguments[o],s);o++);o===i&&e.push(s)}}return e},x.difference=function(t){var e=$(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,M).length||0,i=Array(e),n=0;n<e;n++)i[n]=x.pluck(t,n);return i},x.object=function(t,e){for(var i={},n=0,a=M(t);n<a;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},x.findIndex=s(1),x.findLastIndex=s(-1),x.sortedIndex=function(t,e,i,n){i=C(i,n,1);for(var a=i(e),s=0,o=M(t);s<o;){var r=Math.floor((s+o)/2);i(t[r])<a?s=r+1:o=r}return s},x.indexOf=o(1,x.findIndex,x.sortedIndex),x.lastIndexOf=o(-1,x.findLastIndex),x.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),a=Array(n),s=0;s<n;s++,t+=i)a[s]=t;return a};var D=function(t,e,i,n,a){if(!(n instanceof e))return t.apply(i,a);var s=T(t.prototype),o=t.apply(s,a);return x.isObject(o)?o:s};x.bind=function(t,e){if(b&&t.bind===b)return b.apply(t,p.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var i=p.call(arguments,2),n=function(){return D(t,n,e,this,i.concat(p.call(arguments)))};return n},x.partial=function(t){var e=p.call(arguments,1),i=function(){for(var n=0,a=e.length,s=Array(a),o=0;o<a;o++)s[o]=e[o]===x?arguments[n++]:e[o];for(;n<arguments.length;)s.push(arguments[n++]);return D(t,i,this,this,s)};return i},x.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)i=arguments[e],t[i]=x.bind(t[i],t);return t},x.memoize=function(t,e){var i=function(n){var a=i.cache,s=""+(e?e.apply(this,arguments):n);return x.has(a,s)||(a[s]=t.apply(this,arguments)),a[s]};return i.cache={},i},x.delay=function(t,e){var i=p.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,i){var n,a,s,o=null,r=0;i||(i={});var l=function(){r=!1===i.leading?0:x.now(),o=null,s=t.apply(n,a),o||(n=a=null)};return function(){var h=x.now();r||!1!==i.leading||(r=h);var c=e-(h-r);return n=this,a=arguments,c<=0||c>e?(o&&(clearTimeout(o),o=null),r=h,s=t.apply(n,a),o||(n=a=null)):o||!1===i.trailing||(o=setTimeout(l,c)),s}},x.debounce=function(t,e,i){var n,a,s,o,r,l=function(){var h=x.now()-o;h<e&&h>=0?n=setTimeout(l,e-h):(n=null,i||(r=t.apply(s,a),n||(s=a=null)))};return function(){s=this,a=arguments,o=x.now();var h=i&&!n;return n||(n=setTimeout(l,e)),h&&(r=t.apply(s,a),s=a=null),r}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},x.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},x.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},x.once=x.partial(x.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(_)return _(t);var e=[];for(var i in t)x.has(t,i)&&e.push(i);return P&&r(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var i in t)e.push(i);return P&&r(t,e),e},x.values=function(t){for(var e=x.keys(t),i=e.length,n=Array(i),a=0;a<i;a++)n[a]=t[e[a]];return n},x.mapObject=function(t,e,i){e=C(e,i);for(var n,a=x.keys(t),s=a.length,o={},r=0;r<s;r++)n=a[r],o[n]=e(t[n],n,t);return o},x.pairs=function(t){for(var e=x.keys(t),i=e.length,n=Array(i),a=0;a<i;a++)n[a]=[e[a],t[e[a]]];return n},x.invert=function(t){for(var e={},i=x.keys(t),n=0,a=i.length;n<a;n++)e[t[i[n]]]=i[n];return e},x.functions=x.methods=function(t){var e=[];for(var i in t)x.isFunction(t[i])&&e.push(i);return e.sort()},x.extend=S(x.allKeys),x.extendOwn=x.assign=S(x.keys),x.findKey=function(t,e,i){e=C(e,i);for(var n,a=x.keys(t),s=0,o=a.length;s<o;s++)if(n=a[s],e(t[n],n,t))return n},x.pick=function(t,e,i){var n,a,s={},o=t;if(null==o)return s;x.isFunction(e)?(a=x.allKeys(o),n=k(e,i)):(a=$(arguments,!1,!1,1),n=function(t,e,i){return e in i},o=Object(o));for(var r=0,l=a.length;r<l;r++){var h=a[r],c=o[h];n(c,h,o)&&(s[h]=c)}return s},x.omit=function(t,e,i){if(x.isFunction(e))e=x.negate(e);else{var n=x.map($(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(n,e)}}return x.pick(t,e,i)},x.defaults=S(x.allKeys,!0),x.create=function(t,e){var i=T(t);return e&&x.extendOwn(i,e),i},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var i=x.keys(e),n=i.length;if(null==t)return!n;for(var a=Object(t),s=0;s<n;s++){var o=i[s];if(e[o]!==a[o]||!(o in a))return!1}return!0};var I=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var a=g.call(t);if(a!==g.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var s="[object Array]"===a;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,r=e.constructor;if(o!==r&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(r)&&r instanceof r)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!I(t[l],e[l],i,n))return!1}else{var h,c=x.keys(t);if(l=c.length,x.keys(e).length!==l)return!1;for(;l--;)if(h=c[l],!x.has(e,h)||!I(t[h],e[h],i,n))return!1}return i.pop(),n.pop(),!0};x.isEqual=function(t,e){return I(t,e)},x.isEmpty=function(t){return null==t||(O(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length)},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=v||function(t){return"[object Array]"===g.call(t)},x.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return g.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===g.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&m.call(t,e)},x.noConflict=function(){return l._=h,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=E,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,i){var n=Array(Math.max(0,t));e=k(e,i,1);for(var a=0;a<t;a++)n[a]=e(a);return n},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=x.invert(N),z=function(t){var e=function(e){return t[e]},i="(?:"+x.keys(t).join("|")+")",n=RegExp(i),a=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(a,e):t}};x.escape=z(N),x.unescape=z(L),x.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),x.isFunction(n)?n.call(t):n};var H=0;x.uniqueId=function(t){var e=++H+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+F[t]};x.template=function(t,e,i){!e&&i&&(e=i),e=x.defaults({},e,x.templateSettings);var n=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),a=0,s="__p+='";t.replace(n,function(e,i,n,o,r){return s+=t.slice(a,r).replace(V,B),a=r+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var r=function(t){return o.call(this,t,x)};return r.source="function("+(e.variable||"obj")+"){\n"+s+"}",r},x.chain=function(t){var e=x(t);return e._chain=!0,e};var G=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var i=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),G(this,i.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];x.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],G(this,i)}}),x.each(["concat","join","slice"],function(t){var e=c[t];x.prototype[t]=function(){return G(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},n=[],void 0!==(a=function(){return x}.apply(e,n))&&(t.exports=a)}).call(this)},function(t,e,i){(function(n){var a,s;!function(o){var r="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n;a=[i(1),i(0),e],void 0!==(s=function(t,e,i){r.Backbone=o(r,i,t,e)}.apply(e,a))&&(t.exports=s)}(function(t,e,i,n){var a=t.Backbone,s=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=a,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,a){return i[e](this[n],l(t,this),a)};case 4:return function(t,a,s){return i[e](this[n],l(t,this),a,s)};default:return function(){var t=s.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},r=function(t,e,n){i.each(e,function(e,a){i[a]&&(t.prototype[a]=o(e,a,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?h(t):i.isString(t)?function(e){return e.get(t)}:t},h=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},u=/\s+/,d=function(t,e,n,a,s){var o,r=0;if(n&&"object"==typeof n){void 0!==a&&"context"in s&&void 0===s.context&&(s.context=a);for(o=i.keys(n);r<o.length;r++)e=d(t,e,o[r],n[o[r]],s)}else if(n&&u.test(n))for(o=n.split(u);r<o.length;r++)e=t(e,o[r],a,s);else e=t(e,n,a,s);return e};c.on=function(t,e,i){return f(this,t,e,i)};var f=function(t,e,i,n,a){if(t._events=d(p,t._events||{},e,i,{context:n,ctx:t,listening:a}),a){(t._listeners||(t._listeners={}))[a.id]=a}return t};c.listenTo=function(t,e,n){if(!t)return this;var a=t._listenId||(t._listenId=i.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[a];if(!o){var r=this._listenId||(this._listenId=i.uniqueId("l"));o=s[a]={obj:t,objId:a,id:r,listeningTo:s,count:0}}return f(t,e,n,this,o),this};var p=function(t,e,i,n){if(i){var a=t[e]||(t[e]=[]),s=n.context,o=n.ctx,r=n.listening;r&&r.count++,a.push({callback:i,context:s,ctx:s||o,listening:r})}return t};c.off=function(t,e,i){return this._events?(this._events=d(g,this._events,t,e,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(t,e,n){var a=this._listeningTo;if(!a)return this;for(var s=t?[t._listenId]:i.keys(a),o=0;o<s.length;o++){var r=a[s[o]];if(!r)break;r.obj.off(e,n,this)}return this};var g=function(t,e,n,a){if(t){var s,o=0,r=a.context,l=a.listeners;if(e||n||r){for(var h=e?[e]:i.keys(t);o<h.length;o++){e=h[o];var c=t[e];if(!c)break;for(var u=[],d=0;d<c.length;d++){var f=c[d];n&&n!==f.callback&&n!==f.callback._callback||r&&r!==f.context?u.push(f):(s=f.listening)&&0==--s.count&&(delete l[s.id],delete s.listeningTo[s.objId])}u.length?t[e]=u:delete t[e]}return t}for(var p=i.keys(l);o<p.length;o++)s=l[p[o]],delete l[s.id],delete s.listeningTo[s.objId]}};c.once=function(t,e,n){var a=d(m,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(a,e,n)},c.listenToOnce=function(t,e,n){var a=d(m,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,a)};var m=function(t,e,n,a){if(n){var s=t[e]=i.once(function(){a(e,s),n.apply(this,arguments)});s._callback=n}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return d(v,this._events,t,void 0,i),this};var v=function(t,e,i,n){if(t){var a=t[e],s=t.all;a&&s&&(s=s.slice()),a&&_(a,n),s&&_(s,[e].concat(n))}return t},_=function(t,e){var i,n=-1,a=t.length,s=e[0],o=e[1],r=e[2];switch(e.length){case 0:for(;++n<a;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<a;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<a;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<a;)(i=t[n]).callback.call(i.ctx,s,o,r);return;default:for(;++n<a;)(i=t[n]).callback.apply(i.ctx,e);return}};c.bind=c.on,c.unbind=c.off,i.extend(e,c);var b=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var a=i.result(this,"defaults");n=i.defaults(i.extend({},a,n),a),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var a;if("object"==typeof t?(a=t,n=e):(a={})[t]=e,n||(n={}),!this._validate(a,n))return!1;var s=n.unset,o=n.silent,r=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var h=this.attributes,c=this.changed,u=this._previousAttributes;for(var d in a)e=a[d],i.isEqual(h[d],e)||r.push(d),i.isEqual(u[d],e)?delete c[d]:c[d]=e,s?delete h[d]:h[d]=e;if(this.idAttribute in a&&(this.id=this.get(this.idAttribute)),!o){r.length&&(this._pending=n);for(var f=0;f<r.length;f++)this.trigger("change:"+r[f],this,h[r[f]],n)}if(l)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var a in t){var s=t[a];i.isEqual(e[a],s)||(n[a]=s)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var a=t.parse?e.parse(i,t):i;if(!e.set(a,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},z(this,t),this.sync("read",this,t)},save:function(t,e,n){var a;null==t||"object"==typeof t?(a=t,n=e):(a={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var s=n.wait;if(a&&!s){if(!this.set(a,n))return!1}else if(!this._validate(a,n))return!1;var o=this,r=n.success,l=this.attributes;n.success=function(t){o.attributes=l;var e=n.parse?o.parse(t,n):t;if(s&&(e=i.extend({},a,e)),e&&!o.set(e,n))return!1;r&&r.call(n.context,o,t,n),o.trigger("sync",o,t,n)},z(this,n),a&&s&&(this.attributes=i.extend({},l,a));var h=this.isNew()?"create":n.patch?"patch":"update";"patch"!==h||n.attrs||(n.attrs=a);var c=this.sync(h,this,n);return this.attributes=l,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,a=t.wait,s=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){a&&s(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var o=!1;return this.isNew()?i.defer(t.success):(z(this,t),o=this.sync("delete",this,t)),a||s(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||L();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}}),r(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},k=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,a=Array(t.length-i),s=e.length;for(n=0;n<a.length;n++)a[n]=t[n+i];for(n=0;n<s;n++)t[n+i]=e[n];for(n=0;n<a.length;n++)t[n+s+i]=a[n]};i.extend(y.prototype,c,{model:b,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,x))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var a=this._removeModels(t,e);return!e.silent&&a.length&&(e.changes={added:[],merged:[],removed:a},this.trigger("update",this,e)),n?a[0]:a},set:function(t,e){if(null!=t){e=i.extend({},w,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var a=e.at;null!=a&&(a=+a),a>this.length&&(a=this.length),a<0&&(a+=this.length+1);var s,o,r=[],l=[],h=[],c=[],u={},d=e.add,f=e.merge,p=e.remove,g=!1,m=this.comparator&&null==a&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){s=t[o];var _=this.get(s);if(_){if(f&&s!==_){var b=this._isModel(s)?s.attributes:s;e.parse&&(b=_.parse(b,e)),_.set(b,e),h.push(_),m&&!g&&(g=_.hasChanged(v))}u[_.cid]||(u[_.cid]=!0,r.push(_)),t[o]=_}else d&&(s=t[o]=this._prepareModel(s,e))&&(l.push(s),this._addReference(s,e),u[s.cid]=!0,r.push(s))}if(p){for(o=0;o<this.length;o++)s=this.models[o],u[s.cid]||c.push(s);c.length&&this._removeModels(c,e)}var y=!1,x=!m&&d&&p;if(r.length&&x?(y=this.length!==r.length||i.some(this.models,function(t,e){return t!==r[e]}),this.models.length=0,k(this.models,r,0),this.length=this.models.length):l.length&&(m&&(g=!0),k(this.models,l,null==a?this.length:a),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(o=0;o<l.length;o++)null!=a&&(e.index=a+o),s=l[o],s.trigger("add",s,this,e);(g||y)&&this.trigger("sort",this,e),(l.length||c.length||h.length)&&(e.changes={added:l,removed:c,merged:h},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var a=t.reset?"reset":"set";n[a](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},z(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var a=this,s=e.success;return e.success=function(t,e,i){n&&a.add(t,i),s&&s.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var a=this.get(t[n]);if(a){var s=this.indexOf(a);this.models.splice(s,1),this.length--,delete this._byId[a.cid];var o=this.modelId(a.attributes);null!=o&&delete this._byId[o],e.silent||(e.index=s,a.trigger("remove",a,this,e)),i.push(a),this._removeReference(a,e)}}return i},_isModel:function(t){return t instanceof b},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var a=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);a!==s&&(null!=a&&delete this._byId[a],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}}),r(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var C=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(C.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var a=e.match(S);this.delegate(a[1],a[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,a){var s=E[t];i.defaults(a||(a={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(a.url||(o.url=i.result(n,"url")||L()),null!=a.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||n.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",a.emulateJSON&&(o.data._method=s);var r=a.beforeSend;a.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),r)return r.apply(this,arguments)}}"GET"===o.type||a.emulateJSON||(o.processData=!1);var l=a.error;a.error=function(t,e,i){a.textStatus=e,a.errorThrown=i,l&&l.call(a.context,t,e,i)};var h=a.xhr=e.ajax(i.extend(o,a));return n.trigger("request",n,h,a),h};var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var A=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,R=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(A.prototype,c,{initialize:function(){},route:function(t,n,a){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(a=n,n=""),a||(a=this[n]);var s=this;return e.history.route(t,function(i){var o=s._extractParameters(t,i);!1!==s.execute(a,o,n)&&(s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace($,"\\$&").replace(M,"(?:$1)?").replace(O,function(t,e){return e?t:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var D=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,I=/#.*$/;D.started=!1,i.extend(D.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(P,"")},start:function(t){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,a=n.insertBefore(this.iframe,n.firstChild).contentWindow;a.document.open(),a.document.close(),a.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!D.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(I,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var a=this.iframe.contentWindow;e.replace||(a.document.open(),a.document.close()),this._updateHash(a.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new D;var N=function(t,e){var n,a=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return a.apply(this,arguments)},i.extend(n,a,e),n.prototype=i.create(a.prototype,t),n.prototype.constructor=n,n.__super__=a.prototype,n};b.extend=y.extend=A.extend=C.extend=D.extend=N;var L=function(){throw new Error('A "url" property or function must be specified')},z=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})}).call(e,i(97))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return'<iframe src="'+t+'" frameborder="0" style="width: 100%; height: 100%;"/>'}function o(e,i){for(var n in e){var a=e[n];if(t.isObject(a)){var s=i(a);s&&(e[n]=s),o(a,i)}}}function r(t){var e,i,n,a;return i=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,e=t.replace(i,'<a href="$1" target="_blank">$1</a>'),n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,e=e.replace(n,'$1<a href="http://$2" target="_blank">$2</a>'),a=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,e=e.replace(a,'<a href="mailto:$1">$1</a>')}function l(t){return JSON.parse(JSON.stringify(t)||null)}function h(t){return/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function c(t){return n("<div/>").text(t).html()}function u(t){if(t instanceof Array||(t=[t]),0===t.length)return!0;for(var e in t)if(["__null__","__undefined__",null,void 0].indexOf(t[e])>-1)return!0;return!1}function d(t){if(n.isArray(t)){var t=t.toString().replace(/,/g,", "),e=t.lastIndexOf(", ");return-1!=e&&(t=t.substr(0,e)+" or "+t.substr(e+2)),t}return""}function f(t){top.__utils__get__=top.__utils__get__||{};var e=JSON.stringify(t);t.cache&&top.__utils__get__[e]?(t.success&&t.success(top.__utils__get__[e]),window.console.debug("utils.js::get() - Fetching from cache ["+t.url+"].")):p({url:t.url,data:t.data,success:function(i){top.__utils__get__[e]=i,t.success&&t.success(i)},error:function(e,i){t.error&&t.error(e,i)}})}function p(t){var e={contentType:"application/json",type:t.type||"GET",data:t.data||{},url:t.url};"GET"==e.type||"DELETE"==e.type?(n.isEmptyObject(e.data)||(e.url+=-1==e.url.indexOf("?")?"?":"&",e.url+=n.param(e.data,!0)),e.data=null):(e.dataType="json",e.url=e.url,e.data=JSON.stringify(e.data)),n.ajax(e).done(function(e){if("string"==typeof e)try{e=e.replace("Infinity,",'"Infinity",'),e=a.parseJSON(e)}catch(t){console.debug(t)}t.success&&t.success(e)}).fail(function(e){var i=null;try{i=a.parseJSON(e.responseText)}catch(t){i=e.responseText}t.error&&t.error(i,e.status)}).always(function(){t.complete&&t.complete()})}function g(t,e){var i=n('<div class="'+t+'"></div>');i.appendTo(":eq(0)");var a=i.css(e);return i.remove(),a}function m(t){n('link[href^="'+t+'"]').length||n('<link href="'+Galaxy.root+t+'" rel="stylesheet">').appendTo("head")}function v(e,i){return e?t.defaults(e,i):i}function _(t,e){for(var i=1,n=0;n<e;n++)i*=10;return Math.round(t*i)/i}function b(t,e,i){i=void 0!==i?i:1;var n="";if(t>=O)t/=O,n="TB";else if(t>=M)t/=M,n="GB";else if(t>=A)t/=A,n="MB";else if(t>=E)t/=E,n="KB";else{if(!(t>0))return e?"0 b":"<strong>-</strong>";n="b"}var a="b"==n?t:_(t,i);return e?a+" "+n:"<strong>"+a+"</strong> "+n}function y(){return top.__utils__uid__=top.__utils__uid__||0,"uid-"+top.__utils__uid__++}function w(){var t=new Date,e=(t.getHours()<10?"0":"")+t.getHours(),i=(t.getMinutes()<10?"0":"")+t.getMinutes();return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+", "+e+":"+i}function x(t){t.script&&""!==t.script&&n("<script/>",{type:"text/javascript"}).text(t.script).appendTo("head"),t.styles&&""!==t.styles&&n("<style/>",{type:"text/css"}).text(t.styles).appendTo("head")}function k(t){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function C(t){window.document.title=t?"Galaxy "+(window.Galaxy.config.brand?" | "+window.Galaxy.config.brand:"")+" | "+(0,T.default)(t):"Galaxy "+(window.Galaxy.config.brand?" | "+window.Galaxy.config.brand:"")}Object.defineProperty(e,"__esModule",{value:!0});var S=i(4),T=function(t){return t&&t.__esModule?t:{default:t}}(S),E=1024,A=E*E,M=A*E,O=M*E;e.default={cssLoadFile:m,cssGetAttribute:g,get:f,merge:v,iframe:s,bytesToString:b,uid:y,time:w,request:p,sanitize:c,textify:d,isEmpty:u,deepeach:o,isJSON:h,clone:l,linkify:r,appendScriptStyle:x,getQueryString:k,setWindowTitle:C}}).call(e,i(1),i(0),i(0))},function(t,e,i){var n,a;n=[i(103)],void 0!==(a=function(t){if(t.hasOwnProperty("__root")){var e="undefined"==typeof navigator?"__root":(navigator.language||navigator.userLanguage||"__root").toLowerCase();t=t["__"+e]||t["__"+e.split("-")[0]]||t.__root}var i=function(e){return t[e]||e};return i.cacheNonLocalized=!1,i}.apply(e,n))&&(t.exports=a)},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(t,e){var i=Array.prototype.slice.call(arguments,0),n=i.pop();return i.unshift(n),h.defaults.apply(h,i)}function o(t,e){e=e||"model";var i=h.template(t.join(""));return function(t,n){var a={view:n||{},_l:g.default};return a[e]=t||{},i(a)}}function r(t,e){e=e||{};var i=e.ascending?1:-1;return function(e,n){return e=e.get(t),n=n.get(t),(e<n?-1:e>n?1:0)*i}}Object.defineProperty(e,"__esModule",{value:!0});var l=i(1),h=a(l),c=i(2),u=a(c),d=i(58),f=n(d),p=i(4),g=n(p),m={logger:null,_logNamespace:"."};(0,f.default)(m);var v=u.Model.extend({initialize:function(t){if(this._checkEnabledSessionStorage(),!t.id)throw new Error("SessionStorageModel requires an id in the initial attributes");this.id=t.id;var e=this.isNew()?{}:this._read(this);this.clear({silent:!0}),this.save(h.extend({},this.defaults,e,t),{silent:!0}),this.on("change",function(){this.save()})},_checkEnabledSessionStorage:function(){try{return window.sessionStorage.length>=0}catch(t){return alert("Please enable cookies in your browser for this Galaxy site"),!1}},sync:function(t,e,i){i.silent||e.trigger("request",e,{},i);var n={};switch(t){case"create":n=this._create(e);break;case"read":n=this._read(e);break;case"update":n=this._update(e);break;case"delete":n=this._delete(e)}return void 0!==n||null!==n?i.success&&i.success():i.error&&i.error(),n},_create:function(t){try{var e=t.toJSON(),i=sessionStorage.setItem(t.id,JSON.stringify(e));return null===i?i:e}catch(t){if(!(t instanceof DOMException&&navigator.userAgent.indexOf("Safari")>-1))throw t}return null},_read:function(t){return JSON.parse(sessionStorage.getItem(t.id))},_update:function(t){return t._create(t)},_delete:function(t){return sessionStorage.removeItem(t.id)},isNew:function(){return!sessionStorage.hasOwnProperty(this.id)},_log:function(){return JSON.stringify(this.toJSON(),null,"  ")},toString:function(){return"SessionStorageModel("+this.id+")"}});!function(){v.prototype=h.omit(v.prototype,"url","urlRoot")}();var _={searchAttributes:[],searchAliases:{},searchAttribute:function(t,e){var i=this.get(t);return!(!e||void 0===i||null===i)&&(h.isArray(i)?this._searchArrayAttribute(i,e):-1!==i.toString().toLowerCase().indexOf(e.toLowerCase()))},_searchArrayAttribute:function(t,e){return e=e.toLowerCase(),h.any(t,function(t){return-1!==t.toString().toLowerCase().indexOf(e.toLowerCase())})},search:function(t){var e=this;return h.filter(this.searchAttributes,function(i){return e.searchAttribute(i,t)})},matches:function(t){var e=t.split("=");if(e.length>=2){var i=e[0];return i=this.searchAliases[i]||i,this.searchAttribute(i,e[1])}return!!this.search(t).length},matchesAll:function(t){var e=this;return t=t.match(/(".*"|\w*=".*"|\S*)/g).filter(function(t){return!!t}),h.all(t,function(t){return t=t.replace(/"/g,""),e.matches(t)})}},b={hiddenUntilActivated:function(e,i){if(i=i||{},this.HUAVOptions={$elementShown:this.$el,showFn:t.prototype.toggle,showSpeed:"fast"},h.extend(this.HUAVOptions,i||{}),this.HUAVOptions.hasBeenShown=this.HUAVOptions.$elementShown.is(":visible"),this.hidden=this.isHidden(),e){var n=this;e.on("click",function(t){n.toggle(n.HUAVOptions.showSpeed)})}},isHidden:function(){return this.HUAVOptions.$elementShown.is(":hidden")},toggle:function(){return this.hidden?(this.HUAVOptions.hasBeenShown||h.isFunction(this.HUAVOptions.onshowFirstTime)&&(this.HUAVOptions.hasBeenShown=!0,this.HUAVOptions.onshowFirstTime.call(this)),h.isFunction(this.HUAVOptions.onshow)&&(this.HUAVOptions.onshow.call(this),this.trigger("hiddenUntilActivated:shown",this)),this.hidden=!1):(h.isFunction(this.HUAVOptions.onhide)&&(this.HUAVOptions.onhide.call(this),this.trigger("hiddenUntilActivated:hidden",this)),this.hidden=!0),this.HUAVOptions.showFn.apply(this.HUAVOptions.$elementShown,arguments)}},y={initialize:function(t){this.draggable=t.draggable||!1},$dragHandle:function(){return this.$(".title-bar")},toggleDraggable:function(){this.draggable?this.draggableOff():this.draggableOn()},draggableOn:function(){this.draggable=!0,this.dragStartHandler=h.bind(this._dragStartHandler,this),this.dragEndHandler=h.bind(this._dragEndHandler,this);var t=this.$dragHandle().attr("draggable",!0).get(0);t.addEventListener("dragstart",this.dragStartHandler,!1),t.addEventListener("dragend",this.dragEndHandler,!1)},draggableOff:function(){this.draggable=!1;var t=this.$dragHandle().attr("draggable",!1).get(0);t.removeEventListener("dragstart",this.dragStartHandler,!1),t.removeEventListener("dragend",this.dragEndHandler,!1)},_dragStartHandler:function(t){return t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",JSON.stringify(this.model.toJSON())),this.trigger("draggable:dragstart",t,this),!1},_dragEndHandler:function(t){return this.trigger("draggable:dragend",t,this),!1}},w={initialize:function(t){this.selectable=t.selectable||!1,this.selected=t.selected||!1},$selector:function(){return this.$(".selector")},_renderSelected:function(){this.$selector().find("span").toggleClass("fa-check-square-o",this.selected).toggleClass("fa-square-o",!this.selected)},toggleSelector:function(){this.$selector().is(":visible")?this.hideSelector():this.showSelector()},showSelector:function(t){t=void 0!==t?t:this.fxSpeed,this.selectable=!0,this.trigger("selectable",!0,this),this._renderSelected(),t?this.$selector().show(t):this.$selector().show()},hideSelector:function(t){t=void 0!==t?t:this.fxSpeed,this.selectable=!1,this.trigger("selectable",!1,this),t?this.$selector().hide(t):this.$selector().hide()},toggleSelect:function(t){this.selected?this.deselect(t):this.select(t)},select:function(t){return this.selected||(this.trigger("selected",this,t),this.selected=!0,this._renderSelected()),!1},deselect:function(t){return this.selected&&(this.trigger("de-selected",this,t),this.selected=!1,this._renderSelected()),!1}};e.default={LoggableMixin:m,SessionStorageModel:v,mixin:s,SearchableModelMixin:_,HiddenUntilActivatedViewMixin:b,DraggableViewMixin:y,SelectableViewMixin:w,wrapTemplate:o,buildComparator:r}}).call(e,i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=(s(o),i(62)),l=s(r),h=i(111),c=s(h),u=i(63),d=s(u),f=i(112),p=s(f),g=i(29),m=s(g),v=i(7),_=s(v),b=t.View.extend({tagName:"label",initialize:function(e){this.model=e&&e.model||new t.Model(e),this.tagName=e.tagName||this.tagName,this.setElement(n("<"+this.tagName+"/>")),this.listenTo(this.model,"change",this.render,this),this.render()},title:function(t){this.model.set("title",t)},value:function(){return this.model.get("title")},render:function(){return this.$el.removeClass().addClass("ui-label").addClass(this.model.get("cls")).html(this.model.get("title")),this}}),y=t.View.extend({initialize:function(e){this.model=e&&e.model||new t.Model({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(e),this.listenTo(this.model,"change",this.render,this),this.render()},update:function(t){this.model.set(t)},render:function(){this.$el.removeClass().addClass("ui-message").addClass(this.model.get("cls"));var t=this.model.get("status");if(this.model.get("large")?this.$el.addClass(("success"==t&&"done"||"danger"==t&&"error"||t)+"messagelarge"):this.$el.addClass("alert").addClass("alert-"+t),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var e=this;this.timeout=window.setTimeout(function(){e.model.set("message","")},3e3)}}else this.$el.fadeOut();return this},messageForDisplay:function(){return a.escape(this.model.get("message"))}}),w=y.extend({messageForDisplay:function(){return this.model.get("message")}}),x=t.View.extend({initialize:function(e){this.model=e&&e.model||new t.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(e),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(n("<"+this.tagName+"/>")),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(t){return void 0!==t&&this.model.set("value","string"==typeof t?t:""),this.model.get("value")},render:function(){var t=this;this.$el.removeClass().addClass("ui-"+this.tagName).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var e=this.model.get("datalist");return n.isArray(e)&&e.length>0&&this.$el.autocomplete({source:function(e,i){i(t.model.get("datalist"))},change:function(){t._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),a.each(["readonly","disabled"],function(e){t.model.get(e)?t.$el.attr(e,!0):t.$el.removeAttr(e)}),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}}),k=t.View.extend({initialize:function(e){this.model=e&&e.model||new t.Model(e),this.setElement(n("<div/>").append(this.$info=n("<div/>")).append(this.$hidden=n("<div/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.$hidden.val(this.model.get("value")),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this}}),C=t.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new t.Model(e),this.setElement(n("<div/>").append(this.$info=n("<div/>")).append(this.$file=n("<input/>").attr("type","file").addClass("ui-margin-bottom")).append(this.$text=n("<textarea/>").addClass("ui-textarea").attr("disabled",!0)).append(this.$wait=n("<i/>").addClass("fa fa-spinner fa-spin"))),this.listenTo(this.model,"change",this.render,this),this.$file.on("change",function(t){i._readFile(t)}),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this.model.get("value")?this.$text.text(this.model.get("value")).show():this.$text.hide(),this.model.get("wait")?this.$wait.show():this.$wait.hide(),this},_readFile:function(t){var e=this,i=t.target.files&&t.target.files[0];if(i){var n=new FileReader;n.onload=function(){e.model.set({wait:!1,value:this.result})},this.model.set({wait:!0,value:null}),n.readAsText(i)}}});e.default={Button:m.default.ButtonDefault,ButtonIcon:m.default.ButtonIcon,ButtonCheck:m.default.ButtonCheck,ButtonMenu:m.default.ButtonMenu,ButtonLink:m.default.ButtonLink,Input:x,Label:b,Message:y,UnescapedMessage:w,Upload:C,Modal:_.default,RadioButton:d.default.RadioButton,Checkbox:d.default.Checkbox,Radio:d.default.Radio,Select:l.default,Hidden:k,Slider:c.default,Drilldown:p.default}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,i,n){Object.defineProperty(e,"__esModule",{value:!0});var a=t.View.extend({className:"ui-modal",optionsDefault:{container:"body",title:"ui-modal",cls:"ui-modal",body:"",backdrop:!0,height:null,width:null,closing_events:!1,closing_callback:null,title_separator:!0},buttonList:{},initialize:function(t){this.options=i.defaults(t||{},this.optionsDefault),n(this.options.container).prepend(this.el),t&&this.render()},show:function(t){if(t&&(this.options=i.defaults(t,this.optionsDefault),this.render()),!this.visible&&(this.visible=!0,this.$el.fadeIn("fast"),this.options.closing_events)){var e=this;n(document).on("keyup.ui-modal",function(t){27==t.keyCode&&e.hide(!0)}),this.$backdrop.on("click",function(){e.hide(!0)})}},hide:function(t){this.visible=!1,this.$el.fadeOut("fast"),this.options.closing_callback&&this.options.closing_callback(t),n(document).off("keyup.ui-modal"),this.$backdrop.off("click")},render:function(){var t=this;if(this.$el.html(this._template()),this.$header=this.$(".modal-header"),this.$dialog=this.$(".modal-dialog"),this.$body=this.$(".modal-body"),this.$footer=this.$(".modal-footer"),this.$backdrop=this.$(".modal-backdrop"),this.$buttons=this.$(".buttons"),"progress"==this.options.body&&(this.options.body=n('<div class="progress progress-striped active"><div class="progress-bar progress-bar-info" style="width:100%"/></div>')),this.$el.removeClass().addClass("modal").addClass(this.options.cls),this.$header.find(".title").html(this.options.title),this.$body.html(this.options.body),this.$buttons.empty(),this.buttonList={},this.options.buttons){var e=0;n.each(this.options.buttons,function(i,a){var s=n("<button/>").attr("id","button-"+e++).text(i).click(a);t.$buttons.append(s).append("&nbsp;"),t.buttonList[i]=s})}else this.$footer.hide();this.$backdrop[this.options.backdrop&&"addClass"||"removeClass"]("in"),this.$header[!this.options.title_separator&&"addClass"||"removeClass"]("no-separator"),this.$body.removeAttr("style"),this.options.height?(this.$body.css("height",this.options.height),this.$body.css("overflow","hidden")):this.$body.css("max-height",n(window).height()/2),this.options.width&&this.$dialog.css("width",this.options.width)},getButton:function(t){return this.buttonList[t]},enableButton:function(t){this.getButton(t).prop("disabled",!1)},disableButton:function(t){this.getButton(t).prop("disabled",!0)},showButton:function(t){this.getButton(t).show()},hideButton:function(t){this.getButton(t).hide()},scrollTop:function(){return this.$body.scrollTop()},_template:function(){return'<div class="modal-backdrop fade"/><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="title"/></div><div class="modal-body"/><div class="modal-footer"><div class="buttons"/></div></div></div>'}});e.default={View:a}}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t){function i(e,i){i=i||window.location.search.substr(1);var n=new RegExp(e+"=([^&#$]+)","g"),a=i.match(n);if(a&&a.length)return a=t.map(a,function(t){return decodeURIComponent(t.substr(e.length+1).replace(/\+/g," "))}),1===a.length?a[0]:a}function n(t){if(!t)return{};var e={};return t.split("&").forEach(function(t){var i=t.split("=");e[i[0]]=decodeURI(i[1])}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default={get:i,parse:n}}).call(e,i(1))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=(s(o),i(21)),l=s(r),h=i(6),c=s(h),u=i(119),d=s(u),f=i(70),p=s(f);e.default=t.View.extend({initialize:function(e){this.model=new t.Model({initial_errors:!1,cls:"ui-portlet-limited",icon:null,always_refresh:!0,status:"warning",hide_operations:!1,onchange:function(){}}).set(e),this.setElement("<div/>"),this.render()},update:function(t){var e=this;this.data.matchModel(t,function(t,i){var a=e.input_list[i];if(a&&a.options&&!n.isEqual(a.options,t.options)){a.options=t.options;var s=e.field_list[i];if(s.update){var o=[];if(-1!=["data","data_collection","drill_down"].indexOf(a.type))o=a.options;else for(var r in t.options){var l=t.options[r];l.length>2&&o.push({label:l[0],value:l[1]})}s.update(o),s.trigger("change"),Galaxy.emit.debug("form-view::update()","Updating options for "+i)}}})},wait:function(t){for(var e in this.input_list){var i=this.field_list[e];this.input_list[e].is_dynamic&&i.wait&&i.unwait&&i[t?"wait":"unwait"]()}},highlight:function(t,e,i){var n=this.element_list[t];if(n&&(n.error(e||"Please verify this parameter."),this.portlet.expand(),this.trigger("expand",t),!i)){var s=this.$el.parents().filter(function(){return-1!=["auto","scroll"].indexOf(a(this).css("overflow"))}).first();s.animate({scrollTop:s.scrollTop()+n.$el.offset().top-120},500)}},errors:function(t){if(this.trigger("reset"),t&&t.errors){var e=this.data.matchResponse(t.errors);for(var i in this.element_list){this.element_list[i];e[i]&&this.highlight(i,e[i],!0)}}},render:function(){var t=this;this.off("change"),this.off("reset"),this.field_list={},this.input_list={},this.element_list={},this.data=new p.default.Manager(this),this._renderForm(),this.data.create(),this.model.get("initial_errors")&&this.errors(this.model.attributes);var e=this.data.checksum();return this.on("change",function(i){var n=t.input_list[i];if(!n||n.refresh_on_change||t.model.get("always_refresh")){var a=t.data.checksum();a!=e&&(e=a,t.model.get("onchange")())}}),this.on("reset",function(){n.each(t.element_list,function(t){t.reset()})}),this},_renderForm:function(){a(".tooltip").remove();var t=this.model.attributes;this.message=new c.default.UnescapedMessage,this.section=new d.default.View(this,{inputs:t.inputs}),this.portlet=new l.default.View({icon:t.icon,title:t.title,cls:t.cls,operations:!t.hide_operations&&t.operations,buttons:t.buttons,collapsible:t.collapsible,collapsed:t.collapsed,onchange_title:t.onchange_title}),this.portlet.append(this.message.$el),this.portlet.append(this.section.$el),this.$el.empty(),t.inputs&&this.$el.append(this.portlet.$el),t.message&&this.message.update({persistent:!0,status:t.status,message:t.message}),Galaxy.emit.debug("form-view::initialize()","Completed")}})}).call(e,i(2),i(1),i(0))},,,function(t,e,i){"use strict";(function(t,n,a,s){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),l=o(r),h=i(109),c=o(h),u=i(110),d=o(u),f=i(27),p=o(f);t.ajaxSettings.traditional=!0,e.default=n.View.extend({grid:null,initialize:function(t){this.grid=new c.default,this.dict_format=t.dict_format,this.title=t.title;var e=this;if(window.add_tag_to_grid_filter=function(t,i){var n=t+(void 0!==i&&""!==i?":"+i:"");a("#advanced-search").is(":visible")||(a("#standard-search").slideToggle("fast"),a("#advanced-search").slideToggle("fast")),e.add_filter_condition("tags",n)},this.dict_format)if(this.setElement("<div/>"),t.url_base&&!t.items){var i=t.url_data||{};s.each(t.filters,function(t,e){i["f-"+e]=t}),a.ajax({url:t.url_base+"?"+a.param(i),success:function(i){i.embedded=t.embedded,i.filters=t.filters||{},e.init_grid(i)}})}else this.init_grid(t);else this.setElement("#grid-container"),this.init_grid(t);t.use_panels&&a("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(t){t&&a.inArray("history",t)>-1&&window.top.Galaxy&&window.top.Galaxy.currHistoryPanel&&window.top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(t){this.grid.set(t);var e=this.grid.attributes;this.allow_title_display&&e.title&&l.default.setWindowTitle(e.title),this.handle_refresh(e.refresh_frames);var i=this.grid.get("url_base");if(i=i.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",i),this.$el.html(d.default.grid(e)),this.$el.find("#grid-table-header").html(d.default.header(e)),this.$el.find("#grid-table-body").html(d.default.body(e)),this.$el.find("#grid-table-footer").html(d.default.footer(e)),e.message){this.$el.find("#grid-message").html(d.default.message(e));var n=this;e.use_hide_message&&setTimeout(function(){n.$el.find("#grid-message").html("")},5e3)}this.init_grid_elements(),this.init_grid_controls(),init_refresh_on_change()},init_grid_controls:function(){var t=this;this.$el.find(".operation-button").each(function(){a(this).off(),a(this).click(function(){return t.submit_operation(this),!1})}),this.$el.find("input[type=text]").each(function(){a(this).off(),a(this).click(function(){a(this).select()}).keyup(function(){a(this).css("font-style","normal")})}),this.$el.find(".sort-link").each(function(){a(this).off(),a(this).click(function(){return t.set_sort_condition(a(this).attr("sort_key")),!1})}),this.$el.find(".text-filter-form").each(function(){a(this).off(),a(this).submit(function(){var e=a(this).attr("column_key"),i=a("#input-"+e+"-filter"),n=i.val();return i.val(""),t.add_filter_condition(e,n),!1})}),this.$el.find(".text-filter-val > a").each(function(){a(this).off(),a(this).click(function(){return a(this).parent().remove(),t.remove_filter_condition(a(this).attr("filter_key"),a(this).attr("filter_val")),!1})}),this.$el.find(".categorical-filter > a").each(function(){a(this).off(),a(this).click(function(){return t.set_categorical_filter(a(this).attr("filter_key"),a(this).attr("filter_val")),!1})}),this.$el.find(".advanced-search-toggle").each(function(){a(this).off(),a(this).click(function(){return t.$el.find("#standard-search").slideToggle("fast"),t.$el.find("#advanced-search").slideToggle("fast"),!1})}),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",function(){t.check_all_items()})},init_grid_elements:function(){this.$el.find(".grid").each(function(){var t=a(this).find("input.grid-row-select-checkbox"),e=a(this).find("span.grid-selected-count"),i=function(){e.text(a(t).filter(":checked").length)};a(t).each(function(){a(this).change(i)}),i()}),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var t=this.grid.attributes,e=this;this.$el.find(".page-link > a").each(function(){a(this).click(function(){return e.set_page(a(this).attr("page_num")),!1})}),this.$el.find(".use-target").each(function(){a(this).click(function(t){return e.execute({href:a(this).attr("href"),target:a(this).attr("target")}),!1})}),0!=t.items.length&&s.each(t.items,function(i,n){var a=e.$("#grid-"+n+"-popup").off(),o=new p.default(a);s.each(t.operations,function(t){e._add_operation(o,t,i)})})},_add_operation:function(t,e,i){var n=this,s=i.operation_config[e.label];s.allowed&&e.allow_popup&&t.addItem({html:e.label,href:s.url_args,target:s.target,confirmation_text:e.confirm,func:function(t){t.preventDefault();var s=a(t.target).html();e.onclick?e.onclick(i.encode_id):n.execute(this.findItemByHtml(s))}})},add_filter_condition:function(t,e){if(""===e)return!1;this.grid.add_filter(t,e,!0);var i=a(d.default.filter_element(t,e)),n=this;i.click(function(){a(this).remove(),n.remove_filter_condition(t,e)}),this.$el.find("#"+t+"-filtering-criteria").append(i),this.go_page_one(),this.execute()},remove_filter_condition:function(t,e){this.grid.remove_filter(t,e),this.go_page_one(),this.execute()},set_sort_condition:function(t){var e=this.grid.get("sort_key"),i=t;-1!==e.indexOf(t)&&"-"!==e.substring(0,1)&&(i="-"+t),this.$el.find(".sort-arrow").remove();var n="-"==i.substring(0,1)?"&uarr;":"&darr;",s=a("<span>"+n+"</span>").addClass("sort-arrow");this.$el.find("#"+t+"-header").append(s),this.grid.set("sort_key",i),this.go_page_one(),this.execute()},set_categorical_filter:function(t,e){var i=this.grid.get("categorical_filters")[t],n=this.grid.get("filters")[t],s=this;this.$el.find("."+t+"-filter").each(function(){var o=a.trim(a(this).text()),r=i[o],l=r[t];if(l==e)a(this).empty(),a(this).addClass("current-filter"),a(this).append(o);else if(l==n){a(this).empty();var h=a('<a href="#">'+o+"</a>");h.click(function(){s.set_categorical_filter(t,l)}),a(this).removeClass("current-filter"),a(this).append(h)}}),this.grid.add_filter(t,e),this.go_page_one(),this.execute()},set_page:function(t){var e=this;this.$el.find(".page-link").each(function(){var i,n=a(this).attr("id"),s=parseInt(n.split("-")[2],10),o=e.grid.get("cur_page");if(s===t)i=a(this).children().text(),a(this).empty(),a(this).addClass("inactive-link"),a(this).text(i);else if(s===o){i=a(this).text(),a(this).empty(),a(this).removeClass("inactive-link");var r=a('<a href="#">'+i+"</a>");r.click(function(){e.set_page(s)}),a(this).append(r)}}),"all"===t?this.grid.set("cur_page",t):this.grid.set("cur_page",parseInt(t,10)),this.execute()},submit_operation:function(t,e){var i=a(t).val();if(!this.$el.find('input[name="id"]:checked').length>0)return!1;var n=s.findWhere(this.grid.attributes.operations,{label:i});n&&!e&&(e=n.confirm||"");var o=[];this.$el.find("input[name=id]:checked").each(function(){o.push(a(this).val())});var r={operation:i,id:o,confirmation_text:e};return"top"==n.target&&(r=s.extend(r,{href:n.href,target:n.target})),this.execute(r),!0},check_all_items:function(){var t=this.$(".grid-row-select-checkbox"),e=this.$("#check_all").prop("checked");s.each(t,function(t){a(t).prop("checked",e)}),this.init_grid_elements()},go_page_one:function(){var t=this.grid.get("cur_page");null!==t&&void 0!==t&&"all"!==t&&this.grid.set("cur_page",1)},execute:function(t){var e=null,i=null,n=null,s=null,o=null;if(t&&(i=t.href,n=t.operation,e=t.id,s=t.confirmation_text,o=t.target,void 0!==i&&-1!=i.indexOf("operation="))){var r=i.split("?");if(r.length>1)for(var l=r[1],h=l.split("&"),c=0;c<h.length;c++)-1!=h[c].indexOf("operation")?(n=h[c].split("=")[1],n=n.replace(/\+/g," ")):-1!=h[c].indexOf("id")&&(e=h[c].split("=")[1])}return n&&e?!(s&&""!=s&&"None"!=s&&"null"!=s&&!confirm(s))&&(n=n.toLowerCase(),this.grid.set({operation:n,item_ids:e}),"top"==o?window.top.location=i+"?"+a.param(this.grid.get_url_data()):this.grid.can_async_op(n)||this.dict_format?this.update_grid():this.go_to(o,i),!1):i?(this.go_to(o,i),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(o,i),!1)},go_to:function(t,e){var i=this.grid.get("async");this.grid.set("async",!1);var n=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",n),e||(e=this.grid.get("url_base")+"?"+a.param(this.grid.get_url_data())),this.grid.set({operation:void 0,item_ids:void 0,async:i}),t){case"center":a("#galaxy_main").attr("src",e);break;case"top":window.top.location=e;break;default:window.location=e}},update_grid:function(){var t=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var e=this;a.ajax({type:t,url:e.grid.get("url_base"),data:e.grid.get_url_data(),error:function(t){alert("Grid refresh failed")},success:function(t){var i=e.grid.get("embedded"),n=e.grid.get("insert"),s=e.$el.find("#advanced-search").is(":visible"),o=e.dict_format?t:a.parseJSON(t);o.embedded=i,o.insert=n,o.advanced_search=s,e.init_grid(o),e.$el.find(".loading-elt-overlay").hide()},complete:function(){e.grid.set({operation:void 0,item_ids:void 0})}})}})}).call(e,i(0),i(2),i(0),i(1))},,,function(t,e,i){"use strict";var n=i(0),a=function(t){return t&&t.__esModule?t:{default:t}}(n),s=a.default;s.fn.make_text_editable=function(t){var e="num_cols"in t?t.num_cols:30,i="num_rows"in t?t.num_rows:4,n="use_textarea"in t&&t.use_textarea,a="on_finish"in t?t.on_finish:null,o="help_text"in t?t.help_text:null,r=s(this);return r.addClass("editable-text").click(function(o){if(!(s(this).children(":input").length>0)){r.removeClass("editable-text");var l,h,c=function(t){r.find(":input").remove(),""!==t?r.text(t):r.html("<br>"),r.addClass("editable-text"),a&&a(t)},u="cur_text"in t?t.cur_text:r.text();n?(l=s("<textarea/>").attr({rows:i,cols:e}).text(s.trim(u)).keyup(function(t){27===t.keyCode&&c(u)}),h=s("<button/>").text("Done").click(function(){return c(l.val()),!1})):l=s("<input type='text'/>").attr({value:s.trim(u),size:e}).blur(function(){c(u)}).keyup(function(t){27===t.keyCode?s(this).trigger("blur"):13===t.keyCode&&c(s(this).val()),t.stopPropagation()}),r.text(""),r.append(l),h&&r.append(h),l.focus(),l.select(),o.stopPropagation()}}),o&&r.attr("title",o).tooltip(),r}},,function(t,e,i){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0});var n=t.Model.extend({defaults:{activate:!1}}),a=t.Collection.extend({model:n}),s=t.View.extend({el:"#webhook-view",initialize:function(t){var e=this,i=t.toolId||"",a=t.toolVersion||"";this.$el.attr("tool_id",i),this.$el.attr("tool_version",a),this.model=new n,this.model.urlRoot=t.urlRoot,this.model.fetch({success:function(){e.render()}})},render:function(){var t=this.model.toJSON();return this.$el.html('<div id="'+t.name+'"></div>'),t.styles&&i("<style/>",{type:"text/css"}).text(t.styles).appendTo("head"),t.script&&i("<script/>",{type:"text/javascript"}).text(t.script).appendTo("head"),this}}),o=function(t){var e=new a;e.url=Galaxy.root+t.url,e.fetch({async:!t.async||t.async,success:t.callback})};e.default={Webhooks:a,WebhookView:s,add:o}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),r=(s(o),i(60)),l=(s(r),i(61)),h=s(l),c=t.Model.extend({}),u=t.Model.extend({defaults:{id:"",type:"",name:"",hda_ldda:"hda",metadata:null},initialize:function(){this.get("metadata")||this._set_metadata(),this.on("change",this._set_metadata,this)},_set_metadata:function(){var t=new c;n.each(n.keys(this.attributes),function(e){if(0===e.indexOf("metadata_")){var i=e.split("metadata_")[1];t.set(i,this.attributes[e]),delete this.attributes[e]}},this),this.set("metadata",t,{silent:!0})},get_metadata:function(t){return this.attributes.metadata.get(t)},urlRoot:Galaxy.root+"api/datasets"}),d=u.extend({defaults:n.extend({},u.prototype.defaults,{chunk_url:null,first_data_chunk:null,offset:0,at_eof:!1}),initialize:function(t){u.prototype.initialize.call(this),this.attributes.first_data_chunk&&(this.attributes.offset=this.attributes.first_data_chunk.offset),this.attributes.chunk_url=Galaxy.root+"dataset/display?dataset_id="+this.id,this.attributes.url_viz=Galaxy.root+"visualization"},get_next_chunk:function(){if(this.attributes.at_eof)return null;var t=this,e=a.Deferred();return a.getJSON(this.attributes.chunk_url,{offset:t.attributes.offset}).success(function(i){var n;""!==i.ck_data?(n=i,t.attributes.offset=i.offset):(t.attributes.at_eof=!0,n=null),e.resolve(n)}),e}}),f=t.Collection.extend({model:u}),p=t.View.extend({initialize:function(t){this.row_count=0,this.loading_chunk=!1,new v({model:t.model,$el:this.$el})},expand_to_container:function(){this.$el.height()<this.scroll_elt.height()&&this.attempt_to_fetch()},attempt_to_fetch:function(t){var e=this;!this.loading_chunk&&this.scrolled_to_bottom()&&(this.loading_chunk=!0,this.loading_indicator.show(),a.when(e.model.get_next_chunk()).then(function(t){t&&(e._renderChunk(t),e.loading_chunk=!1),e.loading_indicator.hide(),e.expand_to_container()}))},render:function(){this.loading_indicator=a("<div/>").attr("id","loading_indicator"),this.$el.append(this.loading_indicator);var t=a("<table/>").attr({id:"content_table",cellpadding:0});this.$el.append(t);var e=this.model.get_metadata("column_names"),i=a("<thead/>").appendTo(t),n=a("<tr/>").appendTo(i);if(e)n.append("<th>"+e.join("</th><th>")+"</th>");else for(var s=1;s<=this.model.get_metadata("columns");s++)n.append("<th>"+s+"</th>");var o=this,r=this.model.get("first_data_chunk");r?this._renderChunk(r):a.when(o.model.get_next_chunk()).then(function(t){o._renderChunk(t)}),this.scroll_elt.scroll(function(){o.attempt_to_fetch()})},scrolled_to_bottom:function(){return!1},_renderCell:function(t,e,i){var n=a("<td>").text(t),s=this.model.get_metadata("column_types");return void 0!==i?n.attr("colspan",i).addClass("stringalign"):s&&e<s.length&&("str"!==s[e]&&"list"!==s[e]||n.addClass("stringalign")),n},_renderRow:function(t){var e=t.split("\t"),i=a("<tr>"),s=this.model.get_metadata("columns");return this.row_count%2!=0&&i.addClass("dark_row"),e.length===s?n.each(e,function(t,e){i.append(this._renderCell(t,e))},this):e.length>s?(n.each(e.slice(0,s-1),function(t,e){i.append(this._renderCell(t,e))},this),i.append(this._renderCell(e.slice(s-1).join("\t"),s-1))):1===e.length?i.append(this._renderCell(t,0,s)):(n.each(e,function(t,e){i.append(this._renderCell(t,e))},this),n.each(n.range(s-e.length),function(){i.append(a("<td>"))})),this.row_count++,i},_renderChunk:function(t){var e=this.$el.find("table");n.each(t.ck_data.split("\n"),function(t,i){""!==t&&e.append(this._renderRow(t))},this)}}),g=p.extend({initialize:function(t){p.prototype.initialize.call(this,t);var e=n.find(this.$el.parents(),function(t){return"auto"===a(t).css("overflow")});e||(e=window),this.scroll_elt=a(e)},scrolled_to_bottom:function(){return this.$el.height()-this.scroll_elt.scrollTop()-this.scroll_elt.height()<=0}}),m=p.extend({initialize:function(t){p.prototype.initialize.call(this,t),this.scroll_elt=this.$el.css({position:"relative",overflow:"scroll",height:t.height||"500px"})},scrolled_to_bottom:function(){return this.$el.scrollTop()+this.$el.innerHeight()>=this.el.scrollHeight}}),v=t.View.extend({col:{chrom:null,start:null,end:null},url_viz:null,dataset_id:null,genome_build:null,file_ext:null,initialize:function(t){var e=parent.Galaxy;if(e&&e.modal&&(this.modal=e.modal),e&&e.frame&&(this.frame=e.frame),this.modal&&this.frame){var i=t.model,n=i.get("metadata");if(i.get("file_ext")){if(this.file_ext=i.get("file_ext"),"bed"==this.file_ext){if(!(n.get("chromCol")&&n.get("startCol")&&n.get("endCol")))return void console.log("TabularButtonTrackster : Bed-file metadata incomplete.");this.col.chrom=n.get("chromCol")-1,this.col.start=n.get("startCol")-1,this.col.end=n.get("endCol")-1}if("vcf"==this.file_ext){var a=function(t,e){for(var i=0;i<e.length;i++)if(e[i].match(t))return i;return-1};if(this.col.chrom=a("Chrom",n.get("column_names")),this.col.start=a("Pos",n.get("column_names")),this.col.end=null,-1==this.col.chrom||-1==this.col.start)return void console.log("TabularButtonTrackster : VCF-file metadata incomplete.")}if(void 0!==this.col.chrom){if(!i.id)return void console.log("TabularButtonTrackster : Dataset identification is missing.");if(this.dataset_id=i.id,!i.get("url_viz"))return void console.log("TabularButtonTrackster : Url for visualization controller is missing.");this.url_viz=i.get("url_viz"),i.get("genome_build")&&(this.genome_build=i.get("genome_build"));var s=new h.default.IconButtonView({model:new h.default.IconButton({title:"Visualize",icon_class:"chart_curve",id:"btn_viz"})});this.setElement(t.$el),this.$el.append(s.render().$el),this.hide()}}}},events:{"mouseover tr":"show",mouseleave:"hide"},show:function(t){var e=this;if(null!==this.col.chrom){var i=a(t.target).parent(),n=i.children().eq(this.col.chrom).html(),s=i.children().eq(this.col.start).html(),o=this.col.end?i.children().eq(this.col.end).html():s;if(!n.match("^#")&&""!==n&&function(t){return!isNaN(parseFloat(t))&&isFinite(t)}(s)){var r={dataset_id:this.dataset_id,gene_region:n+":"+s+"-"+o},l=i.offset(),h=l.left-10,c=l.top-a(window).scrollTop()+3;a("#btn_viz").css({position:"fixed",top:c+"px",left:h+"px"}),a("#btn_viz").off("click"),a("#btn_viz").click(function(){e.frame.add({title:"Trackster",url:e.url_viz+"/trackster?"+a.param(r)})}),a("#btn_viz").show()}else a("#btn_viz").hide()}},hide:function(){this.$("#btn_viz").hide()}}),_=function(t){t.model||(t.model=new d(t.dataset_config));var e=t.parent_elt,i=t.embedded;delete t.embedded,delete t.parent_elt,delete t.dataset_config;var n=i?new m(t):new g(t);return n.render(),e&&(e.append(n.$el),n.expand_to_container()),n};e.default={Dataset:u,TabularDataset:d,DatasetCollection:f,TabularDatasetChunkedView:p,createTabularDatasetChunkedView:_}}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),r=i(18),l=a(r),h=i(20),c=a(h),u=i(26),d=a(u),f=i(12),p=a(f),g=i(28),m=a(g),v=i(6),_=(a(v),{toJSON:function(){var t=this,e={};return o.each(t.constructor.to_json_keys,function(i){var n=t.get(i);i in t.constructor.to_json_mappers&&(n=t.constructor.to_json_mappers[i](n,t)),e[i]=n}),e}}),b=function(e,i){var n=new p.default({url_base:Galaxy.root+"visualization/list_history_datasets",filters:e,dict_format:!0,embedded:!0}),a=new p.default({url_base:Galaxy.root+"visualization/list_library_datasets",dict_format:!0,embedded:!0}),s=new m.default.View;s.add({id:"histories",title:"Histories",$el:t("<div/>").append(n.$el)}),s.add({id:"libraries",title:"Libraries",$el:t("<div/>").append(a.$el)}),Galaxy.modal.show({title:"Select datasets for new tracks",body:s.$el,closing_events:!0,buttons:{Cancel:function(){Galaxy.modal.hide()},Add:function(){var e=[];s.$("input.grid-row-select-checkbox[name=id]:checked").each(function(){window.console.log(t(this).val()),e[e.length]=t.ajax({url:Galaxy.root+"api/datasets/"+t(this).val(),dataType:"json",data:{data_type:"track_config",hda_ldda:"histories"==s.current()?"hda":"ldda"}})}),t.when.apply(t,e).then(function(){var e=arguments[0]instanceof Array?t.map(arguments,function(t){return t[0]}):[arguments[0]];i(e)}),Galaxy.modal.hide()}}})},y=function(t){this.default_font=void 0!==t?t:"9px Monaco, Lucida Console, monospace",this.dummy_canvas=this.new_canvas(),this.dummy_context=this.dummy_canvas.getContext("2d"),this.dummy_context.font=this.default_font,this.char_width_px=this.dummy_context.measureText("A").width,this.patterns={},this.load_pattern("right_strand","/visualization/strand_right.png"),this.load_pattern("left_strand","/visualization/strand_left.png"),this.load_pattern("right_strand_inv","/visualization/strand_right_inv.png"),this.load_pattern("left_strand_inv","/visualization/strand_left_inv.png")};o.extend(y.prototype,{load_pattern:function(t,e){var i=this.patterns,n=this.dummy_context,a=new Image;a.src=Galaxy.root+"static/images"+e,a.onload=function(){i[t]=n.createPattern(a,"repeat")}},get_pattern:function(t){return this.patterns[t]},new_canvas:function(){var e=t("<canvas/>")[0];return e.manager=this,e}});var w=n.Model.extend({defaults:{num_elements:20,obj_cache:null,key_ary:null},initialize:function(t){this.clear()},get_elt:function(t){var e=this.attributes.obj_cache,i=this.attributes.key_ary,n=t.toString(),a=o.indexOf(i,function(t){return t.toString()===n});return-1!==a&&(e[n].stale?(i.splice(a,1),delete e[n]):this.move_key_to_end(t,a)),e[n]},set_elt:function(t,e){var i=this.attributes.obj_cache,n=this.attributes.key_ary,a=t.toString(),s=this.attributes.num_elements;if(!i[a]){if(n.length>=s){delete i[n.shift().toString()]}n.push(t)}return i[a]=e,e},move_key_to_end:function(t,e){this.attributes.key_ary.splice(e,1),this.attributes.key_ary.push(t)},clear:function(){this.attributes.obj_cache={},this.attributes.key_ary=[]},size:function(){return this.attributes.key_ary.length},most_recently_added:function(){return 0===this.size()?null:this.attributes.key_ary[this.attributes.key_ary.length-1]}}),x=w.extend({defaults:o.extend({},w.prototype.defaults,{dataset:null,genome:null,init_data:null,min_region_size:200,filters_manager:null,data_type:"data",data_mode_compatible:function(t,e){return!0},can_subset:function(t){return!1}}),initialize:function(t){w.prototype.initialize.call(this);var e=this.get("init_data");e&&this.add_data(e)},add_data:function(t){this.get("num_elements")<t.length&&this.set("num_elements",t.length);var e=this;o.each(t,function(t){e.set_data(t.region,t)})},data_is_ready:function(){var e=this.get("dataset"),i=t.Deferred(),n="raw_data"===this.get("data_type")?"state":"data"===this.get("data_type")?"converted_datasets_state":"error",a=new c.default.ServerStateDeferred({ajax_settings:{url:this.get("dataset").url(),data:{hda_ldda:e.get("hda_ldda"),data_type:n},dataType:"json"},interval:5e3,success_fn:function(t){return"pending"!==t}});return t.when(a.go()).then(function(t){i.resolve("ok"===t||"data"===t)}),i},search_features:function(e){var i=this.get("dataset"),n={query:e,hda_ldda:i.get("hda_ldda"),data_type:"features"};return t.getJSON(i.url(),n)},load_data:function(e,i,n,a){var s=this.get("dataset"),o={data_type:this.get("data_type"),chrom:e.get("chrom"),low:e.get("start"),high:e.get("end"),mode:i,resolution:n,hda_ldda:s.get("hda_ldda")};t.extend(o,a);var r=this.get("filters_manager");if(r){for(var l=[],h=r.filters,c=0;c<h.length;c++)l.push(h[c].name);o.filter_cols=JSON.stringify(l)}var u=this,d=t.getJSON(s.url(),o,function(t){t.region=e,u.set_data(e,t)});return this.set_data(e,d),d},get_data:function(t,e,i,n){var a=this.get_elt(t);if(a&&(c.default.is_deferred(a)||this.get("data_mode_compatible")(a,e)))return a;for(var s,o,r=this.get("key_ary"),l=this.get("obj_cache"),h=0;h<r.length;h++)if(s=r[h],s.contains(t)&&(o=!0,a=l[s.toString()],c.default.is_deferred(a)||this.get("data_mode_compatible")(a,e)&&this.get("can_subset")(a))){if(this.move_key_to_end(s,h),!c.default.is_deferred(a)){var u=this.subset_entry(a,t);this.set_data(t,u),a=u}return a}if(!o&&t.length()<this.attributes.min_region_size){t=t.copy();var d=this.most_recently_added();!d||t.get("start")>d.get("start")?t.set("end",t.get("start")+this.attributes.min_region_size):t.set("start",t.get("end")-this.attributes.min_region_size),t.set("genome",this.attributes.genome),t.trim()}return this.load_data(t,e,i,n)},set_data:function(t,e){this.set_elt(t,e)},DEEP_DATA_REQ:"deep",BROAD_DATA_REQ:"breadth",get_more_data:function(e,i,n,a,s){var o=this._mark_stale(e);if(!o||!this.get("data_mode_compatible")(o,i))return void console.log("ERROR: problem with getting more data: current data is not compatible");var r=e.get("start");s===this.DEEP_DATA_REQ?t.extend(a,{start_val:o.data.length+1}):s===this.BROAD_DATA_REQ&&(r=(o.max_high?o.max_high:o.data[o.data.length-1][2])+1);var l=e.copy().set("start",r),h=this,c=this.load_data(l,i,n,a),u=t.Deferred();return this.set_data(e,u),t.when(c).then(function(t){t.data&&(t.data=o.data.concat(t.data),t.max_low&&(t.max_low=o.max_low),t.message&&(t.message=t.message.replace(/[0-9]+/,t.data.length))),h.set_data(e,t),u.resolve(t)}),u},can_get_more_detailed_data:function(t){var e=this.get_elt(t);return"bigwig"===e.dataset_type&&e.data.length<8e3},get_more_detailed_data:function(t,e,i,n,a){var s=this._mark_stale(t);return s?(a||(a={}),"bigwig"===s.dataset_type&&(a.num_samples=1e3*n),this.load_data(t,e,i,a)):void console.log("ERROR getting more detailed data: no current data")},_mark_stale:function(t){var e=this.get_elt(t);return e||console.log("ERROR: no data to mark as stale: ",this.get("dataset"),t.toString()),e.stale=!0,e},get_genome_wide_data:function(e){var i=this,n=!0,a=o.map(e.get("chroms_info").chrom_info,function(t){var e=i.get_elt(new S({chrom:t.chrom,start:0,end:t.len}));return e||(n=!1),e});if(n)return a;var s=t.Deferred();return t.getJSON(this.get("dataset").url(),{data_type:"genome_data"},function(t){i.add_data(t.data),s.resolve(t.data)}),s},subset_entry:function(t,e){var i={bigwig:function(t,e){return o.filter(t,function(t){return t[0]>=e.get("start")&&t[0]<=e.get("end")})},refseq:function(e,i){var n=i.get("start")-t.region.get("start");return t.data.slice(n,n+i.length())}},n=t.data;return!t.region.same(e)&&t.dataset_type in i&&(n=i[t.dataset_type](t.data,e)),{region:e,data:n,dataset_type:t.dataset_type}}}),k=x.extend({initialize:function(t){var e=new n.Model;e.urlRoot=t.data_url,this.set("dataset",e)},load_data:function(t,e,i,n){return t.length()<=1e5?x.prototype.load_data.call(this,t,e,i,n):{data:null,region:t}}}),C=n.Model.extend({defaults:{name:null,key:null,chroms_info:null},initialize:function(t){this.id=t.dbkey},get_chroms_info:function(){return this.attributes.chroms_info.chrom_info},get_chrom_region:function(t){var e=o.find(this.get_chroms_info(),function(e){return e.chrom===t});return new S({chrom:e.chrom,end:e.len})},get_chrom_len:function(t){return o.find(this.get_chroms_info(),function(e){return e.chrom===t}).len}}),S=n.Model.extend({defaults:{chrom:null,start:0,end:0,str_val:null,genome:null},same:function(t){return this.attributes.chrom===t.get("chrom")&&this.attributes.start===t.get("start")&&this.attributes.end===t.get("end")},initialize:function(t){if(t.from_str){var e=t.from_str.split(":"),i=e[0],n=e[1].split("-");this.set({chrom:i,start:parseInt(n[0],10),end:parseInt(n[1],10)})}this.attributes.str_val=this.get("chrom")+":"+this.get("start")+"-"+this.get("end"),this.on("change",function(){this.attributes.str_val=this.get("chrom")+":"+this.get("start")+"-"+this.get("end")},this)},copy:function(){return new S({chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")})},length:function(){return this.get("end")-this.get("start")},toString:function(){return this.attributes.str_val},toJSON:function(){return{chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")}},compute_overlap:function(t){var e=this.get("chrom"),i=t.get("chrom"),n=this.get("start"),a=t.get("start"),s=this.get("end"),o=t.get("end");return e&&i&&e!==i?S.overlap_results.DIF_CHROMS:n<a?s<a?S.overlap_results.BEFORE:s<o?S.overlap_results.OVERLAP_START:S.overlap_results.CONTAINS:n>a?n>o?S.overlap_results.AFTER:s<=o?S.overlap_results.CONTAINED_BY:S.overlap_results.OVERLAP_END:s>=o?S.overlap_results.CONTAINS:S.overlap_results.CONTAINED_BY},trim:function(t){if(this.attributes.start<0&&(this.attributes.start=0),this.attributes.genome){var e=this.attributes.genome.get_chrom_len(this.attributes.chrom);this.attributes.end>e&&(this.attributes.end=e-1)}return this},contains:function(t){return this.compute_overlap(t)===S.overlap_results.CONTAINS},overlaps:function(t){return 0===o.intersection([this.compute_overlap(t)],[S.overlap_results.DIF_CHROMS,S.overlap_results.BEFORE,S.overlap_results.AFTER]).length}},{overlap_results:{DIF_CHROMS:1e3,BEFORE:1001,CONTAINS:1002,OVERLAP_START:1003,OVERLAP_END:1004,CONTAINED_BY:1005,AFTER:1006}}),T=n.Collection.extend({model:S}),E=n.Model.extend({defaults:{region:null,note:""},initialize:function(t){this.set("region",new S(t.region))}}),A=n.Collection.extend({model:E}),M=n.Model.extend(_).extend({defaults:{mode:"Auto"},initialize:function(t){this.set("dataset",new l.default.Dataset(t.dataset));var e=[{key:"name",default_value:this.get("dataset").get("name")},{key:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:0},{key:"max_value",label:"Max Value",type:"float",default_value:1}];this.set("config",d.default.ConfigSettingCollection.from_models_and_saved_values(e,t.prefs));var i=this.get("preloaded_data");i=i?i.data:[],this.set("data_manager",new x({dataset:this.get("dataset"),init_data:i}))}},{to_json_keys:["track_type","dataset","prefs","mode","filters","tool_state"],to_json_mappers:{prefs:function(t,e){return 0===o.size(t)&&(t={name:e.get("config").get("name").get("value"),color:e.get("config").get("color").get("value")}),t},dataset:function(t){return{id:t.id,hda_ldda:t.get("hda_ldda")}}}}),O=n.Collection.extend({model:M}),R=n.Model.extend({defaults:{title:"",type:""},urlRoot:Galaxy.root+"api/visualizations",save:function(){return t.ajax({url:this.url(),type:"POST",dataType:"json",data:{vis_json:JSON.stringify(this)}})}}),$=R.extend(_).extend({defaults:o.extend({},R.prototype.defaults,{dbkey:"",drawables:null,bookmarks:null,viewport:null}),initialize:function(t){this.set("drawables",new O(t.tracks));var e=[];this.set("config",d.default.ConfigSettingCollection.from_models_and_saved_values(e,t.prefs)),this.unset("tracks"),this.get("drawables").each(function(t){t.unset("preloaded_data")})},add_tracks:function(t){this.get("drawables").add(t)}},{to_json_keys:["view","viewport","bookmarks"],to_json_mappers:{view:function(t,e){return{obj_type:"View",prefs:{name:e.get("title"),content_visible:!0},drawables:e.get("drawables")}}}}),D=n.Router.extend({initialize:function(t){this.view=t.view,this.route(/([\w]+)$/,"change_location"),this.route(/([\w\+]+\:[\d,]+-[\d,]+)$/,"change_location");var e=this;e.view.on("navigate",function(t){e.navigate(t)})},change_location:function(t){this.view.go_to(t)}});e.default={BackboneTrack:M,BrowserBookmark:E,BrowserBookmarkCollection:A,Cache:w,CanvasManager:y,Genome:C,GenomeDataManager:x,GenomeRegion:S,GenomeRegionCollection:T,GenomeVisualization:$,GenomeReferenceDataManager:k,TrackBrowserRouter:D,Visualization:R,select_datasets:b}}).call(e,i(0),i(2))},function(t,e,i){"use strict";(function(t,i){function n(t){t+="";for(var e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return"promise"in t},s=t.Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(t){return!0}},go:function(){var t=i.Deferred(),e=this,n=e.get("ajax_settings"),a=e.get("success_fn"),s=e.get("interval");return function e(){i.ajax(n).success(function(i){a(i)?t.resolve(i):setTimeout(e,s)})}(),t}}),o=function(t){t||(t="#ffffff"),"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)t[e]=parseInt(t[e].slice(1),16);var i,n,a,s,o,r,l,h,c,u,d,f=function(t,e,i){return(299*t+587*e+114*i)/1e3},p=!1,g=0;do{for(i=Math.round(16777215*Math.random()),n=(16711680&i)>>16,a=(65280&i)>>8,s=255&i,c=f(n,a,s),p=!0,e=0;e<t.length;e++)if(o=t[e],r=(16711680&o)>>16,l=(65280&o)>>8,h=255&o,u=f(r,l,h),d=function(t,e,i,n,a,s){return Math.max(t,n)-Math.min(t,n)+(Math.max(e,a)-Math.min(e,a))+(Math.max(i,s)-Math.min(i,s))}(n,a,s,r,l,h),Math.abs(c-u)<40||d<200){p=!1;break}g++}while(!p&&g<=10);return"#"+(16777216+i).toString(16).substr(1,6)};e.default={commatize:n,is_deferred:a,ServerStateDeferred:s,get_random_color:o}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(6),h=s(l),c=t.View.extend({visible:!1,initialize:function(e){var i=this;this.model=e&&e.model||new t.Model({id:r.default.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,nopadding:!1,operations:null,collapsible:!1,collapsible_button:!1,collapsed:!1,onchange_title:null}).set(e),this.setElement(this._template()),this.$body=this.$(".portlet-body"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new h.default.ButtonIcon({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){i[i.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var t=this,e=this.model.attributes;return this.$el.removeClass().addClass(e.cls).attr("id",e.id),this.$header[e.title?"show":"hide"](),this.$title_text.html(e.title),n.each([this.$content,this.$body],function(t){t[e.nopadding?"addClass":"removeClass"]("no-padding")}),e.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa").addClass(e.icon).show():this.$title_icon.hide(),this.$title_text[e.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),e.collapsible&&(this.$title_text.on("click",function(){t[t.collapsed?"expand":"collapse"]()}),e.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!e.onchange_title),e.onchange_title&&this.$title_text.make_text_editable({on_finish:function(t){e.onchange_title(t)}}),e.buttons?(this.$buttons.empty().show(),a.each(this.model.get("buttons"),function(e,i){i.$el.prop("id",e),t.$buttons.append(i.$el)})):this.$buttons.hide(),this.$operations.empty,e.collapsible_button&&this.$operations.append(this.collapsible_button.$el),e.operations&&a.each(e.operations,function(e,i){i.$el.prop("id",e),t.$operations.append(i.$el)}),this},append:function(t){this.$body.append(t)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(t){this.$buttons.find("#"+t).prop("disabled",!1)},disableButton:function(t){this.$buttons.find("#"+t).prop("disabled",!0)},hideOperation:function(t){this.$operations.find("#"+t).hide()},showOperation:function(t){this.$operations.find("#"+t).show()},setOperation:function(t,e){this.$operations.find("#"+t).off("click").on("click",e)},title:function(t){return t&&this.$title_text.html(t),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.height("0%"),this.$body.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.$content.height("100%"),this.$body.fadeIn("fast"),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return a("<div/>").append(a("<div/>").addClass("portlet-header").append(a("<div/>").addClass("portlet-operations")).append(a("<div/>").addClass("portlet-title").append(a("<i/>").addClass("portlet-title-icon")).append(a("<span/>").addClass("portlet-title-text")))).append(a("<div/>").addClass("portlet-content").append(a("<div/>").addClass("portlet-body")).append(a("<div/>").addClass("portlet-buttons"))).append(a("<div/>").addClass("portlet-backdrop"))}});e.default={View:c}}).call(e,i(2),i(1),i(0))},,function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=i(1),r=n(o),l=i(2),h=n(l),c=160,u=800,d=h.View.extend({initialize:function(t){this.view=t.view,this.hidden=!1,this.saved_size=null,this.hiddenByTool=!1},$center:function(){return this.$el.siblings("#center")},$toggleButton:function(){return this.$(".unified-panel-footer > .panel-collapse")},render:function(){var t=this,e=this.view,i=this.view.model.attributes||{};this.$el.html(this._templatePanel(this.id)),r.each(i.buttons,function(e){t.$(".panel-header-buttons").append(e.$el)}),this.$el.addClass(i.cls),this.$(".panel-header-text").html(r.escape(i.title)),this.$(".unified-panel-body").append(e.$el),e.render()},_templatePanel:function(){return[this._templateHeader(),this._templateBody(),this._templateFooter()].join("")},_templateHeader:function(t){return['<div class="unified-panel-header" unselectable="on">','<div class="unified-panel-header-inner">','<div class="panel-header-buttons" style="float: right"/>','<div class="panel-header-text"/>',"</div>","</div>"].join("")},_templateBody:function(t){return'<div class="unified-panel-body"/>'},_templateFooter:function(t){return['<div class="unified-panel-footer">','<div class="panel-collapse ',r.escape(this.id),'"/>','<div class="drag"/>',"</div>"].join("")},events:{"mousedown .unified-panel-footer > .drag":"_mousedownDragHandler","click .unified-panel-footer > .panel-collapse":"toggle"},_mousedownDragHandler:function(t){function e(t){var e=t.pageX-a;a=t.pageX;var s=i.$el.width(),o=n?s+e:s-e;o=Math.min(u,Math.max(c,o)),i.resize(o)}var i=this,n="left"===this.id,a=t.pageX;(0,s.default)("#dd-helper").show().on("mousemove",e).one("mouseup",function(t){(0,s.default)(this).hide().off("mousemove",e)})},resize:function(t){return this.$el.css("width",t),this.$center().css(this.id,t),this},show:function(){if(this.hidden){var t=this,e={},i=this.id;return e[i]=0,t.$el.css(i,-this.saved_size).show().animate(e,"fast",function(){t.resize(t.saved_size)}),t.hidden=!1,t.$toggleButton().removeClass("hidden"),this}},hide:function(){if(!this.hidden){var t={},e=this.id;return this.saved_size=this.$el.width(),t[e]=-this.saved_size,this.$el.animate(t,"fast"),this.$center().css(e,0),this.hidden=!0,this.$toggleButton().addClass("hidden"),this}},toggle:function(t){return this.hidden?this.show():this.hide(),this.hiddenByTool=!1,this},handle_minwidth_hint:function(t){return this.$center().width()-(this.hidden?this.saved_size:0)<t?this.hidden||(this.toggle(),this.hiddenByTool=!0):this.hiddenByTool&&(this.toggle(),this.hiddenByTool=!1),self},force_panel:function(t){return"show"==t?this.show():"hide"==t?this.hide():self},toString:function(){return"SidePanel("+this.id+")"}}),f=d.extend({id:"left"}),p=d.extend({id:"right"}),g=h.View.extend({initialize:function(t){this.setElement((0,s.default)(this.template())),this.$frame=this.$(".center-frame"),this.$panel=this.$(".center-panel"),this.$frame.on("load",r.bind(this._iframeChangeHandler,this))},_iframeChangeHandler:function(t){var e=t.currentTarget,i=e.contentWindow&&e.contentWindow.location;i&&i.host&&((0,s.default)(e).show(),this.$panel.empty().hide(),Galaxy.trigger("center-frame:load",{fullpath:i.pathname+i.search+i.hash,pathname:i.pathname,search:i.search,hash:i.hash}))},display:function(t){var e=this.$frame[0].contentWindow||{},i=e.onbeforeunload&&e.onbeforeunload();i&&!confirm(i)||(e.onbeforeunload=void 0,this.$frame.attr("src","about:blank").hide(),this.$panel.empty().scrollTop(0).append(t.$el).show(),Galaxy.trigger("center-panel:load",t))},template:function(){return'<div class="center-container"><iframe id="galaxy_main" name="galaxy_main" frameborder="0" class="center-frame" /><div class="center-panel" /></div>'},toString:function(){return"CenterPanel"}});e.default={SidePanel:d,LeftPanel:f,RightPanel:p,CenterPanel:g}},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(t,e){return this._init(t||{},e||{})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=a(o),l=i(2),h=a(l),c=i(5),u=n(c),d=i(59),f=n(d),p=i(104),g=n(p),m=i(58),v=n(m),_=i(4),b=n(_);(0,v.default)(s,"GalaxyApp");var y="galaxy:debug:namespaces",w=!1;try{w="true"==localStorage.getItem("galaxy:debug")}catch(t){console.log((0,b.default)("localStorage not available for debug flag retrieval"))}s.prototype._init=function(t,e){var i=this;return r.extend(i,h.Events),w&&(i.logger=console,console.debug("debugging galaxy:","options:",t,"bootstrapped:",e)),i._processOptions(t),i.root=t.root||"/",i.params=t.params||{},i.session_csrf_token=t.session_csrf_token||null,i._initConfig(t.config||{}),i._patchGalaxy(window.Galaxy),i._initLogger(i.options.loggerOptions||{}),i.debug("GalaxyApp.options: ",i.options),i.debug("GalaxyApp.config: ",i.config),i.debug("GalaxyApp.logger: ",i.logger),i._initLocale(),i.debug("GalaxyApp.localize: ",i.localize),i.config=t.config||{},i.debug("GalaxyApp.config: ",i.config),i._initUser(t.user||{}),i.debug("GalaxyApp.user: ",i.user),i._setUpListeners(),i.trigger("ready",i),i},s.prototype.defaultOptions={patchExisting:!0,root:"/",session_csrf_token:null},s.prototype._processOptions=function(t){var e=this,i=e.defaultOptions;e.options={};for(var n in i)i.hasOwnProperty(n)&&(e.options[n]=t.hasOwnProperty(n)?t[n]:i[n]);return e},s.prototype._initConfig=function(t){var e=this;return e.config=t,e.config.debug=w||e.config.debug,e},s.prototype._patchGalaxy=function(t){var e=this;if(e.options.patchExisting&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s.prototype._initLogger=function(t){var e=this;if(e.config.debug){t.consoleLogger=t.consoleLogger||console,t.consoleLevel=t.consoleLevel||g.default.MetricsLogger.ALL;try{t.consoleNamespaceWhitelist=localStorage.getItem(y).split(",")}catch(t){}try{t.consoleFlattenMessages="true"==localStorage.getItem("galaxy:debug:flatten")}catch(t){}console.log(t.consoleFlattenMessages)}return e.logger=new g.default.MetricsLogger(t),e.emit={},["log","debug","info","warn","error","metric"].map(function(t){e.emit[t]=function(i){e.logger.emit(t,arguments[0],Array.prototype.slice.call(arguments,1))}}),e.config.debug&&(u.default.LoggableMixin.logger=e.logger),e},s.prototype._initLocale=function(t){var e=this;return e.debug("_initLocale:",t),e.localize=b.default,window._l=e.localize,e},s.prototype._initUser=function(t){var e=this;return e.debug("_initUser:",t),e.user=new f.default.User(t),e.user.logger=e.logger,e},s.prototype._setUpListeners=function(){var e=this;return e.lastAjax={},t(document).bind("ajaxSend",function(t,i,n){var a=n.data;try{a=JSON.parse(a)}catch(t){}e.lastAjax={url:location.href.slice(0,-1)+n.url,data:a}}),e},s.prototype.debugging=function(t){var e=this;try{if(void 0===t)return"true"===localStorage.getItem("galaxy:debug");if(t)return localStorage.setItem("galaxy:debug",!0),!0;localStorage.removeItem("galaxy:debug"),e.debuggingNamespaces(null)}catch(t){console.log((0,b.default)("localStorage not available for debug flag retrieval"))}return!1},s.prototype.debuggingNamespaces=function(t){var e=this;try{if(void 0===t){var i=localStorage.getItem(y);return"string"==typeof i?i.split(","):[]}null===t?localStorage.removeItem(y):localStorage.setItem(y,t);var n=e.debuggingNamespaces();return e.logger&&(e.logger.options.consoleNamespaceWhitelist=n),n}catch(t){console.log((0,b.default)("localStorage not available for debug namespace retrieval"))}},s.prototype.toString=function(){return"GalaxyApp("+(this.user?this.user.get("email")||"(anonymous)":"uninitialized")+")"},e.default={GalaxyApp:s}}).call(e,i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(105),r=s(o),l=i(23),h=s(l),c=i(7),u=s(c),d=i(3),f=s(d),p=t.View.extend({el:"body",className:"full-content",_panelids:["left","right"],initialize:function(e){var i=this;this.config=n.defaults(e.config||{},{message_box_visible:!1,message_box_content:"",message_box_class:"info",show_inactivity_warning:!1,inactivity_box_content:""}),Galaxy.modal=this.modal=new u.default.View,Galaxy.display=this.display=function(t){t.title?(f.default.setWindowTitle(t.title),t.allow_title_display=!1):(f.default.setWindowTitle(),t.allow_title_display=!0),i.center.display(t)},Galaxy.router=this.router=e.Router&&new e.Router(i,e),this.masthead=new r.default.View(this.config),this.center=new h.default.CenterPanel,this.$el.attr("scroll","no"),this.$el.html(this._template()),this.$("#masthead").replaceWith(this.masthead.$el),this.$("#center").append(this.center.$el),this.$el.append(this.masthead.frame.$el),this.$el.append(this.modal.$el),this.$messagebox=this.$("#messagebox"),this.$inactivebox=this.$("#inactivebox"),this.panels={},n.each(this._panelids,function(t){var n=t.charAt(0).toUpperCase()+t.slice(1),a=e[n];if(a){var s=new a(i,e);i[s.toString()]=s,i.panels[t]=new h.default.SidePanel({id:t,el:i.$("#"+t),view:s})}}),this.render(),this.router&&t.history.start({root:Galaxy.root,pushState:!0})},render:function(){return a(".select2-hidden-accessible").remove(),this.masthead.render(),this.renderMessageBox(),this.renderInactivityBox(),this.renderPanels(),this._checkCommunicationServerOnline(),this},renderMessageBox:function(){if(this.config.message_box_visible){var t=this.config.message_box_content||"",e=this.config.message_box_class||"info";this.$el.addClass("has-message-box"),this.$messagebox.attr("class","panel-"+e+"-message").html(t).toggle(!!t).show()}else this.$el.removeClass("has-message-box"),this.$messagebox.hide();return this},renderInactivityBox:function(){if(this.config.show_inactivity_warning){var t=this.config.inactivity_box_content||"",e=a("<a/>").attr("href",Galaxy.root+"user/resend_verification").text("Resend verification");this.$el.addClass("has-inactivity-box"),this.$inactivebox.html(t+" ").append(e).toggle(!!t).show()}else this.$el.removeClass("has-inactivity-box"),this.$inactivebox.hide();return this},renderPanels:function(){var t=this;return n.each(this._panelids,function(e){var i=t.panels[e];i?i.render():(t.$("#center").css(e,0),t.$("#"+e).hide())}),this},_template:function(){return['<div id="everything">','<div id="background"/>','<div id="masthead"/>','<div id="messagebox"/>','<div id="inactivebox" class="panel-warning-message" />','<div id="left" />','<div id="center" />','<div id="right" />',"</div>",'<div id="dd-helper" />'].join("")},toString:function(){return"PageLayoutView"},_checkCommunicationServerOnline:function(){var t=window.Galaxy.config.communication_server_host,e=window.Galaxy.config.communication_server_port,i=window.Galaxy.user.attributes.preferences,n=a("#show-chat-online");i&&-1!=["1","true"].indexOf(i.communication_server)?a.ajax({url:t+":"+e}).success(function(t){null!==window.Galaxy.user.id&&"hidden"===n.css("visibility")&&n.css("visibility","visible")}).error(function(t){n.css("visibility","hidden")}):n.css("visibility","hidden")}});e.default={View:p}}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),r=i(20),l=a(r),h=i(26),c=(a(h),t.Model.extend({initialize:function(t){var e=this.get("key");this.set("id",e);var i=o.find([{key:"name",label:"Name",type:"text",default_value:""},{key:"color",label:"Color",type:"color",default_value:null},{key:"min_value",label:"Min Value",type:"float",default_value:null},{key:"max_value",label:"Max Value",type:"float",default_value:null},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:32,hidden:!0},{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"block_color",label:"Block color",type:"color",default_value:null},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"reverse_strand_color",label:"Antisense strand color",type:"color",default_value:null},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0}],function(t){return t.key===e});i&&this.set(o.extend({},i,t)),void 0===this.get("value")&&void 0!==this.get("default_value")&&(this.set_value(this.get("default_value")),this.get("value")||"color"!==this.get("type")||this.set("value",l.default.get_random_color()))},set_value:function(t,e){var i=this.get("type");"float"===i?t=parseFloat(t):"int"===i&&(t=parseInt(t,10)),this.set({value:t},e)}})),u=t.Collection.extend({model:c,to_key_value_dict:function(){var t={};return this.each(function(e){t[e.get("key")]=e.get("value")}),t},get_value:function(t){var e=this.get(t);if(e)return e.get("value")},set_value:function(t,e,i){var n=this.get(t);if(n)return n.set_value(e,i)},set_default_value:function(t,e){var i=this.get(t);if(i)return i.set("default_value",e)}},{from_models_and_saved_values:function(t,e){return e&&(t=o.map(t,function(t){return o.extend({},t,{value:e[t.key]})})),new u(t)}}),d=t.View.extend({className:"config-settings-view",render:function(){var t=this.$el;return this.collection.each(function(e,i){if(!e.get("hidden")){var a="param_"+i,s=e.get("type"),r=e.get("value"),h=n("<div class='form-row' />").appendTo(t);if(h.append(n("<label />").attr("for",a).text(e.get("label")+":")),"bool"===s)h.append(n('<input type="checkbox" />').attr("id",a).attr("name",a).attr("checked",r));else if("text"===s)h.append(n('<input type="text"/>').attr("id",a).val(r).click(function(){n(this).select()}));else if("select"===s){var c=n("<select />").attr("id",a);o.each(e.get("options"),function(t){n("<option/>").text(t.label).attr("value",t.value).appendTo(c)}),c.val(r),h.append(c)}else if("color"===s){var u=n("<div/>").appendTo(h),d=n("<input />").attr("id",a).attr("name",a).val(r).css("float","left").appendTo(u).click(function(t){n(".tooltip").removeClass("in");var e=n(this).siblings(".tooltip").addClass("in");e.css({left:n(this).position().left+n(this).width()+5,top:n(this).position().top-n(e).height()/2+n(this).height()/2}).show(),e.click(function(t){t.stopPropagation()}),n(document).bind("click.color-picker",function(){e.hide(),n(document).unbind("click.color-picker")}),t.stopPropagation()}),f=n("<a href='javascript:void(0)'/>").addClass("icon-button arrow-circle").appendTo(u).attr("title","Set new random color").tooltip(),p=n("<div class='tooltip right' style='position: absolute;' />").appendTo(u).hide(),g=n("<div class='tooltip-inner' style='text-align: inherit'></div>").appendTo(p),m=(n("<div class='tooltip-arrow'></div>").appendTo(p),n.farbtastic(g,{width:100,height:100,callback:d,color:r}));u.append(n("<div/>").css("clear","both")),function(t){f.click(function(){t.setColor(l.default.get_random_color())})}(m)}else h.append(n("<input />").attr("id",a).attr("name",a).val(r));e.help&&h.append(n("<div class='help'/>").text(e.help))}}),this},render_in_modal:function(t){var e=this,i=function(){Galaxy.modal.hide(),n(window).unbind("keypress.check_enter_esc")},a=function(){Galaxy.modal.hide(),n(window).unbind("keypress.check_enter_esc"),e.update_from_form()},s=function(t){27===(t.keyCode||t.which)?i():13===(t.keyCode||t.which)&&a()};n(window).bind("keypress.check_enter_esc",s),0===this.$el.children().length&&this.render(),Galaxy.modal.show({title:t||"Configure",body:this.$el,buttons:{Cancel:i,OK:a}})},update_from_form:function(){var t=this;this.collection.each(function(e,i){if(!e.get("hidden")){var n="param_"+i,a=t.$el.find("#"+n).val();"bool"===e.get("type")&&(a=t.$el.find("#"+n).is(":checked")),e.set_value(a)}})}});e.default={ConfigSetting:c,ConfigSettingCollection:u,ConfigSettingCollectionView:d}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,i,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=t.View.extend({initialize:function(t,e){this.$button=t,this.$button.length||(this.$button=i("<div/>")),this.options=e||[],this.$button.data("popupmenu",this);var n=this;this.$button.click(function(t){return i(".popmenu-wrapper").remove(),n._renderAndShow(t),!1})},_renderAndShow:function(t){this.render(),this.$el.appendTo("body").css(this._getShownPosition(t)).show(),this._setUpCloseBehavior()},render:function(){if(this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length){var t=this;this.$el.find("li").each(function(e,n){var a=t.options[e];a.func&&i(this).children("a.popupmenu-option").click(function(e){a.func.call(t,e,a),e.preventDefault()})})}return this},template:function(t,e){return['<ul id="',t,'-menu" class="dropdown-menu">',this._templateOptions(e),"</ul>"].join("")},_templateOptions:function(t){return t.length?n.map(t,function(t){return t.divider?'<li class="divider"></li>':t.header?['<li class="head"><a href="javascript:void(0);">',t.html,"</a></li>"].join(""):['<li><a class="popupmenu-option" href="',t.href||"javascript:void(0);",'"',t.target?' target="'+t.target+'"':"",">",t.checked?'<span class="fa fa-check"></span>':"",t.html,"</a></li>"].join("")}).join(""):"<li>(no options)</li>"},_getShownPosition:function(t){var e=this.$el.width(),n=t.pageX-e/2;return n=Math.min(n,i(document).scrollLeft()+i(window).width()-e-5),n=Math.max(n,i(document).scrollLeft()+5),{top:t.pageY,left:n}},_setUpCloseBehavior:function(){function t(t){if(i(document).off("click.close_popup"),window&&window.parent!==window)try{i(window.parent.document).off("click.close_popup")}catch(t){}else try{i("iframe#galaxy_main").contents().off("click.close_popup")}catch(t){}e.remove()}var e=this;if(i("html").one("click.close_popup",t),window&&window.parent!==window)try{i(window.parent.document).find("html").one("click.close_popup",t)}catch(t){}else try{i("iframe#galaxy_main").contents().one("click.close_popup",t)}catch(t){}},addItem:function(t,e){return e=e>=0?e:this.options.length,this.options.splice(e,0,t),this},removeItem:function(t){return t>=0&&this.options.splice(t,1),this},findIndexByHtml:function(t){for(var e=0;e<this.options.length;e++)if(n.has(this.options[e],"html")&&this.options[e].html===t)return e;return null},findItemByHtml:function(t){return this.options[this.findIndexByHtml(t)]},toString:function(){return"PopupMenu"}});s.create=function(t,e){return new s(t,e)},s.make_popupmenu=function(t,e){var o=[];return n.each(e,function(t,e){var i={html:e};null===t?i.header=!0:"function"===a.type(t)&&(i.func=t),o.push(i)}),new s(i(t),o)},s.convertLinksToOptions=function(t,e){t=i(t),e=e||"a";var n=[];return t.find(e).each(function(t,e){var a={},s=i(t);if(a.html=s.text(),s.attr("href")){var o=s.attr("href"),r=s.attr("target"),l=s.attr("confirm");a.func=function(){if(!l||confirm(l))switch(r){case"_parent":window.parent.location=o;break;case"_top":window.top.location=o;break;default:window.location=o}}}n.push(a)}),n},s.fromExistingDom=function(t,e,n){t=i(t),e=i(e);var a=s.convertLinksToOptions(e,n);return e.remove(),new s(t,a)},s.make_popup_menus=function(t,e,n){t=t||document,e=e||"div[popupmenu]",n=n||function(t,e){return"#"+t.attr("popupmenu")};var a=[];return i(t).find(e).each(function(){var e=i(this),o=i(t).find(n(e,t));a.push(s.fromDom(o,e)),o.addClass("popup")}),a},e.default=s}).call(e,i(2),i(0),i(1),i(0))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=(function(t){t&&t.__esModule}(a),t.View.extend({initialize:function(e){this.collection=new t.Collection,this.model=e&&e.model||new t.Model({onchange:null,visible:!0}).set(e),this.setElement(n(this._template())),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.$el.on("click",function(){n(".tooltip").hide()}),this.render(),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"add",this._add,this),this.listenTo(this.collection,"remove",this._remove,this),this.listenTo(this.collection,"change",this._change,this),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add remove reset",this.render,this)},render:function(){var t=this.model.get("current");t=this.$("#"+t).length>0?t:this.first(),t&&(this.$nav.children().removeClass("active"),this.$content.children().removeClass("active"),this.$("#tab-"+t).addClass("active"),this.$("#"+t).addClass("active")),this.$el[this.model.get("visible")?"fadeIn":"fadeOut"]("fast"),this.$nav[this.size()>1?"show":"hide"]()},current:function(){return this.model.get("current")},show:function(t){t&&(this.model.set({current:t,visible:!0}),this.model.get("onchange")&&this.model.get("onchange")(t))},hide:function(){this.model.set("visible",!1)},first:function(){var t=this.collection.first();return t&&t.id},size:function(){return this.collection.length},add:function(t){this.collection.add(t)},del:function(t){this.collection.remove(t)},delAll:function(){this.collection.reset()},showTab:function(t){this.collection.get(t).set("hidden",!1)},hideTab:function(t){this.collection.get(t).set("hidden",!0)},_add:function(t){var e=this,i=t.attributes;this.$content.append(n("<div/>").attr("id",i.id).addClass("tab-pane").append(i.$el)),this.$nav.append(n(this._template_tab(i)).show().tooltip({title:i.tooltip,placement:"bottom",container:e.$el}).on("click",function(t){t.preventDefault(),e.show(i.id)})),1==this.size()&&this.show(i.id)},_remove:function(t){this.$("#tab-"+t.id).remove(),this.$("#"+t.id).remove()},_reset:function(){this.$nav.empty(),this.$content.empty()},_change:function(t){this.$("#tab-"+t.id)[t.get("hidden")?"hide":"show"]()},_template:function(){return n("<div/>").addClass("ui-tabs tabbable tabs-left").append(n("<ul/>").addClass("tab-navigation nav nav-tabs")).append(n("<div/>").addClass("tab-content"))},_template_tab:function(t){var e=n("<li/>").addClass("tab-element").attr("id","tab-"+t.id).append(n("<a/>").attr("id","tab-title-link-"+t.id)),i=e.find("a");return t.icon&&i.append(n("<i/>").addClass("tab-icon fa").addClass(t.icon)),i.append(n("<span/>").attr("id","tab-title-text-"+t.id).addClass("tab-title-text").append(t.title)),e}}));e.default={View:s}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=t.View.extend({initialize:function(e){this.model=e&&e.model||new t.Model({id:s.default.uid(),title:"",icon:"",cls:"btn btn-default",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1}).set(e),this.setElement(n("<button/>").attr("type","button").append(this.$icon=n("<i/>")).append(this.$title=n("<span/>")).append(this.$progress=n("<div/>").append(this.$progress_bar=n("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(e.disabled&&"disabled").attr("id",e.id).attr("disabled",e.disabled).off("click").on("click",function(){n(".tooltip").hide(),e.onclick&&!t.disabled&&e.onclick()}).tooltip({title:e.tooltip,placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==e.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:e.percentage+"%"}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),e.wait?(this.$el.addClass(e.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin ui-margin-right"),this.$title.html(e.wait_text)):(this.$el.addClass(e.cls),this.$icon.addClass(e.icon),this.$title.html(e.title),e.icon&&e.title&&this.$icon.addClass("ui-margin-right"))},show:function(){this.$el.show()},hide:function(){this.$el.hide()},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(t){this.model.set("icon",t)}}),r=o.extend({initialize:function(e){this.model=e&&e.model||new t.Model({id:s.default.uid(),title:"",icon:"",cls:""}).set(e),this.setElement(n("<a/>").append(this.$icon=n("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).attr({id:t.id,href:t.href||"javascript:void(0)",title:t.title,target:t.target||"_top",disabled:t.disabled}).tooltip({placement:"bottom"}).off("click").on("click",function(){t.onclick&&!t.disabled&&t.onclick()}),this.$icon.removeClass().addClass(t.icon)}}),l=t.View.extend({initialize:function(e){this.model=e&&e.model||new t.Model({id:s.default.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,onchange:function(){}}).set(e),this.setElement(n("<div/>").append(this.$icon=n("<span/>")).append(this.$title=n("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var e=this,t=this.model.attributes;this.$el.addClass("ui-button-check").off("click").on("click",function(){e.model.set("value",0===e.model.get("value")&&2||0),t.onclick&&t.onclick()}),this.$title.html(t.title),this.$icon.removeClass().addClass("icon fa ui-margin-right").addClass(t.icons[t.value])},value:function(t,e){return void 0!==t&&(e&&0!==t&&(t=t!==e&&1||2),this.model.set("value",t),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}}),h=o.extend({initialize:function(e){this.model=e&&e.model||new t.Model({id:s.default.uid(),title:"",icon:"",cls:"ui-button-icon",disabled:!1}).set(e),this.setElement(n("<div/>").append(this.$button=n("<div/>").append(this.$icon=n("<i/>")).append(this.$title=n("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).addClass(t.disabled&&"disabled").attr("disabled",t.disabled).attr("id",t.id).off("click").on("click",function(){n(".tooltip").hide(),!t.disabled&&t.onclick&&t.onclick()}),this.$button.addClass("button").tooltip({title:t.tooltip,placement:"bottom"}),this.$icon.removeClass().addClass("icon fa").addClass(t.icon),this.$title.addClass("title").html(t.title),t.icon&&t.title&&this.$icon.addClass("ui-margin-right")}}),c=o.extend({$menu:null,initialize:function(e){this.model=e&&e.model||new t.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"ui-button-icon ui-button-menu",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(e),this.collection=new t.Collection,this.setElement(n("<div/>").append(this.$root=n("<div/>").append(this.$icon=n("<i/>")).append(this.$title=n("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("dropdown").addClass(e.cls).attr("id",e.id).css({display:e.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass("root button dropdown-toggle").attr("data-toggle","dropdown").tooltip({title:e.tooltip,placement:"bottom"}).off("click").on("click",function(t){n(".tooltip").hide(),t.preventDefault(),e.onclick&&e.onclick()}),this.$icon.removeClass().addClass("icon fa").addClass(e.icon),this.$title.removeClass().addClass("title").html(e.title),e.icon&&e.title&&this.$icon.addClass("ui-margin-right"),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=n("<ul/>").addClass("menu dropdown-menu").addClass("pull-"+t.model.get("pull")).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each(function(e){var i=e.attributes;if(i.visible){var a=n("<a/>").addClass("dropdown-item").attr({href:i.href,target:i.target}).append(n("<i/>").addClass("fa").addClass(i.icon).css("display",i.icon?"inline-block":"none")).append(i.title).on("click",function(t){i.onclick&&(t.preventDefault(),i.onclick())});t.$menu.append(n("<li/>").append(a)),i.divider&&t.$menu.append(n("<li/>").addClass("divider"))}})},addMenu:function(t){this.collection.add(s.default.merge(t,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}});e.default={ButtonDefault:o,ButtonLink:r,ButtonIcon:h,ButtonCheck:l,ButtonMenu:c}}).call(e,i(2),i(0))},,,,,,,,,,,,,,,,function(t,e,i){(function(t){!function(t){function e(i){function n(){e(a)}var a=i.data||i;switch(i.type){case"mouseenter":a.dist2=0,a.event=i,i.type="hoverstart",!1!==t.event.dispatch.call(this,i)&&(a.elem=this,t.event.add(this,"mousemove",e,a),a.timer=setTimeout(n,a.delay));break;case"mousemove":a.dist2+=Math.pow(i.pageX-a.event.pageX,2)+Math.pow(i.pageY-a.event.pageY,2),a.event=i;break;case"mouseleave":clearTimeout(a.timer),a.hovered?(i.type="hoverend",t.event.dispatch.call(this,i),a.hovered--):t.event.remove(a.elem,"mousemove",e);break;default:a.dist2<=Math.pow(a.speed*(a.delay/1e3),2)?(t.event.remove(a.elem,"mousemove",e),a.event.type="hover",!1!==t.event.dispatch.call(a.elem,a.event)&&a.hovered++):a.timer=setTimeout(n,a.delay),a.dist2=0}}t.fn._hover=t.fn.hover,t.fn.hover=function(t,e,i){return i&&this.bind("hoverstart",t),e&&this.bind("hoverend",i||e),t?this.bind("hover",i?e:t):this.trigger("hover")};var i=t.event.special.hover={delay:100,speed:100,setup:function(n){n=t.extend({speed:i.speed,delay:i.delay,hovered:0},n||{}),t.event.add(this,"mouseenter mouseleave",e,n)},teardown:function(){t.event.remove(this,"mouseenter mouseleave",e)}}}(t)}).call(e,i(0))},function(t,e,i){(function(t){!function(t){t.fn.drag=function(e,i,n){var a="string"==typeof e?e:"",s=t.isFunction(e)?e:t.isFunction(i)?i:null;return 0!==a.indexOf("drag")&&(a="drag"+a),n=(e==s?i:n)||{},s?this.bind(a,n,s):this.trigger(a)};var e=t.event,i=e.special,n=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var i=t.data(this,n.datakey),a=e.data||{};i.related+=1,t.each(n.defaults,function(t,e){void 0!==a[t]&&(i[t]=a[t])})},remove:function(){t.data(this,n.datakey).related-=1},setup:function(){if(!t.data(this,n.datakey)){var i=t.extend({related:0},n.defaults);t.data(this,n.datakey,i),e.add(this,"touchstart mousedown",n.init,i),this.attachEvent&&this.attachEvent("ondragstart",n.dontstart)}},teardown:function(){(t.data(this,n.datakey)||{}).related||(t.removeData(this,n.datakey),e.remove(this,"touchstart mousedown",n.init),n.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",n.dontstart))},init:function(a){if(!n.touched){var s,o=a.data;if(!(0!=a.which&&o.which>0&&a.which!=o.which)&&!t(a.target).is(o.not)&&(!o.handle||t(a.target).closest(o.handle,a.currentTarget).length)&&(n.touched="touchstart"==a.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[n.interaction(this,o)],o.target=a.target,o.pageX=a.pageX,o.pageY=a.pageY,o.dragging=null,s=n.hijack(a,"draginit",o),o.propagates))return s=n.flatten(s),s&&s.length&&(o.interactions=[],t.each(s,function(){o.interactions.push(n.interaction(this,o))})),o.propagates=o.interactions.length,!1!==o.drop&&i.drop&&i.drop.handler(a,o),n.textselect(!1),n.touched?e.add(n.touched,"touchmove touchend",n.handler,o):e.add(document,"mousemove mouseup",n.handler,o),!(!n.touched||o.live)&&void 0}},interaction:function(e,i){var a=t(e)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new n.callback,droppable:[],offset:a}},handler:function(a){var s=a.data;switch(a.type){case!s.dragging&&"touchmove":a.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(a.pageX-s.pageX,2)+Math.pow(a.pageY-s.pageY,2)<Math.pow(s.distance,2))break;a.target=s.target,n.hijack(a,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":a.preventDefault();case"mousemove":if(s.dragging){if(n.hijack(a,"drag",s),s.propagates){!1!==s.drop&&i.drop&&i.drop.handler(a,s);break}a.type="mouseup"}case"touchend":case"mouseup":default:n.touched?e.remove(n.touched,"touchmove touchend",n.handler):e.remove(document,"mousemove mouseup",n.handler),s.dragging?(!1!==s.drop&&i.drop&&i.drop.handler(a,s),n.hijack(a,"dragend",s)):n.hijack(a,"dragclickonly",s),n.textselect(!0),!1===s.click&&s.dragging&&t.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=n.touched=!1}},hijack:function(i,a,s,o,r){if(s){var l,h,c,u={event:i.originalEvent,type:i.type},d=a.indexOf("drop")?"drag":"drop",f=o||0,p=isNaN(o)?s.interactions.length:o;i.type=a,i.originalEvent=null,s.results=[];do{if(h=s.interactions[f]){if("dragend"!==a&&h.cancelled)continue;c=n.properties(i,s,h),h.results=[],t(r||h[d]||s.droppable).each(function(o,r){if(c.target=r,i.isPropagationStopped=function(){return!1},l=r?e.dispatch.call(r,i,c):null,!1===l?("drag"==d&&(h.cancelled=!0,s.propagates-=1),"drop"==a&&(h[d][o]=null)):"dropinit"==a&&h.droppable.push(n.element(l)||r),"dragstart"==a&&(h.proxy=t(n.element(l)||h.drag)[0]),h.results.push(l),delete i.result,"dropinit"!==a)return l}),s.results[f]=n.flatten(h.results),"dropinit"==a&&(h.droppable=n.flatten(h.droppable)),"dragstart"!=a||h.cancelled||c.update()}}while(++f<p);return i.type=u.type,i.originalEvent=u.event,n.flatten(s.results)}},properties:function(t,e,i){var a=i.callback;return a.drag=i.drag,a.proxy=i.proxy||i.drag,a.startX=e.pageX,a.startY=e.pageY,a.deltaX=t.pageX-e.pageX,a.deltaY=t.pageY-e.pageY,a.originalX=i.offset.left,a.originalY=i.offset.top,a.offsetX=a.originalX+a.deltaX,a.offsetY=a.originalY+a.deltaY,a.drop=n.flatten((i.drop||[]).slice()),a.available=n.flatten((i.droppable||[]).slice()),a},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?n.flatten(e):e})},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",n.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};n.callback.prototype={update:function(){i.drop&&this.available.length&&t.each(this.available,function(t){i.drop.locate(this,t)})}};var a=e.dispatch;e.dispatch=function(e){return t.data(this,"suppress."+e.type)-(new Date).getTime()>0?void t.removeData(this,"suppress."+e.type):a.apply(this,arguments)};var s=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,i){if(i){var n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;n&&t.each(s.props,function(t,i){e[i]=n[i]})}return e}};i.draginit=i.dragstart=i.dragend=n}(t)}).call(e,i(0))},function(t,e,i){var n,a,s;/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
!function(o){a=[i(0)],n=o,void 0!==(s="function"==typeof n?n.apply(e,a):n)&&(t.exports=s)}(function(t){function e(e){var o=e||window.event,r=l.call(arguments,1),h=0,u=0,d=0,f=0,p=0,g=0;if(e=t.event.fix(o),e.type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(u=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(u=-1*d,d=0),h=0===d?u:d,"deltaY"in o&&(d=-1*o.deltaY,h=d),"deltaX"in o&&(u=o.deltaX,0===d&&(h=-1*u)),0!==d||0!==u){if(1===o.deltaMode){var m=t.data(this,"mousewheel-line-height");h*=m,d*=m,u*=m}else if(2===o.deltaMode){var v=t.data(this,"mousewheel-page-height");h*=v,d*=v,u*=v}if(f=Math.max(Math.abs(d),Math.abs(u)),(!s||f<s)&&(s=f,n(o,f)&&(s/=40)),n(o,f)&&(h/=40,u/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/s),u=Math[u>=1?"floor":"ceil"](u/s),d=Math[d>=1?"floor":"ceil"](d/s),c.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=e.clientX-_.left,g=e.clientY-_.top}return e.deltaX=u,e.deltaY=d,e.deltaFactor=s,e.offsetX=p,e.offsetY=g,e.deltaMode=0,r.unshift(e,h,u,d),a&&clearTimeout(a),a=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,r)}}function i(){s=null}function n(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var a,s,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var h=o.length;h;)t.event.fixHooks[o[--h]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=r.length;i;)this.addEventListener(r[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=r.length;i;)this.removeEventListener(r[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})},function(t,e,i){(function(t){!function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function i(e){var i=e.target,n=t(i);if(!n.is("[type=submit],[type=image]")){var a=n.closest("[type=submit]");if(0===a.length)return;i=a[0]}var s=this;if(s.clk=i,"image"==i.type)if(void 0!==e.offsetX)s.clk_x=e.offsetX,s.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=n.offset();s.clk_x=e.pageX-o.left,s.clk_y=e.pageY-o.top}else s.clk_x=e.pageX-i.offsetLeft,s.clk_y=e.pageY-i.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var a={};a.fileapi=void 0!==t("<input type='file'/>").get(0).files,a.formdata=void 0!==window.FormData;var s=!!t.fn.prop;t.fn.attr2=function(){if(!s)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function i(i){var n,a,s=t.param(i,e.traditional).split("&"),o=s.length,r=[];for(n=0;n<o;n++)s[n]=s[n].replace(/\+/g," "),a=s[n].split("="),r.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return r}function o(i){function a(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){n("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){n("cannot get iframe.contentDocument: "+i),e=t.document}return e}function o(){function e(){try{var t=a(v).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(t){n("Server abort: ",t," (",t.name,")"),l(T),x&&clearTimeout(x),x=void 0}}var i=c.attr2("target"),s=c.attr2("action");k.setAttribute("target",g),r&&!/post/i.test(r)||k.setAttribute("method","POST"),s!=d.url&&k.setAttribute("action",d.url),d.skipEncodingOverride||r&&!/post/i.test(r)||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(x=setTimeout(function(){w=!0,l(S)},d.timeout));var o=[];try{if(d.extraData)for(var h in d.extraData)d.extraData.hasOwnProperty(h)&&(t.isPlainObject(d.extraData[h])&&d.extraData[h].hasOwnProperty("name")&&d.extraData[h].hasOwnProperty("value")?o.push(t('<input type="hidden" name="'+d.extraData[h].name+'">').val(d.extraData[h].value).appendTo(k)[0]):o.push(t('<input type="hidden" name="'+h+'">').val(d.extraData[h]).appendTo(k)[0]));d.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",l):v.addEventListener("load",l,!1),setTimeout(e,15);try{k.submit()}catch(t){var u=document.createElement("form").submit;u.apply(k)}}finally{k.setAttribute("action",s),i?k.setAttribute("target",i):c.removeAttr("target"),t(o).remove()}}function l(e){if(!_.aborted&&!R){if(O=a(v),O||(n("cannot access response document"),e=T),e===S&&_)return _.abort("timeout"),void C.reject(_,"timeout");if(e==T&&_)return _.abort("server abort"),void C.reject(_,"error","server abort");if(O&&O.location.href!=d.iframeSrc||w){v.detachEvent?v.detachEvent("onload",l):v.removeEventListener("load",l,!1);var i,s="success";try{if(w)throw"timeout";var o="xml"==d.dataType||O.XMLDocument||t.isXMLDoc(O);if(n("isXml="+o),!o&&window.opera&&(null===O.body||!O.body.innerHTML)&&--$)return n("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var r=O.body?O.body:O.documentElement;_.responseText=r?r.innerHTML:null,_.responseXML=O.XMLDocument?O.XMLDocument:O,o&&(d.dataType="xml"),_.getResponseHeader=function(t){return{"content-type":d.dataType}[t.toLowerCase()]},r&&(_.status=Number(r.getAttribute("status"))||_.status,_.statusText=r.getAttribute("statusText")||_.statusText);var h=(d.dataType||"").toLowerCase(),c=/(json|script|text)/.test(h);if(c||d.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)_.responseText=u.value,_.status=Number(u.getAttribute("status"))||_.status,_.statusText=u.getAttribute("statusText")||_.statusText;else if(c){var p=O.getElementsByTagName("pre")[0],g=O.getElementsByTagName("body")[0];p?_.responseText=p.textContent?p.textContent:p.innerText:g&&(_.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==h&&!_.responseXML&&_.responseText&&(_.responseXML=D(_.responseText));try{M=j(_,h,d)}catch(t){s="parsererror",_.error=i=t||s}}catch(t){n("error caught: ",t),s="error",_.error=i=t||s}_.aborted&&(n("upload aborted"),s=null),_.status&&(s=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===s?(d.success&&d.success.call(d.context,M,"success",_),C.resolve(_.responseText,"success",_),f&&t.event.trigger("ajaxSuccess",[_,d])):s&&(void 0===i&&(i=_.statusText),d.error&&d.error.call(d.context,_,s,i),C.reject(_,"error",i),f&&t.event.trigger("ajaxError",[_,d,i])),f&&t.event.trigger("ajaxComplete",[_,d]),f&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,_,s),R=!0,d.timeout&&clearTimeout(x),setTimeout(function(){d.iframeTarget?m.attr("src",d.iframeSrc):m.remove(),_.responseXML=null},100)}}}var h,u,d,f,g,m,v,_,b,y,w,x,k=c[0],C=t.Deferred();if(C.abort=function(t){_.abort(t)},i)for(u=0;u<p.length;u++)h=t(p[u]),s?h.prop("disabled",!1):h.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,e),d.context=d.context||d,g="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=t(d.iframeTarget),y=m.attr2("name"),y?g=y:m.attr2("name",g)):(m=t('<iframe name="'+g+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(t){}m.attr("src",d.iframeSrc),_.error=i,d.error&&d.error.call(d.context,_,i,e),f&&t.event.trigger("ajaxError",[_,d,i]),d.complete&&d.complete.call(d.context,_,i)}},f=d.global,f&&0==t.active++&&t.event.trigger("ajaxStart"),f&&t.event.trigger("ajaxSend",[_,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,_,d))return d.global&&t.active--,C.reject(),C;if(_.aborted)return C.reject(),C;(b=k.clk)&&(y=b.name)&&!b.disabled&&(d.extraData=d.extraData||{},d.extraData[y]=b.value,"image"==b.type&&(d.extraData[y+".x"]=k.clk_x,d.extraData[y+".y"]=k.clk_y));var S=1,T=2,E=t("meta[name=csrf-token]").attr("content"),A=t("meta[name=csrf-param]").attr("content");A&&E&&(d.extraData=d.extraData||{},d.extraData[A]=E),d.forceSync?o():setTimeout(o,10);var M,O,R,$=50,D=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},P=t.parseJSON||function(t){return window.eval("("+t+")")},j=function(e,i,n){var a=e.getResponseHeader("content-type")||"",s="xml"===i||!i&&a.indexOf("xml")>=0,o=s?e.responseXML:e.responseText;return s&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&a.indexOf("json")>=0?o=P(o):("script"===i||!i&&a.indexOf("javascript")>=0)&&t.globalEval(o)),o};return C}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var r,l,h,c=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),r=e.type||this.attr2("method"),l=e.url||this.attr2("action"),h="string"==typeof l?t.trim(l):"",h=h||window.location.href||"",h&&(h=(h.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:h,success:t.ajaxSettings.success,type:r||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var u={};if(this.trigger("form-pre-serialize",[this,e,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=e.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var f,p=[],g=this.formToArray(e.semantic,p);if(e.data&&(e.extraData=e.data,f=t.param(e.data,d)),e.beforeSubmit&&!1===e.beforeSubmit(g,this,e))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,e,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=t.param(g,d);f&&(m=m?m+"&"+f:f),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+m,e.data=null):e.data=m;var v=[];if(e.resetForm&&v.push(function(){c.resetForm()}),e.clearForm&&v.push(function(){c.clearForm(e.includeHidden)}),!e.dataType&&e.target){var _=e.success||function(){};v.push(function(i){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](i).each(_,arguments)})}else e.success&&v.push(e.success);if(e.success=function(t,i,n){for(var a=e.context||this,s=0,o=v.length;s<o;s++)v[s].apply(a,[t,i,n||c,c])},e.error){var b=e.error;e.error=function(t,i,n){var a=e.context||this;b.apply(a,[t,i,n,c])}}if(e.complete){var y=e.complete;e.complete=function(t,i){var n=e.context||this;y.apply(n,[t,i,c])}}var w=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),x=w.length>0,k="multipart/form-data",C=c.attr("enctype")==k||c.attr("encoding")==k,S=a.fileapi&&a.formdata;n("fileAPI :"+S);var T,E=(x||C)&&!S;!1!==e.iframe&&(e.iframe||E)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){T=o(g)}):T=o(g):T=(x||C)&&S?function(n){for(var a=new FormData,s=0;s<n.length;s++)a.append(n[s].name,n[s].value);if(e.extraData){var o=i(e.extraData);for(s=0;s<o.length;s++)o[s]&&a.append(o[s][0],o[s][1])}e.data=null;var l=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});e.uploadProgress&&(l.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(t){var i=0,n=t.loaded||t.position,a=t.total;t.lengthComputable&&(i=Math.ceil(n/a*100)),e.uploadProgress(t,n,a,i)},!1),i}),l.data=null;var h=l.beforeSend;return l.beforeSend=function(t,i){e.formData?i.data=e.formData:i.data=a,h&&h.call(this,t,i)},t.ajax(l)}(g):t.ajax(e),c.removeData("jqxhr").data("jqxhr",T);for(var A=0;A<p.length;A++)p[A]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(a){if(a=a||{},a.delegation=a.delegation&&t.isFunction(t.fn.on),!a.delegation&&0===this.length){var s={s:this.selector,c:this.context};return!t.isReady&&s.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(s.s,s.c).ajaxForm(a)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return a.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,a,e).on("click.form-plugin",this.selector,a,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,e).bind("click.form-plugin",a,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i){var n=[];if(0===this.length)return n;var s=this[0],o=e?s.getElementsByTagName("*"):s.elements;if(!o)return n;var r,l,h,c,u,d,f;for(r=0,d=o.length;r<d;r++)if(u=o[r],(h=u.name)&&!u.disabled)if(e&&s.clk&&"image"==u.type)s.clk==u&&(n.push({name:h,value:t(u).val(),type:u.type}),n.push({name:h+".x",value:s.clk_x},{name:h+".y",value:s.clk_y}));else if((c=t.fieldValue(u,!0))&&c.constructor==Array)for(i&&i.push(u),l=0,f=c.length;l<f;l++)n.push({name:h,value:c[l]});else if(a.fileapi&&"file"==u.type){i&&i.push(u);var p=u.files;if(p.length)for(l=0;l<p.length;l++)n.push({name:h,value:p[l],type:u.type});else n.push({name:h,value:"",type:u.type})}else null!==c&&void 0!==c&&(i&&i.push(u),n.push({name:h,value:c,type:u.type,required:u.required}));if(!e&&s.clk){var g=t(s.clk),m=g[0];h=m.name,h&&!m.disabled&&"image"==m.type&&(n.push({name:h,value:g.val()}),n.push({name:h+".x",value:s.clk_x},{name:h+".y",value:s.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var n=this.name;if(n){var a=t.fieldValue(this,e);if(a&&a.constructor==Array)for(var s=0,o=a.length;s<o;s++)i.push({name:n,value:a[s]});else null!==a&&void 0!==a&&i.push({name:this.name,value:a})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],n=0,a=this.length;n<a;n++){var s=this[n],o=t.fieldValue(s,e);null===o||void 0===o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(i,o):i.push(o))}return i},t.fieldValue=function(e,i){var n=e.name,a=e.type,s=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==s&&-1==e.selectedIndex))return null;if("select"==s){var o=e.selectedIndex;if(o<0)return null;for(var r=[],l=e.options,h="select-one"==a,c=h?o+1:l.length,u=h?o:0;u<c;u++){var d=l[u];if(d.selected){var f=d.value;if(f||(f=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),h)return f;r.push(f)}}return r}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,a=this.tagName.toLowerCase();i.test(n)||"textarea"==a?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}(void 0!==t?t:window.Zepto)}).call(e,i(0))},function(t,e,i){(function(t,e){t&&function(t){if(!t.support.opacity&&!t.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}t.fn.rating=function(e){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var i=arguments;return this.each(function(){t.fn.rating.apply(t(this),i)})}return t.fn.rating[arguments[0]].apply(this,t.makeArray(arguments).slice(1)||[]),this}var e=t.extend({},t.fn.rating.options,e||{});return t.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var i,n=t(this),a=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),s=t(this.form||document.body),o=s.data("rating");o&&o.call==t.fn.rating.calls||(o={count:0,call:t.fn.rating.calls});var r=o[a]||s.data("rating"+a);r&&(i=r.data("rating")),r&&i?i.count++:(i=t.extend({},e||{},(t.metadata?n.metadata():t.meta?n.data():null)||{},{count:0,stars:[],inputs:[]}),i.serial=o.count++,r=t('<span class="star-rating-control"/>'),n.before(r),r.addClass("rating-to-be-drawn"),(n.attr("disabled")||n.hasClass("disabled"))&&(i.readOnly=!0),n.hasClass("required")&&(i.required=!0),r.append(i.cancel=t('<div class="rating-cancel"><a title="'+i.cancel+'">'+i.cancelValue+"</a></div>").on("mouseover",function(){t(this).rating("drain"),t(this).addClass("star-rating-hover")}).on("mouseout",function(){t(this).rating("draw"),t(this).removeClass("star-rating-hover")}).on("click",function(){t(this).rating("select")}).data("rating",i)));var l=t('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+i.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(r.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),i.half&&(i.split=2),"number"==typeof i.split&&i.split>0){var h=(t.fn.width?l.width():0)||i.starWidth,c=i.count%i.split,u=Math.floor(h/i.split);l.width(u).find("a").css({"margin-left":"-"+c*u+"px"})}i.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",function(){t(this).rating("fill"),t(this).rating("focus")}).on("mouseout",function(){t(this).rating("draw"),t(this).rating("blur")}).on("click",function(){t(this).rating("select")}),this.checked&&(i.current=l),"A"==this.nodeName&&t(this).hasClass("selected")&&(i.current=l),n.hide(),n.on("change.rating",function(e){if(e.selfTriggered)return!1;t(this).rating("select")}),l.data("rating.input",n.data("rating.star",l)),i.stars[i.stars.length]=l[0],i.inputs[i.inputs.length]=n[0],i.rater=o[a]=r,i.context=s,n.data("rating",i),r.data("rating",i),l.data("rating",i),s.data("rating",o),s.data("rating"+a,r)}),t(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},t.extend(t.fn.rating,{calls:0,focus:function(){var e=this.data("rating");if(!e)return this;if(!e.focus)return this;var i=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);e.focus&&e.focus.apply(i[0],[i.val(),t("a",i.data("rating.star"))[0]])},blur:function(){var e=this.data("rating");if(!e)return this;if(!e.blur)return this;var i=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);e.blur&&e.blur.apply(i[0],[i.val(),t("a",i.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");if(!t)return this;t.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+t.serial).addClass("star-rating-hover"))},drain:function(){var t=this.data("rating");if(!t)return this;t.readOnly||t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var e=this.data("rating");if(!e)return this;this.rating("drain");var i=t(e.current),n=i.length?i.prevAll().addBack().filter(".rater-"+e.serial):null;n&&n.addClass("star-rating-on"),e.cancel[e.readOnly||e.required?"hide":"show"](),this.siblings()[e.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(e,i){var n=this.data("rating");if(!n)return this;if(!n.readOnly){if(n.current=null,void 0!==e||this.length>1){if("number"==typeof e)return t(n.stars[e]).rating("select",void 0,i);if("string"==typeof e)return t.each(n.stars,function(){t(this).data("rating.input").val()==e&&t(this).rating("select",void 0,i)}),this}else n.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+n.serial)?this:null;this.data("rating",n),this.rating("draw");var a=t(n.current?n.current.data("rating.input"):null),s=t(n.inputs).filter(":checked");return t(n.inputs).not(a).prop("checked",!1),a.prop("checked",!0),t(a.length?a:s).trigger({type:"change",selfTriggered:!0}),(i||void 0==i)&&n.callback&&n.callback.apply(a[0],[a.val(),t("a",n.current)[0]]),this}},readOnly:function(e,i){var n=this.data("rating");if(!n)return this;n.readOnly=!(!e&&void 0!=e),i?t(n.inputs).attr("disabled","disabled"):t(n.inputs).removeAttr("disabled"),this.data("rating",n),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),t.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},t(function(){t("input[type=radio].star").rating()})}(e)}).call(e,i(0),i(0))},function(t,e,i){(function(t){!function(t){void 0===t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),n=-1,a=this.length;++n<a&&(i.context=i[0]=this[n])&&!1!==e.call(i[0],n,i););return this}})}(t),function(t,e){"use strict";function i(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function n(t){function e(t){return H[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function a(t,e){for(var i=0,n=e.length;i<n;i+=1)if(o(t,e[i]))return i;return-1}function s(){var e=t(z);e.appendTo("body");var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}function o(t,i){return t===i||t!==e&&i!==e&&(null!==t&&null!==i&&(t.constructor===String?t+""==i+"":i.constructor===String&&i+""==t+""))}function r(e,i){var n,a,s;if(null===e||e.length<1)return[];for(n=e.split(i),a=0,s=n.length;a<s;a+=1)n[a]=t.trim(n[a]);return n}function l(t){return t.outerWidth(!1)-t.width()}function h(i){var n="keyup-change-value";i.on("keydown",function(){t.data(i,n)===e&&t.data(i,n,i.val())}),i.on("keyup",function(){var a=t.data(i,n);a!==e&&i.val()!==a&&(t.removeData(i,n),i.trigger("keyup-change"))})}function c(i){i.on("mousemove",function(i){var n=L;n!==e&&n.x===i.pageX&&n.y===i.pageY||t(i.target).trigger("mousemove-filtered",i)})}function u(t,i,n){n=n||e;var a;return function(){var e=arguments;window.clearTimeout(a),a=window.setTimeout(function(){i.apply(n,e)},t)}}function d(t,e){var i=u(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){a(t.target,e.get())>=0&&i(t)})}function f(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],n=t.val().length;t.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function p(e){e=t(e)[0];var i=0,n=0;if("selectionStart"in e)i=e.selectionStart,n=e.selectionEnd-i;else if("selection"in document){e.focus();var a=document.selection.createRange();n=document.selection.createRange().text.length,a.moveStart("character",-e.value.length),i=a.text.length-n}return{offset:i,length:n}}function g(t){t.preventDefault(),t.stopPropagation()}function m(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!j){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);j=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),j.attr("class","select2-sizer"),t("body").append(j)}return j.text(e.val()),j.width()}function _(e,i,n){var a,s,o=[];a=t.trim(e.attr("class")),a&&(a=""+a,t(a.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),a=t.trim(i.attr("class")),a&&(a=""+a,t(a.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(s=n(this))&&o.push(s)})),e.attr("class",o.join(" "))}function b(t,e,i,a){var s=n(t.toUpperCase()).indexOf(n(e.toUpperCase())),o=e.length;if(s<0)return void i.push(a(t));i.push(a(t.substring(0,s))),i.push("<span class='select2-match'>"),i.push(a(t.substring(s,s+o))),i.push("</span>"),i.push(a(t.substring(s+o,t.length)))}function y(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function w(i){var n,a=null,s=i.quietMillis||100,o=i.url,r=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,s=o,h=i.transport||t.fn.select2.ajaxDefaults.transport,c={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,c);n=n?n.call(r,l.term,l.page,l.context):null,s="function"==typeof s?s.call(r,l.term,l.page,l.context):s,a&&"function"==typeof a.abort&&a.abort(),i.params&&(t.isFunction(i.params)?t.extend(u,i.params.call(r)):t.extend(u,i.params)),t.extend(u,{url:s,dataType:i.dataType,data:n,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){var n={hasError:!0,jqXHR:t,textStatus:e,errorThrown:i};l.callback(n)}}),a=h.call(r,u)},s)}}function x(e){var i,n,a=e,s=function(t){return""+t.text};t.isArray(a)&&(n=a,a={results:n}),!1===t.isFunction(a)&&(n=a,a=function(){return n});var o=a();return o.text&&(s=o.text,t.isFunction(s)||(i=o.text,s=function(t){return t[i]})),function(e){var i,n=e.term,o={results:[]};if(""===n)return void e.callback(a());i=function(a,o){var r,l;if(a=a[0],a.children){r={};for(l in a)a.hasOwnProperty(l)&&(r[l]=a[l]);r.children=[],t(a.children).each2(function(t,e){i(e,r.children)}),(r.children.length||e.matcher(n,s(r),a))&&o.push(r)}else e.matcher(n,s(a),a)&&o.push(a)},t(a().results).each2(function(t,e){i(e,o.results)}),e.callback(o)}}function k(i){var n=t.isFunction(i);return function(a){var s=a.term,o={results:[]},r=n?i(a):i;t.isArray(r)&&(t(r).each(function(){var t=this.text!==e,i=t?this.text:this;(""===s||a.matcher(s,i))&&o.results.push(t?this:{id:this,text:this})}),a.callback(o))}}function C(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function S(e,i){if(t.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return e.apply(i,n)}return e}function T(e){var i=0;return t.each(e,function(t,e){e.children?i+=T(e.children):i++}),i}function E(t,i,n,a){var s,r,l,h,c,u=t,d=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return e;for(;;){for(r=-1,l=0,h=a.tokenSeparators.length;l<h&&(c=a.tokenSeparators[l],!((r=t.indexOf(c))>=0));l++);if(r<0)break;if(s=t.substring(0,r),t=t.substring(r+c.length),s.length>0&&(s=a.createSearchChoice.call(this,s,i))!==e&&null!==s&&a.id(s)!==e&&null!==a.id(s)){for(d=!1,l=0,h=i.length;l<h;l++)if(o(a.id(s),a.id(i[l]))){d=!0;break}d||n(s)}}return u!==t?t:void 0}function A(){var e=this;t.each(arguments,function(t,i){e[i].remove(),e[i]=null})}function M(e,i){var n=function(){};return n.prototype=new e,n.prototype.constructor=n,n.prototype.parent=e.prototype,n.prototype=t.extend(n.prototype,i),n}if(window.Select2===e){var O,R,$,D,P,j,I,N,L={x:0,y:0},O={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case O.LEFT:case O.RIGHT:case O.UP:case O.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case O.SHIFT:case O.CTRL:case O.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&t<=123}},z="<div class='select2-measure-scrollbar'></div>",H={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};I=t(document),P=function(){var t=1;return function(){return t++}}(),R=M(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var n,a;this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+P()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t("body"),_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(S(i.containerCss,this.opts.element)),this.container.addClass(S(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",g),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",g),this.results=n=this.container.find(".select2-results"),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",g),c(this.results),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&n.mousewheel(function(t,e,i,a){var s=n.scrollTop();a>0&&s-a<=0?(n.scrollTop(0),g(t)):a<0&&n.get(0).scrollHeight-n.scrollTop()+a<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),g(t))}),h(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",function(){a.addClass("select2-focused")}),a.on("blur",function(){a.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var o=i.element.prop("disabled");o===e&&(o=!1),this.enable(!o);var r=i.element.prop("readonly");r===e&&(r=!1),this.readonly(r),N=N||s(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),n=this;this.close(),t.length&&t[0].detachEvent&&t.each(function(){this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),A.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:o(t.attr("locked"),"locked")||o(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var n,a,s,l,h=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=a=i.element),a&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(n,a,s){var o,r=this.opts.id,l=this.liveRegion;(o=function(n,a,c){var u,d,f,p,g,m,v,_,b,y;n=i.sortResults(n,a,s);var w=[];for(u=0,d=n.length;u<d;u+=1)f=n[u],g=!0===f.disabled,p=!g&&r(f)!==e,m=f.children&&f.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+c),v.addClass("select2-result"),v.addClass(p?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(h.opts.formatResultCssClass(f)),v.attr("role","presentation"),_=t(document.createElement("div")),_.addClass("select2-result-label"),_.attr("id","select2-result-label-"+P()),_.attr("role","option"),y=i.formatResult(f,_,s,h.opts.escapeMarkup),y!==e&&(_.html(y),v.append(_)),m&&(b=t("<ul></ul>"),b.addClass("select2-result-sub"),o(f.children,b,c+1),v.append(b)),v.data("select2-data",f),w.push(v[0]);a.append(w),l.text(i.formatMatches(n.length))})(a,n,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(s=i.id,i.id=function(t){return t[s]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(a?(i.query=this.bind(function(t){var i,a,s,o={results:[],more:!1},r=t.term;s=function(e,i){var n;e.is("option")?t.matcher(r,e.text(),e)&&i.push(h.optionToData(e)):e.is("optgroup")&&(n=h.optionToData(e),e.children().each2(function(t,e){s(e,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==e&&i.length>0&&(a=this.getPlaceholderOption())&&(i=i.not(a)),i.each2(function(t,e){s(e,o.results)}),t.callback(o)}),i.id=function(t){return t.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=w.call(i.element,i.ajax)):"data"in i?i.query=x(i.data):"tags"in i&&(i.query=k(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,n){var a=[];t(r(e.val(),i.separator)).each(function(){var e={id:this,text:this},n=i.tags;t.isFunction(n)&&(n=n()),t(n).each(function(){if(o(this.id,e.id))return e=this,!1}),a.push(e)}),n(a)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,a=this;n.on("change.select2",this.bind(function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var t=n.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=n.prop("readonly");i===e&&(i=!1),this.readonly(i),_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass,this.opts.element)),_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass,this.opts.element))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",a._sync)}),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,a._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,n,a,s,o=this.dropdown,r=this.container.offset(),l=this.container.outerHeight(!1),h=this.container.outerWidth(!1),c=o.outerHeight(!1),u=t(window),d=u.width(),f=u.height(),p=u.scrollLeft()+d,g=u.scrollTop()+f,m=r.top+l,v=r.left,_=m+c<=g,b=r.top-c>=u.scrollTop(),y=o.outerWidth(!1),w=v+y<=p,x=o.hasClass("select2-drop-above");x?(i=!0,!b&&_&&(n=!0,i=!1)):(i=!1,!_&&b&&(n=!0,i=!0)),n&&(o.hide(),r=this.container.offset(),l=this.container.outerHeight(!1),h=this.container.outerWidth(!1),c=o.outerHeight(!1),p=u.scrollLeft()+d,g=u.scrollTop()+f,m=r.top+l,v=r.left,y=o.outerWidth(!1),w=v+y<=p,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(s=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),y=o.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:N.width),y>h?h=y:y=h,c=o.outerHeight(!1),w=v+y<=p):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),m-=e.top,v-=e.left),w||(v=r.left+this.container.outerWidth(!1)-y),a={left:v,width:h},i?(a.top=r.top-c,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=m,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=t.extend(a,S(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),I.on("mousemove.select2Event",function(t){L.x=t.pageX,L.y=t.pageY}),!0)},opening:function(){var e,n=this.containerEventName,a="scroll."+n,s="resize."+n,o="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0==e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(n){i(e);var a,s=t("#select2-drop");s.length>0&&(a=s.data("select2"),a.opts.selectOnBlur&&a.selectHighlighted({noFocus:!0}),a.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){t(this).on(s+" "+a+" "+o,function(t){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,n="resize."+e,a="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(n).off(a)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),I.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,n,a,s,o,r,l,h=this.results;if(!((i=this.highlight())<0)){if(0==i)return void h.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),n=t(e[i]),l=(n.offset()||{}).top||0,a=l+n.outerHeight(!0),i===e.length-1&&(r=h.find("li.select2-more-results"),r.length>0&&(a=r.offset().top+r.outerHeight(!0))),s=h.offset().top+h.outerHeight(!0),a>s&&h.scrollTop(h.scrollTop()+(a-s)),o=l-h.offset().top,o<0&&"none"!=n.css("display")&&h.scrollTop(h.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=e;var a=t(i[n]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var i,n,s=this.findHighlightableChoices();if(0===arguments.length)return a(s.filter(".select2-highlighted")[0],s.get());e>=s.length&&(e=s.length-1),e<0&&(e=0),this.removeHighlight(),i=t(s[e]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),(n=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,a=this.search.val(),s=this.context;0!==e.length&&e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(o){n.opened()&&(n.opts.populateResults.call(this,t,o.results,{term:a,page:i,context:s}),n.postprocessResults(o,!1,!1),!0===o.more?(e.detach().appendTo(t).text(S(n.opts.formatLoadMore,n.opts.element,i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):e.remove(),n.positionDropdown(),n.resultsPage=i,n.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))})}))},tokenize:function(){},updateResults:function(i){function n(){h.removeClass("select2-active"),d.positionDropdown(),c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.liveRegion.text(c.text()):d.liveRegion.text(d.opts.formatMatches(c.find(".select2-result-selectable").length))}function a(t){c.html(t),n()}var s,r,l,h=this.search,c=this.results,u=this.opts,d=this,f=h.val(),p=t.data(this.container,"select2-last-term");if((!0===i||!p||!o(f,p))&&(t.data(this.container,"select2-last-term",f),!0===i||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(s=this.data(),t.isArray(s)&&s.length>=g&&C(u.formatSelectionTooBig,"formatSelectionTooBig")))return void a("<li class='select2-selection-limit'>"+S(u.formatSelectionTooBig,u.element,g)+"</li>");if(h.val().length<u.minimumInputLength)return a(C(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+S(u.formatInputTooShort,u.element,h.val(),u.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&h.val().length>u.maximumInputLength)return void a(C(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+S(u.formatInputTooLong,u.element,h.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+S(u.formatSearching,u.element)+"</li>"),h.addClass("select2-active"),this.removeHighlight(),r=this.tokenize(),r!=e&&null!=r&&h.val(r),this.resultsPage=1,u.query({element:u.element,term:h.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(s){var r;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(s.hasError!==e&&C(u.formatAjaxError,"formatAjaxError"))return void a("<li class='select2-ajax-error'>"+S(u.formatAjaxError,u.element,s.jqXHR,s.textStatus,s.errorThrown)+"</li>");if(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==h.val()&&(r=this.opts.createSearchChoice.call(d,h.val(),s.results))!==e&&null!==r&&d.id(r)!==e&&null!==d.id(r)&&0===t(s.results).filter(function(){return o(d.id(this),d.id(r))}).length&&this.opts.createSearchChoicePosition(s.results,r),0===s.results.length&&C(u.formatNoMatches,"formatNoMatches"))return void a("<li class='select2-no-results'>"+S(u.formatNoMatches,u.element,h.val())+"</li>");c.empty(),d.opts.populateResults.call(this,c,s.results,{term:h.val(),page:this.resultsPage,context:null}),!0===s.more&&C(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+u.escapeMarkup(S(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(s,i),n(),this.opts.element.trigger({type:"select2-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){f(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,n,a,s,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((i=this.opts.element.attr("style"))!==e)for(n=i.split(";"),s=0,o=n.length;s<o;s+=1)if(r=n[s].replace(/\s/g,""),null!==(a=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&a.length>=1)return a[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),$=M(R,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(a=this.search.val().length,i.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"selection","focusser")},initContainer:function(){var e,n,a=this.container,s=this.dropdown,o=P();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=a.find(".select2-choice"),this.focusser=a.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),n=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===O.PAGE_UP||t.which===O.PAGE_DOWN)return void g(t);switch(t.which){case O.UP:case O.DOWN:return this.moveHighlight(t.which===O.UP?-1:1),void g(t);case O.ENTER:return this.selectHighlighted(),void g(t);case O.TAB:return void this.selectHighlighted({noFocus:!0});case O.ESC:return this.cancel(t),void g(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==O.TAB&&!O.isControl(t)&&!O.isFunctionKey(t)&&t.which!==O.ESC){if(!1===this.opts.openOnEnter&&t.which===O.ENTER)return void g(t);if(t.which==O.DOWN||t.which==O.UP||t.which==O.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void g(t)}return t.which==O.DELETE||t.which==O.BACKSPACE?(this.opts.allowClear&&this.clear(),void g(t)):void 0}})),h(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),m(t),this.close(),this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(n){i(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),g(n)})),s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){g(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var n=t.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(i,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(n))}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var a=i.val(),s=null;e.query({matcher:function(t,i,n){var r=o(a,e.id(n));return r&&(s=n),r},callback:t.isFunction(n)?function(){n(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var n=0,a=this;if(this.findHighlightableChoices().each2(function(t,e){if(o(a.id(e.data("select2-data")),a.opts.element.val()))return n=t,!1}),!1!==i&&(!0===e&&n>=0?this.highlight(n):this.highlight(0)),!0===e){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(T(t.results)>=s)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(i,this.id(t))||this.triggerChange({added:t,removed:n})}},updateSelection:function(t){var i,n,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),a.empty(),null!==t&&(i=this.opts.formatSelection(t,a,this.opts.escapeMarkup)),i!==e&&a.append(i),n=this.opts.formatSelectionCssClass(t,a),n!==e&&a.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,n=null,a=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return n=a.optionToData(e),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:s});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){a.opts.element.val(t?a.id(t):""),a.updateSelection(t),a.setPlaceholder(),i&&a.triggerChange({added:t,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,n=!1;if(0===arguments.length)return i=this.selection.data("select2-data"),i==e&&(i=null),i;arguments.length>1&&(n=arguments[1]),t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n)}}),D=M(R,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){n.push(i.optionToData(e))}),e(n)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var a=r(i.val(),e.separator),s=[];e.query({matcher:function(i,n,r){var l=t.grep(a,function(t){return o(t,e.id(r))}).length;return l&&s.push(r),l},callback:t.isFunction(n)?function(){for(var t=[],i=0;i<a.length;i++)for(var r=a[i],l=0;l<s.length;l++){var h=s[l];if(o(r,e.id(h))){t.push(h),s.splice(l,1);break}}n(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){n.search[0].focus(),n.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+P()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),a=i.next(".select2-search-choice:not(.select2-locked)"),s=p(this.search);if(i.length&&(t.which==O.LEFT||t.which==O.RIGHT||t.which==O.BACKSPACE||t.which==O.DELETE||t.which==O.ENTER)){var o=i;return t.which==O.LEFT&&n.length?o=n:t.which==O.RIGHT?o=a.length?a:null:t.which===O.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),o=n.length?n:a):t.which==O.DELETE?this.unselect(i.first())&&(this.search.width(10),o=a.length?a:null):t.which==O.ENTER&&(o=null),this.selectChoice(o),g(t),void(o&&o.length||this.open())}if((t.which===O.BACKSPACE&&1==this.keydowns||t.which==O.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void g(t);if(this.selectChoice(null),this.opened())switch(t.which){case O.UP:case O.DOWN:return this.moveHighlight(t.which===O.UP?-1:1),void g(t);case O.ENTER:return this.selectHighlighted(),void g(t);case O.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case O.ESC:return this.cancel(t),void g(t)}if(t.which!==O.TAB&&!O.isControl(t)&&!O.isFunctionKey(t)&&t.which!==O.BACKSPACE&&t.which!==O.ESC){if(t.which===O.ENTER){if(!1===this.opts.openOnEnter)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),t.which!==O.PAGE_UP&&t.which!==O.PAGE_DOWN||g(t),t.which===O.ENTER&&g(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],n=[],s=this;t(e).each(function(){a(s.id(this),i)<0&&(i.push(s.id(this)),n.push(this))}),e=n,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,i){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,a,s=!i.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?o:r,h=this.id(i),c=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=e&&l.find("div").replaceWith("<div>"+n+"</div>"),a=this.opts.formatSelectionCssClass(i,l.find("div")),a!=e&&l.addClass(a),s&&l.find(".select2-search-choice-close").on("mousedown",g).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),g(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),c.push(h),this.setVal(c)},unselect:function(e){var i,n,s=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var o=t.Event("select2-removing");if(o.val=this.id(i),o.choice=i,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(n=a(this.id(i),s))>=0;)s.splice(n,1),this.setVal(s),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var n=this.getVal(),s=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),r=this;s.each2(function(t,e){a(r.id(e.data("select2-data")),n)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&r.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&C(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+S(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,i,n,a,s=l(this.search);t=v(this.search)+10,e=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,a=i-(e-n)-s,a<t&&(a=i-s),a<40&&(a=i-s),a<=0&&(a=t),this.search.width(Math.floor(a))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),r(t,this.opts.separator))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){a(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var n=0;n<t.length;n++)o(this.opts.id(e[i]),this.opts.id(t[n]))&&(e.splice(i,1),i>0&&i--,t.splice(n,1),n--);return{added:e,removed:t}},val:function(i,n){var a,s=this;if(0===arguments.length)return this.getVal();if(a=this.data(),a.length||(a=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t.map(e,s.id);s.setVal(i),s.updateSelection(e),s.clearSearch(),n&&s.triggerChange(s.buildChangeDetails(a,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var n,a,s=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get();a=this.data(),e||(e=[]),n=t.map(e,function(t){return s.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),t.fn.select2=function(){var i,n,s,o,r,l=Array.prototype.slice.call(arguments,0),h=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:t.extend({},l[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?r=i.element.prop("multiple"):(r=i.multiple||!1,"tags"in i&&(i.multiple=r=!0)),n=r?new window.Select2.class.multi:new window.Select2.class.single,n.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(a(l[0],h)<0)throw"Unknown method: "+l[0];if(o=e,(n=t(this).data("select2"))===e)return;if(s=l[0],"container"===s?o=n.container:"dropdown"===s?o=n.dropdown:(d[s]&&(s=d[s]),o=n[s].apply(n,l.slice(1))),a(l[0],c)>=0||a(l[0],u)>=0&&1==l.length)return!1}}),o===e?this:o},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var a=[];return b(t.text,i.term,a,n),a.join("")},formatSelection:function(t,i,n){return t?n(t.text):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return n(""+e).toUpperCase().indexOf(n(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:E,escapeMarkup:y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results"},formatSearching:function(){return"Searching"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:k},util:{debounce:u,markMatch:b,escapeMarkup:y,stripDiacritics:n},class:{abstract:R,single:$,multi:D}}}}(t)}).call(e,i(0))},function(t,e,i){(function(t){/*! jQuery UI - v1.9.1 - 2012-10-29
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
!function(t,e){function i(e,i){var a,s,o,r=e.nodeName.toLowerCase();return"area"===r?(a=e.parentNode,s=a.name,!(!e.href||!s||"map"!==a.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+s+"]")[0])&&n(o))):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var a=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,a,s=t(this[0]);s.length&&s[0]!==document;){if(("absolute"===(n=s.css("position"))||"relative"===n||"fixed"===n)&&(a=parseInt(s.css("zIndex"),10),!isNaN(a)&&0!==a))return a;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function a(e,i,n,a){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?r["inner"+n].call(this):this.each(function(){t(this).css(o,a(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?r["outer"+n].call(this,e):this.each(function(){t(this).css(o,a(this,e,!0,i)+"px")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),a=isNaN(n);return(a||n>=0)&&i(e,!a)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=!!e.length,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var a,s=t.ui[e].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(t,e,i){var n,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<a.length;n++)t.options[a[n][0]]&&a[n][1].apply(t.element,i)}},contains:t.contains,hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return e[n]>0||(e[n]=1,a=e[n]>0,e[n]=0,a)},isOverAxis:function(t,e,i){return t>e&&t<e+i},isOver:function(e,i,n,a,s,o){return t.ui.isOverAxis(e,n,s)&&t.ui.isOverAxis(i,a,o)}}))}(t),function(t,e){var i=0,n=Array.prototype.slice,a=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}a(e)},t.widget=function(e,i,n){var a,s,o,r,l=e.split(".")[0];e=e.split(".")[1],a=l+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[l]=t[l]||{},s=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,a){t.isFunction(a)&&(n[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},n=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=n,e=a.apply(this,arguments),this._super=i,this._superApply=s,e}}())}),o.prototype=t.widget.extend(r,{widgetEventPrefix:r.widgetEventPrefix||e},n,{constructor:o,namespace:l,widgetName:e,widgetBaseClass:a,widgetFullName:a}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var a,s,o=n.call(arguments,1),r=0,l=o.length;r<l;r++)for(a in o[r])s=o[r][a],o[r].hasOwnProperty(a)&&s!==e&&(t.isPlainObject(s)?i[a]=t.isPlainObject(i[a])?t.widget.extend({},i[a],s):t.widget.extend({},s):i[a]=s);return i},t.widget.bridge=function(i,a){var s=a.prototype.widgetFullName;t.fn[i]=function(o){var r="string"==typeof o,l=n.call(arguments,1),h=this;return o=!r&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var n,a=t.data(this,s);return a?t.isFunction(a[o])&&"_"!==o.charAt(0)?(n=a[o].apply(a,l),n!==a&&n!==e?(h=n&&n.jquery?h.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():new a(o,this)}),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetName,this),t.data(n,this.widgetFullName,this),this._on(this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var a,s,o,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(s=r[i]=t.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)s[a[o]]=s[a[o]]||{},s=s[a[o]];if(i=a.pop(),n===e)return s[i]===e?null:s[i];s[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i){var n,a=this;i?(e=n=t(e),this.bindings=this.bindings.add(e)):(i=e,e=this.element,n=this.widget()),t.each(i,function(i,s){function o(){if(!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?a[s]:s).apply(a,arguments)}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||t.guid++);var r=i.match(/^(\w+)\s*(.*)$/),l=r[1]+a.eventNamespace,h=r[2];h?n.delegate(h,l,o):e.bind(l,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var a,s,o=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent,s)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?i:a.effect||i:e;a=a||{},"number"==typeof a&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&t.effects&&(t.effects.effect[r]||!1!==t.uiBackCompat&&t.effects[r])?n[e](a):r!==e&&n[r]?n[r](a.duration,a.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}}),!1!==t.uiBackCompat&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}(t),function(t,e){var i=!1;t(document).mouseup(function(t){i=!1}),t.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,a=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(a&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(t),function(e,i){function n(t,e,i){return[parseInt(t[0],10)*(f.test(t[0])?e/100:1),parseInt(t[1],10)*(f.test(t[1])?i/100:1)]}function a(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var s,o=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,d=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(s!==i)return s;var t,n,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return e("body").append(a),t=o.offsetWidth,a.css("overflow","scroll"),n=o.offsetWidth,t===n&&(n=a[0].clientWidth),a.remove(),s=t-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var i,s,f,g,m,v=e(t.of),_=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(_),y=v[0],w=(t.collision||"flip").split(" "),x={};return 9===y.nodeType?(s=v.width(),f=v.height(),g={top:0,left:0}):e.isWindow(y)?(s=v.width(),f=v.height(),g={top:v.scrollTop(),left:v.scrollLeft()}):y.preventDefault?(t.at="left top",s=f=0,g={top:y.pageY,left:y.pageX}):(s=v.outerWidth(),f=v.outerHeight(),g=v.offset()),m=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=h.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=h.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?m.left+=s:"center"===t.at[0]&&(m.left+=s/2),"bottom"===t.at[1]?m.top+=f:"center"===t.at[1]&&(m.top+=f/2),i=n(x.at,s,f),m.left+=i[0],m.top+=i[1],this.each(function(){var h,c,u=e(this),d=u.outerWidth(),p=u.outerHeight(),y=a(this,"marginLeft"),k=a(this,"marginTop"),C=d+y+a(this,"marginRight")+b.width,S=p+k+a(this,"marginBottom")+b.height,T=e.extend({},m),E=n(x.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?T.left-=d:"center"===t.my[0]&&(T.left-=d/2),"bottom"===t.my[1]?T.top-=p:"center"===t.my[1]&&(T.top-=p/2),T.left+=E[0],T.top+=E[1],e.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),h={marginLeft:y,marginTop:k},e.each(["left","top"],function(n,a){e.ui.position[w[n]]&&e.ui.position[w[n]][a](T,{targetWidth:s,targetHeight:f,elemWidth:d,elemHeight:p,collisionPosition:h,collisionWidth:C,collisionHeight:S,offset:[i[0]+E[0],i[1]+E[1]],my:t.my,at:t.at,within:_,elem:u})}),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var i=g.left-T.left,n=i+s-d,a=g.top-T.top,l=a+f-p,h={target:{element:v,left:g.left,top:g.top,width:s,height:f},element:{element:u,left:T.left,top:T.top,width:d,height:p},horizontal:n<0?"left":i>0?"right":"center",vertical:l<0?"top":a>0?"bottom":"middle"};s<d&&r(i+n)<s&&(h.horizontal="center"),f<p&&r(a+l)<f&&(h.vertical="middle"),o(r(i),r(n))>o(r(a),r(l))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),u.offset(e.extend(T,{using:c}))})},e.ui.position={fit:{left:function(t,e){var i,n=e.within,a=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,r=t.left-e.collisionPosition.marginLeft,l=a-r,h=r+e.collisionWidth-s-a;e.collisionWidth>s?l>0&&h<=0?(i=t.left+l+e.collisionWidth-s-a,t.left+=l-i):t.left=h>0&&l<=0?a:l>h?a+s-e.collisionWidth:a:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,n=e.within,a=n.isWindow?n.scrollTop:n.offset.top,s=e.within.height,r=t.top-e.collisionPosition.marginTop,l=a-r,h=r+e.collisionHeight-s-a;e.collisionHeight>s?l>0&&h<=0?(i=t.top+l+e.collisionHeight-s-a,t.top+=l-i):t.top=h>0&&l<=0?a:l>h?a+s-e.collisionHeight:a:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,a=e.within,s=a.offset.left+a.scrollLeft,o=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-o-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((i=t.left+d+f+p+e.collisionWidth-o-s)<0||i<r(c))&&(t.left+=d+f+p):u>0&&((n=t.left-e.collisionPosition.marginLeft+d+f+p-l)>0||r(n)<u)&&(t.left+=d+f+p)},top:function(t,e){var i,n,a=e.within,s=a.offset.top+a.scrollTop,o=a.height,l=a.isWindow?a.scrollTop:a.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-o-l,d="top"===e.my[1],f=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];c<0?(n=t.top+f+p+g+e.collisionHeight-o-s,t.top+f+p+g>c&&(n<0||n<r(c))&&(t.top+=f+p+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+f+p+g-l,t.top+f+p+g>u&&(i>0||r(i)<u)&&(t.top+=f+p+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,a,s,o=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(r),i=o||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",a=e(r).offset().left,e.support.offsetFractions=a>10&&a<11,t.innerHTML="",i.removeChild(t)}(),!1!==e.uiBackCompat&&function(t){var e=t.fn.position;t.fn.position=function(n){if(!n||!n.offset)return e.call(this,n);var a=n.offset.split(" "),s=n.at.split(" ");return 1===a.length&&(a[1]=a[0]),/^\d/.test(a[0])&&(a[0]="+"+a[0]),/^\d/.test(a[1])&&(a[1]="+"+a[1]),1===s.length&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),e.call(this,t.extend(n,{at:s[0]+a[0]+" "+s[1]+a[1],offset:i}))}}(t)}(t),function(t,e){var i=0;t.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return e=!0,n=!0,i=!0,void 0;e=!1,n=!1,i=!1;var s=t.ui.keyCode;switch(a.keyCode){case s.PAGE_UP:e=!0,this._move("previousPage",a);break;case s.PAGE_DOWN:e=!0,this._move("nextPage",a);break;case s.UP:e=!0,this._keyEvent("previous",a);break;case s.DOWN:e=!0,this._keyEvent("next",a);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(e=!0,a.preventDefault(),this.menu.select(a));break;case s.TAB:this.menu.active&&this.menu.select(a);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}},keypress:function(n){if(e)return e=!1,void n.preventDefault();if(!i){var a=t.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:this._move("previousPage",n);break;case a.PAGE_DOWN:this._move("nextPage",n);break;case a.UP:this._keyEvent("previous",n);break;case a.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(t),this._change(t)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target!==e.element[0]&&n.target!==i&&!t.contains(i,n.target)&&e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item")||e.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,a){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){a(t)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++i;return function(n){e===i&&t.__response(n),--t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(t),function(t,e){var i,n,a,s,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},h=function(e){var i=e.name,n=e.form,a=t([]);return i&&(a=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),a};t.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(c?"":" ui-state-active"),d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||(t(this).addClass("ui-state-hover"),this===i&&t(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){e.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){e.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){s||e.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(s=!1,n=t.pageX,a=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||n===t.pageX&&a===t.pageY||(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||s)return!1;t(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||s)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];h(i).not(i).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).addClass("ui-state-active"),i=this,e.document.one("mouseup",function(){i=null})}).bind("mouseup"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(r.disabled)return!1;(e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1));this._resetButton()},refresh:function(){var e=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?h(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,a=n.primary&&n.secondary,s=[];n.primary||n.secondary?(this.options.text&&s.push("ui-button-text-icon"+(a?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(s.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):s.push("ui-button-text-only"),e.addClass(s.join(" "))}}),t.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(t),function(t,e){var i=!1;t.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var n=t(e.target).closest(".ui-menu-item");!i&&n.not(".ui-state-disabled").length&&(i=!0,this.select(e),n.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),i=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,a,s,o,r,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,a=this.previousFilter||"",s=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),s===a?o=!0:s=a+s,r=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(e.keyCode),r=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});e=n.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),n.each(function(){var e=t(this),n=e.prev("a"),a=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(a),e.attr("aria-labelledby",n.attr("id"))}),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,a,s,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,a=e.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),a<0?this.activeMenu.scrollTop(s+a):a+r>o&&this.activeMenu.scrollTop(s+a-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,a;if(!this.active)return void this.next(e);this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n-a<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))},previousPage:function(e){var i,n,a;if(!this.active)return void this.next(e);this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+a>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(t),function(t,e){t.widget("ui.slider",t.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var e,i,n=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),n.range&&(!0===n.range&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:""))),i=n.values&&n.values.length||1,e=a.length;e<i;e++)s.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(t(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).mouseenter(function(){n.disabled||t(this).addClass("ui-state-hover")}).mouseleave(function(){t(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)}),this._on(this.handles,{keydown:function(e){var i,n,a,s,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,o),!1===i))return}switch(s=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-s)}this._slide(e,o,a)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,a,s,o,r,l,h=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-h.values(e));a>i&&(a=i,s=t(this),o=e)}),!0===c.range&&this.values(1)===c.min&&(o+=1,s=t(this.handles[o])),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),r=s.offset(),l=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-r.left-s.width()/2,top:e.pageY-r.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,a,s;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),s=this._valueMin()+n*a,this._trimAlignValue(s)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,a,s;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i>n||1===e&&i<n)&&(i=n),i!==this.values(e)&&(a=this.values(),a[e]=i,s=this._trigger("slide",t,{handle:this.handles[e],value:i,values:a}),n=this.values(e?0:1),!1!==s&&this.values(e,i,!0))):i!==this.value()&&!1!==(s=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var n,a,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,a=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,i){var n,a=0;switch(t.isArray(this.options.values)&&(a=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<a;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,a,s,o=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(n=this.value(),a=this._valueMin(),s=this._valueMax(),i=s!==a?(n-a)/(s-a)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))}})}(t)}).call(e,i(0))},function(t,e,i){(function(t){!function(t){t.fn.farbtastic=function(e){return t.farbtastic(this,e),this},t.farbtastic=function(e,i){var e=t(e)[0];return e.farbtastic||(e.farbtastic=new t._farbtastic(e,i))},t._farbtastic=function(e,i){var n=this;n.linkTo=function(e){return"object"==typeof n.callback&&t(n.callback).unbind("keyup",n.updateValue),n.color=null,"function"==typeof e?n.callback=e:"object"!=typeof e&&"string"!=typeof e||(n.callback=t(e),n.callback.bind("keyup",n.updateValue),n.callback[0].value&&n.setColor(n.callback[0].value)),this},n.updateValue=function(t){this.value&&this.value!=n.color&&n.setColor(this.value)},n.setColor=function(t){var e=n.unpack(t);return n.color!=t&&e&&(n.color=t,n.rgb=e,n.hsl=n.RGBToHSL(n.rgb),n.updateDisplay()),this},n.setHSL=function(t){return n.hsl=t,n.rgb=n.HSLToRGB(t),n.color=n.pack(n.rgb),n.updateDisplay(),this},n.initWidget=function(){var a={width:i.width,height:i.width};t(e).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(a).css(a).end().find("div>*").css("position","absolute"),t.browser.msie,n.radius=(i.width-i.wheelWidth)/2-1,n.square=Math.floor(.7*(n.radius-i.wheelWidth/2))-1,n.mid=Math.floor(i.width/2),n.markerSize=.3*i.wheelWidth,n.solidFill=t(".farbtastic-solid",e).css({width:2*n.square-1,height:2*n.square-1,left:n.mid-n.square,top:n.mid-n.square}),n.cnvMask=t(".farbtastic-mask",e),n.ctxMask=n.cnvMask[0].getContext("2d"),n.cnvOverlay=t(".farbtastic-overlay",e),n.ctxOverlay=n.cnvOverlay[0].getContext("2d"),n.ctxMask.translate(n.mid,n.mid),n.ctxOverlay.translate(n.mid,n.mid),n.drawCircle(),n.drawMask()},n.drawCircle=function(){var e,a,s=(new Date,n.radius),o=i.wheelWidth,r=8/s/24*Math.PI,l=n.ctxMask,h=0;l.save(),l.lineWidth=o/s,l.scale(s,s);for(var c=0;c<=24;++c){var u=c/24,d=u*Math.PI*2,f=Math.sin(h),p=-Math.cos(h);if(x2=Math.sin(d),y2=-Math.cos(d),am=(h+d)/2,tan=1/Math.cos((d-h)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=n.pack(n.HSLToRGB([u,1,.5])),c>0)if(t.browser.msie){var g=(1+Math.min(Math.abs(Math.tan(h)),Math.abs(Math.tan(Math.PI/2-h))))/24;e=n.pack(n.HSLToRGB([a-.15*g,1,.5])),color2=n.pack(n.HSLToRGB([u+.15*g,1,.5]));var m=l.createLinearGradient(f,p,x2,y2);m.addColorStop(0,e),m.addColorStop(1,color2),l.fillStyle=m;var v=(s+o/2)/s,_=(s-o/2)/s;l.beginPath(),l.moveTo(f*v,p*v),l.quadraticCurveTo(xm*v,ym*v,x2*v,y2*v),l.lineTo(x2*_,y2*_),l.quadraticCurveTo(xm*_,ym*_,f*_,p*_),l.fill()}else{var m=l.createLinearGradient(f,p,x2,y2);m.addColorStop(0,e),m.addColorStop(1,color2),l.strokeStyle=m,l.beginPath(),l.moveTo(f,p),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}h=d-r,e=color2,a=u}l.restore()},n.drawMask=function(){function e(t,e,i){for(var n=1/t,a=1/e,s=0;s<=e;++s)for(var o=1-s*a,r=0;r<=t;++r){var l=1-r*n,h=1-2*Math.min(o*l,(1-o)*l),c=h>0?.5*(2*o-1+h)/h:0;i(r,s,c,h)}}var i=(new Date,2*n.square),a=n.square;if(n.ctxMask.getImageData){var s=Math.floor(i/2),o=document.createElement("canvas");o.width=o.height=s+1;var r=o.getContext("2d"),l=r.getImageData(0,0,s+1,s+1),h=0;e(s,s,function(t,e,i,n){l.data[h++]=l.data[h++]=l.data[h++]=255*i,l.data[h++]=255*n}),r.putImageData(l,0,0),n.ctxMask.drawImage(o,0,0,s+1,s+1,-a,-a,2*a,2*a)}else if(t.browser.msie){var c,u,d=Math.floor(i/6);e(d,6,function(e,i,s,o){if(0==e&&(c=u,u=[]),s=Math.round(255*s),o=Math.round(255*o),i>0){var r=c[e][0],l=c[e][1],h=n.packDX(r,l),f=n.packDX(s,o),p=Math.round(n.mid+(.333*(i-1)-1)*a),g=Math.round(n.mid+(.333*i-1)*a);t("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+h+", EndColorStr="+f+", GradientType=0)",top:p,height:g-p,left:n.mid+(6*e-a-1),width:6-(e==d?Math.round(3):0)}).appendTo(n.cnvMask)}u.push([s,o])})}else{var s=Math.floor(i/2);e(s,s,function(t,e,i,s){i=Math.round(255*i),n.ctxMask.fillStyle="rgba("+i+", "+i+", "+i+", "+s+")",n.ctxMask.fillRect(2*t-a-1,2*e-a-1,2,2)})}},n.drawMarkers=function(){var t=i.width,e=Math.ceil(n.markerSize/4),a=n.markerSize-e+1,s=6.28*n.hsl[0],o=Math.sin(s)*n.radius,r=-Math.cos(s)*n.radius,l=2*n.square*(.5-n.hsl[1]),h=2*n.square*(.5-n.hsl[2]),c=n.invert?"#fff":"#000",u=n.invert?"#000":"#fff",d=[{x:o,y:r,r:a,c:"#000",lw:e+1},{x:o,y:r,r:n.markerSize,c:"#fff",lw:e},{x:l,y:h,r:a,c:u,lw:e+1},{x:l,y:h,r:n.markerSize,c:c,lw:e}];n.ctxOverlay.clearRect(-n.mid,-n.mid,t,t);for(var f=0;f<d.length;f++){var p=d[f];n.ctxOverlay.lineWidth=p.lw,n.ctxOverlay.strokeStyle=p.c,n.ctxOverlay.beginPath(),n.ctxOverlay.arc(p.x,p.y,p.r,0,2*Math.PI,!0),n.ctxOverlay.stroke()}},n.updateDisplay=function(){n.invert=.3*n.rgb[0]+.59*n.rgb[1]+.11*n.rgb[2]<=.6,n.solidFill.css("backgroundColor",n.pack(n.HSLToRGB([n.hsl[0],1,.5]))),n.drawMarkers(),"object"==typeof n.callback?(t(n.callback).css({backgroundColor:n.color,color:n.invert?"#fff":"#000"}),t(n.callback).each(function(){"string"==typeof this.value&&this.value!=n.color&&(this.value=n.color)}).change()):"function"==typeof n.callback&&n.callback.call(n,n.color)},n.widgetCoords=function(t){return{x:t.pageX-n.offset.left-n.mid,y:t.pageY-n.offset.top-n.mid}},n.mousedown=function(i){t._farbtastic.dragging||(t(document).bind("mousemove",n.mousemove).bind("mouseup",n.mouseup),t._farbtastic.dragging=!0),n.offset=t(e).offset();var a=n.widgetCoords(i);return n.circleDrag=Math.max(Math.abs(a.x),Math.abs(a.y))>n.square+2,n.mousemove(i),!1},n.mousemove=function(t){var e=n.widgetCoords(t);if(n.circleDrag){var i=Math.atan2(e.x,-e.y)/6.28;n.setHSL([(i+1)%1,n.hsl[1],n.hsl[2]])}else{var a=Math.max(0,Math.min(1,-e.x/n.square/2+.5)),s=Math.max(0,Math.min(1,-e.y/n.square/2+.5));n.setHSL([n.hsl[0],a,s])}return!1},n.mouseup=function(){t(document).unbind("mousemove",n.mousemove),t(document).unbind("mouseup",n.mouseup),t._farbtastic.dragging=!1},n.dec2hex=function(t){return(t<16?"0":"")+t.toString(16)},n.packDX=function(t,e){return"#"+n.dec2hex(e)+n.dec2hex(t)+n.dec2hex(t)+n.dec2hex(t)},n.pack=function(t){var e=Math.round(255*t[0]),i=Math.round(255*t[1]),a=Math.round(255*t[2]);return"#"+n.dec2hex(e)+n.dec2hex(i)+n.dec2hex(a)},n.unpack=function(t){function e(e){return parseInt(t.substring(e,e+2),16)/255}function e(e){return parseInt(t.substring(e,e+1),16)/15}return 7==t.length?[e(1),e(3),e(5)]:4==t.length?[e(1),e(2),e(3)]:void 0},n.HSLToRGB=function(t){var e,i,n=t[0],a=t[1],s=t[2];return i=s<=.5?s*(a+1):s+a-s*a,e=2*s-i,[this.hueToRGB(e,i,n+.33333),this.hueToRGB(e,i,n),this.hueToRGB(e,i,n-.33333)]},n.hueToRGB=function(t,e,i){return i=(i+1)%1,6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(.66666-i)*6:t},n.RGBToHSL=function(t){var e=t[0],i=t[1],n=t[2],a=Math.min(e,i,n),s=Math.max(e,i,n),o=s-a,r=0,l=0,h=(a+s)/2;return h>0&&h<1&&(l=o/(h<.5?2*h:2-2*h)),o>0&&(s==e&&s!=i&&(r+=(i-n)/o),s==i&&s!=n&&(r+=2+(n-e)/o),s==n&&s!=e&&(r+=4+(e-i)/o),r/=6),[r,l,h]},i.callback||(i={callback:i}),i=t.extend({width:300,wheelWidth:(i.width||300)/10,callback:null},i),n.initWidget(),t("canvas.farbtastic-overlay",e).mousedown(n.mousedown),i.callback&&n.linkTo(i.callback),n.color||n.setColor("#808080")}}(t)}).call(e,i(0))},function(t,e,i){(function(t){!function(t,e){var i,n;n=e.document,i=function(){function i(i){var n;try{n=e.localStorage}catch(t){n=!1}this._options=t.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:n,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){},onRedirectError:function(t){}},i),this._force=!1,this._inited=!1,this._current=null,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return i.prototype.addSteps=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)e=t[i],this.addStep(e);return this},i.prototype.addStep=function(t){return this._options.steps.push(t),this},i.prototype.getStep=function(e){if(null!=this._options.steps[e])return t.extend({id:"step-"+e,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[e].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[e])},i.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(t){return function(){return t.showStep(t._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},i.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},i.prototype.next=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showNextStep)},i.prototype.prev=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showPrevStep)},i.prototype.goTo=function(t){var e;return e=this.hideStep(this._current),this._callOnPromiseDone(e,this.showStep,t)},i.prototype.end=function(){var i,a;return i=function(i){return function(a){if(t(n).off("click.tour-"+i._options.name),t(n).off("keyup.tour-"+i._options.name),t(e).off("resize.tour-"+i._options.name),i._setState("end","yes"),i._inited=!1,i._force=!1,i._clearTimer(),null!=i._options.onEnd)return i._options.onEnd(i)}}(this),a=this.hideStep(this._current),this._callOnPromiseDone(a,i)},i.prototype.ended=function(){return!this._force&&!!this._getState("end")},i.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},i.prototype.pause=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,e.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},i.prototype.resume=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=e.setTimeout(function(t){return function(){return t._isLast()?t.next():t.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},i.prototype.hideStep=function(e){var i,n,a;if(a=this.getStep(e))return this._clearTimer(),n=this._makePromise(null!=a.onHide?a.onHide(this,e):void 0),i=function(i){return function(n){var s;if(s=t(a.element),s.data("bs.popover")||s.data("popover")||(s=t("body")),s.popover("destroy").removeClass("tour-"+i._options.name+"-element tour-"+i._options.name+"-"+e+"-element"),s.removeData("bs.popover"),a.reflex&&t(a.reflexElement).removeClass("tour-step-element-reflex").off(i._reflexEvent(a.reflex)+".tour-"+i._options.name),a.backdrop&&i._hideBackdrop(),null!=a.onHidden)return a.onHidden(i)}}(this),this._callOnPromiseDone(n,i),n},i.prototype.showStep=function(t){var i,a,s,o;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(o=this.getStep(t))?(s=t<this._current,i=this._makePromise(null!=o.onShow?o.onShow(this,t):void 0),a=function(e){return function(i){var a,r;if(e.setCurrentStep(t),a=function(){switch({}.toString.call(o.path)){case"[object Function]":return o.path();case"[object String]":return this._options.basePath+o.path;default:return o.path}}.call(e),!e._isRedirect(o.host,a,n.location)||(e._redirect(o,t,a),e._isJustPathHashDifferent(o.host,a,n.location))){if(e._isOrphan(o)){if(!1===o.orphan)return e._debug("Skip the orphan step "+(e._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(s?e._showPrevStep():e._showNextStep());e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}return o.backdrop&&e._showBackdrop(o),r=function(){if(e.getCurrentStep()===t&&!e.ended())return null!=o.element&&o.backdrop&&e._showOverlayElement(o),e._showPopover(o,t),null!=o.onShown&&o.onShown(e),e._debug("Step "+(e._current+1)+" of "+e._options.steps.length)},o.autoscroll?e._scrollIntoView(o.element,r):r(),o.duration?e.resume():void 0}}}(this),o.delay?(this._debug("Wait "+o.delay+" milliseconds to show the step "+(this._current+1)),e.setTimeout(function(t){return function(){return t._callOnPromiseDone(i,a)}}(this),o.delay)):this._callOnPromiseDone(i,a),i):void 0},i.prototype.getCurrentStep=function(){return this._current},i.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},i.prototype.redraw=function(){return this._showOverlayElement(this.getStep(this.getCurrentStep()).element,!0)},i.prototype._setState=function(t,e){var i,n;if(this._options.storage){n=this._options.name+"_"+t;try{this._options.storage.setItem(n,e)}catch(t){i=t,i.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(n,e)}return null==this._state&&(this._state={}),this._state[t]=e},i.prototype._removeState=function(t){var e;return this._options.storage?(e=this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},i.prototype._getState=function(t){var e,i;return this._options.storage?(e=this._options.name+"_"+t,i=this._options.storage.getItem(e)):null!=this._state&&(i=this._state[t]),void 0!==i&&"null"!==i||(i=null),this._options.afterGetState(t,i),i},i.prototype._showNextStep=function(){var t,e,i;return i=this.getStep(this._current),e=function(t){return function(e){return t.showStep(i.next)}}(this),t=this._makePromise(null!=i.onNext?i.onNext(this):void 0),this._callOnPromiseDone(t,e)},i.prototype._showPrevStep=function(){var t,e,i;return i=this.getStep(this._current),e=function(t){return function(e){return t.showStep(i.prev)}}(this),t=this._makePromise(null!=i.onPrev?i.onPrev(this):void 0),this._callOnPromiseDone(t,e)},i.prototype._debug=function(t){if(this._options.debug)return e.console.log("Bootstrap Tour '"+this._options.name+"' | "+t)},i.prototype._isRedirect=function(t,e,i){var n;return!(""===t||!this._isHostDifferent(t,i.href))||(n=[i.pathname,i.search,i.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(n)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,n)))},i.prototype._isHostDifferent=function(t,e){return this._getProtocol(t)!==this._getProtocol(e)||this._getHost(t)!==this._getHost(e)},i.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},i.prototype._isJustPathHashDifferent=function(t,e,i){var n;return(""===t||!this._isHostDifferent(t,i.href))&&(n=[i.pathname,i.search,i.hash].join(""),"[object String]"==={}.toString.call(e)&&(this._getPath(e)===this._getPath(n)&&this._equal(this._getQuery(e),this._getQuery(n))&&!this._equal(this._getHash(e),this._getHash(n))))},i.prototype._redirect=function(e,i,a){if(t.isFunction(e.redirect))return e.redirect.call(this,a);if(!0===e.redirect){if(this._debug("Redirect to "+e.host+a),this._getState("redirect_to")!==""+i)return this._setState("redirect_to",""+i),n.location.href=""+e.host+a;if(this._debug("Error redirection loop to "+a),this._removeState("redirect_to"),null!=e.onRedirectError)return e.onRedirectError(this)}},i.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},i.prototype._isLast=function(){return this._current<this._options.steps.length-1},i.prototype._showPopover=function(e,i){var n,a,s,o,r;if(t(".tour-"+this._options.name).remove(),o=t.extend({},this._options),s=this._isOrphan(e),e.template=this._template(e,i),s&&(e.element="body",e.placement="top"),n=t(e.element),n.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+i+"-element"),e.options&&t.extend(o,e.options),e.reflex&&!s&&t(e.reflexElement).addClass("tour-step-element-reflex").off(this._reflexEvent(e.reflex)+".tour-"+this._options.name).on(this._reflexEvent(e.reflex)+".tour-"+this._options.name,function(t){return function(){return t._isLast()?t.next():t.end()}}(this)),r=!0===e.smartPlacement&&-1===e.placement.search(/auto/i),n.popover({placement:r?"auto "+e.placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),a=n.data("bs.popover")?n.data("bs.popover").tip():n.data("popover").tip(),a.attr("id",e.id),this._reposition(a,e),s)return this._center(a)},i.prototype._template=function(e,i){var n,a,s,o,r,l;return l=e.template,this._isOrphan(e)&&"[object Boolean]"!=={}.toString.call(e.orphan)&&(l=e.orphan),r=t(t.isFunction(l)?l(i,e):l),n=r.find(".popover-navigation"),s=n.find('[data-role="prev"]'),a=n.find('[data-role="next"]'),o=n.find('[data-role="pause-resume"]'),this._isOrphan(e)&&r.addClass("orphan"),r.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+i),e.reflex&&r.addClass("tour-"+this._options.name+"-reflex"),e.prev<0&&(s.addClass("disabled"),s.prop("disabled",!0)),e.next<0&&(a.addClass("disabled"),a.prop("disabled",!0)),e.duration||o.remove(),r.clone().wrap("<div>").parent().html()},i.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},i.prototype._reposition=function(e,i){var a,s,o,r,l,h,c;if(r=e[0].offsetWidth,s=e[0].offsetHeight,c=e.offset(),l=c.left,h=c.top,a=t(n).outerHeight()-c.top-e.outerHeight(),a<0&&(c.top=c.top+a),o=t("html").outerWidth()-c.left-e.outerWidth(),o<0&&(c.left=c.left+o),c.top<0&&(c.top=0),c.left<0&&(c.left=0),e.offset(c),"bottom"===i.placement||"top"===i.placement){if(l!==c.left)return this._replaceArrow(e,2*(c.left-l),r,"left")}else if(h!==c.top)return this._replaceArrow(e,2*(c.top-h),s,"top")},i.prototype._center=function(i){return i.css("top",t(e).outerHeight()/2-i.outerHeight()/2)},i.prototype._replaceArrow=function(t,e,i,n){return t.find(".arrow").css(n,e?50*(1-e/i)+"%":"")},i.prototype._scrollIntoView=function(i,n){var a,s,o,r,l,h;return a=t(i),a.length?(s=t(e),r=a.offset().top,h=s.height(),l=Math.max(0,r-h/2),this._debug("Scroll into view. ScrollTop: "+l+". Element offset: "+r+". Window height: "+h+"."),o=0,t("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(l)},function(t){return function(){if(2==++o)return n(),t._debug("Scroll into view.\nAnimation end element offset: "+a.offset().top+".\nWindow height: "+s.height()+".")}}(this))):n()},i.prototype._onResize=function(i,n){return t(e).on("resize.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(i,100)})},i.prototype._initMouseNavigation=function(){var e;return e=this,t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(t){return function(e){return e.preventDefault(),t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(i){var n;return i.preventDefault(),n=t(this),n.text(e._paused?n.data("pause-text"):n.data("resume-text")),e._paused?e.resume():e.pause()})},i.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return t(n).on("keyup.tour-"+this._options.name,function(t){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),t._isLast()?t.next():t.end();case 37:if(e.preventDefault(),t._current>0)return t.prev();break;case 27:return e.preventDefault(),t.end()}}}(this))},i.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},i.prototype._callOnPromiseDone=function(t,e,i){return t?t.then(function(t){return function(n){return e.call(t,i)}}(this)):e.call(this,i)},i.prototype._showBackdrop=function(e){if(!this.backdrop.backgroundShown)return this.backdrop=t("<div>",{class:"tour-backdrop"}),this.backdrop.backgroundShown=!0,t(e.backdropContainer).append(this.backdrop)},i.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},i.prototype._hideBackground=function(){if(this.backdrop)return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},i.prototype._showOverlayElement=function(e,i){var n,a;if((n=t(e.element))&&0!==n.length&&(!this.backdrop.overlayElementShown||i))return this.backdrop.overlayElementShown||(this.backdrop.$element=n.addClass("tour-step-backdrop"),this.backdrop.$background=t("<div>",{class:"tour-step-background"}),this.backdrop.$background.appendTo(e.backdropContainer),this.backdrop.overlayElementShown=!0),a={width:n.innerWidth(),height:n.innerHeight(),offset:n.offset()},e.backdropPadding&&(a=this._applyBackdropPadding(e.backdropPadding,a)),this.backdrop.$background.width(a.width).height(a.height).offset(a.offset)},i.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1},i.prototype._applyBackdropPadding=function(t,e){return"object"==typeof t?(null==t.top&&(t.top=0),null==t.right&&(t.right=0),null==t.bottom&&(t.bottom=0),null==t.left&&(t.left=0),e.offset.top=e.offset.top-t.top,e.offset.left=e.offset.left-t.left,e.width=e.width+t.left+t.right,e.height=e.height+t.top+t.bottom):(e.offset.top=e.offset.top-t,e.offset.left=e.offset.left-t,e.width=e.width+2*t,e.height=e.height+2*t),e},i.prototype._clearTimer=function(){return e.clearTimeout(this._timer),this._timer=null,this._duration=null},i.prototype._getProtocol=function(t){return t=t.split("://"),t.length>1?t[0]:"http"},i.prototype._getHost=function(t){return t=t.split("//"),t=t.length>1?t[1]:t[0],t.split("/")[0]},i.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},i.prototype._getQuery=function(t){return this._getParams(t,"?")},i.prototype._getHash=function(t){return this._getParams(t,"#")},i.prototype._getParams=function(t,e){var i,n,a,s,o;if(n=t.split(e),1===n.length)return{};for(n=n[1].split("&"),a={},s=0,o=n.length;s<o;s++)i=n[s],i=i.split("="),a[i[0]]=i[1]||"";return a},i.prototype._equal=function(t,e){var i,n;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){for(i in t)if(n=t[i],e[i]!==n)return!1;for(i in e)if(n=e[i],t[i]!==n)return!1;return!0}return t===e},i}(),e.Tour=i}(t,window)}).call(e,i(0))},function(t,e,i){(function(n,a){var s,o;!function(i){s=[],void 0!==(o=function(){var t=n;return function(){function e(t,e,i){return h({type:m.error,iconClass:u().iconClasses.error,message:t,optionsOverride:i,title:e})}function i(t,e,i){return h({type:m.info,iconClass:u().iconClasses.info,message:t,optionsOverride:i,title:e})}function n(t){p=t}function a(t,e,i){return h({type:m.success,iconClass:u().iconClasses.success,message:t,optionsOverride:i,title:e})}function s(t,e,i){return h({type:m.warning,iconClass:u().iconClasses.warning,message:t,optionsOverride:i,title:e})}function o(e){var i=u();if(f||c(i),e&&0===t(":focus",e).length)return void e[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){d(e)}});f.children().length&&f[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){f.remove()}})}function r(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0}}function l(t){p&&p(t)}function h(e){function i(e){if(!t(":focus",h).length||e)return h[s.hideMethod]({duration:s.hideDuration,easing:s.hideEasing,complete:function(){d(h),s.onHidden&&s.onHidden(),_.state="hidden",_.endTime=new Date,l(_)}})}function n(){(s.timeOut>0||s.extendedTimeOut>0)&&(r=setTimeout(i,s.extendedTimeOut))}function a(){clearTimeout(r),h.stop(!0,!0)[s.showMethod]({duration:s.showDuration,easing:s.showEasing})}var s=u(),o=e.iconClass||s.iconClass;void 0!==e.optionsOverride&&(s=t.extend(s,e.optionsOverride),o=e.optionsOverride.iconClass||o),g++,f=c(s);var r=null,h=t("<div/>"),p=t("<div/>"),m=t("<div/>"),v=t(s.closeHtml),_={toastId:g,state:"visible",startTime:new Date,options:s,map:e};return e.iconClass&&h.addClass(s.toastClass).addClass(o),e.title&&(p.append(e.title).addClass(s.titleClass),h.append(p)),e.message&&(m.append(e.message).addClass(s.messageClass),h.append(m)),s.closeButton&&(v.addClass("toast-close-button"),h.prepend(v)),h.hide(),s.newestOnTop?f.prepend(h):f.append(h),h[s.showMethod]({duration:s.showDuration,easing:s.showEasing,complete:s.onShown}),s.timeOut>0&&(r=setTimeout(i,s.timeOut)),h.hover(a,n),!s.onclick&&s.tapToDismiss&&h.click(i),s.closeButton&&v&&v.click(function(t){t.stopPropagation(),i(!0)}),s.onclick&&h.click(function(){s.onclick(),i()}),l(_),s.debug&&console&&console.log(_),h}function c(e){return e||(e=u()),f=t("#"+e.containerId),f.length?f:(f=t("<div/>").attr("id",e.containerId).addClass(e.positionClass),f.appendTo(t(e.target)),f)}function u(){return t.extend({},r(),v.options)}function d(t){f||(f=c()),t.is(":visible")||(t.remove(),t=null,0===f.children().length&&f.remove())}var f,p,g=0,m={error:"error",info:"info",success:"success",warning:"warning"},v={clear:o,error:e,getContainer:c,info:i,options:{},subscribe:n,success:a,version:"2.0.1",warning:s};return v}()}.apply(e,s))&&(t.exports=o)}(i(98))}).call(e,i(0),i(0))},function(t,e,i){"use strict";(function(t){function n(t,e){o(t).find(".tag-name").each(function(){o(this).click(function(){var t=o(this).text(),i=t.split(":");return e(i[0],i[1]),!0})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=s.default;s.default.fn.autocomplete_tagging=function(e){function i(t){o(t).mouseenter(function(){o(this).attr("src",l.delete_tag_img_rollover)}),o(t).mouseleave(function(){o(this).attr("src",l.delete_tag_img)}),o(t).click(function(){var e=o(this).parent(),i=e.find(".tag-name").eq(0),n=i.text(),a=n.split(":"),s=a[0],r=a[1],h=e.prev();e.remove(),delete l.tags[s];var d=l.get_toggle_link_text_fn(l.tags);return u.text(d),o.ajax({url:l.ajax_delete_tag_url,data:{tag_name:s},error:function(){l.tags[s]=r,h.hasClass("tag-button")?h.after(e):c.prepend(e),alert("Remove tag failed"),u.text(l.get_toggle_link_text_fn(l.tags)),t.mouseenter(function(){o(this).attr("src",l.delete_tag_img_rollover)}),t.mouseleave(function(){o(this).attr("src",l.delete_tag_img)})},success:function(){}}),!0})}function a(t){var e=o("<img/>").attr("src",l.delete_tag_img).addClass("delete-tag-img");i(e);var n=o("<span>").text(t).addClass("tag-name");n.click(function(){var e=t.split(":");return l.tag_click_fn(e[0],e[1]),!0});var a=o("<span></span>").addClass("tag-button");return a.append(n),l.editable&&a.append(e),a}var r={get_toggle_link_text_fn:function(e){var i=t.size(e);return i>0?i+(i>1?" Tags":" Tag"):"Add tags"},tag_click_fn:function(t,e){},editable:!0,input_size:20,in_form:!1,tags:{},use_toggle_link:!0,item_id:"",add_tag_img:"",add_tag_img_rollover:"",delete_tag_img:"",ajax_autocomplete_tag_url:"",ajax_retag_url:"",ajax_delete_tag_url:"",ajax_add_tag_url:""},l=s.default.extend(r,e),h=o(this),c=h.find(".tag-area"),u=h.find(".toggle-link"),d=h.find(".tag-input"),f=h.find(".add-tag-button");u.click(function(){var t;return t=c.is(":hidden")?function(){0===o(this).find(".tag-button").length&&c.click()}:function(){c.blur()},c.slideToggle("fast",t),o(this)}),l.editable&&d.hide(),d.keyup(function(t){if(27===t.keyCode)o(this).trigger("blur");else if(13===t.keyCode||188===t.keyCode||32===t.keyCode){var e=this.value;if(-1!==e.indexOf(": ",e.length-2))return this.value=e.substring(0,e.length-1),!1;if(188!==t.keyCode&&32!==t.keyCode||(e=e.substring(0,e.length-1)),e=o.trim(e),e.length<2)return!1;this.value="";var i=a(e),n=c.children(".tag-button");if(0!==n.length){var s=n.slice(n.length-1);s.after(i)}else c.prepend(i);var r=e.split(":");l.tags[r[0]]=r[1];var h=l.get_toggle_link_text_fn(l.tags);u.text(h);var d=o(this);return o.ajax({url:l.ajax_add_tag_url,data:{new_tag:e},error:function(){i.remove(),delete l.tags[r[0]];var t=l.get_toggle_link_text_fn(l.tags);u.text(t),alert("Add tag failed")},success:function(){d.data("autocompleter").cacheFlush()}}),!1}});var p=function(t,e,i,n,a){var s=n.split(":");return 1===s.length?s[0]:s[1]},g={selectFirst:!1,formatItem:p,autoFill:!1,highlight:!1};d.autocomplete_verheul(l.ajax_autocomplete_tag_url,g),h.find(".delete-tag-img").each(function(){i(o(this))}),n(o(this),l.tag_click_fn),f.click(function(){return o(this).hide(),c.click(),!1}),l.editable&&(c.bind("blur",function(e){t.size(l.tags)>0&&(f.show(),d.hide(),c.removeClass("active-tag-area"))}),c.click(function(t){var e=o(this).hasClass("active-tag-area");if(o(t.target).hasClass("delete-tag-img")&&!e)return!1;if(o(t.target).hasClass("tag-name")&&!e)return!1;o(this).addClass("active-tag-area"),f.hide(),d.show(),d.focus();var i=function(t){!function(t,e){t.attr("id");e!==t&&(t.blur(),o(window).unbind("click.tagging_blur"),o(this).addClass("tooltip"))}(c,o(t.target))};return o(window).bind("click.tagging_blur",i),!1})),l.use_toggle_link&&c.hide()},e.default=n}).call(e,i(1))},function(t,e,i){"use strict";function n(){u.hide()}function a(t,e,i,n,a){u.setContent({title:t,body:e,buttons:i,extra_buttons:n}),u.show({backdrop:!0},a)}function s(t,e,i,n,a){u.setContent({title:t,body:e,buttons:i,extra_buttons:n}),u.show({backdrop:!1},a)}function o(t){var e=t.width||"600",i=t.height||"400",a=t.scroll||"auto";h("#overlay-background").bind("click.overlay",function(){n(),h("#overlay-background").unbind("click.overlay")}),u.setContent({closeButton:!0,title:"&nbsp;",body:h("<div style='margin: -5px;'><iframe style='margin: 0; padding: 0;' src='"+t.url+"' width='"+e+"' height='"+i+"' scrolling='"+a+"' frameborder='0'></iframe></div>")}),u.show({backdrop:!0})}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),l=function(t){return t&&t.__esModule?t:{default:t}}(r),h=l.default,c=function(t){this.$overlay=t.overlay,this.$dialog=t.dialog,this.$header=this.$dialog.find(".modal-header"),this.$body=this.$dialog.find(".modal-body"),this.$footer=this.$dialog.find(".modal-footer"),this.$backdrop=t.backdrop,this.$header.find(".close").on("click",h.proxy(this.hide,this))};h.extend(c.prototype,{setContent:function(t){this.$header.hide(),t.title&&(this.$header.find(".title").html(t.title),this.$header.show()),t.closeButton?(this.$header.find(".close").show(),this.$header.show()):this.$header.find(".close").hide(),this.$footer.hide();var e=this.$footer.find(".buttons").html("");t.buttons&&(h.each(t.buttons,function(t,i){e.append(h("<button></button> ").text(t).click(i)).append(" ")}),this.$footer.show());var i=this.$footer.find(".extra_buttons").html("");t.extra_buttons&&(h.each(t.extra_buttons,function(t,e){i.append(h("<button></button>").text(t).click(e)).append(" ")}),this.$footer.show());var n=t.body;"progress"==n&&(n=h("<div class='progress progress-striped active'><div class='progress-bar' style='width: 100%'></div></div>")),this.$body.html(n)},show:function(t,e){this.$dialog.is(":visible")||(t.backdrop?this.$backdrop.addClass("in"):this.$backdrop.removeClass("in"),this.$overlay.show(),this.$dialog.show(),this.$overlay.addClass("in"),this.$body.css("min-width",this.$body.width()),this.$body.css("max-height",h(window).height()-this.$footer.outerHeight()-this.$header.outerHeight()-parseInt(this.$dialog.css("padding-top"),10)-parseInt(this.$dialog.css("padding-bottom"),10))),e&&e()},hide:function(){var t=this;t.$dialog.fadeOut(function(){t.$overlay.hide(),t.$backdrop.removeClass("in"),t.$body.children().remove(),t.$body.css("min-width",void 0)})}});var u;h(function(){u=new c({overlay:h("#top-modal"),dialog:h("#top-modal-dialog"),backdrop:h("#top-modal-backdrop")})}),e.default={Modal:c,hide_modal:n,show_modal:a,show_message:s,show_in_overlay:o}},function(t,e,i){"use strict";(function(t,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=i(53),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(s),"undefined"==typeof Galaxy?"/":Galaxy.root),r={storage:window.sessionStorage,onEnd:function(){sessionStorage.removeItem("activeGalaxyTour")},delay:150,orphan:!0},l=function(e){return t.each(e.steps,function(e){e.preclick&&(e.onShow=function(){t.each(e.preclick,function(t){n(t).click()})}),e.postclick&&(e.onHide=function(){t.each(e.postclick,function(t){n(t).click()})}),e.textinsert&&(e.onShown=function(){n(e.element).val(e.textinsert).trigger("change")})}),e},h=a.Model.extend({urlRoot:o+"api/tours"}),c=a.Collection.extend({url:o+"api/tours",model:h}),u=function(e){var i=o+"api/tours/"+e;n.getJSON(i,function(e){var i=l(e);sessionStorage.setItem("activeGalaxyTour",JSON.stringify(e));var n=new Tour(t.extend({steps:i.steps},r));n.init(),n.goTo(0),n.restart()})},d=a.View.extend({title:"Tours",initialize:function(){var t=this;this.setElement("<div/>"),this.model=new c,this.model.fetch({success:function(){t.render()},error:function(){console.error("Failed to fetch tours.")}})},render:function(){var e=t.template('<h2>Galaxy Tours</h2>\n<p>This page presents a list of interactive tours available on this Galaxy server.\nSelect any tour to get started (and remember, you can click \'End Tour\' at any time).</p>\n\n<div class="col-12 btn-group" role="group" aria-label="Tag selector">\n    <% _.each(tourtagorder, function(tag) { %>\n    <button class="btn btn-primary tag-selector-button" tag-selector-button="<%- tag %>">\n        <%- tag %>\n    </button>\n    <% }); %>\n</div>\n\n<% _.each(tourtagorder, function(tourtagkey) { %>\n<div tag="<%- tourtagkey %>" style="display: block;">\n    <% var tourtag = tourtags[tourtagkey]; %>\n    <h4>\n        <%- tourtag.name %>\n    </h4>\n    <ul class="list-group">\n    <% _.each(tourtag.tours, function(tour) { %>\n        <li class="list-group-item">\n            <a href="/tours/<%- tour.id %>" class="tourItem" data-tour.id=<%- tour.id %>>\n                <%- tour.name || tour.id %>\n            </a>\n             - <%- tour.attributes.description || "No description given." %>\n             <% _.each(tour.attributes.tags, function(tag) { %>\n                <span class="label label-primary sm-label-pad">\n                    <%- tag.charAt(0).toUpperCase() + tag.slice(1) %>\n                </span>\n             <% }); %>\n        </li>\n    <% }); %>\n    </ul>\n</div>\n<% }); %>'),i={};t.each(this.model.models,function(e){null===e.attributes.tags?(void 0===i.Untagged&&(i.Untagged={name:"Untagged",tours:[]}),i.Untagged.tours.push(e)):t.each(e.attributes.tags,function(t){t=t.charAt(0).toUpperCase()+t.slice(1),void 0===i[t]&&(i[t]={name:t,tours:[]}),i[t].tours.push(e)})});var a=Object.keys(i).sort();this.$el.html(e({tours:this.model.models,tourtags:i,tourtagorder:a})).on("click",".tourItem",function(t){t.preventDefault(),u(n(this).data("tour.id"))}).on("click",".tag-selector-button",function(t){var e=n(t.target),i="block",a=e.attr("tag-selector-button");e.toggleClass("btn-primary"),e.toggleClass("btn-secondary"),e.hasClass("btn-secondary")&&(i="none"),n("div[tag='"+a+"']").css({display:i})})}});e.default={ToursView:d,hooked_tour_from_data:l,tour_opts:r,giveTour:u}}).call(e,i(1),i(0),i(2))},function(t,e,i){"use strict";function n(t,e){var i=void 0!==t.prototype?t.prototype:t;return void 0!==e&&(i._logNamespace=e),a.forEach(function(t){i[t]=function(){if(this.logger)return this.logger.emit?this.logger.emit(t,this._logNamespace,arguments):this.logger[t]?this.logger[t].apply(this.logger,arguments):void 0}}),t}Object.defineProperty(e,"__esModule",{value:!0});var a=["log","debug","info","warn","error","metric"];e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),o=(a(s),i(2)),r=a(o),l=i(5),h=n(l),c=i(4),u=n(c),d=r.Model.extend(h.default.LoggableMixin).extend({_logNamespace:"user",urlRoot:function(){return Galaxy.root+"api/users"},defaults:{id:null,username:"("+(0,u.default)("anonymous user")+")",email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1},initialize:function(t){this.log("User.initialize:",t),this.on("loaded",function(t,e){this.log(this+" has loaded:",t,e)}),this.on("change",function(t,e){this.log(this+" has changed:",t,e.changes)})},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},loadFromApi:function(t,e){t=t||d.CURRENT_ID_STR,e=e||{};var i=this,n=e.success;return e.success=function(t,e){i.trigger("loaded",t,e),n&&n(t,e)},t===d.CURRENT_ID_STR&&(e.url=this.urlRoot+"/"+d.CURRENT_ID_STR),r.Model.prototype.fetch.call(this,e)},clearSessionStorage:function(){for(var t in sessionStorage)0===t.indexOf("history:")?sessionStorage.removeItem(t):"history-panel"===t&&sessionStorage.removeItem(t)},toString:function(){var t=[this.get("username")];return this.get("id")&&(t.unshift(this.get("id")),t.push(this.get("email"))),"User("+t.join(":")+")"}});d.CURRENT_ID_STR="current",d.getCurrentUserFromApi=function(t){var e=new d;return e.loadFromApi(d.CURRENT_ID_STR,t),e};r.Collection.extend(h.default.LoggableMixin).extend({model:d,urlRoot:function(){return Galaxy.root+"api/users"}});e.default={User:d}},function(t,e,i){"use strict";(function(t,i,n){Object.defineProperty(e,"__esModule",{value:!0});var a=t.View.extend({initialize:function(e){this.model=e&&e.model||new t.Model(e),this.setElement(i("<div/>").addClass("corner frame")),this.$el.append(i("<div/>").addClass("f-header corner").append(i("<div/>").addClass("f-title")).append(i("<div/>").addClass("f-icon f-close fa fa-close").tooltip({title:"Close",placement:"bottom"}))).append(i("<div/>").addClass("f-content")).append(i("<div/>").addClass("f-resize f-icon corner fa fa-expand").tooltip({title:"Resize"})).append(i("<div/>").addClass("f-cover")),this.$header=this.$(".f-header"),this.$title=this.$(".f-title"),this.$content=this.$(".f-content"),this.render(),this.listenTo(this.model,"change",this.render,this)},render:function(){var t=this,e=this.model.attributes;this.$title.html(e.title||""),this.$header.find(".f-icon-left").remove(),n.each(e.menu,function(e){var a=i("<div/>").addClass("f-icon-left").addClass(e.icon);n.isFunction(e.disabled)&&e.disabled()?a.attr("disabled",!0):a.on("click",function(){e.onclick(t)}).tooltip({title:e.tooltip,placement:"bottom"}),t.$header.append(a)}),e.url?this.$content.html(i("<iframe/>").addClass("f-iframe").attr("scrolling","auto").attr("src",e.url+(-1===e.url.indexOf("?")?"?":"&")+"widget=True")):e.content&&(n.isFunction(e.content)?e.content(t.$content):t.$content.html(e.content))}}),s=t.View.extend({defaultOptions:{frame:{cols:6,rows:3},rows:1e3,cell:130,margin:5,scroll:5,top_min:40,frame_max:9,visible:!0},cols:0,top:0,top_max:0,frame_z:0,frame_counter:0,frame_uid:0,frame_list:{},frame_shadow:null,visible:!1,event:{},initialize:function(e){var a=this;this.options=n.defaults(e||{},this.defaultOptions),this.visible=this.options.visible,this.top=this.top_max=this.options.top_min,this.setElement(i("<div/>").addClass("galaxy-frame").append(i("<div/>").addClass("frame-background")).append(i("<div/>").addClass("frame-menu frame-scroll-up fa fa-chevron-up fa-2x")).append(i("<div/>").addClass("frame-menu frame-scroll-down fa fa-chevron-down fa-2x"))),this.frame_shadow=new t.View({el:i("<div/>").addClass("corner frame-shadow")}),this.$el.append(this.frame_shadow.$el),this._frameInit(this.frame_shadow,"#frame-shadow"),this._frameResize(this.frame_shadow,{width:0,height:0}),this.frame_list["#frame-shadow"]=this.frame_shadow,this.visible?this.show():this.hide(),this._panelRefresh(),i(window).resize(function(){a.visible&&a._panelRefresh()})},render:function(){this.$(".frame-scroll-up")[this.top!=this.options.top_min&&"show"||"hide"](),this.$(".frame-scroll-down")[this.top!=this.top_max&&"show"||"hide"]()},add:function(t){if(this.frame_counter>=this.options.frame_max)Galaxy.modal.show({title:"Warning",body:"You have reached the maximum number of allowed frames ("+this.options.frame_max+").",buttons:{Close:function(){Galaxy.modal.hide()}}});else{var e="#frame-"+this.frame_uid++;if(0!==i(e).length)Galaxy.modal.show({title:"Error",body:"This frame already exists. This page might contain multiple frame managers.",buttons:{Close:function(){Galaxy.modal.hide()}}});else{this.top=this.options.top_min;var n=new a(t);this.$el.append(n.$el),t.width=this._toPixelCoord("width",this.options.frame.cols),t.height=this._toPixelCoord("height",this.options.frame.rows),this.frame_z=parseInt(n.$el.css("z-index")),this.frame_list[e]=n,this.frame_counter++,this._frameInit(n,e),this._frameResize(n,{width:t.width,height:t.height}),this._frameInsert(n,{top:0,left:0},!0),!this.visible&&this.show(),this.trigger("add")}}},del:function(t){var e=this,i=t.$el;i.fadeOut("fast",function(){i.remove(),delete e.frame_list[t.id],e.frame_counter--,e._panelRefresh(!0),e._panelAnimationComplete(),e.trigger("remove")})},show:function(){this.visible=!0,this.$el.fadeIn("fast"),this.trigger("show")},hide:function(){this.event.type||(this.visible=!1,this.$el.fadeOut("fast",function(){i(this).hide()}),this.trigger("hide"))},length:function(){return this.frame_counter},events:{mousemove:"_eventFrameMouseMove",mouseup:"_eventFrameMouseUp",mouseleave:"_eventFrameMouseUp",mousewheel:"_eventPanelScroll",DOMMouseScroll:"_eventPanelScroll","mousedown .frame":"_eventFrameMouseDown","mousedown .frame-background":"_eventHide","mousedown .frame-scroll-up":"_eventPanelScroll_up","mousedown .frame-scroll-down":"_eventPanelScroll_down","mousedown .f-close":"_eventFrameClose"},_eventFrameMouseDown:function(t){i(".tooltip").hide(),this.event.type||((i(t.target).hasClass("f-header")||i(t.target).hasClass("f-title"))&&(this.event.type="drag"),i(t.target).hasClass("f-resize")&&(this.event.type="resize"),this.event.type&&(t.preventDefault(),this.event.target=this._frameIdentify(t.target),this.event.xy={x:t.originalEvent.pageX,y:t.originalEvent.pageY},this._frameDragStart(this.event.target)))},_eventFrameMouseMove:function(t){if(this.event.type){var e={x:t.originalEvent.pageX,y:t.originalEvent.pageY},i={x:e.x-this.event.xy.x,y:e.y-this.event.xy.y};this.event.xy=e;var n=this._frameScreen(this.event.target);if("resize"==this.event.type){n.width+=i.x,n.height+=i.y;var a=this.options.cell-this.options.margin-1;n.width=Math.max(n.width,a),n.height=Math.max(n.height,a),this._frameResize(this.event.target,n),n.width=this._toGridCoord("width",n.width)+1,n.height=this._toGridCoord("height",n.height)+1,n.width=this._toPixelCoord("width",n.width),n.height=this._toPixelCoord("height",n.height),this._frameResize(this.frame_shadow,n),this._frameInsert(this.frame_shadow,{top:this._toGridCoord("top",n.top),left:this._toGridCoord("left",n.left)})}else if("drag"==this.event.type){n.left+=i.x,n.top+=i.y,this._frameOffset(this.event.target,n);var s={top:this._toGridCoord("top",n.top),left:this._toGridCoord("left",n.left)};0!==s.left&&s.left++,this._frameInsert(this.frame_shadow,s)}}},_eventFrameMouseUp:function(t){this.event.type&&(this._frameDragStop(this.event.target),this.event.type=null)},_eventFrameClose:function(t){this.event.type||(t.preventDefault(),this.del(this._frameIdentify(t.target)))},_eventHide:function(t){!this.event.type&&this.hide()},_eventPanelScroll:function(t){if(!this.event.type&&this.visible){0!==i(t.srcElement).parents(".frame").length?t.stopPropagation():(t.preventDefault(),this._panelScroll(t.originalEvent.detail?t.originalEvent.detail:t.originalEvent.wheelDelta/-3))}},_eventPanelScroll_up:function(t){this.event.type||(t.preventDefault(),this._panelScroll(-this.options.scroll))},_eventPanelScroll_down:function(t){this.event.type||(t.preventDefault(),this._panelScroll(this.options.scroll))},_frameIdentify:function(t){return this.frame_list["#"+i(t).closest(".frame").attr("id")]},_frameDragStart:function(t){this._frameFocus(t,!0);var e=this._frameScreen(t);this._frameResize(this.frame_shadow,e),this._frameGrid(this.frame_shadow,t.grid_location),t.grid_location=null,this.frame_shadow.$el.show(),i(".f-cover").show()},_frameDragStop:function(t){this._frameFocus(t,!1);var e=this._frameScreen(this.frame_shadow);this._frameResize(t,e),this._frameGrid(t,this.frame_shadow.grid_location,!0),this.frame_shadow.grid_location=null,this.frame_shadow.$el.hide(),i(".f-cover").hide(),this._panelAnimationComplete()},_toGridCoord:function(t,e){var i="width"==t||"height"==t?1:-1;return"top"==t&&(e-=this.top),parseInt((e+i*this.options.margin)/this.options.cell,10)},_toPixelCoord:function(t,e){var i="width"==t||"height"==t?1:-1,n=e*this.options.cell-i*this.options.margin;return"top"==t&&(n+=this.top),n},_toGrid:function(t){return{top:this._toGridCoord("top",t.top),left:this._toGridCoord("left",t.left),width:this._toGridCoord("width",t.width),height:this._toGridCoord("height",t.height)}},_toPixel:function(t){return{top:this._toPixelCoord("top",t.top),left:this._toPixelCoord("left",t.left),width:this._toPixelCoord("width",t.width),height:this._toPixelCoord("height",t.height)}},_isCollision:function(t){for(var e in this.frame_list){var i=this.frame_list[e];if(null!==i.grid_location&&function(t,e){return!(t.left>e.left+e.width-1||t.left+t.width-1<e.left||t.top>e.top+e.height-1||t.top+t.height-1<e.top)}(t,i.grid_location))return!0}return!1},_locationRank:function(t){return t.top*this.cols+t.left},_panelRefresh:function(t){this.cols=parseInt(i(window).width()/this.options.cell,10)+1,this._frameInsert(null,null,t)},_panelAnimationComplete:function(){var t=this;i(".frame").promise().done(function(){t._panelScroll(0,!0)})},_panelScroll:function(t,e){var i=this.top-this.options.scroll*t;if(i=Math.max(i,this.top_max),i=Math.min(i,this.options.top_min),this.top!=i){for(var n in this.frame_list){var a=this.frame_list[n];if(null!==a.grid_location){var s={top:a.screen_location.top-(this.top-i),left:a.screen_location.left};this._frameOffset(a,s,e)}}this.top=i}this.render()},_frameInit:function(t,e){t.id=e,t.screen_location={},t.grid_location={},t.grid_rank=null,t.$el.attr("id",e.substring(1))},_frameInsert:function(t,e,a){var s=this,o=[];t&&(t.grid_location=null,o.push([t,this._locationRank(e)])),n.each(this.frame_list,function(t){null!==t.grid_location&&(t.grid_location=null,o.push([t,t.grid_rank]))}),o.sort(function(t,e){return t[1]<e[1]?-1:t[1]>e[1]?1:0}),n.each(o,function(t){s._framePlace(t[0],a)}),this.top_max=0,n.each(this.frame_list,function(t){null!==t.grid_location&&(s.top_max=Math.max(s.top_max,t.grid_location.top+t.grid_location.height))}),this.top_max=i(window).height()-this.top_max*this.options.cell-2*this.options.margin,this.top_max=Math.min(this.top_max,this.options.top_min),this.render()},_framePlace:function(t,e){t.grid_location=null;for(var i=this._toGrid(this._frameScreen(t)),n=!1,a=0;a<this.options.rows;a++){for(var s=0;s<Math.max(1,this.cols-i.width);s++)if(i.top=a,i.left=s,!this._isCollision(i)){n=!0;break}if(n)break}n?this._frameGrid(t,i,e):console.log("Grid dimensions exceeded.")},_frameFocus:function(t,e){t.$el.css("z-index",this.frame_z+(e?1:0))},_frameOffset:function(t,e,i){if(t.screen_location.left=e.left,t.screen_location.top=e.top,i){this._frameFocus(t,!0);var n=this;t.$el.animate({top:e.top,left:e.left},"fast",function(){n._frameFocus(t,!1)})}else t.$el.css({top:e.top,left:e.left})},_frameResize:function(t,e){t.$el.css({width:e.width,height:e.height}),t.screen_location.width=e.width,t.screen_location.height=e.height},_frameGrid:function(t,e,i){t.grid_location=e,this._frameOffset(t,this._toPixel(e),i),t.grid_rank=this._locationRank(e)},_frameScreen:function(t){var e=t.screen_location;return{top:e.top,left:e.left,width:e.width,height:e.height}}});e.default={View:s}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,i,n){Object.defineProperty(e,"__esModule",{value:!0});var a=t.Model.extend({defaults:{title:"",icon_class:"",on_click:null,menu_options:null,is_menu_button:!0,id:null,href:null,target:null,enabled:!0,visible:!0,tooltip_config:{}}}),s=t.View.extend({initialize:function(){this.model.attributes.tooltip_config={placement:"bottom"},this.model.bind("change",this.render,this)},render:function(){this.$el.tooltip("hide");var t=this.template(this.model.toJSON());return t.tooltip(this.model.get("tooltip_config")),this.$el.replaceWith(t),this.setElement(t),this},events:{click:"click"},click:function(t){return!i.isFunction(this.model.get("on_click"))||(this.model.get("on_click")(t),!1)},template:function(t){var e='title="'+t.title+'" class="icon-button';return t.is_menu_button&&(e+=" menu-button"),e+=" "+t.icon_class,t.enabled||(e+="_disabled"),e+='"',t.id&&(e+=' id="'+t.id+'"'),e+=' href="'+t.href+'"',t.target&&(e+=' target="'+t.target+'"'),t.visible||(e+=' style="display: none;"'),e=t.enabled?"<a "+e+"/>":"<span "+e+"/>",n(e)}}),o=t.Collection.extend({model:a}),r=t.View.extend({tagName:"div",initialize:function(){this.render()},render:function(){var t=this;return this.collection.each(function(e){var i=n("<a/>").attr("href","javascript:void(0)").attr("title",e.attributes.title).addClass("icon-button menu-button").addClass(e.attributes.icon_class).appendTo(t.$el).click(e.attributes.on_click);e.attributes.tooltip_config&&i.tooltip(e.attributes.tooltip_config);var a=e.get("options");a&&make_popupmenu(i,a)}),this}}),l=function(t,e){e||(e={});var n=new o(i.map(t,function(t){return new a(i.extend(t,e))}));return new r({collection:n})};e.default={IconButton:a,IconButtonView:s,IconButtonCollection:o,IconButtonMenuView:r,create_icon_buttons_menu:l}}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(29),h=s(l),c=t.View.extend({initialize:function(e){var i=this;this.data=[],this.data2=[],this.model=e&&e.model||new t.Model({id:r.default.uid(),cls:"ui-select",error_text:"No options available",empty_text:"Nothing selected",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1,disabled:!1,readonly:!1,onchange:function(){},value:null,individual:!1,pagesize:20}).set(e),this.on("change",function(){i.model.get("onchange")&&i.model.get("onchange")(i.value())}),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:disabled",this._changeDisabled,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:multiple change:searchable change:cls change:id",this.render,this),this.render()},render:function(){var t=this;this.model.get("searchable")?this._renderSearchable():this._renderClassic(),this.$el.addClass(this.model.get("cls")).attr("id",this.model.get("id")),this.$select.empty().addClass("select").attr("id",this.model.get("id")+"_select").prop("multiple",this.model.get("multiple")).on("change",function(){t.value(t._getValue()),t.trigger("change")}),this._changeData(),this._changeWait(),this._changeVisible(),this._changeDisabled()},_renderClassic:function(){var t=this;this.$el.addClass(this.model.get("multiple")?"ui-select-multiple":"ui-select").append(this.$select=n("<select/>")).append(this.$dropdown=n("<div/>")).append(this.$resize=n("<div/>").append(this.$resize_icon=n("<i/>"))),this.model.get("multiple")?(this.$dropdown.hide(),this.$resize_icon.addClass("fa fa-angle-double-right fa-rotate-45").show(),this.$resize.removeClass().addClass("icon-resize").show().off("mousedown").on("mousedown",function(e){var i=e.pageY,a=t.$select.height();t.minHeight=t.minHeight||a,n("#dd-helper").show().on("mousemove",function(e){t.$select.height(Math.max(a+(e.pageY-i),t.minHeight))}).on("mouseup mouseleave",function(){n("#dd-helper").hide().off()})})):(this.$dropdown.show(),this.$resize.hide(),this.$resize_icon.hide())},_renderSearchable:function(){var t=this;this.$el.append(this.$select=n("<div/>")).append(this.$dropdown=n("<div/>")),this.$dropdown.hide(),this.model.get("multiple")||this.$dropdown.show().on("click",function(){t.$select.select2&&t.$select.select2("open")}),this.all_button=null,!this.model.get("multiple")||this.model.get("individual")||this.model.get("readonly")||(this.all_button=new h.default.ButtonCheck({onclick:function(){var e=[];0!==t.all_button.value()&&a.each(t.model.get("data"),function(t){e.push(t.value)}),t.value(e),t.trigger("change")}}),this.$el.prepend(this.all_button.$el))},_match:function(t,e){return!t||""==t||String(e).toUpperCase().indexOf(t.toUpperCase())>=0},_changeData:function(){var t=this;this.data=[],!this.model.get("multiple")&&this.model.get("optional")&&this.data.push({value:"__null__",label:t.model.get("empty_text")}),a.each(this.model.get("data"),function(e){t.data.push(e)}),0==this.length()&&this.data.push({value:"__null__",label:this.model.get("error_text")}),this.model.get("searchable")?(this.data2=[],a.each(this.data,function(e,i){t.data2.push({order:i,id:e.value,text:e.label,tags:e.tags})}),this.$select.data("select2")&&this.$select.select2("destroy"),this.matched_tags={},this.$select.select2({data:t.data2,closeOnSelect:!this.model.get("multiple"),multiple:this.model.get("multiple"),query:function(e){t.matched_tags={};var i=t.model.get("pagesize"),n=a.filter(t.data2,function(i){var n=!1;return a.each(i.tags,function(i){t._match(e.term,i)&&(n=t.matched_tags[i]=!0)}),n||t._match(e.term,i.text)});e.callback({results:n.slice((e.page-1)*i,e.page*i),more:n.length>=e.page*i})},formatResult:function(e){return a.escape(e.text)+'<div class="ui-tags">'+a.reduce(e.tags,function(e,i){return t.matched_tags[i]?e+'&nbsp;<div class="label label-info">'+a.escape(i)+"</div>":e},"")+"</div>"}}),this.$(".select2-container .select2-search input").off("blur")):(this.$select.find("option").remove(),a.each(this.data,function(e){t.$select.append(n("<option/>").attr("value",e.value).html(a.escape(e.label)))})),this.model.set("disabled",this.model.get("readonly")||0==this.length()),this._changeValue()},_changeDisabled:function(){this.model.get("searchable")?this.$select.select2(this.model.get("disabled")?"disable":"enable"):this.$select.prop("disabled",this.model.get("disabled"))},_changeWait:function(){this.$dropdown.removeClass().addClass("icon-dropdown fa").addClass(this.model.get("wait")?"fa-spinner fa-spin":"fa-caret-down")},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"](),this.$select[this.model.get("visible")?"show":"hide"]()},_changeValue:function(){if(this._setValue(this.model.get("value")),this.model.get("multiple")){if(this.all_button){var t=this._getValue();this.all_button.value(n.isArray(t)?t.length:0,this.length())}}else null!==this._getValue()||this.model.get("optional")||this._setValue(this.first())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){return this.data.length>0?this.data[0].value:null},exists:function(t){return a.findWhere(this.data,{value:t})},text:function(){var t=this._getValue(),e=this.exists(n.isArray(t)?t[0]:t);return e?e.label:""},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},disabled:function(){return this.model.get("disabled")},enable:function(){this.model.set("disabled",!1)},disable:function(){this.model.set("disabled",!0)},add:function(t,e){a.each(this.model.get("data"),function(e){e.keep&&!a.findWhere(t,{value:e.value})&&t.push(e)}),e&&t&&t.sort(e),this.model.set("data",t)},update:function(t){this.model.set("data",t)},setOnChange:function(t){this.model.set("onchange",t)},length:function(){return n.isArray(this.model.get("data"))?this.model.get("data").length:0},_setValue:function(t){var e=this;if(null!==t&&void 0!==t||(t="__null__"),this.model.get("multiple")?t=n.isArray(t)?t:[t]:n.isArray(t)&&(t=t.length>0?t[0]:"__null__"),this.model.get("searchable")){if(n.isArray(t)){var i=[];a.each(t,function(t){var n=a.findWhere(e.data2,{id:t});n&&i.push(n)}),t=i}else{t=a.findWhere(this.data2,{id:t})}this.$select.select2("data",t)}else this.$select.val(t)},_getValue:function(){var t=null;if(this.model.get("searchable")){var e=this.$select.select2("data");e&&(n.isArray(e)?(t=[],e.sort(function(t,e){return t.order-e.order}),a.each(e,function(e){t.push(e.id)})):t=e.id)}else t=this.$select.val();return r.default.isEmpty(t)?null:t}});e.default={View:c}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(29),h=s(l),c=t.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new t.Model({visible:!0,data:[],id:r.default.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(e),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.on("change",function(){i.model.get("onchange")(i.value())}),this.render()},render:function(){var t=this;this.$el.empty().removeClass().addClass("ui-options").append(this.$message=n("<div/>")).append(this.$menu=n("<div/>").addClass("ui-options-menu")).append(this.$options=n(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new h.default.ButtonCheck({onclick:function(){t.$("input").prop("checked",0!==t.all_button.value()),t.value(t._getValue()),t.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(t){this.model.set("data",t)},_changeData:function(){var t=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):a.each(this.model.get("data"),function(e){t.$options.append(n(t._templateOption(e)).addClass("ui-option").tooltip({title:e.tooltip,placement:"bottom"}))});var t=this;this.$("input").on("change",function(){t.value(t._getValue()),t.trigger("change")}),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value(n.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){var t=this.$("input").first();return t.length>0?t.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},_setValue:function(t){var e=this;if(void 0!==t&&(this.$("input").prop("checked",!1),null!==t)){var i=n.isArray(t)?t:[t];a.each(i,function(t){e.$('input[value="'+t+'"]').first().prop("checked",!0)})}},_getValue:function(){var t=[];return this.$(":checked").each(function(){t.push(n(this).val())}),r.default.isEmpty(t)?null:this.model.get("multiple")?t:t[0]},_messageShow:function(t,e){this.$message.show().removeClass().addClass("ui-message alert alert-"+e).html(t)},_template:function(){return n("<div/>").addClass("ui-options-list")}}),u=c.extend({_templateOption:function(t){var e=r.default.uid();return n("<div/>").addClass("ui-option").append(n("<input/>").attr({id:e,type:this.model.get("type"),name:this.model.id,value:t.value})).append(n("<label/>").addClass("ui-options-label").attr("for",e).html(t.label))}}),d={};d.View=u.extend({initialize:function(t){t.type="radio",u.prototype.initialize.call(this,t)}});var f={};f.View=u.extend({initialize:function(t){t.type="checkbox",t.multiple=!0,u.prototype.initialize.call(this,t)}});var p={};p.View=c.extend({initialize:function(t){c.prototype.initialize.call(this,t)},_setValue:function(t){void 0!==t&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'+t+'"]').prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(t){var e=n("<label/>").addClass("btn btn-default");return t.icon&&e.append(n("<i/>").addClass("fa").addClass(t.icon).addClass(!t.label&&"no-padding")),e.append(n("<input/>").attr({type:"radio",name:this.model.id,value:t.value})),t.label&&e.append(t.label),e},_template:function(){return n("<div/>").addClass("btn-group ui-radiobutton").attr("data-toggle","buttons")}}),e.default={Base:c,BaseIcons:u,Radio:d,RadioButton:p,Checkbox:f}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),r=i(20),l=a(r),h=i(18),c=a(h),u=i(65),d=(a(u),{hidden:!1,show:function(){this.set("hidden",!1)},hide:function(){this.set("hidden",!0)},toggle:function(){this.set("hidden",!this.get("hidden"))},is_visible:function(){return!this.attributes.hidden}}),f=t.Model.extend({defaults:{name:null,label:null,type:null,value:null,html:null,num_samples:5},initialize:function(t){this.attributes.html=unescape(this.attributes.html)},copy:function(){return new f(this.toJSON())},set_value:function(t){this.set("value",t||"")}}),p=t.Collection.extend({model:f}),g=f.extend({}),m=f.extend({set_value:function(t){this.set("value",parseInt(t,10))},get_samples:function(){return d3.scale.linear().domain([this.get("min"),this.get("max")]).ticks(this.get("num_samples"))}}),v=m.extend({set_value:function(t){this.set("value",parseFloat(t))}}),_=f.extend({get_samples:function(){return o.map(this.get("options"),function(t){return t[0]})}});f.subModelTypes={integer:m,float:v,data:g,select:_};var b=t.Model.extend({defaults:{id:null,name:null,description:null,target:null,inputs:[],outputs:[]},urlRoot:Galaxy.root+"api/tools",initialize:function(t){this.set("inputs",new p(o.map(t.inputs,function(t){return new(f.subModelTypes[t.type]||f)(t)})))},toJSON:function(){var e=t.Model.prototype.toJSON.call(this);return e.inputs=this.get("inputs").map(function(t){return t.toJSON()}),e},remove_inputs:function(t){var e=this,i=e.get("inputs").filter(function(e){return-1!==t.indexOf(e.get("type"))});e.get("inputs").remove(i)},copy:function(e){var i=new b(this.toJSON());if(e){var n=new t.Collection;i.get("inputs").each(function(t){t.get_samples()&&n.push(t)}),i.set("inputs",n)}return i},apply_search_results:function(t){return-1!==o.indexOf(t,this.attributes.id)?this.show():this.hide(),this.is_visible()},set_input_value:function(t,e){this.get("inputs").find(function(e){return e.get("name")===t}).set("value",e)},set_input_values:function(t){var e=this;o.each(o.keys(t),function(i){e.set_input_value(i,t[i])})},run:function(){return this._run()},rerun:function(t,e){return this._run({action:"rerun",target_dataset_id:t.id,regions:e})},get_inputs_dict:function(){var t={};return this.get("inputs").each(function(e){t[e.get("name")]=e.get("value")}),t},_run:function(t){var e=o.extend({tool_id:this.id,inputs:this.get_inputs_dict()},t),i=n.Deferred(),a=new l.default.ServerStateDeferred({ajax_settings:{url:this.urlRoot,data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(t){return"pending"!==t}});return n.when(a.go()).then(function(t){i.resolve(new c.default.DatasetCollection(t))}),i}});o.extend(b.prototype,d);var y=(t.View.extend({}),t.Collection.extend({model:b})),w=t.Model.extend(d),x=t.Model.extend({defaults:{elems:[],open:!1},clear_search_results:function(){o.each(this.attributes.elems,function(t){t.show()}),this.show(),this.set("open",!1)},apply_search_results:function(t){var e,i=!0;o.each(this.attributes.elems,function(n){n instanceof w?(e=n,e.hide()):n instanceof b&&n.apply_search_results(t)&&(i=!1,e&&e.show())}),i?this.hide():(this.show(),this.set("open",!0))}});o.extend(x.prototype,d);var k=t.Model.extend({defaults:{search_hint_string:"search tools",min_chars_for_search:3,clear_btn_url:"",visible:!0,query:"",results:null,clear_key:27},urlRoot:Galaxy.root+"api/tools",initialize:function(){this.on("change:query",this.do_search)},do_search:function(){var t=this.attributes.query;if(t.length<this.attributes.min_chars_for_search)return void this.set("results",null);var e=t;this.timer&&clearTimeout(this.timer),n("#search-clear-btn").hide(),n("#search-spinner").show();var i=this;this.timer=setTimeout(function(){"undefined"!=typeof ga&&ga("send","pageview",Galaxy.root+"?q="+e),n.get(i.urlRoot,{q:e},function(t){i.set("results",t),n("#search-spinner").hide(),n("#search-clear-btn").show()},"json")},400)},clear_search:function(){this.set("query",""),this.set("results",null)}});o.extend(k.prototype,d);var C=t.Model.extend({initialize:function(e){this.attributes.tool_search=e.tool_search,this.attributes.tool_search.on("change:results",this.apply_search_results,this),this.attributes.tools=e.tools,this.attributes.layout=new t.Collection(this.parse(e.layout))},parse:function(t){var e=this,i=function t(i){var n=i.model_class;if(n.indexOf("Tool")===n.length-4)return e.attributes.tools.get(i.id);if("ToolSection"===n){var a=o.map(i.elems,t);return i.elems=a,new x(i)}return"ToolSectionLabel"===n?new w(i):void 0};return o.map(t,i)},clear_search_results:function(){this.get("layout").each(function(t){t instanceof x?t.clear_search_results():t.show()})},apply_search_results:function(){var t=this.get("tool_search").get("results");if(null===t)return void this.clear_search_results();var e=null;this.get("layout").each(function(i){i instanceof w?(e=i,e.hide()):i instanceof b?i.apply_search_results(t)&&e&&e.show():(e=null,i.apply_search_results(t))})}}),S=t.View.extend({initialize:function(){this.model.on("change:hidden",this.update_visible,this),this.update_visible()},update_visible:function(){this.model.attributes.hidden?this.$el.hide():this.$el.show()}}),T=S.extend({tagName:"div",render:function(){var t=n("<div/>");t.append($.tool_link(this.model.toJSON()));var e=this.model.get("form_style",null);if("upload1"===this.model.id)t.find("a").on("click",function(t){t.preventDefault(),Galaxy.upload.show()});else if("regular"===e){var i=this;t.find("a").on("click",function(t){t.preventDefault(),Galaxy.router.push("/",{tool_id:i.model.id,version:i.model.get("version")})})}return this.$el.append(t),this}}),E=S.extend({tagName:"div",className:"toolPanelLabel",render:function(){return this.$el.append(n("<span/>").text(this.model.attributes.text)),this}}),A=S.extend({tagName:"div",className:"toolSectionWrapper",initialize:function(){S.prototype.initialize.call(this),this.model.on("change:open",this.update_open,this)},render:function(){this.$el.append($.panel_section(this.model.toJSON()));var t=this.$el.find(".toolSectionBody");return o.each(this.model.attributes.elems,function(e){if(e instanceof b){var i=new T({model:e,className:"toolTitle"});i.render(),t.append(i.$el)}else if(e instanceof w){var n=new E({model:e});n.render(),t.append(n.$el)}}),this},events:{"click .toolSectionTitle > a":"toggle"},toggle:function(){this.model.set("open",!this.model.attributes.open)},update_open:function(){this.model.attributes.open?this.$el.children(".toolSectionBody").slideDown("fast"):this.$el.children(".toolSectionBody").slideUp("fast")}}),M=t.View.extend({tagName:"div",id:"tool-search",className:"bar",events:{click:"focus_and_select","keyup :input":"query_changed","change :input":"query_changed","click #search-clear-btn":"clear"},render:function(){return this.$el.append($.tool_search(this.model.toJSON())),this.model.is_visible()||this.$el.hide(),n("#messagebox").is(":visible")&&this.$el.css("top","95px"),this.$el.find("[title]").tooltip(),this},focus_and_select:function(){this.$el.find(":input").focus().select()},clear:function(){return this.model.clear_search(),this.$el.find(":input").val(""),this.focus_and_select(),!1},query_changed:function(t){if(this.model.attributes.clear_key&&this.model.attributes.clear_key===t.which)return this.clear(),!1;this.model.set("query",this.$el.find(":input").val())}}),O=t.View.extend({tagName:"div",className:"toolMenu",initialize:function(){this.model.get("tool_search").on("change:results",this.handle_search_results,this)},render:function(){var t=this,e=new M({model:this.model.get("tool_search")});return e.render(),t.$el.append(e.$el),this.model.get("layout").each(function(e){if(e instanceof x){var i=new A({model:e});i.render(),t.$el.append(i.$el)}else if(e instanceof b){var n=new T({model:e,className:"toolTitleNoSection"});n.render(),t.$el.append(n.$el)}else if(e instanceof w){var a=new E({model:e});a.render(),t.$el.append(a.$el)}}),t.$el.find("a.tool-link").click(function(e){var i=n(this).attr("class").split(/\s+/)[0],a=t.model.get("tools").get(i);t.trigger("tool_link_click",e,a)}),this},handle_search_results:function(){var t=this.model.get("tool_search").get("results");t&&0===t.length?n("#search-no-results").show():n("#search-no-results").hide()}}),R=t.View.extend({className:"toolForm",render:function(){this.$el.children().remove(),this.$el.append($.tool_form(this.model.toJSON()))}}),$=(t.View.extend({className:"toolMenuAndView",initialize:function(){this.tool_panel_view=new O({collection:this.collection}),this.tool_form_view=new R},render:function(){this.tool_panel_view.render(),this.tool_panel_view.$el.css("float","left"),this.$el.append(this.tool_panel_view.$el),this.tool_form_view.$el.hide(),this.$el.append(this.tool_form_view.$el);var t=this;this.tool_panel_view.on("tool_link_click",function(e,i){e.preventDefault(),t.show_tool(i)})},show_tool:function(t){var e=this;t.fetch().done(function(){e.tool_form_view.model=t,e.tool_form_view.render(),e.tool_form_view.$el.show(),n("#left").width("650px")})}}),{tool_search:o.template(['<input id="tool-search-query" class="search-query parent-width" name="query" ','placeholder="<%- search_hint_string %>" autocomplete="off" type="text" />','<a id="search-clear-btn" title="clear search (esc)"> </a>','<span id="search-spinner" class="search-spinner fa fa-spinner fa-spin"></span>'].join("")),panel_section:o.template(['<div class="toolSectionTitle" id="title_<%- id %>">','<a href="javascript:void(0)"><span><%- name %></span></a>',"</div>",'<div id="<%- id %>" class="toolSectionBody" style="display: none;">','<div class="toolSectionBg"></div>',"<div>"].join("")),tool_link:o.template(['<a class="<%- id %> tool-link" href="<%= link %>" target="<%- target %>" minsizehint="<%- min_width %>">','<span class="labels">',"<% _.each( labels, function( label ){ %>",'<span class="label label-default label-<%- label %>">',"<%- label %>","</span>","<% }); %>","</span>",'<span class="tool-old-link">',"<%- name %>","</span>"," <%- description %>","</a>"].join("")),tool_form:o.template(['<div class="toolFormTitle"><%- tool.name %> (version <%- tool.version %>)</div>','<div class="toolFormBody">',"<% _.each( tool.inputs, function( input ){ %>",'<div class="form-row">','<label for="<%- input.name %>"><%- input.label %>:</label>','<div class="form-row-input">',"<%= input.html %>","</div>",'<div class="toolParamHelp" style="clear: both;">',"<%- input.help %>","</div>",'<div style="clear: both;"></div>',"</div>","<% }); %>","</div>",'<div class="form-row form-actions">','<input type="submit" class="btn btn-primary" name="runtool_btn" value="Execute" />',"</div>",'<div class="toolHelp">','<div class="toolHelpBody"><% tool.help %></div>',"</div>"].join(""),{variable:"tool"})});e.default={ToolParameter:f,IntegerToolParameter:m,SelectToolParameter:_,Tool:b,ToolCollection:y,ToolSearch:k,ToolPanel:C,ToolPanelView:O,ToolFormView:R}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(6),h=s(l),c=i(7),u=s(c),d=i(66),f=s(d),p=i(17),g=s(p),m=t.View.extend({initialize:function(t){var e=this;this.modal=parent.Galaxy.modal||new u.default.View,this.form=new f.default(r.default.merge({listen_to_history:!0,always_refresh:!1,buildmodel:function(t,i){var a=i.model.attributes,s="",o={},l=a.job_id;l?s=Galaxy.root+"api/jobs/"+l+"/build_for_rerun":(s=Galaxy.root+"api/tools/"+a.id+"/build",o=n.extend({},Galaxy.params),o.tool_id&&delete o.tool_id),a.version&&(o.tool_version=a.version),r.default.get({url:s,data:o,success:function(n){if(!n.display)return void(window.location=Galaxy.root);i.model.set(n),e._customize(i),Galaxy.emit.debug("tool-form-base::_buildModel()","Initial tool model ready.",n),t.resolve()},error:function(e,s){var o=e&&e.err_msg||"Uncaught error.";401==s?window.location=Galaxy.root+"user/login?"+n.param({redirect:Galaxy.root+"?tool_id="+a.id}):i.$el.is(":empty")?i.$el.prepend(new h.default.Message({message:o,status:"danger",persistent:!0,large:!0}).$el):Galaxy.modal&&Galaxy.modal.show({title:"Tool request failed",body:o,buttons:{Close:function(){Galaxy.modal.hide()}}}),Galaxy.emit.debug("tool-form-base::_buildModel()","Initial tool model request failed.",e),t.reject()}})},postchange:function(t,e){var i={tool_id:e.model.get("id"),tool_version:e.model.get("version"),inputs:n.extend(!0,{},e.data.create())};e.wait(!0),Galaxy.emit.debug("tool-form::postchange()","Sending current state.",i),r.default.request({type:"POST",url:Galaxy.root+"api/tools/"+e.model.get("id")+"/build",data:i,success:function(i){e.update(i),e.wait(!1),Galaxy.emit.debug("tool-form::postchange()","Received new model.",i),t.resolve()},error:function(e){Galaxy.emit.debug("tool-form::postchange()","Refresh request failed.",e),t.reject()}})}},t)),this.deferred=this.form.deferred,this.setElement("<div/>"),this.$el.append(this.form.$el)},_customize:function(t){var e=this,i=t.model.attributes,n=new h.default.Button({icon:"fa-check",tooltip:"Execute: "+i.name+" ("+i.version+")",title:"Execute",cls:"btn btn-primary ui-clear-float",wait_cls:"btn btn-info ui-clear-float",onclick:function(){n.wait(),t.portlet.disable(),e.submit(i,function(){n.unwait(),t.portlet.enable()})}});i.buttons={execute:n},i.job_id&&i.job_remap&&i.inputs.push({label:"Resume dependencies from this job",name:"rerun_remap_job_id",type:"select",display:"radio",ignore:"__ignore__",value:"__ignore__",options:[["Yes",i.job_id],["No","__ignore__"]],help:"The previous run of this tool failed and other tools were waiting for it to finish successfully. Use this option to resume those tools using the new output(s) of this tool run."})},submit:function(t,e){var i=this,s={tool_id:t.id,tool_version:t.version,inputs:this.form.data.create()};if(this.form.trigger("reset"),!i.validate(s))return Galaxy.emit.debug("tool-form::submit()","Submission canceled. Validation failed."),void(e&&e());if(t.action!==Galaxy.root+"tool_runner/index"){var o=n("<form/>").attr({action:t.action,method:t.method,enctype:t.enctype});return a.each(s.inputs,function(t,e){o.append(n("<input/>").attr({name:e,value:t}))}),o.hide().appendTo("body").submit().remove(),void(e&&e())}Galaxy.emit.debug("tool-form::submit()","Validation complete.",s),r.default.request({type:"POST",url:Galaxy.root+"api/tools",data:s,success:function(t){if(e&&e(),i.$el.children().hide(),i.$el.append(i._templateSuccess(t)),t.jobs&&t.jobs.length>0){i.$el.append(n("<div/>",{id:"webhook-view"}));new g.default.WebhookView({urlRoot:Galaxy.root+"api/webhooks/tool",toolId:s.tool_id})}parent.Galaxy&&parent.Galaxy.currHistoryPanel&&parent.Galaxy.currHistoryPanel.refreshContents()},error:function(t){e&&e(),Galaxy.emit.debug("tool-form::submit","Submission failed.",t);var n=!1;if(t&&t.err_data){var a=i.form.data.matchResponse(t.err_data);for(var o in a){i.form.highlight(o,a[o]),n=!0;break}}n||i.modal.show({title:"Job submission failed",body:i._templateError(s,t&&t.err_msg),buttons:{Close:function(){i.modal.hide()}}})}})},validate:function(t){var e=t.inputs,i=-1,n=null;for(var a in e){var s=e[a],o=this.form.data.match(a),r=this.form.field_list[o],l=this.form.input_list[o];if(o&&l&&r){if(!l.optional&&null==s)return this.form.highlight(o),!1;if(s&&s.batch){var h=s.values.length,c=h>0&&s.values[0]&&s.values[0].src;if(c)if(null===n)n=c;else if(n!==c)return this.form.highlight(o,"Please select either dataset or dataset list fields for all batch mode fields."),!1;if(-1===i)i=h;else if(i!==h)return this.form.highlight(o,"Please make sure that you select the same number of inputs for all batch mode fields. This field contains <b>"+h+"</b> selection(s) while a previous field contains <b>"+i+"</b>."),!1}}else Galaxy.emit.debug("tool-form::validate()","Retrieving input objects failed.")}return!0},_templateSuccess:function(t){if(t.jobs&&t.jobs.length>0){var e=t.jobs.length,i=1==e?"1 job has":e+" jobs have",s=n("<div/>").addClass("donemessagelarge").append(n("<p/>").text(i+" been successfully added to the queue - resulting in the following datasets:"));return a.each(t.outputs,function(t){s.append(n("<p/>").addClass("messagerow").append(n("<b/>").text(t.hid+": "+t.name)))}),s.append(n("<p/>").append("<b/>").text("You can check the status of queued jobs and view the resulting data by refreshing the History pane. When the job has been run the status will change from 'running' to 'finished' if completed successfully or 'error' if problems were encountered.")),s}return this._templateError(t,"Invalid success response. No jobs found.")},_templateError:function(t,e){return n("<div/>").addClass("errormessagelarge").append(n("<p/>").text("The server could not complete the request. Please contact the Galaxy Team if this error persists. "+(e||""))).append(n("<pre/>").text(JSON.stringify(t,null,4)))}});e.default={View:m}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),o=(a(s),i(67)),r=a(o),l=i(6),h=a(l),c=i(9),u=a(c),d=i(71),f=a(d),p=i(130),g=a(p);e.default=u.default.extend({initialize:function(t){var e=this;this.deferred=new r.default,u.default.prototype.initialize.call(this,t),this._update(this.model.get("initialmodel")),this.model.get("listen_to_history")&&parent.Galaxy&&parent.Galaxy.currHistoryPanel&&this.listenTo(parent.Galaxy.currHistoryPanel.collection,"change",function(){e.model.get("onchange")()}),this.$el.on("remove",function(){e._destroy()})},_update:function(t){var e=this;t=t||this.model.get("buildmodel"),t?(this.deferred.reset(),this.deferred.execute(function(i){t(i,e),i.then(function(){e._render()})})):this._render()},_destroy:function(){var t=this;this.$el.off().hide(),this.deferred.execute(function(){u.default.prototype.remove.call(t),Galaxy.emit.debug("tool-form-base::_destroy()","Destroy view.")})},_render:function(){var e=this,i=this.model.attributes;this.model.set({title:i.fixed_title||"<b>"+i.name+"</b> "+i.description+" (Galaxy Version "+i.version+")",operations:!i.hide_operations&&this._operations(),onchange:function(){e.deferred.reset(),e.deferred.execute(function(t){e.model.get("postchange")(t,e)})}}),this.render(),this.model.get("collapsible")||this.$el.append(t("<div/>").addClass("ui-margin-top-large").append(this._footer())),this.show_message&&this.message.update({status:"success",message:"Now you are using '"+i.name+"' version "+i.version+", id '"+i.id+"'.",persistent:!1}),this.show_message=!0},_operations:function(){var e=this,i=this.model.attributes,a=new h.default.ButtonMenu({icon:"fa-cubes",title:!i.narrow&&"Versions"||null,tooltip:"Select another tool version"});if(!i.sustain_version&&i.versions&&i.versions.length>1)for(var s in i.versions){var o=i.versions[s];o!=i.version&&a.addMenu({title:"Switch to "+o,version:o,icon:"fa-cube",onclick:function(){e.model.set("id",i.id.replace(i.version,this.version)),e.model.set("version",this.version),e._update()}})}else a.$el.hide();var r=new h.default.ButtonMenu({icon:"fa-caret-down",title:!i.narrow&&"Options"||null,tooltip:"View available options"});return i.biostar_url&&(r.addMenu({icon:"fa-question-circle",title:"Question?",onclick:function(){window.open(i.biostar_url+"/p/new/post/")}}),r.addMenu({icon:"fa-search",title:"Search",onclick:function(){window.open(i.biostar_url+"/local/search/page/?q="+i.name)}})),r.addMenu({icon:"fa-share",title:"Share",onclick:function(){prompt("Copy to clipboard: Ctrl+C, Enter",window.location.origin+Galaxy.root+"root?tool_id="+i.id)}}),Galaxy.user&&Galaxy.user.get("is_admin")&&r.addMenu({icon:"fa-download",title:"Download",onclick:function(){window.location.href=Galaxy.root+"api/tools/"+i.id+"/download"}}),i.requirements&&i.requirements.length>0&&r.addMenu({icon:"fa-info-circle",title:"Requirements",onclick:function(){!this.requirements_visible||e.portlet.collapsed?(this.requirements_visible=!0,e.portlet.expand(),e.message.update({persistent:!0,message:e._templateRequirements(i),status:"info"})):(this.requirements_visible=!1,e.message.update({message:""}))}}),i.sharable_url&&r.addMenu({icon:"fa-external-link",title:"See in Tool Shed",onclick:function(){window.open(i.sharable_url)}}),t.getJSON("/api/webhooks/tool-menu/all",function(t){n.each(t,function(t){t.activate&&t.config.function&&r.addMenu({icon:t.config.icon,title:t.config.title,onclick:function(){new Function("options",t.config.function)(i)}})})}),{menu:r,versions:a}},_footer:function(){var e=this.model.attributes,i=t("<div/>").append(this._templateHelp(e));if(e.citations){var n=t("<div/>"),a=new f.default.ToolCitationCollection;a.tool_id=e.id;new g.default.CitationListView({el:n,collection:a}).render(),a.fetch(),i.append(n)}return i},_templateHelp:function(e){var i=t("<div/>").addClass("ui-form-help").append(e.help);return i.find("a").attr("target","_blank"),i},_templateRequirements:function(e){var i=e.requirements.length;if(i>0){var a="This tool requires ";n.each(e.requirements,function(t,e){a+=t.name+(t.version?" (Version "+t.version+")":"")+(e<i-2?", ":e==i-2?" and ":"")});var s=t("<a/>").attr("target","_blank").attr("href","https://galaxyproject.org/tools/requirements/").text("here");return t("<span/>").append(a+". Click ").append(s).append(" for more information.")}return"No requirements found."}})}).call(e,i(0),i(1))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=t.Model.extend({initialize:function(){this.active={},this.last=null},execute:function(t){var e=this,i=s.default.uid(),a=t.length>0;this.active[i]=!0;var o=n.Deferred();o.promise().always(function(){delete e.active[i],a&&Galaxy.emit.debug("deferred::execute()",this.state().charAt(0).toUpperCase()+this.state().slice(1)+" "+i)}),n.when(this.last).always(function(){e.active[i]?(a&&Galaxy.emit.debug("deferred::execute()","Running "+i),t(o),!a&&o.resolve()):o.reject()}),this.last=o.promise()},reset:function(){Galaxy.emit.debug("deferred::execute()","Reset");for(var t in this.active)this.active[t]=!1},ready:function(){return n.isEmptyObject(this.active)}})}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=t.View.extend({initialize:function(t){this.options=s.default.merge(t,{content:"No content available.",onchange:null,ondblclick:null,onconfirm:null,cls:"ui-table",selectable:!0,cls_tr:""}),this.setElement(this._template()),this.$thead=this.$("thead"),this.$tbody=this.$("tbody"),this.$tmessage=this.$("tmessage"),this.row=this._row(),this.row_count=0},events:{click:"_onclick",dblclick:"_ondblclick"},addHeader:function(t){this.row.append(n("<th/>").append(t))},appendHeader:function(){this.$thead.append(this.row),this.row=n("<tr/>")},add:function(t,e,i){var a=n("<td/>");e&&a.css("width",e),i&&a.css("text-align",i),this.row.append(a.append(t))},append:function(t,e){this._commit(t,e,!1)},prepend:function(t,e){this._commit(t,e,!0)},get:function(t){return this.$("#"+t)},del:function(t){var e=this.$tbody.find("#"+t);e.length>0&&(e.remove(),this.row_count--,this._refresh())},delAll:function(){this.$tbody.empty(),this.row_count=0,this._refresh()},value:function(t){if(this.options.selectable){this.before=this.$tbody.find(".current").attr("id"),void 0!==t&&(this.$tbody.find("tr").removeClass("current"),t&&this.$tbody.find("#"+t).addClass("current"));var e=this.$tbody.find(".current").attr("id");return void 0===e?null:(e!=this.before&&this.options.onchange&&this.options.onchange(t),e)}},size:function(){return this.$tbody.find("tr").length},_commit:function(t,e,i){this.del(t),this.row.attr("id",t),i?this.$tbody.prepend(this.row):this.$tbody.append(this.row),e&&(this.row.hide(),this.row.fadeIn()),this.row=this._row(),this.row_count++,this._refresh()},_row:function(){return n('<tr class="'+this.options.cls_tr+'"></tr>')},_onclick:function(t){var e=this.value(),i=n(t.target).closest("tr").attr("id");""!=i&&i&&e!=i&&(this.options.onconfirm?this.options.onconfirm(i):this.value(i))},_ondblclick:function(t){var e=this.value();e&&this.options.ondblclick&&this.options.ondblclick(e)},_refresh:function(){0==this.row_count?this.$tmessage.show():this.$tmessage.hide()},_template:function(){return'<div><table class="'+this.options.cls+'"><thead/><tbody/></table><tmessage>'+this.options.content+"</tmessage><div>"}});e.default={View:o}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),o=a(s),r=i(21),l=a(r),h=i(6),c=a(h),u=t.View.extend({initialize:function(t){var e=this;this.options=t,this.name=t.name||"element",this.multiple=t.multiple||!1,this.message=new c.default.Message,this.portlet=new l.default.View({cls:"ui-portlet-section"}),this.select=new c.default.Select.View({optional:t.optional}),this.button=new c.default.ButtonIcon({icon:"fa fa-sign-in",tooltip:"Insert new "+this.name,onclick:function(){e.add({id:e.select.value(),name:e.select.text()})}}),this.setElement(this._template(t)),this.$(".ui-list-message").append(this.message.$el),this.$(".ui-list-portlet").append(this.portlet.$el),this.$(".ui-list-button").append(this.button.$el),this.$(".ui-list-select").append(this.select.$el)},value:function(t){if(void 0!==t){if(this.portlet.empty(),n.isArray(t))for(var e in t){var i=t[e],a=null,s=null;"string"!=n.type(i)?(a=i.id,s=i.name):a=s=i,null!=a&&this.add({id:a,name:s})}this._refresh()}var o=[];return this.$(".ui-list-id").each(function(){o.push({id:n(this).prop("id"),name:n(this).find(".ui-list-name").html()})}),0==o.length?null:o},add:function(t){var e=this;if(0===this.$('[id="'+t.id+'"]').length)if(o.default.isEmpty(t.id))this.message.update({message:"Please select a valid "+this.name+".",status:"danger"});else{var i=n(this._templateRow({id:t.id,name:t.name}));i.on("click",function(){i.remove(),e._refresh()}),i.on("mouseover",function(){i.addClass("portlet-highlight")}),i.on("mouseout",function(){i.removeClass("portlet-highlight")}),this.portlet.append(i),this._refresh()}else this.message.update({message:"This "+this.name+" is already in the list."})},update:function(t){this.select.update(t)},_refresh:function(){this.$(".ui-list-id").length>0?(!this.multiple&&this.button.disable(),this.$(".ui-list-portlet").show()):(this.button.enable(),this.$(".ui-list-portlet").hide()),this.options.onchange&&this.options.onchange()},_template:function(t){return'<div class="ui-list"><div class="ui-margin-top"><span class="ui-list-button"/><span class="ui-list-select"/></div><div class="ui-list-message"/><div class="ui-list-portlet"/></div>'},_templateRow:function(t){return'<div id="'+t.id+'" class="ui-list-id"><span class="ui-list-delete fa fa-trash"/><span class="ui-list-name">'+t.name+"</span></div>"}});e.default={View:u}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),o=(function(t){t&&t.__esModule}(s),t.Model.extend({initialize:function(t){this.app=t},checksum:function(){var t="",e=this;return this.app.section.$el.find(".section-row").each(function(){var i=n(this).attr("id"),a=e.app.field_list[i];a&&(t+=i+":"+JSON.stringify(a.value&&a.value())+":"+a.collapsed+";")}),t},create:function(){function t(t,e,n){i.flat_dict[t]=e,a[t]=n,i.app.element_list[e]&&i.app.element_list[e].$el.attr("tour_id",t)}function e(n,a){for(var s in a){var o=a[s];if(o.input){var l=o.input,h=n;switch(""!=n&&(h+="|"),h+=l.name,l.type){case"repeat":var c=[],u=null;for(var d in o){var f=d.indexOf("section-");-1!=f&&(f+="section-".length,c.push(parseInt(d.substr(f))),u||(u=d.substr(0,f)))}c.sort(function(t,e){return t-e});var s=0;for(var p in c)e(h+"_"+s++,o[u+c[p]]);break;case"conditional":var g=i.app.field_list[l.id].value();t(h+"|"+l.test_param.name,l.id,g);var m=r(l,g);-1!=m&&e(h,a[l.id+"-section-"+m]);break;case"section":e(!l.flat&&h||"",o);break;default:var v=i.app.field_list[l.id];if(v&&v.value){var g=v.value();if((void 0===l.ignore||l.ignore!=g)&&(v.collapsed&&l.collapsible_value&&(g=l.collapsible_value),t(h,l.id,g),l.payload))for(var _ in l.payload)t(_,l.id,l.payload[_])}}}}}var i=this,n={};this._iterate(this.app.section.$el,n);var a={};return this.flat_dict={},e("",n),a},match:function(t){return this.flat_dict&&this.flat_dict[t]},matchCase:function(t,e){return r(t,e)},matchModel:function(t,e){var i=this;l(t.inputs,function(t,n){i.flat_dict[n]&&e(t,i.flat_dict[n])})},matchResponse:function(t){function e(t,a){if("string"==typeof a){var s=n.flat_dict[t];s&&(i[s]=a)}else for(var o in a){var r=o;if(""!==t){var l="|";a instanceof Array&&(l="_"),r=t+l+r}e(r,a[o])}}var i={},n=this;return e("",t),i},_iterate:function(t,e){var i=this;n(t).children().each(function(){var t=this,a=n(t).attr("id");if(n(t).hasClass("section-row")){var s=i.app.input_list[a];e[a]=s&&{input:s}||{},i._iterate(t,e[a])}else i._iterate(t,e)})}})),r=function(t,e){"boolean"==t.test_param.type&&(e="true"==e?t.test_param.truevalue||"true":t.test_param.falsevalue||"false");for(var i in t.cases)if(t.cases[i].value==e)return i;return-1},l=function t(e,i,s,o){o=n.extend(!0,{},o),a.each(e,function(t){t&&t.type&&t.name&&(o[t.name]=t)});for(var l in e){var h=e[l];h.name=h.name||l;var c=s?s+"|"+h.name:h.name;switch(h.type){case"repeat":a.each(h.cache,function(e,n){t(e,i,c+"_"+n,o)});break;case"conditional":if(h.test_param){i(h.test_param,c+"|"+h.test_param.name,o);var u=r(h,h.test_param.value);-1!=u?t(h.cases[u].inputs,i,c,o):Galaxy.emit.debug("form-data::visitInputs() - Invalid case for "+c+".")}else Galaxy.emit.debug("form-data::visitInputs() - Conditional test parameter missing for "+c+".");break;case"section":t(h.inputs,i,c,o);break;default:i(h,c,o)}}};e.default={Manager:o,visitInputs:l}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(129),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),r=i(5),l=a(r),h=i(4);a(h);t.extend(o.ENTRY_TYPES_,{online:998,data:999});var c=n.Model.extend(l.default.LoggableMixin).extend({_logNamespace:"citation",defaults:{content:""},initialize:function(){var e;try{e=o(this.attributes.content)}catch(t){return}if(e.errors.length){var i=e.errors.reduce(function(t,e){return t+"; "+e});this.log("Error parsing bibtex: "+i)}if(this._fields={},this.entry=t.first(e.entries),this.entry){var n=this.entry.Fields;for(var a in n){var s=n[a],r=a.toLowerCase();this._fields[r]=s}}},entryType:function(){return this.entry?this.entry.EntryType:void 0},fields:function(){return this._fields}}),u=n.Collection.extend(l.default.LoggableMixin).extend({_logNamespace:"citation",urlRoot:Galaxy.root+"api",partial:!0,model:c}),d=u.extend({url:function(){return this.urlRoot+"/histories/"+this.history_id+"/citations"}}),f=u.extend({url:function(){return this.urlRoot+"/tools/"+this.tool_id+"/citations"},partial:!1});e.default={Citation:c,HistoryCitationCollection:d,ToolCitationCollection:f}}).call(e,i(1),i(2))},,,,,,,,,,,,,,,,,,function(t,e,i){i(90),i(0),i(91),i(92),i(45),i(46),i(47),i(48),i(49),i(50),i(93),i(51),i(94),i(95),i(52),i(96),i(53),i(1),i(2),i(54),i(55),i(56),i(23),t.exports=i(99)},function(t,e,i){"use strict";(function(t){!function(){window.console=window.console||{log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},assert:function(){}},Object.assign=Object.assign||t.extend;for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[i[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),a=Math.max(0,16-(n-e)),s=window.setTimeout(function(){t(n+a)},a);return e=n+a,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)});var a=[{name:"canvas",compatible:function(){return window.CanvasRenderingContext2D}},{name:"sessionStorage",compatible:function(){try{return window.sessionStorage.length>=0}catch(t){}return!1}}],s=a.filter(function(t){return!t.compatible()}).map(function(t){return t.name});if(s.length){var o=document.querySelectorAll('link[rel="index"]').item(0);o&&(window.location=o.href+"static/incompatible-browser.html"),console.log("incompatible browser:\n"+s.join("\n"))}}()}).call(e,i(1))},function(t,e,i){(function(t){/*!
 * jQuery Migrate - v1.4.1 - 2016-05-19
 * Copyright jQuery Foundation and other contributors
 */
!function(t,e,i){function n(i){var n=e.console;s[i]||(s[i]=!0,t.migrateWarnings.push(i),n&&n.warn&&!t.migrateMute&&(n.warn("JQMIGRATE: "+i),t.migrateTrace&&n.trace&&n.trace()))}function a(e,i,a,s){if(Object.defineProperty)try{return void Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return n(s),a},set:function(t){n(s),a=t}})}catch(t){}t._definePropertyBroken=!0,e[i]=a}t.migrateVersion="1.4.1";var s={};t.migrateWarnings=[],e.console&&e.console.log&&e.console.log("JQMIGRATE: Migrate is installed"+(t.migrateMute?"":" with logging active")+", version "+t.migrateVersion),void 0===t.migrateTrace&&(t.migrateTrace=!0),t.migrateReset=function(){s={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&n("jQuery is not compatible with Quirks Mode");var o=t("<input/>",{size:1}).attr("size")&&t.attrFn,r=t.attr,l=t.attrHooks.value&&t.attrHooks.value.get||function(){return null},h=t.attrHooks.value&&t.attrHooks.value.set||function(){},c=/^(?:input|button)$/i,u=/^[238]$/,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(t,"attrFn",o||{},"jQuery.attrFn is deprecated"),t.attr=function(e,i,a,s){var l=i.toLowerCase(),h=e&&e.nodeType;/*!
 * jQuery Migrate - v1.4.1 - 2016-05-19
 * Copyright jQuery Foundation and other contributors
 */
return s&&(r.length<4&&n("jQuery.fn.attr( props, pass ) is deprecated"),e&&!u.test(h)&&(o?i in o:t.isFunction(t.fn[i])))?t(e)[i](a):("type"===i&&void 0!==a&&c.test(e.nodeName)&&e.parentNode&&n("Can't change the 'type' of an input or button in IE 6/7/8"),!t.attrHooks[l]&&d.test(l)&&(t.attrHooks[l]={get:function(e,i){var n,a=t.prop(e,i);return!0===a||"boolean"!=typeof a&&(n=e.getAttributeNode(i))&&!1!==n.nodeValue?i.toLowerCase():void 0},set:function(e,i,n){var a;return!1===i?t.removeAttr(e,n):(a=t.propFix[n]||n,a in e&&(e[a]=!0),e.setAttribute(n,n.toLowerCase())),n}},f.test(l)&&n("jQuery.fn.attr('"+l+"') might use property instead of attribute")),r.call(t,e,i,a))},t.attrHooks.value={get:function(t,e){var i=(t.nodeName||"").toLowerCase();return"button"===i?l.apply(this,arguments):("input"!==i&&"option"!==i&&n("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var i=(t.nodeName||"").toLowerCase();if("button"===i)return h.apply(this,arguments);"input"!==i&&"option"!==i&&n("jQuery.fn.attr('value', val) no longer sets properties"),t.value=e}};var p,g,m=t.fn.init,v=t.find,_=t.parseJSON,b=/^\s*</,y=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,w=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,x=/^([^<]*)(<[\w\W]+>)([^>]*)$/;t.fn.init=function(e,i,a){var s,o;return e&&"string"==typeof e&&!t.isPlainObject(i)&&(s=x.exec(t.trim(e)))&&s[0]&&(b.test(e)||n("$(html) HTML strings must start with '<' character"),s[3]&&n("$(html) HTML text after last tag is ignored"),"#"===s[0].charAt(0)&&(n("HTML string cannot start with a '#' character"),t.error("JQMIGRATE: Invalid selector string (XSS)")),i&&i.context&&i.context.nodeType&&(i=i.context),t.parseHTML)?m.call(this,t.parseHTML(s[2],i&&i.ownerDocument||i||document,!0),i,a):(o=m.apply(this,arguments),e&&void 0!==e.selector?(o.selector=e.selector,o.context=e.context):(o.selector="string"==typeof e?e:"",e&&(o.context=e.nodeType?e:i||document)),o)},t.fn.init.prototype=t.fn,t.find=function(t){var e=Array.prototype.slice.call(arguments);if("string"==typeof t&&y.test(t))try{document.querySelector(t)}catch(i){t=t.replace(w,function(t,e,i,n){return"["+e+i+'"'+n+'"]'});try{document.querySelector(t),n("Attribute selector with '#' must be quoted: "+e[0]),e[0]=t}catch(t){n("Attribute selector with '#' was not fixed: "+e[0])}}return v.apply(this,e)};var k;for(k in v)Object.prototype.hasOwnProperty.call(v,k)&&(t.find[k]=v[k]);t.parseJSON=function(t){return t?_.apply(this,arguments):(n("jQuery.parseJSON requires a valid JSON string"),null)},t.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t.browser||(p=t.uaMatch(navigator.userAgent),g={},p.browser&&(g[p.browser]=!0,g.version=p.version),g.chrome?g.webkit=!0:g.webkit&&(g.safari=!0),t.browser=g),a(t,"browser",t.browser,"jQuery.browser is deprecated"),t.boxModel=t.support.boxModel="CSS1Compat"===document.compatMode,a(t,"boxModel",t.boxModel,"jQuery.boxModel is deprecated"),a(t.support,"boxModel",t.support.boxModel,"jQuery.support.boxModel is deprecated"),t.sub=function(){function e(t,i){return new e.fn.init(t,i)}t.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,a){var s=t.fn.init.call(this,n,a,i);return s instanceof e?s:e(s)},e.fn.init.prototype=e.fn;var i=e(document);return n("jQuery.sub() is deprecated"),e},t.fn.size=function(){return n("jQuery.fn.size() is deprecated; use the .length property"),this.length};var C=!1;t.swap&&t.each(["height","width","reliableMarginRight"],function(e,i){var n=t.cssHooks[i]&&t.cssHooks[i].get;n&&(t.cssHooks[i].get=function(){var t;return C=!0,t=n.apply(this,arguments),C=!1,t})}),t.swap=function(t,e,i,a){var s,o,r={};C||n("jQuery.swap() is undocumented and deprecated");for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,a||[]);for(o in e)t.style[o]=r[o];return s},t.ajaxSetup({converters:{"text json":t.parseJSON}});var S=t.fn.data;t.fn.data=function(e){var i,a,s=this[0];return!s||"events"!==e||1!==arguments.length||(i=t.data(s,e),a=t._data(s,e),void 0!==i&&i!==a||void 0===a)?S.apply(this,arguments):(n("Use of jQuery.fn.data('events') is deprecated"),a)};var T=/\/(java|ecma)script/i;t.clean||(t.clean=function(e,i,a,s){i=i||document,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,n("jQuery.clean() is deprecated");var o,r,l,h,c=[];if(t.merge(c,t.buildFragment(e,i).childNodes),a)for(l=function(t){if(!t.type||T.test(t.type))return s?s.push(t.parentNode?t.parentNode.removeChild(t):t):a.appendChild(t)},o=0;null!=(r=c[o]);o++)t.nodeName(r,"script")&&l(r)||(a.appendChild(r),void 0!==r.getElementsByTagName&&(h=t.grep(t.merge([],r.getElementsByTagName("script")),l),c.splice.apply(c,[o+1,0].concat(h)),o+=h.length));return c});var E=t.event.add,A=t.event.remove,M=t.event.trigger,O=t.fn.toggle,R=t.fn.live,$=t.fn.die,D=t.fn.load,P="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",j=new RegExp("\\b(?:"+P+")\\b"),I=/(?:^|\s)hover(\.\S+|)\b/,N=function(e){return"string"!=typeof e||t.event.special.hover?e:(I.test(e)&&n("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),e&&e.replace(I,"mouseenter$1 mouseleave$1"))};t.event.props&&"attrChange"!==t.event.props[0]&&t.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),t.event.dispatch&&a(t.event,"handle",t.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),t.event.add=function(t,e,i,a,s){t!==document&&j.test(e)&&n("AJAX events should be attached to document: "+e),E.call(this,t,N(e||""),i,a,s)},t.event.remove=function(t,e,i,n,a){A.call(this,t,N(e)||"",i,n,a)},t.each(["load","unload","error"],function(e,i){t.fn[i]=function(){var t=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof t[0]?D.apply(this,t):(n("jQuery.fn."+i+"() is deprecated"),t.splice(0,0,i),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this))}}),t.fn.toggle=function(e,i){if(!t.isFunction(e)||!t.isFunction(i))return O.apply(this,arguments);n("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,s=e.guid||t.guid++,o=0,r=function(i){var n=(t._data(this,"lastToggle"+e.guid)||0)%o;return t._data(this,"lastToggle"+e.guid,n+1),i.preventDefault(),a[n].apply(this,arguments)||!1};for(r.guid=s;o<a.length;)a[o++].guid=s;return this.click(r)},t.fn.live=function(e,i,a){return n("jQuery.fn.live() is deprecated"),R?R.apply(this,arguments):(t(this.context).on(e,this.selector,i,a),this)},t.fn.die=function(e,i){return n("jQuery.fn.die() is deprecated"),$?$.apply(this,arguments):(t(this.context).off(e,this.selector||"**",i),this)},t.event.trigger=function(t,e,i,a){return i||j.test(t)||n("Global events are undocumented and deprecated"),M.call(this,t,e,i||document,a)},t.each(P.split("|"),function(e,i){t.event.special[i]={setup:function(){var e=this;return e!==document&&(t.event.add(document,i+"."+t.guid,function(){t.event.trigger(i,Array.prototype.slice.call(arguments,1),e,!0)}),t._data(this,i,t.guid++)),!1},teardown:function(){return this!==document&&t.event.remove(document,i+"."+t._data(this,i)),!1}}}),t.event.special.ready={setup:function(){this===document&&n("'ready' event is deprecated")}};var L=t.fn.andSelf||t.fn.addBack,z=t.fn.find;if(t.fn.andSelf=function(){return n("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),L.apply(this,arguments)},t.fn.find=function(t){var e=z.apply(this,arguments);return e.context=this.context,e.selector=this.selector?this.selector+" "+t:t,e},t.Callbacks){var H=t.Deferred,q=[["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),"rejected"],["notify","progress",t.Callbacks("memory"),t.Callbacks("memory")]];t.Deferred=function(e){var i=H(),a=i.promise();return i.pipe=a.pipe=function(){var e=arguments;return n("deferred.pipe() is deprecated"),t.Deferred(function(n){t.each(q,function(s,o){var r=t.isFunction(e[s])&&e[s];i[o[1]](function(){var e=r&&r.apply(this,arguments);e&&t.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===a?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},i.isResolved=function(){return n("deferred.isResolved is deprecated"),"resolved"===i.state()},i.isRejected=function(){return n("deferred.isRejected is deprecated"),"rejected"===i.state()},e&&e.call(i,i),i}}}(t,window)}).call(e,i(0))},function(t,e,i){(function(t){/**
 * @fileOverview jquery-autocomplete, the jQuery Autocompleter
 * @author <a href="mailto:dylan@dyve.net">Dylan Verheul</a>
 * @version 2.4.4
 * @requires jQuery 1.6+
 * @license MIT | GPL | Apache 2.0, see LICENSE.txt
 * @see https://github.com/dyve/jquery-autocomplete
 */
!function(t){"use strict";t.fn.autocomplete_verheul=function(e){var i;arguments.length>1?(i=e,e=arguments[1],e.url=i):"string"==typeof e&&(i=e,e={url:i});var n=t.extend({},t.fn.autocomplete_verheul.defaults,e);return this.each(function(){var e=t(this);e.data("autocompleter",new t.Autocompleter(e,t.meta?t.extend({},n,e.data()):n))})},t.fn.autocomplete_verheul.defaults={inputClass:"acInput",loadingClass:"acLoading",resultsClass:"acResults",selectClass:"acSelect",queryParamName:"q",extraParams:{},remoteDataType:!1,lineSeparator:"\n",cellSeparator:"|",minChars:2,maxItemsToShow:10,delay:400,useCache:!0,maxCacheLength:10,matchSubset:!0,matchCase:!1,matchInside:!0,mustMatch:!1,selectFirst:!1,selectOnly:!1,showResult:null,preventDefaultReturn:1,preventDefaultTab:0,autoFill:!1,filterResults:!0,filter:!0,sortResults:!0,sortFunction:null,onItemSelect:null,onNoMatch:null,onFinish:null,matchStringConverter:null,beforeUseConverter:null,autoWidth:"min-width",useDelimiter:!1,delimiterChar:",",delimiterKeyCode:188,processData:null,onError:null,enabled:!0};var e=function(e){var i,n,a=typeof e;return"string"===a?(i=e,n={}):t.isArray(e)?(i=e[0],n=e.slice(1)):"object"===a&&(i=e.value,n=e.data),i=String(i),"object"!=typeof n&&(n={}),{value:i,data:n}},i=function(t,e,i){var n=parseInt(t,10);return i=i||{},(isNaN(n)||i.min&&n<i.min)&&(n=e),n},n=function(t,e){return[t,encodeURIComponent(e)].join("=")},a=function(e,i){var a=[];return t.each(i,function(t,e){a.push(n(t,e))}),a.length&&(e+=-1===e.indexOf("?")?"?":"&",e+=a.join("&")),e},s=function(t,e,i){return t=String(t.value),e=String(e.value),i||(t=t.toLowerCase(),e=e.toLowerCase()),t>e?1:t<e?-1:0},o=function(t,e,i){var n,a,s,o,r,l,h=[];for(l=String(t).replace("\r\n","\n").split(e),n=0;n<l.length;n++){for(o=l[n].split(i),s=[],a=0;a<o.length;a++)s.push(decodeURIComponent(o[a]));r=s.shift(),h.push({value:r,data:s})}return h};t.Autocompleter=function(e,n){if(!e||!(e instanceof t)||1!==e.length||"INPUT"!==e.get(0).tagName.toUpperCase()&&"TEXTAREA"!==e.get(0).tagName.toUpperCase())throw new Error("Invalid parameter for jquery.Autocompleter, jQuery object with one element with INPUT or TEXTAREA tag expected.");var a=this;this.options=n,this.cacheData_={},this.cacheLength_=0,this.selectClass_="jquery-autocomplete-selected-item",this.keyTimeout_=null,this.finishTimeout_=null,this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1,this.finishOnBlur_=!0,this.options.minChars=i(this.options.minChars,t.fn.autocomplete_verheul.defaults.minChars,{min:0}),this.options.maxItemsToShow=i(this.options.maxItemsToShow,t.fn.autocomplete_verheul.defaults.maxItemsToShow,{min:0}),this.options.maxCacheLength=i(this.options.maxCacheLength,t.fn.autocomplete_verheul.defaults.maxCacheLength,{min:1}),this.options.delay=i(this.options.delay,t.fn.autocomplete_verheul.defaults.delay,{min:0}),2!=this.options.preventDefaultReturn&&(this.options.preventDefaultReturn=this.options.preventDefaultReturn?1:0),2!=this.options.preventDefaultTab&&(this.options.preventDefaultTab=this.options.preventDefaultTab?1:0),this.dom={},this.dom.$elem=e,this.dom.$elem.attr("autocomplete","off").addClass(this.options.inputClass),this.dom.$results=t("<div></div>").hide().addClass(this.options.resultsClass).css({position:"absolute"}),t("body").append(this.dom.$results),e.keydown(function(t){switch(a.lastKeyPressed_=t.keyCode,a.lastKeyPressed_){case a.options.delimiterKeyCode:a.options.useDelimiter&&a.active_&&a.selectCurrent();break;case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:return t.preventDefault(),a.active_?a.focusPrev():a.activate(),!1;case 40:return t.preventDefault(),a.active_?a.focusNext():a.activate(),!1;case 9:if(a.active_&&(a.selectCurrent(),a.options.preventDefaultTab))return t.preventDefault(),!1;if(2===a.options.preventDefaultTab)return t.preventDefault(),!1;break;case 13:if(a.active_&&(a.selectCurrent(),a.options.preventDefaultReturn))return t.preventDefault(),!1;if(2===a.options.preventDefaultReturn)return t.preventDefault(),!1;break;case 27:if(a.active_)return t.preventDefault(),a.deactivate(!0),!1;break;default:a.activate()}}),e.on("paste",function(){a.activate()});var s=function(){a.deactivate(!0)};e.blur(function(){a.finishOnBlur_&&(a.finishTimeout_=setTimeout(s,200))}),e.parents("form").on("submit",s)},t.Autocompleter.prototype.position=function(){var e=this.dom.$elem.offset(),i=this.dom.$results.outerHeight(),n=t(window).outerHeight(),a=e.top+this.dom.$elem.outerHeight(),s=a+i,o={top:a,left:e.left};if(s>n){var r=e.top-i;r>=0&&(o.top=r)}this.dom.$results.css(o)},t.Autocompleter.prototype.cacheRead=function(t){var e,i,n,a,s;if(this.options.useCache)for(t=String(t),e=t.length,i=this.options.matchSubset?1:e;i<=e;){for(a=this.options.matchInside?e-i:0,s=0;s<=a;){if(n=t.substr(0,i),void 0!==this.cacheData_[n])return this.cacheData_[n];s++}i++}return!1},t.Autocompleter.prototype.cacheWrite=function(t,e){return!!this.options.useCache&&(this.cacheLength_>=this.options.maxCacheLength&&this.cacheFlush(),t=String(t),void 0!==this.cacheData_[t]&&this.cacheLength_++,this.cacheData_[t]=e,this.cacheData_[t])},t.Autocompleter.prototype.cacheFlush=function(){this.cacheData_={},this.cacheLength_=0},t.Autocompleter.prototype.callHook=function(e,i){var n=this.options[e];return!(!n||!t.isFunction(n))&&n(i,this)},t.Autocompleter.prototype.activate=function(){if(this.options.enabled){var t=this;this.keyTimeout_&&clearTimeout(this.keyTimeout_),this.keyTimeout_=setTimeout(function(){t.activateNow()},this.options.delay)}},t.Autocompleter.prototype.activateNow=function(){var t=this.beforeUseConverter(this.dom.$elem.val());t!==this.lastProcessedValue_&&t!==this.lastSelectedValue_&&this.fetchData(t)},t.Autocompleter.prototype.fetchData=function(t){var e=this,i=function(t,i){e.options.processData&&(t=e.options.processData(t)),e.showResults(e.filterResults(t,i),i)};this.lastProcessedValue_=t,t.length<this.options.minChars?i([],t):this.options.data?i(this.options.data,t):this.fetchRemoteData(t,function(e){i(e,t)})},t.Autocompleter.prototype.fetchRemoteData=function(e,i){var n=this.cacheRead(e);if(n)i(n);else{var a=this,s="json"===a.options.remoteDataType?"json":"text",o=function(t){var n=!1;!1!==t&&(n=a.parseRemoteData(t),a.cacheWrite(e,n)),a.dom.$elem.removeClass(a.options.loadingClass),i(n)};this.dom.$elem.addClass(this.options.loadingClass),t.ajax({url:this.makeUrl(e),success:o,error:function(e,i,n){t.isFunction(a.options.onError)?a.options.onError(e,i,n):o(!1)},dataType:s})}},t.Autocompleter.prototype.setExtraParam=function(e,i){var n=t.trim(String(e));return n&&(this.options.extraParams||(this.options.extraParams={}),this.options.extraParams[n]!==i&&(this.options.extraParams[n]=i,this.cacheFlush())),this},t.Autocompleter.prototype.makeUrl=function(e){var i=this.options.url,n=t.extend({},this.options.extraParams);return!1===this.options.queryParamName?i+=encodeURIComponent(e):n[this.options.queryParamName]=e,a(i,n)},t.Autocompleter.prototype.parseRemoteData=function(e){var i,n=e;if("json"===this.options.remoteDataType){switch(i=typeof e){case"object":n=e;break;case"string":n=t.parseJSON(e);break;default:throw new Error("Unexpected remote data type: "+i)}return n}return o(n,this.options.lineSeparator,this.options.cellSeparator)},t.Autocompleter.prototype.defaultFilter=function(t,e){if(!t.value)return!1;if(this.options.filterResults){var i=this.matchStringConverter(e),n=this.matchStringConverter(t.value);this.options.matchCase||(i=i.toLowerCase(),n=n.toLowerCase());var a=n.indexOf(i);return this.options.matchInside?a>-1:0===a}return!0},t.Autocompleter.prototype.filterResult=function(e,i){return!1===this.options.filter||(t.isFunction(this.options.filter)?this.options.filter(e,i):this.defaultFilter(e,i))},t.Autocompleter.prototype.filterResults=function(t,i){var n,a,s=[];for(n=0;n<t.length;n++)a=e(t[n]),this.filterResult(a,i)&&s.push(a);return this.options.sortResults&&(s=this.sortResults(s,i)),this.options.maxItemsToShow>0&&this.options.maxItemsToShow<s.length&&(s.length=this.options.maxItemsToShow),s},t.Autocompleter.prototype.sortResults=function(e,i){var n=this,a=this.options.sortFunction;return t.isFunction(a)||(a=function(t,e,i){return s(t,e,n.options.matchCase)}),e.sort(function(t,e){return a(t,e,i,n.options)}),e},t.Autocompleter.prototype.matchStringConverter=function(e,i,n){var a=this.options.matchStringConverter;return t.isFunction(a)&&(e=a(e,i,n)),e},t.Autocompleter.prototype.beforeUseConverter=function(e){e=this.getValue(e);var i=this.options.beforeUseConverter;return t.isFunction(i)&&(e=i(e)),e},t.Autocompleter.prototype.enableFinishOnBlur=function(){this.finishOnBlur_=!0},t.Autocompleter.prototype.disableFinishOnBlur=function(){this.finishOnBlur_=!1},t.Autocompleter.prototype.createItemFromResult=function(e){var i=this,n=t("<li/>");return n.html(this.showResult(e.value,e.data)),n.data({value:e.value,data:e.data}).click(function(){i.selectItem(n)}).mousedown(i.disableFinishOnBlur).mouseup(i.enableFinishOnBlur),n},t.Autocompleter.prototype.getItems=function(){return t(">ul>li",this.dom.$results)},t.Autocompleter.prototype.showResults=function(e,i){var n,a,s,o,r=e.length,l=this,h=t("<ul></ul>"),c=!1,u=!1;if(r){for(n=0;n<r;n++)a=e[n],s=this.createItemFromResult(a),h.append(s),!1===c&&(c=String(a.value),u=s,s.addClass(this.options.firstItemClass)),n===r-1&&s.addClass(this.options.lastItemClass);this.dom.$results.html(h).show(),this.position(),this.options.autoWidth&&(o=this.dom.$elem.outerWidth()-this.dom.$results.outerWidth()+this.dom.$results.width(),this.dom.$results.css(this.options.autoWidth,o)),this.getItems().hover(function(){l.focusItem(this)},function(){}),(this.autoFill(c,i)||this.options.selectFirst||this.options.selectOnly&&1===r)&&this.focusItem(u),this.active_=!0}else this.hideResults(),this.active_=!1},t.Autocompleter.prototype.showResult=function(e,i){return t.isFunction(this.options.showResult)?this.options.showResult(e,i):t("<p></p>").text(e).html()},t.Autocompleter.prototype.autoFill=function(t,e){var i,n,a,s;if(this.options.autoFill&&8!==this.lastKeyPressed_&&(i=String(t).toLowerCase(),n=String(e).toLowerCase(),a=t.length,s=e.length,i.substr(0,s)===n)){var o=this.getDelimiterOffsets(),r=o.start?" ":"";this.setValue(r+t);var l=s+o.start+r.length,h=a+o.start+r.length;return this.selectRange(l,h),!0}return!1},t.Autocompleter.prototype.focusNext=function(){this.focusMove(1)},t.Autocompleter.prototype.focusPrev=function(){this.focusMove(-1)},t.Autocompleter.prototype.focusMove=function(e){var n=this.getItems();if(e=i(e,0))for(var a=0;a<n.length;a++)if(t(n[a]).hasClass(this.selectClass_))return void this.focusItem(a+e);this.focusItem(0)},t.Autocompleter.prototype.focusItem=function(e){var i,n=this.getItems();n.length&&(n.removeClass(this.selectClass_).removeClass(this.options.selectClass),"number"==typeof e?(e<0?e=0:e>=n.length&&(e=n.length-1),i=t(n[e])):i=t(e),i&&i.addClass(this.selectClass_).addClass(this.options.selectClass))},t.Autocompleter.prototype.selectCurrent=function(){var e=t("li."+this.selectClass_,this.dom.$results);1===e.length?this.selectItem(e):this.deactivate(!1)},t.Autocompleter.prototype.selectItem=function(t){var e=t.data("value"),i=t.data("data"),n=this.displayValue(e,i),a=this.beforeUseConverter(n);this.lastProcessedValue_=a,this.lastSelectedValue_=a;var s=this.getDelimiterOffsets(),o=this.options.delimiterChar,r=this.dom.$elem,l=0;this.options.useDelimiter&&(r.val().substring(s.start-1,s.start)==o&&" "!=o&&(n=" "+n),r.val().substring(s.end,s.end+1)!=o&&this.lastKeyPressed_!=this.options.delimiterKeyCode?n+=o:l=1),this.setValue(n),this.setCaret(s.start+n.length+l),this.callHook("onItemSelect",{value:e,data:i}),this.deactivate(!0),r.focus()},t.Autocompleter.prototype.displayValue=function(e,i){return t.isFunction(this.options.displayValue)?this.options.displayValue(e,i):e},t.Autocompleter.prototype.hideResults=function(){this.dom.$results.hide()},t.Autocompleter.prototype.deactivate=function(t){this.finishTimeout_&&clearTimeout(this.finishTimeout_),this.keyTimeout_&&clearTimeout(this.keyTimeout_),t&&(this.lastProcessedValue_!==this.lastSelectedValue_&&(this.options.mustMatch&&this.setValue(""),this.callHook("onNoMatch")),this.active_&&this.callHook("onFinish"),this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1),this.hideResults()},t.Autocompleter.prototype.selectRange=function(t,e){var i=this.dom.$elem.get(0);if(i.setSelectionRange)i.focus(),i.setSelectionRange(t,e);else if(i.createTextRange){var n=i.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select()}},t.Autocompleter.prototype.setCaret=function(t){this.selectRange(t,t)},t.Autocompleter.prototype.getCaret=function(){var t,e,i,n,a,s,o=this.dom.$elem,r=o[0];return r.createTextRange?(e=document.selection,"textarea"!=r.tagName.toLowerCase()?(t=o.val(),i=e.createRange().duplicate(),i.moveEnd("character",t.length),n=""===i.text?t.length:t.lastIndexOf(i.text),i=e.createRange().duplicate(),i.moveStart("character",-t.length),a=i.text.length):(i=e.createRange(),s=i.duplicate(),s.moveToElementText(r),s.setEndPoint("EndToEnd",i),n=s.text.length-i.text.length,a=n+i.text.length)):(n=o[0].selectionStart,a=o[0].selectionEnd),{start:n,end:a}},t.Autocompleter.prototype.setValue=function(t){if(this.options.useDelimiter){var e=this.dom.$elem.val(),i=this.getDelimiterOffsets();t=e.substring(0,i.start)+t+e.substring(i.end)}this.dom.$elem.val(t)},t.Autocompleter.prototype.getValue=function(t){if(this.options.useDelimiter){var e=this.getDelimiterOffsets();return t.substring(e.start,e.end).trim()}return t},t.Autocompleter.prototype.getDelimiterOffsets=function(){var t=this.dom.$elem.val();if(this.options.useDelimiter){var e=t.substring(0,this.getCaret().start),i=e.lastIndexOf(this.options.delimiterChar)+1,n=t.substring(this.getCaret().start),a=n.indexOf(this.options.delimiterChar);-1==a&&(a=t.length),a+=this.getCaret().start}else i=0,a=t.length;return{start:i,end:a}}}(t)}).call(e,i(0))},function(t,e,i){var n,a,s;!function(o,r,l){!function(o){a=[i(0)],n=o,void 0!==(s="function"==typeof n?n.apply(e,a):n)&&(t.exports=s)}(function(t){"use strict";var e,i,n,a,s,l,h,c,u,d,f,p,g,m,v,_,b,y,w,x,k,C,S,T,E,A,M,O,R,$,D,P={},j=0;e=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:void 0,normalRangeMax:void 0,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:void 0,chartRangeMax:void 0,chartRangeMinX:void 0,chartRangeMaxX:void 0,tooltipFormat:new n('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:void 0,nullColor:void 0,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,colorMap:void 0,tooltipFormat:new n('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new n('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:void 0,thresholdValue:0,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,tooltipFormat:new n("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:void 0,tooltipFormat:new n("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new n('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:void 0,targetColor:"#4a2",chartRangeMax:void 0,chartRangeMin:void 0,tooltipFormat:new n("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},E='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',i=function(){var e,i;return e=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(e.prototype=t.extend(new arguments[0],arguments[arguments.length-1]),e._super=arguments[0].prototype):e.prototype=arguments[arguments.length-1],arguments.length>2&&(i=Array.prototype.slice.call(arguments,1,-1),i.unshift(e.prototype),t.extend.apply(t,i))):e.prototype=arguments[0],e.prototype.cls=e,e},t.SPFormatClass=n=i({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,i){var n,a,s,o,r,l=this,h=t;return this.format.replace(this.fre,function(){var t;return a=arguments[1],s=arguments[3],n=l.precre.exec(a),n?(r=n[2],a=n[1]):r=!1,void 0===(o=h[a])?"":s&&e&&e[s]?(t=e[s],t.get?e[s].get(o)||o:e[s][o]||o):(u(o)&&(o=i.get("numberFormatter")?i.get("numberFormatter")(o):g(o,r,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),o)})}}),t.spformat=function(t,e){return new n(t,e)},a=function(t,e,i){return t<e?e:t>i?i:t},s=function(t,e){var i;return 2===e?(i=r.floor(t.length/2),t.length%2?t[i]:(t[i-1]+t[i])/2):t.length%2?(i=(t.length*e+e)/4,i%1?(t[r.floor(i)]+t[r.floor(i)-1])/2:t[i-1]):(i=(t.length*e+2)/4,i%1?(t[r.floor(i)]+t[r.floor(i)-1])/2:t[i-1])},l=function(t){var e;switch(t){case"undefined":t=void 0;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},h=function(t){var e,i=[];for(e=t.length;e--;)i[e]=l(t[e]);return i},c=function(t,e){var i,n,a=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&a.push(t[i]);return a},u=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=function(e,i,n,a,s){var o,r;for(e=(!1===i?parseFloat(e).toString():e.toFixed(i)).split(""),o=(o=t.inArray(".",e))<0?e.length:o,o<e.length&&(e[o]=s),r=o-n;r>0;r-=n)e.splice(r,0,a);return e.join("")},d=function(t,e,i){var n;for(n=e.length;n--;)if((!i||null!==e[n])&&e[n]!==t)return!1;return!0},p=function(e){return t.isArray(e)?e:[e]},f=function(t){var e;o.createStyleSheet?o.createStyleSheet().cssText=t:(e=o.createElement("style"),e.type="text/css",o.getElementsByTagName("head")[0].appendChild(e),e["string"==typeof o.body.style.WebkitAppearance?"innerText":"innerHTML"]=t)},t.fn.simpledraw=function(e,i,n,a){var s,r;if(n&&(s=this.data("_jqs_vcanvas")))return s;if(!1===t.fn.sparkline.canvas)return!1;if(void 0===t.fn.sparkline.canvas){var l=o.createElement("canvas");if(l.getContext&&l.getContext("2d"))t.fn.sparkline.canvas=function(t,e,i,n){return new R(t,e,i,n)};else{if(!o.namespaces||o.namespaces.v)return t.fn.sparkline.canvas=!1,!1;o.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),t.fn.sparkline.canvas=function(t,e,i,n){return new $(t,e,i)}}}return void 0===e&&(e=t(this).innerWidth()),void 0===i&&(i=t(this).innerHeight()),s=t.fn.sparkline.canvas(e,i,this,a),r=t(this).data("_jqs_mhandler"),r&&r.registerCanvas(s),s},t.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},t.RangeMapClass=m=i({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=0===i[0].length?-1/0:parseFloat(i[0]),i[1]=0===i[1].length?1/0:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e,i,n,a=this.rangelist;if(void 0!==(n=this.map[t]))return n;if(a)for(e=a.length;e--;)if(i=a[e],i[0]<=t&&i[1]>=t)return i[2]}}),t.range_map=function(t){return new m(t)},v=i({init:function(e,i){var n=t(e);this.$el=n,this.options=i,this.currentPageX=0,this.currentPageY=0,this.el=e,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!i.get("disableTooltips"),this.highlightEnabled=!i.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(e){var i=t(e.canvas);this.canvas=e,this.$canvas=i,i.mouseenter(t.proxy(this.mouseenter,this)),i.mouseleave(t.proxy(this.mouseleave,this)),i.click(t.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=void 0)},mouseclick:function(e){var i=t.Event("sparklineClick");i.originalEvent=e,i.sparklines=this.splist,this.$el.trigger(i)},mouseenter:function(e){t(o.body).unbind("mousemove.jqs"),t(o.body).bind("mousemove.jqs",t.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new _(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){t(o.body).unbind("mousemove.jqs");var e,i,n=this.splist,a=n.length,s=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),i=0;i<a;i++)e=n[i],e.clearRegionHighlight()&&(s=!0);s&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var e,i,n,a,s,o=this.splist,r=o.length,l=!1,h=this.$canvas.offset(),c=this.currentPageX-h.left,u=this.currentPageY-h.top;if(this.over){for(n=0;n<r;n++)i=o[n],(a=i.setRegionHighlight(this.currentEl,c,u))&&(l=!0);if(l){if(s=t.Event("sparklineRegionChange"),s.sparklines=this.splist,this.$el.trigger(s),this.tooltip){for(e="",n=0;n<r;n++)i=o[n],e+=i.getCurrentRegionTooltip();this.tooltip.setContent(e)}this.disableHighlight||this.canvas.render()}null===a&&this.mouseleave()}}}),_=i({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var i,n=e.get("tooltipClassname","jqstooltip"),a=this.sizeStyle;this.container=e.get("tooltipContainer")||o.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),t("#jqssizetip").remove(),t("#jqstooltip").remove(),this.sizetip=t("<div/>",{id:"jqssizetip",style:a,class:n}),this.tooltip=t("<div/>",{id:"jqstooltip",class:n}).appendTo(this.container),i=this.tooltip.offset(),this.offsetLeft=i.left,this.offsetTop=i.top,this.hidden=!0,t(window).unbind("resize.jqs scroll.jqs"),t(window).bind("resize.jqs scroll.jqs",t.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=t(window).scrollTop(),this.scrollLeft=t(window).scrollLeft(),this.scrollRight=this.scrollLeft+t(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t)return this.tooltip.css("visibility","hidden"),void(this.hidden=!0);this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(void 0===t){if(void 0===this.mousex)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=void 0,t(window).unbind("resize.jqs scroll.jqs")}}),A=function(){f(E)},t(A),D=[],t.fn.sparkline=function(e,i){return this.each(function(){var n,a,s=new t.fn.sparkline.options(this,i),r=t(this);if(n=function(){var i,n,a,l,h,c,u;if("html"===e||void 0===e?(u=this.getAttribute(s.get("tagValuesAttribute")),void 0!==u&&null!==u||(u=r.html()),i=u.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):i=e,n="auto"===s.get("width")?i.length*s.get("defaultPixelsPerValue"):s.get("width"),"auto"===s.get("height")?s.get("composite")&&t.data(this,"_jqs_vcanvas")||(l=o.createElement("span"),l.innerHTML="a",r.html(l),a=t(l).innerHeight()||t(l).height(),t(l).remove(),l=null):a=s.get("height"),s.get("disableInteraction")?h=!1:(h=t.data(this,"_jqs_mhandler"),h?s.get("composite")||h.reset():(h=new v(this,s),t.data(this,"_jqs_mhandler",h))),s.get("composite")&&!t.data(this,"_jqs_vcanvas"))return void(t.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),t.data(this,"_jqs_errnotify",!0)));c=new(t.fn.sparkline[s.get("type")])(this,i,s,n,a),c.render(),h&&h.registerSparkline(c)},t(this).html()&&!s.get("disableHiddenCheck")&&t(this).is(":hidden")||!t(this).parents("body").length){if(!s.get("composite")&&t.data(this,"_jqs_pending"))for(a=D.length;a;a--)D[a-1][0]==this&&D.splice(a-1,1);D.push([this,n]),t.data(this,"_jqs_pending",!0)}else n.call(this)})},t.fn.sparkline.defaults=e(),t.sparkline_display_visible=function(){var e,i,n,a=[];for(i=0,n=D.length;i<n;i++)e=D[i][0],t(e).is(":visible")&&!t(e).parents().is(":hidden")?(D[i][1].call(e),t.data(D[i][0],"_jqs_pending",!1),a.push(i)):t(e).closest("html").length||t.data(e,"_jqs_pending")||(t.data(D[i][0],"_jqs_pending",!1),a.push(i));for(i=a.length;i;i--)D.splice(a[i-1],1)},t.fn.sparkline.options=i({init:function(e,i){var n,a,s,o;this.userOptions=i=i||{},this.tag=e,this.tagValCache={},a=t.fn.sparkline.defaults,s=a.common,this.tagOptionsPrefix=i.enableTagOptions&&(i.tagOptionsPrefix||s.tagOptionsPrefix),o=this.getTagSetting("type"),n=o===P?a[i.type||s.type]:a[o],this.mergedOptions=t.extend({},s,n,i)},getTagSetting:function(t){var e,i,n,a,s=this.tagOptionsPrefix;if(!1===s||void 0===s)return P;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(void 0===(e=this.tag.getAttribute(s+t))||null===e)e=P;else if("["===e.substr(0,1))for(e=e.substr(1,e.length-2).split(","),i=e.length;i--;)e[i]=l(e[i].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(n=e.substr(1,e.length-2).split(","),e={},i=n.length;i--;)a=n[i].split(":",2),e[a[0].replace(/(^\s*)|(\s*$)/g,"")]=l(a[1].replace(/(^\s*)|(\s*$)/g,""));else e=l(e);this.tagValCache.key=e}return e},get:function(t,e){var i,n=this.getTagSetting(t);return n!==P?n:void 0===(i=this.mergedOptions[t])?e:i}}),t.fn.sparkline._base=i({disabled:!1,init:function(e,i,n,a,s){this.el=e,this.$el=t(e),this.values=i,this.options=n,this.width=a,this.height=s,this.currentRegion=void 0},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(t,e){},setRegionHighlight:function(t,e,i){var n,a=this.currentRegion,s=!this.options.get("disableHighlight");return e>this.canvasWidth||i>this.canvasHeight||e<0||i<0?null:(n=this.getRegion(t,e,i),a!==n&&(void 0!==a&&s&&this.removeHighlight(),this.currentRegion=n,void 0!==n&&s&&this.renderHighlight(),!0))},clearRegionHighlight:function(){return void 0!==this.currentRegion&&(this.removeHighlight(),this.currentRegion=void 0,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var e,i,a,s,o,r,l,h,c,u,d,f,p,g,m=this.options,v="",_=[];if(void 0===this.currentRegion)return"";if(e=this.getCurrentRegionFields(),d=m.get("tooltipFormatter"))return d(this,m,e);if(m.get("tooltipChartTitle")&&(v+='<div class="jqs jqstitle">'+m.get("tooltipChartTitle")+"</div>\n"),!(i=this.options.get("tooltipFormat")))return"";if(t.isArray(i)||(i=[i]),t.isArray(e)||(e=[e]),l=this.options.get("tooltipFormatFieldlist"),h=this.options.get("tooltipFormatFieldlistKey"),l&&h){for(c=[],r=e.length;r--;)u=e[r][h],-1!=(g=t.inArray(u,l))&&(c[g]=e[r]);e=c}for(a=i.length,p=e.length,r=0;r<a;r++)for(f=i[r],"string"==typeof f&&(f=new n(f)),s=f.fclass||"jqsfield",g=0;g<p;g++)e[g].isNull&&m.get("tooltipSkipNull")||(t.extend(e[g],{prefix:m.get("tooltipPrefix"),suffix:m.get("tooltipSuffix")}),o=f.render(e[g],m.get("tooltipValueLookups"),m),_.push('<div class="'+s+'">'+o+"</div>"));return _.length?v+_.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,e){var i,n,s,o,l=e.get("highlightColor"),h=e.get("highlightLighten");if(l)return l;if(h&&(i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(s=[],n=4===t.length?16:1,o=0;o<3;o++)s[o]=a(r.round(parseInt(i[o+1],16)*n*h),0,255);return"rgb("+s.join(",")+")"}return t}}),b={changeHighlight:function(e){var i,n=this.currentRegion,a=this.target,s=this.regionShapes[n];s&&(i=this.renderRegion(n,e),t.isArray(i)||t.isArray(s)?(a.replaceWithShapes(s,i),this.regionShapes[n]=t.map(i,function(t){return t.id})):(a.replaceWithShape(s,i),this.regionShapes[n]=i.id))},render:function(){var e,i,n,a,s=this.values,o=this.target,r=this.regionShapes;if(this.cls._super.render.call(this)){for(n=s.length;n--;)if(e=this.renderRegion(n))if(t.isArray(e)){for(i=[],a=e.length;a--;)e[a].append(),i.push(e[a].id);r[n]=i}else e.append(),r[n]=e.id;else r[n]=null;o.render()}}},t.fn.sparkline.line=y=i(t.fn.sparkline._base,{type:"line",init:function(t,e,i,n,a){y._super.init.call(this,t,e,i,n,a),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,i){var n,a=this.regionMap;for(n=a.length;n--;)if(null!==a[n]&&e>=a[n][0]&&e<=a[n][1])return a[n][2]},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,i=this.currentRegion,n=this.target,a=this.vertices[i],s=this.options,o=s.get("spotRadius"),r=s.get("highlightSpotColor"),l=s.get("highlightLineColor");a&&(o&&r&&(t=n.drawCircle(a[0],a[1],o,void 0,r),this.highlightSpotId=t.id,n.insertAfterShape(this.lastShapeId,t)),l&&(e=n.drawLine(a[0],this.canvasTop,a[0],this.canvasTop+this.canvasHeight,l),this.highlightLineId=e.id,n.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,e,i,n,a,s=this.values,o=s.length,l=this.xvalues,h=this.yvalues,c=this.yminmax;for(t=0;t<o;t++)e=s[t],i="string"==typeof s[t],n="object"==typeof s[t]&&s[t]instanceof Array,a=i&&s[t].split(":"),i&&2===a.length?(l.push(Number(a[0])),h.push(Number(a[1])),c.push(Number(a[1]))):n?(l.push(e[0]),h.push(e[1]),c.push(e[1])):(l.push(t),null===s[t]||"null"===s[t]?h.push(null):(h.push(Number(e)),c.push(Number(e))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=r.max.apply(r,c),this.miny=this.minyorg=r.min.apply(r,c),this.maxx=r.max.apply(r,l),this.minx=r.min.apply(r,l),this.xvalues=l,this.yvalues=h,this.yminmax=c},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),i=t.get("normalRangeMax");void 0!==e&&(e<this.miny&&(this.miny=e),i>this.maxy&&(this.maxy=i)),void 0!==t.get("chartRangeMin")&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),void 0!==t.get("chartRangeMax")&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),void 0!==t.get("chartRangeMinX")&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),void 0!==t.get("chartRangeMaxX")&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,e,i,n,a){var s=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),l=e+r.round(i-i*((o-this.miny)/a)),h=r.round(i*(o-s)/a);this.target.drawRect(t,l,n,h,void 0,this.options.get("normalRangeColor")).append()},render:function(){var e,i,n,a,s,o,l,h,c,u,d,f,p,g,v,_,b,w,x,k,C,S,T,E,A,M=this.options,O=this.target,R=this.canvasWidth,$=this.canvasHeight,D=this.vertices,P=M.get("spotRadius"),j=this.regionMap;if(y._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),T=this.xvalues,E=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(a=s=0,e=this.maxx-this.minx==0?1:this.maxx-this.minx,i=this.maxy-this.miny==0?1:this.maxy-this.miny,n=this.yvalues.length-1,P&&(R<4*P||$<4*P)&&(P=0),P&&(C=M.get("highlightSpotColor")&&!M.get("disableInteraction"),(C||M.get("minSpotColor")||M.get("spotColor")&&E[n]===this.miny)&&($-=r.ceil(P)),(C||M.get("maxSpotColor")||M.get("spotColor")&&E[n]===this.maxy)&&($-=r.ceil(P),a+=r.ceil(P)),(C||(M.get("minSpotColor")||M.get("maxSpotColor"))&&(E[0]===this.miny||E[0]===this.maxy))&&(s+=r.ceil(P),R-=r.ceil(P)),(C||M.get("spotColor")||M.get("minSpotColor")||M.get("maxSpotColor")&&(E[n]===this.miny||E[n]===this.maxy))&&(R-=r.ceil(P))),$--,void 0===M.get("normalRangeMin")||M.get("drawNormalOnTop")||this.drawNormalRange(s,a,$,R,i),l=[],h=[l],g=v=null,_=E.length,A=0;A<_;A++)c=T[A],d=T[A+1],u=E[A],f=s+r.round((c-this.minx)*(R/e)),p=A<_-1?s+r.round((d-this.minx)*(R/e)):R,v=f+(p-f)/2,j[A]=[g||0,v,A],g=v,null===u?A&&(null!==E[A-1]&&(l=[],h.push(l)),D.push(null)):(u<this.miny&&(u=this.miny),u>this.maxy&&(u=this.maxy),l.length||l.push([f,a+$]),o=[f,a+r.round($-$*((u-this.miny)/i))],l.push(o),D.push(o));for(b=[],w=[],x=h.length,A=0;A<x;A++)l=h[A],l.length&&(M.get("fillColor")&&(l.push([l[l.length-1][0],a+$]),w.push(l.slice(0)),l.pop()),l.length>2&&(l[0]=[l[0][0],l[1][1]]),b.push(l));for(x=w.length,A=0;A<x;A++)O.drawShape(w[A],M.get("fillColor"),M.get("fillColor")).append();for(void 0!==M.get("normalRangeMin")&&M.get("drawNormalOnTop")&&this.drawNormalRange(s,a,$,R,i),x=b.length,A=0;A<x;A++)O.drawShape(b[A],M.get("lineColor"),void 0,M.get("lineWidth")).append();if(P&&M.get("valueSpots"))for(k=M.get("valueSpots"),void 0===k.get&&(k=new m(k)),A=0;A<_;A++)(S=k.get(E[A]))&&O.drawCircle(s+r.round((T[A]-this.minx)*(R/e)),a+r.round($-$*((E[A]-this.miny)/i)),P,void 0,S).append();P&&M.get("spotColor")&&null!==E[n]&&O.drawCircle(s+r.round((T[T.length-1]-this.minx)*(R/e)),a+r.round($-$*((E[n]-this.miny)/i)),P,void 0,M.get("spotColor")).append(),this.maxy!==this.minyorg&&(P&&M.get("minSpotColor")&&(c=T[t.inArray(this.minyorg,E)],O.drawCircle(s+r.round((c-this.minx)*(R/e)),a+r.round($-$*((this.minyorg-this.miny)/i)),P,void 0,M.get("minSpotColor")).append()),P&&M.get("maxSpotColor")&&(c=T[t.inArray(this.maxyorg,E)],O.drawCircle(s+r.round((c-this.minx)*(R/e)),a+r.round($-$*((this.maxyorg-this.miny)/i)),P,void 0,M.get("maxSpotColor")).append())),this.lastShapeId=O.getLastShapeId(),this.canvasTop=a,O.render()}}}),t.fn.sparkline.bar=w=i(t.fn.sparkline._base,b,{type:"bar",init:function(e,i,n,s,o){var u,d,f,p,g,v,_,b,y,x,k,C,S,T,E,A,M,O,R,$,D,P,j=parseInt(n.get("barWidth"),10),I=parseInt(n.get("barSpacing"),10),N=n.get("chartRangeMin"),L=n.get("chartRangeMax"),z=n.get("chartRangeClip"),H=1/0,q=-1/0;for(w._super.init.call(this,e,i,n,s,o),v=0,_=i.length;v<_;v++)$=i[v],((u="string"==typeof $&&$.indexOf(":")>-1)||t.isArray($))&&(E=!0,u&&($=i[v]=h($.split(":"))),$=c($,null),d=r.min.apply(r,$),f=r.max.apply(r,$),d<H&&(H=d),f>q&&(q=f));this.stacked=E,this.regionShapes={},this.barWidth=j,this.barSpacing=I,this.totalBarWidth=j+I,this.width=s=i.length*j+(i.length-1)*I,this.initTarget(),z&&(S=void 0===N?-1/0:N,T=void 0===L?1/0:L),g=[],p=E?[]:g;var F=[],V=[];for(v=0,_=i.length;v<_;v++)if(E)for(A=i[v],i[v]=R=[],F[v]=0,p[v]=V[v]=0,M=0,O=A.length;M<O;M++)null!==($=R[M]=z?a(A[M],S,T):A[M])&&($>0&&(F[v]+=$),H<0&&q>0?$<0?V[v]+=r.abs($):p[v]+=$:p[v]+=r.abs($-($<0?q:H)),g.push($));else $=z?a(i[v],S,T):i[v],null!==($=i[v]=l($))&&g.push($);this.max=C=r.max.apply(r,g),this.min=k=r.min.apply(r,g),this.stackMax=q=E?r.max.apply(r,F):C,this.stackMin=H=E?r.min.apply(r,g):k,void 0!==n.get("chartRangeMin")&&(n.get("chartRangeClip")||n.get("chartRangeMin")<k)&&(k=n.get("chartRangeMin")),void 0!==n.get("chartRangeMax")&&(n.get("chartRangeClip")||n.get("chartRangeMax")>C)&&(C=n.get("chartRangeMax")),this.zeroAxis=y=n.get("zeroAxis",!0),x=k<=0&&C>=0&&y?0:0==y?k:k>0?k:C,this.xaxisOffset=x,b=E?r.max.apply(r,p)+r.max.apply(r,V):C-k,this.canvasHeightEf=y&&k<0?this.canvasHeight-2:this.canvasHeight-1,k<x?(P=E&&C>=0?q:C,(D=(P-x)/b*this.canvasHeight)!==r.ceil(D)&&(this.canvasHeightEf-=2,D=r.ceil(D))):D=this.canvasHeight,this.yoffset=D,t.isArray(n.get("colorMap"))?(this.colorMapByIndex=n.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=n.get("colorMap"),this.colorMapByValue&&void 0===this.colorMapByValue.get&&(this.colorMapByValue=new m(this.colorMapByValue))),this.range=b},getRegion:function(t,e,i){var n=r.floor(e/this.totalBarWidth);return n<0||n>=this.values.length?void 0:n},getCurrentRegionFields:function(){var t,e,i=this.currentRegion,n=p(this.values[i]),a=[];for(e=n.length;e--;)t=n[e],a.push({isNull:null===t,value:t,color:this.calcColor(e,t,i),offset:i});return a},calcColor:function(e,i,n){var a,s,o=this.colorMapByIndex,r=this.colorMapByValue,l=this.options;return a=this.stacked?l.get("stackedBarColor"):i<0?l.get("negBarColor"):l.get("barColor"),0===i&&void 0!==l.get("zeroColor")&&(a=l.get("zeroColor")),r&&(s=r.get(i))?a=s:o&&o.length>n&&(a=o[n]),t.isArray(a)?a[e%a.length]:a},renderRegion:function(e,i){var n,a,s,o,l,h,c,u,f,p,g=this.values[e],m=this.options,v=this.xaxisOffset,_=[],b=this.range,y=this.stacked,w=this.target,x=e*this.totalBarWidth,k=this.canvasHeightEf,C=this.yoffset;if(g=t.isArray(g)?g:[g],c=g.length,u=g[0],o=d(null,g),p=d(v,g,!0),o)return m.get("nullColor")?(s=i?m.get("nullColor"):this.calcHighlightColor(m.get("nullColor"),m),n=C>0?C-1:C,w.drawRect(x,n,this.barWidth-1,0,s,s)):void 0;for(l=C,h=0;h<c;h++){if(u=g[h],y&&u===v){if(!p||f)continue;f=!0}a=b>0?r.floor(k*(r.abs(u-v)/b))+1:1,u<v||u===v&&0===C?(n=l,l+=a):(n=C-a,C-=a),s=this.calcColor(h,u,e),i&&(s=this.calcHighlightColor(s,m)),_.push(w.drawRect(x,n,this.barWidth-1,a-1,s,s))}return 1===_.length?_[0]:_}}),t.fn.sparkline.tristate=x=i(t.fn.sparkline._base,b,{type:"tristate",init:function(e,i,n,a,s){var o=parseInt(n.get("barWidth"),10),r=parseInt(n.get("barSpacing"),10);x._super.init.call(this,e,i,n,a,s),this.regionShapes={},this.barWidth=o,this.barSpacing=r,this.totalBarWidth=o+r,this.values=t.map(i,Number),this.width=a=i.length*o+(i.length-1)*r,t.isArray(n.get("colorMap"))?(this.colorMapByIndex=n.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=n.get("colorMap"),this.colorMapByValue&&void 0===this.colorMapByValue.get&&(this.colorMapByValue=new m(this.colorMapByValue))),this.initTarget()},getRegion:function(t,e,i){return r.floor(e/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i,n=this.values,a=this.options,s=this.colorMapByIndex,o=this.colorMapByValue;return o&&(i=o.get(t))?i:s&&s.length>e?s[e]:n[e]<0?a.get("negBarColor"):n[e]>0?a.get("posBarColor"):a.get("zeroBarColor")},renderRegion:function(t,e){var i,n,a,s,o,l,h=this.values,c=this.options,u=this.target;if(i=u.pixelHeight,a=r.round(i/2),s=t*this.totalBarWidth,h[t]<0?(o=a,n=a-1):h[t]>0?(o=0,n=a-1):(o=a-1,n=2),null!==(l=this.calcColor(h[t],t)))return e&&(l=this.calcHighlightColor(l,c)),u.drawRect(s,o,this.barWidth-1,n-1,l,l)}}),t.fn.sparkline.discrete=k=i(t.fn.sparkline._base,b,{type:"discrete",init:function(e,i,n,a,s){k._super.init.call(this,e,i,n,a,s),this.regionShapes={},this.values=i=t.map(i,Number),this.min=r.min.apply(r,i),this.max=r.max.apply(r,i),this.range=this.max-this.min,this.width=a="auto"===n.get("width")?2*i.length:this.width,this.interval=r.floor(a/i.length),this.itemWidth=a/i.length,void 0!==n.get("chartRangeMin")&&(n.get("chartRangeClip")||n.get("chartRangeMin")<this.min)&&(this.min=n.get("chartRangeMin")),void 0!==n.get("chartRangeMax")&&(n.get("chartRangeClip")||n.get("chartRangeMax")>this.max)&&(this.max=n.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===n.get("lineHeight")?r.round(.3*this.canvasHeight):n.get("lineHeight"))},getRegion:function(t,e,i){return r.floor(e/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],offset:t}},renderRegion:function(t,e){var i,n,s,o,l=this.values,h=this.options,c=this.min,u=this.max,d=this.range,f=this.interval,p=this.target,g=this.canvasHeight,m=this.lineHeight,v=g-m;return n=a(l[t],c,u),o=t*f,i=r.round(v-v*((n-c)/d)),s=h.get("thresholdColor")&&n<h.get("thresholdValue")?h.get("thresholdColor"):h.get("lineColor"),e&&(s=this.calcHighlightColor(s,h)),p.drawLine(o,i,o,i+m,s)}}),t.fn.sparkline.bullet=C=i(t.fn.sparkline._base,{type:"bullet",init:function(t,e,i,n,a){var s,o,l;C._super.init.call(this,t,e,i,n,a),this.values=e=h(e),l=e.slice(),l[0]=null===l[0]?l[2]:l[0],l[1]=null===e[1]?l[2]:l[1],s=r.min.apply(r,e),o=r.max.apply(r,e),s=void 0===i.get("base")?s<0?s:0:i.get("base"),this.min=s,this.max=o,this.range=o-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=n="auto"===i.get("width")?"4.0em":n,this.target=this.$el.simpledraw(n,a,i.get("composite")),e.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return void 0!==n&&void 0!==this.shapes[n]?this.shapes[n]:void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,i=this.currentRegion,n=this.valueShapes[i];switch(delete this.shapes[n],i.substr(0,1)){case"r":e=this.renderRange(i.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[i]=e.id,this.shapes[e.id]=i,this.target.replaceWithShape(n,e)},renderRange:function(t,e){var i=this.values[t],n=r.round(this.canvasWidth*((i-this.min)/this.range)),a=this.options.get("rangeColors")[t-2];return e&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(0,0,n-1,this.canvasHeight-1,a,a)},renderPerformance:function(t){var e=this.values[1],i=r.round(this.canvasWidth*((e-this.min)/this.range)),n=this.options.get("performanceColor");return t&&(n=this.calcHighlightColor(n,this.options)),this.target.drawRect(0,r.round(.3*this.canvasHeight),i-1,r.round(.4*this.canvasHeight)-1,n,n)},renderTarget:function(t){var e=this.values[0],i=r.round(this.canvasWidth*((e-this.min)/this.range)-this.options.get("targetWidth")/2),n=r.round(.1*this.canvasHeight),a=this.canvasHeight-2*n,s=this.options.get("targetColor");return t&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(i,n,this.options.get("targetWidth")-1,a-1,s,s)},render:function(){var t,e,i=this.values.length,n=this.target;if(C._super.render.call(this)){for(t=2;t<i;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),n.render()}}}),t.fn.sparkline.pie=S=i(t.fn.sparkline._base,{type:"pie",init:function(e,i,n,a,s){var o,l=0;if(S._super.init.call(this,e,i,n,a,s),this.shapes={},this.valueShapes={},this.values=i=t.map(i,Number),"auto"===n.get("width")&&(this.width=this.height),i.length>0)for(o=i.length;o--;)l+=i[o];this.total=l,this.initTarget(),this.radius=r.floor(r.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return void 0!==n&&void 0!==this.shapes[n]?this.shapes[n]:void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,e){var i,n,a,s,o,l=this.target,h=this.options,c=this.radius,u=h.get("borderWidth"),d=h.get("offset"),f=2*r.PI,p=this.values,g=this.total,m=d?2*r.PI*(d/360):0;for(s=p.length,a=0;a<s;a++){if(i=m,n=m,g>0&&(n=m+f*(p[a]/g)),t===a)return o=h.get("sliceColors")[a%h.get("sliceColors").length],e&&(o=this.calcHighlightColor(o,h)),l.drawPieSlice(c,c,c-u,i,n,void 0,o);m=n}},render:function(){var t,e,i=this.target,n=this.values,a=this.options,s=this.radius,o=a.get("borderWidth");if(S._super.render.call(this)){for(o&&i.drawCircle(s,s,r.floor(s-o/2),a.get("borderColor"),void 0,o).append(),e=n.length;e--;)n[e]&&(t=this.renderSlice(e).append(),this.valueShapes[e]=t.id,this.shapes[t.id]=e);i.render()}}}),t.fn.sparkline.box=T=i(t.fn.sparkline._base,{type:"box",init:function(e,i,n,a,s){T._super.init.call(this,e,i,n,a,s),this.values=t.map(i,Number),this.width="auto"===n.get("width")?"4.0em":a,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return void 0!==this.loutlier&&t.push({field:"lo",value:this.loutlier}),void 0!==this.routlier&&t.push({field:"ro",value:this.routlier}),void 0!==this.lwhisker&&t.push({field:"lw",value:this.lwhisker}),void 0!==this.rwhisker&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,e,i,n,a,o,l,h,c,u,d,f=this.target,p=this.values,g=p.length,m=this.options,v=this.canvasWidth,_=this.canvasHeight,b=void 0===m.get("chartRangeMin")?r.min.apply(r,p):m.get("chartRangeMin"),y=void 0===m.get("chartRangeMax")?r.max.apply(r,p):m.get("chartRangeMax"),w=0;if(T._super.render.call(this)){if(m.get("raw"))m.get("showOutliers")&&p.length>5?(e=p[0],t=p[1],n=p[2],a=p[3],o=p[4],l=p[5],h=p[6]):(t=p[0],n=p[1],a=p[2],o=p[3],l=p[4]);else if(p.sort(function(t,e){return t-e}),n=s(p,1),a=s(p,2),o=s(p,3),i=o-n,m.get("showOutliers")){for(t=l=void 0,c=0;c<g;c++)void 0===t&&p[c]>n-i*m.get("outlierIQR")&&(t=p[c]),p[c]<o+i*m.get("outlierIQR")&&(l=p[c]);e=p[0],h=p[g-1]}else t=p[0],l=p[g-1];this.quartiles=[n,a,o],this.lwhisker=t,this.rwhisker=l,this.loutlier=e,this.routlier=h,d=v/(y-b+1),m.get("showOutliers")&&(w=r.ceil(m.get("spotRadius")),v-=2*r.ceil(m.get("spotRadius")),d=v/(y-b+1),e<t&&f.drawCircle((e-b)*d+w,_/2,m.get("spotRadius"),m.get("outlierLineColor"),m.get("outlierFillColor")).append(),h>l&&f.drawCircle((h-b)*d+w,_/2,m.get("spotRadius"),m.get("outlierLineColor"),m.get("outlierFillColor")).append()),f.drawRect(r.round((n-b)*d+w),r.round(.1*_),r.round((o-n)*d),r.round(.8*_),m.get("boxLineColor"),m.get("boxFillColor")).append(),f.drawLine(r.round((t-b)*d+w),r.round(_/2),r.round((n-b)*d+w),r.round(_/2),m.get("lineColor")).append(),f.drawLine(r.round((t-b)*d+w),r.round(_/4),r.round((t-b)*d+w),r.round(_-_/4),m.get("whiskerColor")).append(),f.drawLine(r.round((l-b)*d+w),r.round(_/2),r.round((o-b)*d+w),r.round(_/2),m.get("lineColor")).append(),f.drawLine(r.round((l-b)*d+w),r.round(_/4),r.round((l-b)*d+w),r.round(_-_/4),m.get("whiskerColor")).append(),f.drawLine(r.round((a-b)*d+w),r.round(.1*_),r.round((a-b)*d+w),r.round(.9*_),m.get("medianColor")).append(),m.get("target")&&(u=r.ceil(m.get("spotRadius")),f.drawLine(r.round((m.get("target")-b)*d+w),r.round(_/2-u),r.round((m.get("target")-b)*d+w),r.round(_/2+u),m.get("targetColor")).append(),f.drawLine(r.round((m.get("target")-b)*d+w-u),r.round(_/2),r.round((m.get("target")-b)*d+w+u),r.round(_/2),m.get("targetColor")).append()),f.render()}}}),M=i({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),O=i({_pxregex:/(\d+)(px)?\s*$/i,init:function(e,i,n){e&&(this.width=e,this.height=i,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),t.data(n,"_jqs_vcanvas",this))},drawLine:function(t,e,i,n,a,s){return this.drawShape([[t,e],[i,n]],a,s)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,a,s){return this._genShape("Circle",[t,e,i,n,a,s])},drawPieSlice:function(t,e,i,n,a,s,o){return this._genShape("PieSlice",[t,e,i,n,a,s,o])},drawRect:function(t,e,i,n,a,s){return this._genShape("Rect",[t,e,i,n,a,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(e,i){t(i).html(e)},_calculatePixelDims:function(e,i,n){var a;a=this._pxregex.exec(i),this.pixelHeight=a?a[1]:t(n).height(),a=this._pxregex.exec(e),this.pixelWidth=a?a[1]:t(n).width()},_genShape:function(t,e){var i=j++;return e.unshift(i),new M(this,i,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),R=i(O,{init:function(e,i,n,a){R._super.init.call(this,e,i,n),this.canvas=o.createElement("canvas"),n[0]&&(n=n[0]),t.data(n,"_jqs_vcanvas",this),t(this.canvas).css({display:"inline-block",width:e,height:i,verticalAlign:"top"}),this._insert(this.canvas,n),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=a,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=void 0,t(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,i){var n=this.canvas.getContext("2d");return void 0!==t&&(n.strokeStyle=t),n.lineWidth=void 0===i?1:i,void 0!==e&&(n.fillStyle=e),n},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=void 0},_drawShape:function(t,e,i,n,a){var s,o,r=this._getContext(i,n,a);for(r.beginPath(),r.moveTo(e[0][0]+.5,e[0][1]+.5),s=1,o=e.length;s<o;s++)r.lineTo(e[s][0]+.5,e[s][1]+.5);void 0!==i&&r.stroke(),void 0!==n&&r.fill(),void 0!==this.targetX&&void 0!==this.targetY&&r.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,e,i,n,a,s,o){var l=this._getContext(a,s,o);l.beginPath(),l.arc(e,i,n,0,2*r.PI,!1),void 0!==this.targetX&&void 0!==this.targetY&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),void 0!==a&&l.stroke(),void 0!==s&&l.fill()},_drawPieSlice:function(t,e,i,n,a,s,o,r){var l=this._getContext(o,r);l.beginPath(),l.moveTo(e,i),l.arc(e,i,n,a,s,!1),l.lineTo(e,i),l.closePath(),void 0!==o&&l.stroke(),r&&l.fill(),void 0!==this.targetX&&void 0!==this.targetY&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,a,s,o){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+a],[e,i+a],[e,i]],s,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i,n=this.shapeseq;for(this.shapes[e.id]=e,i=n.length;i--;)n[i]==t&&(n[i]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i,n,a,s=this.shapeseq,o={};for(n=t.length;n--;)o[t[n]]=!0;for(n=s.length;n--;)i=s[n],o[i]&&(s.splice(n,1),delete this.shapes[i],a=n);for(n=e.length;n--;)s.splice(a,0,e[n].id),this.shapes[e[n].id]=e[n]},insertAfterShape:function(t,e){var i,n=this.shapeseq;for(i=n.length;i--;)if(n[i]===t)return n.splice(i+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,i=this.shapeseq;for(e=i.length;e--;)if(i[e]===t){i.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t,e,i,n=this.shapeseq,a=this.shapes,s=n.length,o=this._getContext();for(o.clearRect(0,0,this.pixelWidth,this.pixelHeight),i=0;i<s;i++)t=n[i],e=a[t],this["_draw"+e.type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),$=i(O,{init:function(e,i,n){var a;$._super.init.call(this,e,i,n),n[0]&&(n=n[0]),t.data(n,"_jqs_vcanvas",this),this.canvas=o.createElement("span"),t(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,n),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,a='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",a),this.group=t(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,i,n,a){var s,o,r,l,h,c,u=[];for(c=0,h=e.length;c<h;c++)u[c]=e[c][0]+","+e[c][1];return s=u.splice(0,1),a=void 0===a?1:a,o=void 0===i?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+i+'" ',r=void 0===n?' filled="false"':' fillColor="'+n+'" filled="true" ',l=u[0]===u[u.length-1]?"x ":"",'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+o+r+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+s+" l "+u.join(", ")+" "+l+'e"> </v:shape>'},_drawCircle:function(t,e,i,n,a,s,o){var r,l;return e-=n,i-=n,r=void 0===a?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+a+'" ',l=void 0===s?' filled="false"':' fillColor="'+s+'" filled="true" ','<v:oval  id="jqsshape'+t+'" '+r+l+' style="position:absolute;top:'+i+"px; left:"+e+"px; width:"+2*n+"px; height:"+2*n+'px"></v:oval>'},_drawPieSlice:function(t,e,i,n,a,s,o,l){var h,c,u,d,f,p,g;if(a===s)return"";if(s-a==2*r.PI&&(a=0,s=2*r.PI),c=e+r.round(r.cos(a)*n),u=i+r.round(r.sin(a)*n),d=e+r.round(r.cos(s)*n),f=i+r.round(r.sin(s)*n),c===d&&u===f){if(s-a<r.PI)return"";c=d=e+n,u=f=i}return c===d&&u===f&&s-a<r.PI?"":(h=[e-n,i-n,e+n,i+n,c,u,d,f],p=void 0===o?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',g=void 0===l?' filled="false"':' fillColor="'+l+'" filled="true" ','<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+p+g+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+e+","+i+" wa "+h.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,i,n,a,s,o){return this._drawShape(t,[[e,i],[e,i+a],[e+n,i+a],[e+n,i],[e,i]],s,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(e,i){var n=t("#jqsshape"+e),a=this["_draw"+i.type].apply(this,i.args);n[0].outerHTML=a},replaceWithShapes:function(e,i){var n,a=t("#jqsshape"+e[0]),s="",o=i.length;for(n=0;n<o;n++)s+=this["_draw"+i[n].type].apply(this,i[n].args);for(a[0].outerHTML=s,n=1;n<e.length;n++)t("#jqsshape"+e[n]).remove()},insertAfterShape:function(e,i){var n=t("#jqsshape"+e),a=this["_draw"+i.type].apply(this,i.args);n[0].insertAdjacentHTML("afterEnd",a)},removeShapeId:function(e){var i=t("#jqsshape"+e);this.group.removeChild(i[0])},getShapeAt:function(t,e,i){return t.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math)},function(t,e,i){(function(t){!function(){function e(){var t="{}";if("userDataBehavior"==k){w.load("jStorage");try{t=w.getAttribute("jStorage")}catch(t){}try{T=w.getAttribute("jStorage_update")}catch(t){}y.jStorage=t}r(),c(),u()}function i(){"localStorage"==k||"globalStorage"==k?"addEventListener"in window?window.addEventListener("storage",n,!1):document.attachEvent("onstorage",n):"userDataBehavior"==k&&setInterval(n,1e3)}function n(){var t;clearTimeout(S),S=setTimeout(function(){if("localStorage"==k||"globalStorage"==k)t=y.jStorage_update;else if("userDataBehavior"==k){w.load("jStorage");try{t=w.getAttribute("jStorage_update")}catch(t){}}t&&t!=T&&(T=t,a())},25)}function a(){var t,i=v.parse(v.stringify(b.__jstorage_meta.CRC32));e(),t=v.parse(v.stringify(b.__jstorage_meta.CRC32));var n,a=[],o=[];for(n in i)if(i.hasOwnProperty(n)){if(!t[n]){o.push(n);continue}i[n]!=t[n]&&"2."==String(i[n]).substr(0,2)&&a.push(n)}for(n in t)t.hasOwnProperty(n)&&(i[n]||a.push(n));s(a,"updated"),s(o,"deleted")}function s(t,e){if(t=[].concat(t||[]),"flushed"==e){t=[];for(var i in C)C.hasOwnProperty(i)&&t.push(i);e="deleted"}for(var n=0,a=t.length;n<a;n++){if(C[t[n]])for(var s=0,o=C[t[n]].length;s<o;s++)C[t[n]][s](t[n],e);if(C["*"])for(var s=0,o=C["*"].length;s<o;s++)C["*"][s](t[n],e)}}function o(){var t=(+new Date).toString();if("localStorage"==k||"globalStorage"==k)try{y.jStorage_update=t}catch(t){k=!1}else"userDataBehavior"==k&&(w.setAttribute("jStorage_update",t),w.save("jStorage"));n()}function r(){if(y.jStorage)try{b=v.parse(String(y.jStorage))}catch(t){y.jStorage="{}"}else y.jStorage="{}";x=y.jStorage?String(y.jStorage).length:0,b.__jstorage_meta||(b.__jstorage_meta={}),b.__jstorage_meta.CRC32||(b.__jstorage_meta.CRC32={})}function l(){f();try{y.jStorage=v.stringify(b),w&&(w.setAttribute("jStorage",y.jStorage),w.save("jStorage")),x=y.jStorage?String(y.jStorage).length:0}catch(t){}}function h(t){if(!t||"string"!=typeof t&&"number"!=typeof t)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==t)throw new TypeError("Reserved key name");return!0}function c(){var t,e,i,n,a=1/0,r=!1,h=[];if(clearTimeout(_),b.__jstorage_meta&&"object"==typeof b.__jstorage_meta.TTL){t=+new Date,i=b.__jstorage_meta.TTL,n=b.__jstorage_meta.CRC32;for(e in i)i.hasOwnProperty(e)&&(i[e]<=t?(delete i[e],delete n[e],delete b[e],r=!0,h.push(e)):i[e]<a&&(a=i[e]));a!=1/0&&(_=setTimeout(c,a-t)),r&&(l(),o(),s(h,"deleted"))}}function u(){var t;if(b.__jstorage_meta.PubSub){var e,i=A;for(t=b.__jstorage_meta.PubSub.length-1;t>=0;t--)e=b.__jstorage_meta.PubSub[t],e[0]>A&&(i=e[0],d(e[1],e[2]));A=i}}function d(t,e){if(E[t])for(var i=0,n=E[t].length;i<n;i++)E[t][i](t,v.parse(v.stringify(e)))}function f(){if(b.__jstorage_meta.PubSub){for(var t=+new Date-2e3,e=0,i=b.__jstorage_meta.PubSub.length;e<i;e++)if(b.__jstorage_meta.PubSub[e][0]<=t){b.__jstorage_meta.PubSub.splice(e,b.__jstorage_meta.PubSub.length-e);break}b.__jstorage_meta.PubSub.length||delete b.__jstorage_meta.PubSub}}function p(t,e){b.__jstorage_meta||(b.__jstorage_meta={}),b.__jstorage_meta.PubSub||(b.__jstorage_meta.PubSub=[]),b.__jstorage_meta.PubSub.unshift([+new Date,t,e]),l(),o()}function g(t,e){for(var i,n=t.length,a=e^n,s=0;n>=4;)i=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^i,n-=4,++s;switch(n){case 3:a^=(255&t.charCodeAt(s+2))<<16;case 2:a^=(255&t.charCodeAt(s+1))<<8;case 1:a^=255&t.charCodeAt(s),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)}return a^=a>>>13,a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0}var m=t||window.$||(window.$={}),v={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return String(t).evalJSON()}||m.parseJSON||m.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||m.toJSON};if(!("parse"in v&&"stringify"in v))throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var _,b={__jstorage_meta:{CRC32:{}}},y={jStorage:"{}"},w=null,x=0,k=!1,C={},S=!1,T=0,E={},A=+new Date,M={isXML:function(t){var e=(t?t.ownerDocument||t:0).documentElement;return!!e&&"HTML"!==e.nodeName},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(t){}}return!1},decode:function(t){var e,i="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return!!i&&(e=i.call("DOMParser"in window&&new DOMParser||window,t,"text/xml"),!!this.isXML(e)&&e)}};m.jStorage={version:"0.4.4",set:function(t,e,i){if(h(t),i=i||{},void 0===e)return this.deleteKey(t),e;if(M.isXML(e))e={_is_xml:!0,xml:M.encode(e)};else{if("function"==typeof e)return;e&&"object"==typeof e&&(e=v.parse(v.stringify(e)))}return b[t]=e,b.__jstorage_meta.CRC32[t]="2."+g(v.stringify(e),2538058380),this.setTTL(t,i.TTL||0),s(t,"updated"),e},get:function(t,e){return h(t),t in b?b[t]&&"object"==typeof b[t]&&b[t]._is_xml?M.decode(b[t].xml):b[t]:void 0===e?null:e},deleteKey:function(t){return h(t),t in b&&(delete b[t],"object"==typeof b.__jstorage_meta.TTL&&t in b.__jstorage_meta.TTL&&delete b.__jstorage_meta.TTL[t],delete b.__jstorage_meta.CRC32[t],l(),o(),s(t,"deleted"),!0)},setTTL:function(t,e){var i=+new Date;return h(t),e=Number(e)||0,t in b&&(b.__jstorage_meta.TTL||(b.__jstorage_meta.TTL={}),e>0?b.__jstorage_meta.TTL[t]=i+e:delete b.__jstorage_meta.TTL[t],l(),c(),o(),!0)},getTTL:function(t){var e=+new Date;return h(t),t in b&&b.__jstorage_meta.TTL&&b.__jstorage_meta.TTL[t]?b.__jstorage_meta.TTL[t]-e||0:0},flush:function(){return b={__jstorage_meta:{CRC32:{}}},l(),o(),s(null,"flushed"),!0},storageObj:function(){function t(){}return t.prototype=b,new t},index:function(){var t,e=[];for(t in b)b.hasOwnProperty(t)&&"__jstorage_meta"!=t&&e.push(t);return e},storageSize:function(){return x},currentBackend:function(){return k},storageAvailable:function(){return!!k},listenKeyChange:function(t,e){h(t),C[t]||(C[t]=[]),C[t].push(e)},stopListening:function(t,e){if(h(t),C[t]){if(!e)return void delete C[t];for(var i=C[t].length-1;i>=0;i--)C[t][i]==e&&C[t].splice(i,1)}},subscribe:function(t,e){if(!(t=(t||"").toString()))throw new TypeError("Channel not defined");E[t]||(E[t]=[]),E[t].push(e)},publish:function(t,e){if(!(t=(t||"").toString()))throw new TypeError("Channel not defined");p(t,e)},reInit:function(){e()}},function(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(t){}if(t)try{window.localStorage&&(y=window.localStorage,k="localStorage",T=y.jStorage_update)}catch(t){}else if("globalStorage"in window)try{window.globalStorage&&(y="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],k="globalStorage",T=y.jStorage_update)}catch(t){}else{if(w=document.createElement("link"),!w.addBehavior)return void(w=null);w.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(w);try{w.load("jStorage")}catch(t){w.setAttribute("jStorage","{}"),w.save("jStorage"),w.load("jStorage")}var e="{}";try{e=w.getAttribute("jStorage")}catch(t){}try{T=w.getAttribute("jStorage_update")}catch(t){}y.jStorage=e,k="userDataBehavior"}r(),c(),i(),u(),"addEventListener"in window&&window.addEventListener("pageshow",function(t){t.persisted&&n()},!1)}()}()}).call(e,i(0))},function(t,e,i){(function(t){!function(t){t.fn.extend({complexify:function(e,i){function n(t,e){for(var i=t.length-1;i>=0;i--)if(e[0]<=t.charCodeAt(i)&&t.charCodeAt(i)<=e[1])return e[1]-e[0]+1;return 0}function a(i){if("strict"===e.banMode){for(var n=0;n<e.bannedPasswords.length;n++)if(-1!==i.toLowerCase().indexOf(e.bannedPasswords[n].toLowerCase()))return!0;return!1}return t.inArray(i,e.bannedPasswords)>-1}function s(){var s=t(this).val(),h=0,c=!1;if(a(s))h=1;else for(var u=l.length-1;u>=0;u--)h+=n(s,l[u]);h=Math.log(Math.pow(h,s.length))*(1/e.strengthScaleFactor),c=h>o&&s.length>=e.minimumChars,h=h/r*100,h=h>100?100:h,i.call(this,c,h)}var o=49,r=120,l=[[32,32],[48,57],[65,90],[97,122],[33,47],[58,64],[91,96],[123,126],[128,255],[256,383],[384,591],[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1328,1423],[1424,1535],[1536,1791],[1792,1871],[1920,1983],[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[5024,5119],[5120,5759],[5760,5791],[5792,5887],[6016,6143],[6144,6319],[7680,7935],[7936,8191],[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10240,10495],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12800,13055],[13056,13311],[13312,19893],[19968,40959],[40960,42127],[42128,42191],[44032,55203],[55296,56191],[56192,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65056,65071],[65072,65103],[65104,65135],[65136,65278],[65279,65279],[65280,65519],[65520,65533]],h={minimumChars:8,strengthScaleFactor:1,bannedPasswords:window.COMPLEXIFY_BANLIST||[],banMode:"strict"};return t.isFunction(e)&&!i&&(i=e,e={}),e=t.extend(h,e),this.each(function(){t(this).val()&&s.apply(this)}),this.each(function(){t(this).bind("keyup focus input propertychange mouseup",s)})}})}(t)}).call(e,i(0))},function(t,e,i){(function(t,e){+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]}}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var a=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e()})}(t),function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.attr("data-target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=i.find(".active:last a")[0],s=t.Event("show.bs.tab",{relatedTarget:a});if(e.trigger(s),!s.isDefaultPrevented()){var o=t(n);this.activate(e.parent("li"),i),this.activate(o,o.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},e.prototype.activate=function(e,i,n){function a(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var s=i.find("> .active"),o=n&&t.support.transition&&s.hasClass("fade");o?s.one(t.support.transition.end,a).emulateTransitionEnd(150):a(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),a=n.data("bs.tab");a||n.data("bs.tab",a=new e(this)),"string"==typeof i&&a[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(t),function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:"body"},e.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n);for(var a=this.options.trigger.split(" "),s=a.length;s--;){var o=a[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focus",l="hover"==o?"mouseleave":"blur";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var n="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,s=a.test(n);s&&(n=n.replace(a,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(n),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var o=this.getPosition(),r=i[0].offsetWidth,l=i[0].offsetHeight;if(s){var h=this.$element.parent(),c=n,u=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:h.outerWidth(),f="body"==this.options.container?window.innerHeight:h.outerHeight(),p="body"==this.options.container?0:h.offset().left;n="bottom"==n&&o.top+o.height+l-u>f?"top":"top"==n&&o.top-u-l<0?"bottom":"right"==n&&o.right+r>d?"left":"left"==n&&o.left-r<p?"right":n,i.removeClass(c).addClass(n)}var g=this.getCalculatedOffset(n,o,r,l);this.applyPlacement(g,n),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var i,n=this.tip(),a=n[0].offsetWidth,s=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(r)&&(r=0),t.top=t.top+o,t.left=t.left+r,n.offset(t).addClass("in");var l=n[0].offsetWidth,h=n[0].offsetHeight;if("top"==e&&h!=s&&(i=!0,t.top=t.top+s-h),/bottom|top/.test(e)){var c=0;t.left<0&&(c=-2*t.left,t.left=0,n.offset(t),l=n[0].offsetWidth,h=n[0].offsetHeight),this.replaceArrow(c-a+l,l,"left")}else this.replaceArrow(h-s,h,"top");i&&n.offset(t)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach()}var i=this,n=this.tip(),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),a=n.data("bs.tooltip"),s="object"==typeof i&&i;a||n.data("bs.tooltip",a=new e(this,s)),"string"==typeof i&&a[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(t),function(t){"use strict";function e(){t(n).remove(),t(a).each(function(e){var n=i(t(this));n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown"))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}var n=".dropdown-backdrop",a="[data-toggle=dropdown]",s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(n){var a=t(this);if(!a.is(".disabled, :disabled")){var s=i(a),o=s.hasClass("open");if(e(),!o){if("ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),s.trigger(n=t.Event("show.bs.dropdown")),n.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown"),a.focus()}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),o=s.hasClass("open");if(!o||o&&27==e.keyCode)return 27==e.which&&s.find(a).focus(),n.click();var r=t("[role=menu] li:not(.divider):visible a",s);if(r.length){var l=r.index(r.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<r.length-1&&l++,~l||(l=0),r.eq(l).focus()}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,s.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu]",s.prototype.keydown)}(t),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),a=n.data("bs.popover"),s="object"==typeof i&&i;a||n.data("bs.popover",a=new e(this,s)),"string"==typeof i&&a[i]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(e)}).call(e,i(0),i(0))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,i){"use strict";(function(t,e,n,a,s){function o(t){return t&&t.__esModule?t:{default:t}}function r(e,i,n){function a(t){var e=s(t),i={placeholder:"Click to select",closeOnSelect:!e.is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"};return t.select2(i)}t.fn.select2&&(void 0===e&&(e=20),void 0===i&&(i=3e3),n=n||s("select"),n.each(function(){var t=s(this).not("[multiple]"),n=t.find("option").length;n<e||n>i||t.hasClass("no-autocomplete")||a(t)}))}function l(){s("select[refresh_on_change='true']").off("change").change(function(){var t=s(this),e=t.val(),i=t.attr("refresh_on_change_values");if(i){i=i.split(",");var n=t.attr("last_selected_value");if(-1===s.inArray(e,i)&&-1===s.inArray(n,i))return}s(window).trigger("refresh_on_change"),s(document).trigger("convert_to_values"),t.get(0).form.submit()}),s(":checkbox[refresh_on_change='true']").off("click").click(function(){var t=s(this),e=t.val(),i=t.attr("refresh_on_change_values");if(i){i=i.split(",");var n=t.attr("last_selected_value");if(-1===s.inArray(e,i)&&-1===s.inArray(n,i))return}s(window).trigger("refresh_on_change"),t.get(0).form.submit()}),s("a[confirm]").off("click").click(function(){return confirm(s(this).attr("confirm"))})}var h=i(23),c=o(h),u=i(56),d=o(u),f=i(100),p=o(f),g=i(101),m=o(g),v=i(55),_=o(v),b=i(57),y=o(b),w=i(8);o(w);window.$=t,window._=n,window.Backbone=a,window.panels=c.default,n.extend(window,d.default),window.async_save_text=p.default,window.make_popupmenu=m.default.make_popupmenu,window.make_popup_menus=m.default.make_popup_menus,window.init_tag_click_function=_.default,window.init_refresh_on_change=l,s(document).ready(function(){function t(){void 0!==Galaxy.root?s.getJSON(Galaxy.root+"api/webhooks/onload/all",function(t){n.each(t,function(t){t.activate&&t.script&&(s("<script/>",{type:"text/javascript"}).text(t.script).appendTo("head"),s("<style/>",{type:"text/css"}).text(t.styles).appendTo("head"))})}):setTimeout(t,100)}l(),s.fn.tooltip&&(s(".unified-panel-header [title]").tooltip({placement:"bottom"}),s("[title]").tooltip()),make_popup_menus(),r(20,1500),s("a").click(function(){var t=s(this),e=parent.frames&&parent.frames.galaxy_main;if("galaxy_main"==t.attr("target")&&!e){var i=t.attr("href");-1==i.indexOf("?")?i+="?":i+="&",i+="use_panels=True",t.attr("href",i),t.attr("target","_self")}return t});var e=JSON.parse(sessionStorage.getItem("activeGalaxyTour"));if(e&&(e=y.default.hooked_tour_from_data(e))&&e.steps&&window&&window.self===window.top){var i=new Tour(n.extend({steps:e.steps},y.default.tour_opts));i.init(),i.restart()}t()})}).call(e,i(0),i(0),i(1),i(2),i(0))},function(t,e,i){"use strict";function n(t,e,i,n,a,s,r,l,h){void 0===a&&(a=30),void 0===r&&(r=4),o("#"+t).click(function(){if(!(o("#renaming-active").length>0)){var t,c=o("#"+e),u=c.text();t=s?o("<textarea></textarea>").attr({rows:r,cols:a}).text(o.trim(u)):o("<input type='text'></input>").attr({value:o.trim(u),size:a}),t.attr("id","renaming-active"),t.blur(function(){o(this).remove(),c.show(),h&&h(t)}),t.keyup(function(a){if(27===a.keyCode)o(this).trigger("blur");else if(13===a.keyCode){var s={};s[n]=o(this).val(),o(this).trigger("blur"),o.ajax({url:i,data:s,error:function(){alert("Text editing for elt "+e+" failed")},success:function(e){""!==e?c.text(e):c.html("<em>None</em>"),h&&h(t)}})}}),l&&l(t),c.hide(),t.insertAfter(c),t.focus(),t.select()}})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=s.default;e.default=n},function(t,e,i){"use strict";(function(t){function n(e,i){var n=e.data("menu_options");e.data("menu_options",i),n||e.bind("click.show_popup",function(i){return r(".popmenu-wrapper").remove(),setTimeout(function(){var n=r("<ul class='dropdown-menu' id='"+e.attr("id")+"-menu'></ul>"),a=e.data("menu_options");t.size(a)<=0&&r("<li>No Options.</li>").appendTo(n),r.each(a,function(t,e){if(e){var i=e.action||e;n.append(r("<li></li>").append(r("<a>").attr("href",e.url).html(t).click(i)))}else n.append(r("<li></li>").addClass("head").append(r("<a href='#'></a>").html(t)))});var s=r("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(n).appendTo("body"),o=i.pageX-s.width()/2;o=Math.min(o,r(document).scrollLeft()+r(window).width()-r(s).width()-5),o=Math.max(o,r(document).scrollLeft()+5),s.css({top:i.pageY,left:o})},10),setTimeout(function(){var t=function(t){r(t).bind("click.close_popup",function(){r(".popmenu-wrapper").remove(),t.unbind("click.close_popup")})};t(r(window.document)),t(r(window.top.document));for(var e=window.top.frames.length;e--;){t(r(window.top.frames[e].document))}},50),!1})}function a(t){t=t||document,r(t).find("div[popupmenu]").each(function(){var e={},i=r(this);i.find("a").each(function(){var t=r(this),i=t.get(0),n=i.getAttribute("confirm"),a=i.getAttribute("href"),s=i.getAttribute("target");e[t.text()]=a?{url:a,action:function(e){if(!n||confirm(n)){if(s)return window.open(a,s),!1;t.click()}else e.preventDefault()}}:null});var a=r(t).find("#"+i.attr("popupmenu"));a.find("a").bind("click",function(t){return t.stopPropagation(),!0}),n(a,e),a.addClass("popup"),i.remove()})}Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(s),r=o.default;e.default={make_popupmenu:n,make_popup_menus:a}}).call(e,i(1))},,function(t,e){var i={__root:{"Analyze Data":!1,Workflow:!1,"Shared Data":!1,"Data Libraries":!1,Histories:!1,Workflows:!1,Visualizations:!1,Pages:!1,Visualization:!1,"New Track Browser":!1,"Saved Visualizations":!1,"Interactive Environments":!1,Admin:!1,Help:!1,Support:!1,Search:!1,"Mailing Lists":!1,Videos:!1,Wiki:!1,"How to Cite Galaxy":!1,"Interactive Tours":!1,User:!1,Login:!1,Register:!1,"Login or Register":!1,"Logged in as":!1,Preferences:!1,"Custom Builds":!1,Logout:!1,"Saved Histories":!1,"Saved Datasets":!1,"Saved Pages":!1,"Account and saved data":!1,"Account registration or login":!1,"Support, contact, and community":!1,"Administer this Galaxy":!1,"Visualize datasets":!1,"Access published resources":!1,"Chain tools into workflows":!1,"Analysis home view":!1,"History Lists":!1,"Histories Shared with Me":!1,"Current History":!1,"Create New":!1,"Copy History":!1,"Share or Publish":!1,"Show Structure":!1,"Extract Workflow":!1,"Delete Permanently":!1,"Dataset Actions":!1,"Copy Datasets":!1,"Dataset Security":!1,"Resume Paused Jobs":!1,"Collapse Expanded Datasets":!1,"Unhide Hidden Datasets":!1,"Delete Hidden Datasets":!1,"Purge Deleted Datasets":!1,Downloads:!1,"Export Tool Citations":!1,"Export History to File":!1,"Other Actions":!1,"Import from File":!1,Webhooks:!1,"This history is empty":!1,"No matching datasets found":!1,"An error occurred while getting updates from the server":!1,"Please contact a Galaxy administrator if the problem persists":!1,"search datasets":!1,"You are currently viewing a deleted history!":!1,"You are over your disk quota":!1,"Tool execution is on hold until your disk usage drops below your allocated quota":!1,All:!1,None:!1,"For all selected":!1,"Edit history tags":!1,"Edit history Annotation":!1,"Click to rename history":!1,"Operations on multiple datasets":!1,"Hide datasets":!1,"Unhide datasets":!1,"Delete datasets":!1,"Undelete datasets":!1,"Permanently delete datasets":!1,"This will permanently remove the data in your datasets. Are you sure?":!1,Dataset:!1,Annotation:!1,"This history is empty. Click 'Get Data' on the left tool menu to start":!1,"You must be logged in to create histories":!1,"Unable to purge dataset":!1,"Cannot display datasets removed from disk":!1,"This dataset must finish uploading before it can be viewed":!1,"This dataset is not yet viewable":!1,"View data":!1,Download:!1,"Download dataset":!1,"Additional files":!1,"View details":!1,"This is a new dataset and not all of its data are available yet":!1,"You do not have permission to view this dataset":!1,"The job creating this dataset was cancelled before completion":!1,"This job is waiting to run":!1,"This dataset is currently uploading":!1,"Metadata is being auto-detected":!1,"This job is currently running":!1,'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':!1,"An error occurred with this dataset":!1,"No data":!1,"An error occurred setting the metadata for this dataset":!1,"There was an error getting the data for this dataset":!1,"This dataset has been deleted and removed from disk":!1,"This dataset has been deleted":!1,"This dataset has been hidden":!1,format:!1,database:!1,"Edit attributes":!1,"Cannot edit attributes of datasets removed from disk":!1,"Undelete dataset to edit attributes":!1,"This dataset must finish uploading before it can be edited":!1,"This dataset is not yet editable":!1,Delete:!1,"Dataset is already deleted":!1,"View or report this error":!1,"Run this job again":!1,Visualize:!1,"Visualize in":!1,"Undelete it":!1,"Permanently remove it from disk":!1,"Unhide it":!1,"You may be able to":!1,"set it manually or retry auto-detection":!1,"Edit dataset tags":!1,"Edit dataset annotation":!1,"Tool Help":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"Review tool migration stages":!1,"View Tool Error Logs":!1,"Manage Display Whitelist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Scratchbook":!1,"Show/Hide Scratchbook":!1,Tags:!1,"Edit annotation":!1},__ja:{"Analyze Data":"",Workflow:"","Shared Data":"","Data Libraries":"",Histories:"",Workflows:"",Visualizations:"",Pages:"",Visualization:"","New Track Browser":" Track Browser","Saved Visualizations":"","Interactive Environments":"",Admin:"",Help:"",Support:"",Search:"","Mailing Lists":"",Videos:"","How to Cite Galaxy":"Galaxy ","Interactive Tours":"",User:"",Login:"",Register:"","Login or Register":"/",Preferences:"","Custom Builds":"",Logout:"","Saved Histories":"","Saved Datasets":"","Saved Pages":"","Account and saved data":"","Account registration or login":"","Support, contact, and community":"","Administer this Galaxy":" Galaxy ","Visualize datasets":"","Access published resources":"","Chain tools into workflows":"","Analysis home view":"","History Lists":"","Histories Shared with Me":"","Current History":"","Create New":"","Copy History":"","Share or Publish":"","Show Structure":"","Extract Workflow":"","Delete Permanently":"","Dataset Actions":"","Copy Datasets":"","Dataset Security":"","Resume Paused Jobs":"","Collapse Expanded Datasets":"","Unhide Hidden Datasets":"","Delete Hidden Datasets":"","Purge Deleted Datasets":"",Downloads:"","Export Tool Citations":"","Export History to File":"","Other Actions":"","Import from File":"",Webhooks:"Webhooks","This history is empty":"","No matching datasets found":"","Search datasets":"","You are currently viewing a deleted history!":"","You are over your disk quota":"",All:"",None:"","For all selected":"","Edit history tags":"","Edit history annotation":"","Click to rename history":"","Operations on multiple datasets":"","Permanently delete datasets":"","This will permanently remove the data in your datasets. Are you sure?":"",Dataset:"","This history is empty. Click 'Get Data' on the left tool menu to start":" '' ","You must be logged in to create histories":"","View data":"",Download:"","Download dataset":"","View details":"","This job is waiting to run":"","This job is currently running":"","An error occurred with this dataset":"","No data":"","This dataset has been deleted and removed from disk":"","This dataset has been deleted":"","This dataset has been hidden":"",format:"",database:"","Edit attributes":"",Delete:"","View or report this error":"","Run this job again":"",Visualize:"","Undelete it":"","Permanently remove it from disk":"","Unhide it":"","Search Tool Shed":"Tool Shed ","Search Tool Shed (Beta)":"Tool Shed (Beta) ","Monitor installing repositories":"","Manage installed tools":"","Reset metadata":"","Download local tool":"","Tool lineage":"","Reload a tool's configuration":"","Review tool migration stages":"","View Tool Error Logs":"","Manage Display Whitelist":"","Manage Tool Dependencies":"",Users:"",Groups:"","API keys":"API ","Impersonate a user":"",Data:"",Quotas:"",Roles:"","Local data":"","Form definitions":"",Administration:"",Server:"","Tools and Tool Shed":" Tool Shed","User Management":"","Form Definitions":""},__fr:{"Analyze Data":"Analyse de donnes",Workflow:"Workflow","Shared Data":"Donnes partages","Data Libraries":"Bibliothque de donnes",Histories:"Historiques",Workflows:"Workflows",Visualizations:"Visualisations",Pages:"Pages",Visualization:"Visualisation","New Track Browser":"Nouveau Navigateur de Tracks/Pistes","Saved Visualizations":"Visualisations sauvegardes","Interactive Environments":"Environnements interactifs",Admin:"Admin",Help:"Aide",Support:"Assistance",Search:"Recherche","Mailing Lists":"Liste de diffusion",Videos:"Vidos",Wiki:"Documentations","How to Cite Galaxy":"Comment citer Galaxy","Interactive Tours":"Guides interactifs",User:"Utilisateur",Login:"Authentification",Register:"Enregistrement","Login or Register":"Authentification et Enregistrement","Logged in as":"Authentifi en tant que",Preferences:"Prfrences","Custom Builds":"Mes gnomes Builds de rfrence",Logout:"Dconnexion","Saved Histories":"Historiques sauvegards","Saved Datasets":"Jeux de donnes sauvegards","Saved Pages":"Pages sauvegardes","Account and saved data":"Compte et donnes sauvegardes","Account registration or login":"Enregistrement ou authentification","Support, contact, and community":"Support,contact et communaut","Administer this Galaxy":"Outils Admin","Visualize datasets":"Visualiser les jeux de donnes","Access published resources":"Accder aux donnes partages","Chain tools into workflows":"Relier outils dans un workflow","Analysis home view":"Accueil analyse de donnes","History Lists":"Tableaux des historiques","Histories Shared with Me":"Historiques partags avec moi","Current History":"Cet Historique","Create New":"Crer un nouveau","Copy History":"Copier l'Historique","Share or Publish":"Partager et publier","Show Structure":"Montrer la structure","Extract Workflow":"Extraire un Workflow","Delete Permanently":"Supprimer dfinitivement","Dataset Actions":"Actions sur les jeux de donnes","Copy Datasets":"Copier des jeux de donnes","Dataset Security":"Permissions/Scurit","Resume Paused Jobs":"Reprendre les processus en pause","Collapse Expanded Datasets":"Rduire les donnes tendues","Unhide Hidden Datasets":"Afficher les donnes caches","Delete Hidden Datasets":"Supprimer les donnes caches","Purge Deleted Datasets":"Purger les donnes supprimes",Downloads:"Tlcharger","Export Tool Citations":"Exporter les citations des outils","Export History to File":"Exporter l'Historique dans un fichier","Other Actions":"Autres actions","Import from File":"Importer depuis un fichier",Webhooks:"Webhooks","This history is empty":"Cet historique est vide","No matching datasets found":"Aucunes donnes correspondantes n'ont t trouves","An error occurred while getting updates from the server":"Une erreur s'est produite lors de la rception des donnes depuis le serveur","Please contact a Galaxy administrator if the problem persists":"Veuillez contacter un administrateur de l'instance Galaxy si ce problme persiste","search datasets":"Rechercher des donnes","You are currently viewing a deleted history!":"Vous consultez actuellement un historique supprim!","You are over your disk quota":"Vous avez dpass votre quota d'espace disque","Tool execution is on hold until your disk usage drops below your allocated quota":"L'excution de l'outil est en attente tant que votre utilisation d'espace disque dpasse le quota attribu",All:"Tout",None:"Aucun","For all selected":"Pour toute la slection","Edit history tags":"Editer les mots-cls de l'historique","Edit history Annotation":"Editer l'annotation de l'historique","Click to rename history":"Cliquer pour renommer l'historique","Operations on multiple datasets":"Oprer sur plusieurs jeux de donnes en mme temps","Hide datasets":"Cacher les jeux de donnes","Unhide datasets":"Afficher les jeux de donnes cachs","Delete datasets":"Supprimer les jeux de donnes","Undelete datasets":"Restaurer les jeux de donnes supprims","Permanently delete datasets":"Supprimer dfinitivement les jeux de donnes","This will permanently remove the data in your datasets. Are you sure?":"Cela supprimera de manire permanente les donnes de votre historique. tes-vous certain?",Dataset:"Jeu de donnes",Annotation:"Annotation","This history is empty. Click 'Get Data' on the left tool menu to start":"Cet historique est vide. Cliquer sur 'Get Data' au niveau du menu d'outils  gauche pour dmarrer","You must be logged in to create histories":"Vous devez tre connect pour crer un historique","load your own data":"Charger vos propres donnes","get data from an external source":"Charger des donnes depuis une source externe","Include Deleted Datasets":"Inclure les jeux de donnes supprims","Include Hidden Datasets":"Inclure les jeux de donnes cachs","Unable to purge dataset":"Impossible de purger le jeu de donnes","Cannot display datasets removed from disk":"Impossible de visualiser les jeux de donnes supprims du disque","This dataset must finish uploading before it can be viewed":"Le jeu de donnes doit tre totalement tlvers avant de pouvoir tre visualiser","This dataset is not yet viewable":"Ce jeu de donnes n'est pas visualisable","View data":"Voir les donnes",Download:"Tlcharger","Download dataset":"Tlcharger le jeu de donnes","Additional files":"Fichiers additionnels","View details":"Voir les dtails","This is a new dataset and not all of its data are available yet":"Il s'agit d'un nouveau jeu de donnes et seule une partie des donnes est accessible pour le moment","You do not have permission to view this dataset":"Vous n'avez pas la permission de voir ce jeu de donnes","The job creating this dataset was cancelled before completion":"Le processus  l'origine de ce jeu de donnes a t annul prmaturment","This job is waiting to run":"Ce calcul est en attente de traitement","This dataset is currently uploading":"Ce jeu de donnes est en cours de tlversement","Metadata is being auto-detected":"Les mtadonnes sont auto-dtectes","This job is currently running":"Le traitement est en cours",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Ce traitement est en pause. Utilisez le "Relancer les traitements en pause" dans le menu d\'historique pour le relancer',"An error occurred with this dataset":"Une erreur est survenue avec ce jeu de donnes","No data":"Aucune donne","An error occurred setting the metadata for this dataset":"Une erreur est survenue pendant la rcupration des mtadonnes de ce jeu de donnes","There was an error getting the data for this dataset":"Il est survenu une erreur durant la rcupration du contenu de ce jeu de donnes","This dataset has been deleted and removed from disk":"Ce jeu de donnes a t supprim et effac du disque","This dataset has been deleted":"Ce jeu de donnes a t supprim","This dataset has been hidden":"Ce jeu de donnes a t cach",format:"format",database:"gnome de rfrence","Edit attributes":"Editer les attributs","Cannot edit attributes of datasets removed from disk":"Impossible d'diter les attributs de jeux de donnes effacs du disque","Undelete dataset to edit attributes":"Restaurer le jeu de donnes pour en diter les attributs","This dataset must finish uploading before it can be edited":"Ce jeu de donnes doit tre entirement tlvers avant toute modification","This dataset is not yet editable":"Ce jeu de donnes n'est pas encore ditable",Delete:"Supprimer","Dataset is already deleted":"Le jeu de donnes est dj supprim","View or report this error":"Voir ou remonter cette erreur","Run this job again":"Excuter ce traitement  nouveau",Visualize:"Visualiser","Visualize in":"Visualiser via","Undelete it":"Restaurer","Permanently remove it from disk":"Supprimer dfinitivement du disque","Unhide it":"Rendre visible","You may be able to":"Vous devriez tre en mesure de","set it manually or retry auto-detection":"Traitez le manuellement ou retenter la dtection automatique","Edit dataset tags":"Editer les mots-cls du jeu de donnes","Edit dataset annotation":"Editer les annotations du jeu de donnes",Tags:"Mots-cls","Edit annotation":"Editer les annotations"},__zh:{"This history is empty":"","No matching datasets found":"","Search datasets":"","You are currently viewing a deleted history!":"","You are over your disk quota":"",All:"",None:"","For all selected":"","Click to rename history":"","Operations on multiple datasets":"","Permanently delete datasets":"","This will permanently remove the data in your datasets. Are you sure?":"",Dataset:"","This history is empty. Click 'Get Data' on the left tool menu to start":"","You must be logged in to create histories":"","View data":"",Download:"","Download dataset":"","View details":"","This job is waiting to run":"","This job is currently running":"","An error occurred with this dataset":"","No data":"","This dataset has been deleted":"","This dataset has been hidden":"",format:"",database:"","Edit attributes":"",Delete:"","View or report this error":"","Run this job again":"",Visualize:"","Undelete it":"","Permanently remove it from disk":"","Unhide it":""}};i.init=function(t){t||(t=window._i18n&&window._i18n.locale?window._i18n.locale:document.documentElement.lang?document.documentElement.lang:"root");var e=this["__"+t]||this.__root;if(e)for(var i in e)this[i]=e[i]},i.init(),t.exports=i},function(t,e,i){"use strict";(function(t){function i(t){t=t||{};var e=this;return e.userId=window.bootstrapped&&window.bootstrapped.user?window.bootstrapped.user.id:null,e.userId=e.userId||t.userId||null,e.consoleLogger=t.consoleLogger||null,e._init(t),e}function n(t){var e=String(t);return"[object Object]"==e&&(e=JSON.stringify(t)),e}function a(t){return this._init(t||{})}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.ALL=0,i.LOG=0,i.DEBUG=10,i.INFO=20,i.WARN=30,i.ERROR=40,i.METRIC=50,i.NONE=100,i.defaultOptions={logLevel:i.NONE,consoleLevel:i.NONE,defaultNamespace:"Galaxy",consoleNamespaceWhitelist:null,consoleFlattenMessages:!1,clientPrefix:"client.",maxCacheSize:3e3,postSize:1e3,addTime:!0,cacheKeyPrefix:"logs-",postUrl:"/api/metrics",delayPostInMs:6e5,getPingData:void 0,onServerResponse:void 0},i.prototype._init=function(t){var e=this;e.options={};for(var n in i.defaultOptions)i.defaultOptions.hasOwnProperty(n)&&(e.options[n]=t.hasOwnProperty(n)?t[n]:i.defaultOptions[n]);return e.options.logLevel=e._parseLevel(e.options.logLevel),e.options.consoleLevel=e._parseLevel(e.options.consoleLevel),e._sending=!1,e._waiting=null,e._postSize=e.options.postSize,e._initCache(),e},i.prototype._initCache=function(){try{this.cache=new a({maxSize:this.options.maxCacheSize,key:this.options.cacheKeyPrefix+this.userId})}catch(t){this._emitToConsole("warn","MetricsLogger",["Could not intitialize logging cache:",t]),this.options.logLevel=i.NONE}},i.prototype._parseLevel=function(t){var e=void 0===t?"undefined":s(t);if("number"===e)return t;if("string"===e){var n=t.toUpperCase();if(i.hasOwnProperty(n))return i[n]}throw new Error("Unknown log level: "+t)},i.prototype.emit=function(t,e,i){var n=this;return e=e||n.options.defaultNamespace,t&&i?(t=n._parseLevel(t),t>=n.options.logLevel&&n._addToCache(t,e,i),n.consoleLogger&&t>=n.options.consoleLevel&&n._emitToConsole(t,e,i),n):n},i.prototype._addToCache=function(t,e,i){this._emitToConsole("debug","MetricsLogger",["_addToCache:",arguments,this.options.addTime,this.cache.length()]);var n=this;try{n.cache.add(n._buildEntry(t,e,i))>=n._postSize&&n._postCache()}catch(t){n._emitToConsole("warn","MetricsLogger",["Metrics logger could not stringify logArguments:",e,i]),n._emitToConsole("error","MetricsLogger",[t])}return n},i.prototype._buildEntry=function(t,e,i){this._emitToConsole("debug","MetricsLogger",["_buildEntry:",arguments]);var n={level:t,namespace:this.options.clientPrefix+e,args:i};return this.options.addTime&&(n.time=(new Date).toISOString()),n},i.prototype._postCache=function(e){if(e=e||{},this._emitToConsole("info","MetricsLogger",["_postCache",e,this._postSize]),!this.options.postUrl||this._sending)return t.when({});var i=this,n=e.count||i._postSize,a=i.cache.get(n),s=a.length,o="function"==typeof i.options.getPingData?i.options.getPingData():{};return o.metrics=JSON.stringify(a),i._sending=!0,t.post(i.options.postUrl,o).always(function(){i._sending=!1}).fail(function(t,e,n){i._postSize=i.options.maxCacheSize,i.emit("error","MetricsLogger",["_postCache error:",t.readyState,t.status,t.responseJSON||t.responseText])}).done(function(t){"function"==typeof i.options.onServerResponse&&i.options.onServerResponse(t),i.cache.remove(s),i._postSize=i.options.postSize})},i.prototype._delayPost=function(){var t=this;t._waiting=setTimeout(function(){t._waiting=null},t.options.delayPostInMs)},i.prototype._emitToConsole=function(t,e,a){var s=this,o=s.options.consoleNamespaceWhitelist;if(!s.consoleLogger)return s;if(o&&-1===o.indexOf(e))return s;var r=Array.prototype.slice.call(a,0);return r.unshift(e),s.options.consoleFlattenMessages&&(r=[r.map(n).join(" ")]),t>=i.METRIC&&"function"==typeof s.consoleLogger.info?s.consoleLogger.info.apply(s.consoleLogger,r):t>=i.ERROR&&"function"==typeof s.consoleLogger.error?s.consoleLogger.error.apply(s.consoleLogger,r):(t>=i.WARN&&"function"==typeof s.consoleLogger.warn?s.consoleLogger.warn.apply(s.consoleLogger,r):t>=i.INFO&&"function"==typeof s.consoleLogger.info?s.consoleLogger.info.apply(s.consoleLogger,r):t>=i.DEBUG&&"function"==typeof s.consoleLogger.debug?s.consoleLogger.debug.apply(s.consoleLogger,r):"function"==typeof s.consoleLogger.log&&s.consoleLogger.log.apply(s.consoleLogger,r),s)},i.prototype.log=function(){this.emit(1,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},i.prototype.debug=function(){this.emit(i.DEBUG,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},i.prototype.info=function(){this.emit(i.INFO,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},i.prototype.warn=function(){this.emit(i.WARN,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},i.prototype.error=function(){this.emit(i.ERROR,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},i.prototype.metric=function(){this.emit(i.METRIC,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},a.defaultOptions={maxSize:5e3},a.prototype._init=function(t){if(!this._hasStorage())throw new Error("LoggingCache needs localStorage");if(!t.key)throw new Error("LoggingCache needs key for localStorage");return this.key=t.key,this._initStorage(),this.maxSize=t.maxSize||a.defaultOptions.maxSize,this},a.prototype._hasStorage=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}},a.prototype._initStorage=function(){return null===localStorage.getItem(this.key)?this.empty():this},a.prototype.add=function(t){var e=this,i=e._fetchAndParse(),n=i.length+1-e.maxSize;return n>0&&i.splice(0,n),i.push(t),e._unparseAndStore(i),i.length},a.prototype._fetchAndParse=function(){var t=this;return JSON.parse(localStorage.getItem(t.key))},a.prototype._unparseAndStore=function(t){var e=this;return localStorage.setItem(e.key,JSON.stringify(t))},a.prototype.length=function(){return this._fetchAndParse().length},a.prototype.get=function(t){return this._fetchAndParse().slice(0,t)},a.prototype.remove=function(t){var e=this._fetchAndParse(),i=e.splice(0,t);return this._unparseAndStore(e),i},a.prototype.empty=function(){return localStorage.setItem(this.key,"[]"),this},a.prototype.stringify=function(t){return JSON.stringify(this.get(t))},a.prototype.print=function(){console.log(JSON.stringify(this._fetchAndParse(),null,"  "))},e.default={MetricsLogger:i,LoggingCache:a}}).call(e,i(0))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),o=(a(s),i(106)),r=a(o),l=i(108),h=a(l),c=i(136),u=a(c),d=t.View.extend({initialize:function(t){var e=this;this.options=t,this.setElement(this._template()),this.$navbarBrandLink=this.$(".navbar-brand-link"),this.$navbarBrandImage=this.$(".navbar-brand-image"),this.$navbarBrandTitle=this.$(".navbar-brand-title"),this.$navbarTabs=this.$(".navbar-tabs"),this.$quoteMeter=this.$(".quota-meter-container"),this.collection=new r.default.Collection,this.collection.on("add",function(t){e.$navbarTabs.append(new r.default.Tab({model:t}).render().$el)}).on("reset",function(){e.$navbarTabs.empty()}).on("dispatch",function(t){e.collection.each(function(e){t(e)})}).fetch(this.options),Galaxy.frame=this.frame=new h.default({collection:this.collection}),Galaxy.quotaMeter=this.quotaMeter=new u.default.UserQuotaMeter({model:Galaxy.user,el:this.$quoteMeter}),n(window).on("click",function(t){var e=n(t.target).closest("a[download]");1==e.length&&(0===n("iframe[id=download]").length&&n("body").append(n("<iframe/>").attr("id","download").hide()),n("iframe[id=download]").attr("src",e.attr("href")),t.preventDefault())}).on("beforeunload",function(){var t="";if(e.collection.each(function(e){var i=e.get("onbeforeunload")&&e.get("onbeforeunload")();i&&(t+=i+" ")}),""!==t)return t})},render:function(){return this.$navbarBrandTitle.html("Galaxy "+(this.options.brand&&"/ "+this.options.brand||"")),this.$navbarBrandLink.attr("href",this.options.logo_url),this.$navbarBrandImage.attr("src",this.options.logo_src),this.quotaMeter.render(),this},_template:function(){return'<div id="masthead" class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-header"><div class="navbar-tabs"/></div><div class="navbar-brand"><a class="navbar-brand-link"><img class="navbar-brand-image"/><span class="navbar-brand-title"/></a></div><div class="quota-meter-container"/><div class="navbar-icons"/></div>'}});e.default={View:d}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n,a,s){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(107),l=o(r),h=i(17),c=o(h),u=i(4),d=o(u),f=i(3),p=o(f),g=t.Collection.extend({model:t.Model.extend({defaults:{visible:!0,target:"_parent"}}),fetch:function(t){t=t||{},this.reset();var e=new l.default.GenericNavView;this.add(e.render()),this.add({id:"analysis",title:(0,d.default)("Analyze Data"),url:"",tooltip:(0,d.default)("Analysis home view")}),this.add({id:"workflow",title:(0,d.default)("Workflow"),tooltip:(0,d.default)("Chain tools into workflows"),disabled:!Galaxy.user.id,url:"workflow"}),this.add({id:"shared",title:(0,d.default)("Shared Data"),url:"library/index",tooltip:(0,d.default)("Access published resources"),menu:[{title:(0,d.default)("Data Libraries"),url:"library/list"},{title:(0,d.default)("Histories"),url:"histories/list_published"},{title:(0,d.default)("Workflows"),url:"workflows/list_published"},{title:(0,d.default)("Visualizations"),url:"visualizations/list_published"},{title:(0,d.default)("Pages"),url:"pages/list_published"}]}),this.add({id:"visualization",title:(0,d.default)("Visualization"),url:"visualizations/list",tooltip:(0,d.default)("Visualize datasets"),disabled:!Galaxy.user.id,menu:[{title:(0,d.default)("New Track Browser"),url:"visualization/trackster",target:"_frame"},{title:(0,d.default)("Saved Visualizations"),url:"visualizations/list",target:"_frame"},{title:(0,d.default)("Interactive Environments"),url:"visualization/gie_list",target:"galaxy_main"}]}),c.default.add({url:"api/webhooks/masthead/all",callback:function(t){n(document).ready(function(){n.each(t.models,function(t,e){var i=e.toJSON();if(i.activate){var n={id:i.name,icon:i.config.icon,url:i.config.url,tooltip:i.config.tooltip,onclick:i.config.function&&new Function(i.config.function)};Galaxy.page?Galaxy.page.masthead.collection.add(n):Galaxy.masthead&&Galaxy.masthead.collection.add(n),p.default.appendScriptStyle(i)}})})}}),Galaxy.user.get("is_admin")&&this.add({id:"admin",title:(0,d.default)("Admin"),url:"admin",tooltip:(0,d.default)("Administer this Galaxy"),cls:"admin-only"});var i={id:"help",title:(0,d.default)("Help"),tooltip:(0,d.default)("Support, contact, and community"),menu:[{title:(0,d.default)("Support"),url:t.support_url,target:"_blank"},{title:(0,d.default)("Search"),url:t.search_url,target:"_blank"},{title:(0,d.default)("Mailing Lists"),url:t.mailing_lists,target:"_blank"},{title:(0,d.default)("Videos"),url:t.screencasts_url,target:"_blank"},{title:(0,d.default)("Wiki"),url:t.wiki_url,target:"_blank"},{title:(0,d.default)("How to Cite Galaxy"),url:t.citation_url,target:"_blank"},{title:(0,d.default)("Interactive Tours"),url:"tours"}]};t.terms_url&&i.menu.push({title:(0,d.default)("Terms and Conditions"),url:t.terms_url,target:"_blank"}),t.biostar_url&&i.menu.unshift({title:(0,d.default)("Ask a question"),url:"biostar/biostar_question_redirect",target:"_blank"}),t.biostar_url&&i.menu.unshift({title:(0,d.default)("Galaxy Biostar"),url:t.biostar_url_redirect,target:"_blank"}),this.add(i);var s={};s=Galaxy.user.id?{id:"user",title:(0,d.default)("User"),cls:"loggedin-only",tooltip:(0,d.default)("Account and saved data"),menu:[{title:(0,d.default)("Logged in as")+" "+Galaxy.user.get("email")},{title:(0,d.default)("Preferences"),url:"user"},{title:(0,d.default)("Custom Builds"),url:"custom_builds"},{title:(0,d.default)("Logout"),url:"user/logout?session_csrf_token="+Galaxy.session_csrf_token,target:"_top",divider:!0},{title:(0,d.default)("Saved Histories"),url:"histories/list",target:"_top"},{title:(0,d.default)("Saved Datasets"),url:"datasets/list",target:"_top"},{title:(0,d.default)("Saved Pages"),url:"pages/list",target:"_top"}]}:t.allow_user_creation?{id:"user",title:(0,d.default)("Login or Register"),cls:"loggedout-only",tooltip:(0,d.default)("Account registration or login"),menu:[{title:(0,d.default)("Login"),url:"user/login",target:"galaxy_main",noscratchbook:!0},{title:(0,d.default)("Register"),url:"user/create",target:"galaxy_main",noscratchbook:!0}]}:{id:"user",title:(0,d.default)("Login"),cls:"loggedout-only",tooltip:(0,d.default)("Login"),url:"user/login",target:"galaxy_main",noscratchbook:!0},this.add(s);var o=this.get(t.active_view);return o&&o.set("active",!0),(new a.Deferred).resolve().promise()}}),m=t.View.extend({initialize:function(t){this.model=t.model,this.setElement(this._template()),this.$dropdown=this.$(".dropdown"),this.$toggle=this.$(".dropdown-toggle"),this.$menu=this.$(".dropdown-menu"),this.$note=this.$(".dropdown-note"),this.listenTo(this.model,"change",this.render,this)},events:{"click .dropdown-toggle":"_toggleClick"},render:function(){var t=this;return n(".tooltip").remove(),this.$el.attr("id",this.model.id).css({visibility:this.model.get("visible")&&"visible"||"hidden"}),this.model.set("url",this._formatUrl(this.model.get("url"))),this.$note.html(this.model.get("note")||"").removeClass().addClass("dropdown-note").addClass(this.model.get("note_cls")).css({display:this.model.get("show_note")&&"block"||"none"}),this.$toggle.html(this.model.get("title")||"").removeClass().addClass("dropdown-toggle").addClass(this.model.get("cls")).addClass(this.model.get("icon")&&"dropdown-icon fa "+this.model.get("icon")).addClass(this.model.get("toggle")&&"toggle").attr("target",this.model.get("target")).attr("href",this.model.get("url")).attr("title",this.model.get("tooltip")).tooltip("destroy"),this.model.get("tooltip")&&this.$toggle.tooltip({placement:"bottom"}),this.$dropdown.removeClass().addClass("dropdown").addClass(this.model.get("disabled")&&"disabled").addClass(this.model.get("active")&&"active"),this.model.get("menu")&&this.model.get("show_menu")?(this.$menu.show(),n("#dd-helper").show().off().on("click",function(){n("#dd-helper").hide(),t.model.set("show_menu",!1)})):(t.$menu.hide(),n("#dd-helper").hide()),this.$menu.empty().removeClass("dropdown-menu"),this.model.get("menu")&&(s.each(this.model.get("menu"),function(e){t.$menu.append(t._buildMenuItem(e)),e.divider&&t.$menu.append(n("<li/>").addClass("divider"))}),t.$menu.addClass("dropdown-menu"),t.$toggle.append(n("<b/>").addClass("caret"))),this},_buildMenuItem:function(t){var e=this;return t=s.defaults(t||{},{title:"",url:"",target:"_parent",noscratchbook:!1}),t.url=e._formatUrl(t.url),n("<li/>").append(n("<a/>").attr("href",t.url).attr("target",t.target).html(t.title).on("click",function(i){i.preventDefault(),e.model.set("show_menu",!1),t.onclick?t.onclick():Galaxy.frame.add(t)}))},_toggleClick:function(t){var e=this,i=this.model;if(t.preventDefault(),n(".tooltip").hide(),i.trigger("dispatch",function(t){i.id!==t.id&&t.get("menu")&&t.set("show_menu",!1)}),i.get("disabled")){var a=function(t,e){return n("<div/>").append(n("<a/>").attr("href",Galaxy.root+e).html(t)).html()};this.$toggle.popover&&this.$toggle.popover("destroy"),this.$toggle.popover({html:!0,placement:"bottom",content:"Please "+a("login","user/login?use_panels=True")+" or "+a("register","user/create?use_panels=True")+" to use this feature."}).popover("show"),setTimeout(function(){e.$toggle.popover("destroy")},5e3)}else i.get("menu")?i.set("show_menu",!0):i.get("onclick")?i.get("onclick")():Galaxy.frame.add(i.attributes)},_formatUrl:function(t){return"string"==typeof t&&-1===t.indexOf("//")&&"/"!=t.charAt(0)?Galaxy.root+t:t},_template:function(){return'<ul class="nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle"/><ul class="dropdown-menu"/><div class="dropdown-note"/></li></ul>'}});e.default={Collection:g,Tab:m}}).call(e,i(2),i(0),i(0),i(1))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=t.View.extend({initialize:function(){this.modal=null},makeModalIframe:function(t){var e=window.Galaxy.config.communication_server_host,i=window.Galaxy.config.communication_server_port,a=escape(window.Galaxy.user.attributes.username),r=escape(window.Galaxy.config.persistent_communication_rooms),l="?username="+a+"&persistent_communication_rooms="+r,h=e+":"+i+l,c=null,u=null,d='<iframe class="f-iframe fade in communication-iframe" src="'+h+'"> </iframe>';return n(".chat-modal").length>0&&n(".chat-modal").remove(),o.modal=new s.default.View({body:d,height:350,width:600,closing_events:!0,title_separator:!1,cls:"ui-modal chat-modal"}),o.modal.show(),c=n(".chat-modal .modal-header"),u=n(".chat-modal .modal-body"),c.addClass("modal-header-body"),u.addClass("modal-header-body"),c.find("h4").remove(),c.removeAttr("min-height padding border"),c.append('<i class="fa fa-comment" aria-hidden="true" title="Communicate with other users"></i><i class="fa fa-expand expand-compress-modal" aria-hidden="true" title="Maximize"></i><i class="fa fa-times close-modal" aria-hidden="true" title="Close"></i>'),n(".close-modal").click(function(t){n(".chat-modal").css("display","none")}),n(".expand-compress-modal").click(function(t){n(".expand-compress-modal").hasClass("fa-expand")?(n(".chat-modal .modal-dialog").width("1000px"),n(".chat-modal .modal-body").height("575px"),n(".expand-compress-modal").removeClass("fa-expand").addClass("fa-compress"),n(".expand-compress-modal").attr("title","Minimize"),n(".expand-compress-modal").css("margin-left","96.2%")):(n(".chat-modal .modal-dialog").width("600px"),n(".chat-modal .modal-body").height("350px"),n(".expand-compress-modal").removeClass("fa-compress").addClass("fa-expand"),n(".expand-compress-modal").attr("title","Maximize"),n(".expand-compress-modal").css("margin-left","93.2%"))}),this},render:function(){var t=this;return{id:"show-chat-online",icon:"fa-comment-o",tooltip:"Chat online",visible:!1,onclick:t.makeModalIframe}}});e.default={GenericNavView:o}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(60),r=s(o),l=i(18),h=s(l),c=i(19),u=s(c),d=i(113),f=s(d),p=i(4),g=s(p);e.default=t.View.extend({initialize:function(t){var e=this;t=t||{},this.frames=new r.default.View({visible:!1}),this.setElement(this.frames.$el),this.buttonActive=t.collection.add({id:"enable-scratchbook",icon:"fa-th",tooltip:(0,g.default)("Enable/Disable Scratchbook"),onclick:function(){e.active=!e.active,e.buttonActive.set({toggle:e.active,show_note:e.active,note_cls:e.active&&"fa fa-check"}),!e.active&&e.frames.hide()},onbeforeunload:function(){if(e.frames.length()>0)return"You opened "+e.frames.length()+" frame(s) which will be lost."}}),this.buttonLoad=t.collection.add({id:"show-scratchbook",icon:"fa-eye",tooltip:(0,g.default)("Show/Hide Scratchbook"),show_note:!0,visible:!1,onclick:function(t){e.frames.visible?e.frames.hide():e.frames.show()}}),this.frames.on("add remove",function(){this.visible&&0==this.length()&&this.hide(),e.buttonLoad.set({note:this.length(),visible:this.length()>0})}).on("show hide ",function(){e.buttonLoad.set({toggle:this.visible,icon:this.visible&&"fa-eye"||"fa-eye-slash"})}),this.history_cache={}},addDataset:function(t){var e=this,i=null;if(Galaxy&&Galaxy.currHistoryPanel){var a=Galaxy.currHistoryPanel.collection.historyId;this.history_cache[a]={name:Galaxy.currHistoryPanel.model.get("name"),dataset_ids:[]},Galaxy.currHistoryPanel.collection.each(function(t){!t.get("deleted")&&t.get("visible")&&e.history_cache[a].dataset_ids.push(t.get("id"))})}var s=function(t,i){if(t){var n=e.history_cache[t.get("history_id")];if(n&&n.dataset_ids){var a=n.dataset_ids,s=a.indexOf(t.get("id"));if(-1!==s&&s+i>=0&&s+i<a.length)return a[s+i]}}},o=function(t,n,a){var o=s(t,n);o?e._loadDataset(o,function(t,e){i=t,a.model.set(e)}):a.model.trigger("change")};this._loadDataset(t,function(t,a){i=t,e.add(n.extend({menu:[{icon:"fa fa-chevron-circle-left",tooltip:"Previous in History",onclick:function(t){o(i,-1,t)},disabled:function(){return!s(i,-1)}},{icon:"fa fa-chevron-circle-right",tooltip:"Next in History",onclick:function(t){o(i,1,t)},disabled:function(){return!s(i,1)}}]},a))})},_loadDataset:function(t,e){var i=this,s=new h.default.Dataset({id:t});a.when(s.fetch()).then(function(){var a=n.find(["tabular","interval"],function(t){return-1!==s.get("data_type").indexOf(t)}),o=s.get("name"),r=i.history_cache[s.get("history_id")];r&&(o=r.name+": "+o),e(s,a?{title:o,url:null,content:h.default.createTabularDatasetChunkedView({model:new h.default.TabularDataset(s.toJSON()),embedded:!0,height:"100%"}).$el}:{title:o,url:Galaxy.root+"datasets/"+t+"/display/?preview=True",content:null})})},addTrackster:function(t){var e=this,i=new u.default.Visualization({id:t});a.when(i.fetch()).then(function(){var t=new f.default.TracksterUI(Galaxy.root),a={title:i.get("name"),type:"other",content:function(e){var a={container:e,name:i.get("title"),id:i.id,dbkey:i.get("dbkey"),stand_alone:!1},s=i.get("latest_revision"),o=s.config.view.drawables;n.each(o,function(t){t.dataset={hda_ldda:t.hda_ldda,id:t.dataset_id}}),view=t.create_visualization(a,s.config.viewport,s.config.view.drawables,s.config.bookmarks,!1)}};e.add(a)})},add:function(t){if("_blank"==t.target)window.open(t.url);else if("_top"==t.target||"_parent"==t.target||"_self"==t.target)window.location=t.url;else if(!this.active||t.noscratchbook){var e=a(window.parent.document).find("#galaxy_main");"galaxy_main"==t.target||"center"==t.target?0===e.length?window.location=t.url+(-1==t.url.indexOf("?")?"?":"&")+"use_panels=True":e.attr("src",t.url):window.location=t.url}else this.frames.add(t)}})}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t,i,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(t){return-1!==i.indexOf(this.attributes.async_ops,t)},add_filter:function(t,e,i){if(i){var n,a=this.attributes.filters[t];if(null===a||void 0===a)n=e;else if("string"==typeof a)if("All"==a||a==e)n=e;else{var s=[];s[0]=a,s[1]=e,n=s}else n=a,-1===n.indexOf(e)&&n.push(e);this.attributes.filters[t]=n}else this.attributes.filters[t]=e},remove_filter:function(t,e){var n=this.attributes.filters[t];if(null===n||void 0===n)return!1;if("string"==typeof n)this.attributes.filters[t]="";else{var a=i.indexOf(n,e);-1!==a&&(n[a]="")}},get_url_data:function(){var t={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(t.operation=this.attributes.operation),this.attributes.item_ids&&(t.id=this.attributes.item_ids);var e=this;return i.each(i.pairs(e.attributes.filters),function(e){t["f-"+e[0]]=e[1]}),t},get_url:function(t){return this.get("url_base")+"?"+n.param(this.get_url_data())+"&"+n.param(t)}})}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={grid:function(t){var e="";return e=t.embedded?this.grid_header(t)+this.grid_table(t):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'+this.grid_header(t)+'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>'+this.grid_table(t),t.info_text&&(e+='<br><div class="toolParamHelp" style="clear: both;">'+t.info_text+"</div>"),e},grid_table:function(t){return'<form method="post" onsubmit="return false;"><table id="grid-table" class="grid"><thead id="grid-table-header"></thead><tbody id="grid-table-body"></tbody><tfoot id="grid-table-footer"></tfoot></table></form>'},grid_header:function(t){var e='<div class="grid-header">';if(t.embedded||(e+="<h2>"+t.title+"</h2>"),t.global_actions){e+='<ul class="manage-table-actions">';var i=t.global_actions.length>=3;i&&(e+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');for(var n in t.global_actions){var a=t.global_actions[n];e+='<li><a class="action-button use-target" target="'+a.target+'" href="'+a.url_args+'" onclick="return false;" >'+a.label+"</a></li>"}i&&(e+="</div>"),e+="</ul>"}return t.insert&&(e+=t.insert),e+=this.grid_filters(t),e+="</div>"},header:function(t){var e="<tr>";t.show_item_checkboxes&&(e+="<th>",t.items.length>0&&(e+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),e+="</th>");for(var i in t.columns){var n=t.columns[i];n.visible&&(e+='<th id="'+n.key+'-header">',n.href?e+='<a href="'+n.href+'" class="sort-link" sort_key="'+n.key+'">'+n.label+"</a>":e+=n.label,e+='<span class="sort-arrow">'+n.extra+"</span></th>")}return e+="</tr>"},body:function(e){var i="",n=0;0==e.items.length&&(i+='<tr><td colspan="100"><em>No Items</em></td></tr>',n=1);for(var a in e.items){var s=e.items[a],o=s.encode_id;i+="<tr ",e.current_item_id==s.id&&(i+='class="current"'),i+=">",e.show_item_checkboxes&&(i+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'+o+'" id="'+o+'" class="grid-row-select-checkbox" /></td>');for(var r in e.columns){var l=e.columns[r];if(l.visible){var h="";l.nowrap&&(h='style="white-space:nowrap;"');var c=s.column_config[l.label],u=c.link,d=c.value,f=c.target;"string"===t.type(d)&&(d=d.replace(/\/\//g,"/"));var p="",g="";l.attach_popup&&(p="grid-"+a+"-popup",g="menubutton",""!=u&&(g+=" split"),g+=" popup"),i+="<td "+h+">",u?(0!=e.operations.length&&(i+='<div id="'+p+'" class="'+g+'" style="float: left;">'),i+='<a class="menubutton-label use-target" target="'+f+'" href="'+u+'" onclick="return false;">'+d+"</a>",0!=e.operations.length&&(i+="</div>")):i+='<div id="'+p+'" class="'+g+'"><label id="'+l.label_id_prefix+o+'" for="'+o+'">'+(d||"")+"</label></div>",i+="</td>"}}i+="</tr>",n++}return i},footer:function(t){var e="";if(t.use_paging&&t.num_pages>1){var i=t.num_page_links,n=t.cur_page_num,a=t.num_pages,s=i/2,o=n-s,r=0;o<=0&&(o=1,r=s-(n-o));var l,h=s+r,c=n+h;c<=a?l=0:(c=a,l=h-(c+1-n)),0!=l&&(o-=l)<1&&(o=1),e+='<tr id="page-links-row">',t.show_item_checkboxes&&(e+="<td></td>"),e+='<td colspan="100"><span id="page-link-container">Page:',o>1&&(e+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var u=o;u<c+1;u++)u==t.cur_page_num?e+='<span class="page-link inactive-link" id="page-link-'+u+'">'+u+"</span>":e+='<span class="page-link" id="page-link-'+u+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+u+'">'+u+"</a></span>";c<a&&(e+='...<span class="page-link" id="page-link-'+a+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+a+'">'+a+"</a></span>"),e+="</span>",e+='<span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span></td></tr>'}if(t.show_item_checkboxes){e+='<tr><input type="hidden" id="operation" name="operation" value=""><td></td><td colspan="100">For <span class="grid-selected-count"></span> selected items: ';for(var d in t.operations){var f=t.operations[d];f.allow_multiple&&(e+='<input type="button" value="'+f.label+'" class="operation-button action-button">&nbsp;')}e+="</td></tr>"}var p=!1;for(d in t.operations)if(t.operations[d].global_operation){p=!0;break}if(p){e+='<tr><td colspan="100">';for(d in t.operations){var f=t.operations[d];f.global_operation&&(e+='<a class="action-button" href="'+f.global_operation+'">'+f.label+"</a>")}e+="</td></tr>"}return t.legend&&(e+='<tr><td colspan="100">'+t.legend+"</td></tr>"),e},message:function(t){var e=t.status;return-1!=["success","ok"].indexOf(e)&&(e="done"),'<p><div class="'+e+'message transient-message">'+n.escape(t.message)+'</div><div style="clear: both"></div></p>'},grid_filters:function(t){var e=t.default_filter_dict,i=t.filters,n="none";t.advanced_search&&(n="block");var a=!1;for(var s in t.columns){var o=t.columns[s];if("advanced"==o.filterable){var r=o.key,l=i[r],h=e[r];l&&h&&l!=h&&(n="block"),a=!0}}var c="block";"block"==n&&(c="none");var u='<div id="standard-search" style="display: '+c+';"><table><tr><td style="padding: 0;"><table>';for(var s in t.columns){var o=t.columns[s];"standard"==o.filterable&&(u+=this.grid_column_filter(t,o))}u+="</table></td></tr><tr><td>",a&&(u+='<a href="" class="advanced-search-toggle">Advanced Search</a>'),u+="</td></tr></table></div>",u+='<div id="advanced-search" style="display: '+n+'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="" class="advanced-search-toggle">Close Advanced Search</a></td></tr>';for(var s in t.columns){var o=t.columns[s];"advanced"==o.filterable&&(u+=this.grid_column_filter(t,o))}return u+="</table></div>"},grid_column_filter:function(e,i){var n=(e.default_filter_dict,e.filters),a=i.label,s=i.key;"advanced"==i.filterable&&(a=a.toLowerCase());var o="<tr>";if("advanced"==i.filterable&&(o+='<td align="left" style="padding-left: 10px">'+a+":</td>"),o+='<td style="padding-bottom: 1px;">',i.is_text){o+='<form class="text-filter-form" column_key="'+s+'" action="'+e.url+'" method="get" >';for(u in e.columns){var r=e.columns[u],l=n[r.key];l&&"All"!=l&&(r.is_text&&(l=JSON.stringify(l)),o+='<input type="hidden" id="'+r.key+'" name="f-'+r.key+'" value="'+l+'"/>')}o+='<span id="'+s+'-filtering-criteria">';var h=n[s];if(h){var c=t.type(h);if("string"==c&&"All"!=h&&(o+=this.filter_element(s,h)),"array"==c)for(var u in h){var d=h[u],f=h;f=f.slice(u),o+=this.filter_element(s,d)}}o+="</span>";var p="";if("standard"==i.filterable){p=i.label.toLowerCase();var g=p.length;g<20&&(g=20),g+=4}o+='<span class="search-box"><input class="search-box-input" id="input-'+s+'-filter" name="f-'+s+'" type="text" placeholder="'+p+'" size="'+g+'"/><button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;"><i class="fa fa-search"></i></button></span></form>'}else{o+='<span id="'+s+'-filtering-criteria">';var m=!1;for(var v in e.categorical_filters[s]){var _=e.categorical_filters[s][v],b="",y="";for(var w in _)b=w,y=_[w];m&&(o+=" | "),m=!0;var d=n[s];d&&_[s]&&d==y?o+='<span class="categorical-filter '+s+'-filter current-filter">'+v+"</span>":o+='<span class="categorical-filter '+s+'-filter"><a href="javascript:void(0);" filter_key="'+b+'" filter_val="'+y+'">'+v+"</a></span>"}o+="</span>"}return o+="</td></tr>"},filter_element:function(t,e){return'<span class="text-filter-val">'+(e=s.default.sanitize(e))+'<a href="javascript:void(0);" filter_key="'+t+'" filter_val="'+e+'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>'}}}).call(e,i(0),i(1))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=t.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new t.Model({id:s.default.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var a=[];this.$text.on("change",function(){i.value(n(this).val())}).on("keyup",function(t){a[t.which]=!1}).on("keydown",function(t){var e=t.which;a[e]=!0,i.model.get("is_workflow")&&a[16]&&52==e?(i.value("$"),event.preventDefault()):8==e||9==e||13==e||37==e||39==e||e>=48&&e<=57&&!a[16]||e>=96&&e<=105||(190==e||110==e)&&-1==n(this).val().indexOf(".")&&i.model.get("precise")||(189==e||109==e)&&-1==n(this).val().indexOf("-")||i._isParameter(n(this).val())||a[91]||a[17]||event.preventDefault()});var o=this.model.attributes;this.has_slider=null!==o.max&&null!==o.min&&o.max>o.min;var r=o.step;r||(r=o.precise&&this.has_slider?(o.max-o.min)/o.split:1),this.has_slider?(this.$text.addClass("ui-form-slider-left"),this.$slider.slider({min:o.min,max:o.max,step:r}).on("slide",function(t,e){i.value(e.value)})):this.$slider.hide(),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.get("value");this.has_slider&&this.$slider.slider("value",t),t!==this.$text.val()&&this.$text.val(t)},value:function(t){var e=this.model.attributes;return void 0!==t&&(null===t||""===t||this._isParameter(t)||(isNaN(t)&&(t=0),!e.precise&&(t=Math.round(t)),null!==e.max&&(t=Math.min(t,e.max)),null!==e.min&&(t=Math.max(t,e.min))),this.model.set("value",t),this.model.trigger("change"),e.onchange(t)),this.model.get("value")},_isParameter:function(t){return this.model.get("is_workflow")&&"$"===String(t).substring(0,1)},_template:function(){return'<div class="ui-form-slider"><input class="ui-form-slider-text" type="text"/><div class="ui-form-slider-element"/></div>'}});e.default={View:o}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),o=a(s),r=i(63),l=a(r),h=l.default.BaseIcons.extend({initialize:function(t){t.type=t.display||"checkbox",t.multiple="checkbox"==t.type,l.default.BaseIcons.prototype.initialize.call(this,t)},_setValue:function(e){if(l.default.BaseIcons.prototype._setValue.call(this,e),void 0!==e&&null!==e&&this.header_index){var i=this,a=t.isArray(e)?e:[e];n.each(a,function(t){var e=i.header_index[t];n.each(e,function(t){i._setState(t,!0)})})}},_setState:function(t,e){var i=this.$(".button-"+t),n=this.$(".subgroup-"+t);i.data("is_expanded",e),e?(n.show(),i.removeClass("fa-plus-square").addClass("fa-minus-square")):(n.hide(),i.removeClass("fa-minus-square").addClass("fa-plus-square"))},_templateOptions:function(){function e(t,e){var i=t.find(".button-"+e);i.on("click",function(){n._setState(e,!i.data("is_expanded"))})}function i(a,s,r){r=r||[];for(var l in s){var h=s[l],c=h.options&&h.options.length>0,u=r.slice(0);n.header_index[h.value]=u.slice(0);var d=t("<div/>");if(c){var f=o.default.uid(),p=t("<span/>").addClass("button-"+f).addClass("ui-drilldown-button fa fa-plus-square"),g=t("<div/>").addClass("subgroup-"+f).addClass("ui-drilldown-subgroup");d.append(t("<div/>").append(p).append(n._templateOption({label:h.name,value:h.value}))),u.push(f),i(g,h.options,u),d.append(g),e(d,f)}else d.append(n._templateOption({label:h.name,value:h.value}));a.append(d)}}var n=this;this.header_index={};var a=t("<div/>");return i(a,this.model.get("data")),a},_template:function(){return t("<div/>").addClass("ui-options-list drilldown-container").attr("id",this.model.id)}});e.default={View:h}}).call(e,i(0),i(1))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),r=i(114),l=a(r),h=i(19),c=a(h),u=i(61),d=a(u),f=i(8),p=a(f),g=i(12),m=a(g),v=i(3),_=a(v);i(46),i(45),i(47),i(51),i(50),i(52),i(48),i(49),i(15);var b=null,y=null,w=function(){this.initialize&&this.initialize.apply(this,arguments)};w.extend=t.Model.extend;var x=w.extend({initialize:function(t){_.default.cssLoadFile("static/style/jquery.rating.css"),_.default.cssLoadFile("static/style/autocomplete_tagging.css"),_.default.cssLoadFile("static/style/jquery-ui/smoothness/jquery-ui.css"),_.default.cssLoadFile("static/style/library.css"),_.default.cssLoadFile("static/style/trackster.css"),this.baseURL=t},save_viz:function(){Galaxy.modal.show({title:"Saving...",body:"progress"});var t=[];n(".bookmark").each(function(){t.push({position:n(this).children(".position").text(),annotation:n(this).children(".annotation").text()})});var e=y.overview_drawable?y.overview_drawable.config.get_value("name"):null,i={view:y.to_dict(),viewport:{chrom:y.chrom,start:y.low,end:y.high,overview:e},bookmarks:t};return n.ajax({url:Galaxy.root+"visualization/save",type:"POST",dataType:"json",data:{id:y.vis_id,title:y.config.get_value("name"),dbkey:y.dbkey,type:"trackster",vis_json:JSON.stringify(i)}}).success(function(t){Galaxy.modal.hide(),y.vis_id=t.vis_id,y.has_changes=!1,window.history.pushState({},"",t.url+window.location.hash)}).error(function(){Galaxy.modal.show({title:"Could Not Save",body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){Galaxy.modal.hide()}}})})},createButtonMenu:function(){var t=this,e=d.default.create_icon_buttons_menu([{icon_class:"plus-button",title:"Add tracks",on_click:function(){c.default.select_datasets({dbkey:y.dbkey},function(t){o.each(t,function(t){y.add_drawable(l.default.object_from_template(t,y,y))})})}},{icon_class:"block--plus",title:"Add group",on_click:function(){y.add_drawable(new l.default.DrawableGroup(y,y,{name:"New Group"}))}},{icon_class:"bookmarks",title:"Bookmarks",on_click:function(){force_right_panel("0px"==n("div#right").css("right")?"hide":"show")}},{icon_class:"globe",title:"Circster",on_click:function(){window.location=t.baseURL+"visualization/circster?id="+y.vis_id}},{icon_class:"disk--arrow",title:"Save",on_click:function(){t.save_viz()}},{icon_class:"cross-circle",title:"Close",on_click:function(){t.handle_unsaved_changes(y)}}],{tooltip_config:{placement:"bottom"}});return this.buttonMenu=e,e},add_bookmark:function(t,e,i){var a=n("#right .unified-panel-body"),s=n("<div/>").addClass("bookmark").appendTo(a),o=n("<div/>").addClass("position").appendTo(s),r=(n("<a href=''/>").text(t).appendTo(o).click(function(){return y.go_to(t),!1}),n("<div/>").text(e).appendTo(s));if(i){var l=n("<div/>").addClass("delete-icon-container").prependTo(s).click(function(){return s.slideUp("fast"),s.remove(),y.has_changes=!0,!1});n("<a href=''/>").addClass("icon-button delete").appendTo(l);r.make_text_editable({num_rows:3,use_textarea:!0,help_text:"Edit bookmark note"}).addClass("annotation")}return y.has_changes=!0,s},create_visualization:function(t,e,i,a,s){var r=this,h=new l.default.TracksterView(o.extend(t,{header:!1}));return h.editor=!0,n.when(h.load_chroms_deferred).then(function(t){if(e){var n=e.chrom,o=e.start,c=e.end,u=e.overview;n&&void 0!==o&&c?h.change_chrom(n,o,c):h.change_chrom(t[0].chrom)}else h.change_chrom(t[0].chrom);if(i)for(var d=0;d<i.length;d++)h.add_drawable(l.default.object_from_template(i[d],h,h));for(var d=0;d<h.drawables.length;d++)if(h.drawables[d].config.get_value("name")===u){h.set_overview(h.drawables[d]);break}if(a)for(var f,d=0;d<a.length;d++)f=a[d],r.add_bookmark(f.position,f.annotation,s);h.has_changes=!1}),this.set_up_router({view:h}),h},set_up_router:function(e){new c.default.TrackBrowserRouter(e),t.history.start()},init_keyboard_nav:function(t){n(document).keyup(function(e){if(!n(e.srcElement).is(":input"))switch(e.which){case 37:t.move_fraction(.25);break;case 38:Math.round(t.viewport_container.height()/15);t.viewport_container.scrollTop(t.viewport_container.scrollTop()-20);break;case 39:t.move_fraction(-.25);break;case 40:Math.round(t.viewport_container.height()/15);t.viewport_container.scrollTop(t.viewport_container.scrollTop()+20)}})},handle_unsaved_changes:function(t){if(t.has_changes){var e=this;Galaxy.modal.show({title:"Close visualization",body:"There are unsaved changes to your visualization which will be lost if you do not save them.",buttons:{Cancel:function(){Galaxy.modal.hide()},"Leave without Saving":function(){n(window).off("beforeunload"),window.location=Galaxy.root+"visualization"},Save:function(){n.when(e.save_viz()).then(function(){window.location=Galaxy.root+"visualization"})}}})}else window.location=Galaxy.root+"visualization"}}),k=t.View.extend({initialize:function(){b=new x(Galaxy.root),b.createButtonMenu(),b.buttonMenu.$el.attr("style","float: right"),n("#center .unified-panel-header-inner").append(b.buttonMenu.$el),n("#right .unified-panel-title").append("Bookmarks"),n("#right .unified-panel-icons").append("<a id='add-bookmark-button' class='icon-button menu-button plus-button' href='javascript:void(0);' title='Add bookmark'></a>"),n("#right-border").click(function(){y.resize_window()}),force_right_panel("hide"),galaxy_config.app.id?this.view_existing():p.default.get("dataset_id")?this.choose_existing_or_new():this.view_new()},choose_existing_or_new:function(){var t=this,e=p.default.get("dbkey"),i={},n={dbkey:e,dataset_id:p.default.get("dataset_id"),hda_ldda:p.default.get("hda_ldda"),gene_region:p.default.get("gene_region")};e&&(i["f-dbkey"]=e),Galaxy.modal.show({title:"View Data in a New or Saved Visualization?",body:"<p><ul style='list-style: disc inside none'>You can add this dataset as:<li>a new track to one of your existing, saved Trackster sessions if they share the genome build: <b>"+(e||"Not available.")+"</b></li><li>or create a new session with this dataset as the only track</li></ul></p>",buttons:{Cancel:function(){window.location=Galaxy.root+"visualizations/list"},"View in saved visualization":function(){t.view_in_saved(n)},"View in new visualization":function(){t.view_new()}}})},view_in_saved:function(t){var e=new m.default({url_base:Galaxy.root+"visualization/list_tracks",dict_format:!0,embedded:!0});Galaxy.modal.show({title:"Add Data to Saved Visualization",body:e.$el,buttons:{Cancel:function(){window.location=Galaxy.root+"visualizations/list"},"Add to visualization":function(){n(parent.document).find("input[name=id]:checked").each(function(){t.id=n(this).val(),window.location=Galaxy.root+"visualization/trackster?"+n.param(t)})}}})},view_existing:function(){var t=galaxy_config.app.viz_config;y=b.create_visualization({container:n("#center .unified-panel-body"),name:t.title,vis_id:t.vis_id,dbkey:t.dbkey},t.viewport,t.tracks,t.bookmarks,!0),this.init_editor()},view_new:function(){var t=this;n.ajax({url:Galaxy.root+"api/genomes?chrom_info=True",data:{},error:function(){alert("Couldn't create new browser.")},success:function(e){Galaxy.modal.show({title:"New Visualization",body:t.template_view_new(e),buttons:{Cancel:function(){window.location=Galaxy.root+"visualizations/list"},Create:function(){t.create_browser(n("#new-title").val(),n("#new-dbkey").val()),Galaxy.modal.hide()}}});var i=e.map(function(t){return t[1]});galaxy_config.app.default_dbkey&&o.contains(i,galaxy_config.app.default_dbkey)&&n("#new-dbkey").val(galaxy_config.app.default_dbkey),n("#new-title").focus(),n("select[name='dbkey']").select2(),n("#overlay").css("overflow","auto")}})},template_view_new:function(t){for(var e='<form id="new-browser-form" action="javascript:void(0);" method="post" onsubmit="return false;"><div class="form-row"><label for="new-title">Browser name:</label><div class="form-row-input"><input type="text" name="title" id="new-title" value="Unnamed"></input></div><div style="clear: both;"></div></div><div class="form-row"><label for="new-dbkey">Reference genome build (dbkey): </label><div class="form-row-input"><select name="dbkey" id="new-dbkey">',i=0;i<t.length;i++)e+='<option value="'+t[i][1]+'">'+t[i][0]+"</option>";return e+='</select></div><div style="clear: both;"></div></div><div class="form-row">Is the build not listed here? <a href="'+Galaxy.root+'user/dbkeys?use_panels=True">Add a Custom Build</a></div></form>'},create_browser:function(t,e){n(document).trigger("convert_to_values"),y=b.create_visualization({container:n("#center .unified-panel-body"),name:t,dbkey:e},galaxy_config.app.gene_region),this.init_editor(),y.editor=!0},init_editor:function(){n("#center .unified-panel-title").text(y.config.get_value("name")+" ("+y.dbkey+")"),galaxy_config.app.add_dataset&&n.ajax({url:Galaxy.root+"api/datasets/"+galaxy_config.app.add_dataset,data:{hda_ldda:"hda",data_type:"track_config"},dataType:"json",success:function(t){y.add_drawable(l.default.object_from_template(t,y,y))}}),n("#add-bookmark-button").click(function(){var t=y.chrom+":"+y.low+"-"+y.high;return b.add_bookmark(t,"Bookmark description",!0)}),b.init_keyboard_nav(y),n(window).on("beforeunload",function(){if(y.has_changes)return"There are unsaved changes to your visualization that will be lost if you leave this page."})}});e.default={TracksterUI:x,GalaxyApp:k}}).call(e,i(2),i(0))},function(t,e,i){"use strict";(function(t,n){function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){e||(e=0);var i=Math.pow(10,e);return Math.round(t*i)/i}function o(e){var i=t.Deferred();return t.ajax({type:"HEAD",url:e,beforeSend:function(t){t.setRequestHeader("Range","bytes=0-10")},success:function(t,e,n){i.resolve(206===n.status)}}),i}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),h=i(19),c=a(h),u=i(115),d=a(u),f=i(20),p=a(f),g=i(116),m=a(g),v=i(117),_=a(v),b=i(118),y=a(b),w=i(18),x=a(w),k=i(64),C=a(k),S=i(26),T=a(S),E=i(131),A=a(E);i(15);var M=l.extend,O={},R=function(t,e){O[t.attr("id")]=e},$=function(e,i,n,a){n=".group",O[e.attr("id")]=a,e.bind("drag",{handle:"."+i,relative:!0},function(e,i){var a,s,o,r,l,h=(t(this),t(this).parent()),c=h.children(".track,.group"),u=O[t(this).attr("id")];if(s=t(this).parents(n),0!==s.length){o=s.position().top,r=o+s.outerHeight();var d=O[s.attr("id")];if(i.offsetY<o)return t(this).insertBefore(s),d.remove_drawable(u),void d.container.add_drawable_before(u,d);if(i.offsetY>r)return t(this).insertAfter(s),d.remove_drawable(u),void d.container.add_drawable(u)}for(s=null,l=0;l<c.length;l++)if(a=t(c.get(l)),o=a.position().top,r=o+a.outerHeight(),a.is(n)&&this!==a.get(0)&&i.offsetY>=o&&i.offsetY<=r)return i.offsetY-o<r-i.offsetY?a.find(".content-div").prepend(this):a.find(".content-div").append(this),u.container&&u.container.remove_drawable(u),void O[a.attr("id")].add_drawable(u);for(l=0;l<c.length&&(a=t(c.get(l)),!(i.offsetY<a.position().top)||a.hasClass("reference-track")||a.hasClass("intro"));l++);l===c.length?this!==c.get(l-1)&&(h.append(this),O[h.attr("id")].move_drawable(u,l)):this!==c.get(l)&&(t(this).insertBefore(c.get(l)),O[h.attr("id")].move_drawable(u,i.deltaY>0?l-1:l))}).bind("dragstart",function(){t(this).addClass("dragging")}).bind("dragend",function(){t(this).removeClass("dragging")})},D="A converter for this dataset is not installed. Please check your datatypes_conf.xml file.",P=["Histogram","Line","Filled","Intensity"],j=function t(e,i,n){if(t.id_counter||(t.id_counter=0),this.id=t.id_counter++,this.view=e,this.container=i,this.drag_handle_class=n.drag_handle_class,this.is_overview=!1,this.action_icons={},this.config=T.default.ConfigSettingCollection.from_models_and_saved_values(this.config_params,n.prefs),this.config.get_value("name")||this.config.set_value("name",n.name),this.config_onchange&&this.config.on("change",this.config_onchange,this),this.container_div=this.build_container_div(),this.header_div=null,!1!==n.header){var a=new d.default.TrackHeaderView({model:this,id:this.id});this.header_div=a.$el,this.container_div.append(this.header_div);var s=a.icons_div;this.action_icons=a.action_icons,this.container_div.hover(function(){s.show()},function(){s.hide()})}};j.prototype.action_icons_def=[{name:"toggle_icon",title:"Hide/show content",css_class:"toggle",on_click_fn:function(t){t.config.get_value("content_visible")?(t.action_icons.toggle_icon.addClass("toggle-expand").removeClass("toggle"),t.hide_contents(),t.config.set_value("content_visible",!1)):(t.action_icons.toggle_icon.addClass("toggle").removeClass("toggle-expand"),t.config.set_value("content_visible",!0),t.show_contents())}},{name:"settings_icon",title:"Edit settings",css_class:"gear",on_click_fn:function(t){new T.default.ConfigSettingCollectionView({collection:t.config}).render_in_modal("Configure Track")}},{name:"remove_icon",title:"Remove",css_class:"remove-icon",on_click_fn:function(e){t(".tooltip").remove(),e.remove()}}],M(j.prototype,{config_params:[{key:"name",label:"Name",type:"text",default_value:""},{key:"content_visible",type:"bool",default_value:!0,hidden:!0}],config_onchange:function(){},init:function(){},changed:function(){this.view.changed()},can_draw:function(){return!(!this.enabled||!this.config.get_value("content_visible"))},request_draw:function(){},_draw:function(t){},to_dict:function(){},set_name:function(t){this.old_name=this.config.get_value("name"),this.config.set_value("name",t)},revert_name:function(){this.old_name&&this.config.set_value("name",this.old_name)},remove:function(){this.changed(),this.container.remove_drawable(this);var e=this.view;this.container_div.hide(0,function(){t(this).remove(),e.update_intro_div()})},build_container_div:function(){},update_icons:function(){},hide_contents:function(){},show_contents:function(){},get_drawables:function(){}});var I=function(t,e,i){j.call(this,t,e,i),this.obj_type=i.obj_type,this.drawables=[]};M(I.prototype,j.prototype,{unpack_drawables:function(t){this.drawables=[];for(var e,i=0;i<t.length;i++)e=nt(t[i],this.view,this),this.add_drawable(e)},init:function(){for(var t=0;t<this.drawables.length;t++)this.drawables[t].init()},_draw:function(t){for(var e=0;e<this.drawables.length;e++)this.drawables[e]._draw(t)},to_dict:function(){for(var t=[],e=0;e<this.drawables.length;e++)t.push(this.drawables[e].to_dict());return{prefs:this.config.to_key_value_dict(),obj_type:this.obj_type,drawables:t}},add_drawable:function(t){this.drawables.push(t),t.container=this,this.changed()},add_drawable_before:function(t,e){this.changed();var i=this.drawables.indexOf(e);return-1!==i&&(this.drawables.splice(i,0,t),!0)},replace_drawable:function(t,e,i){var n=this.drawables.indexOf(t);return-1!==n&&(this.drawables[n]=e,i&&t.container_div.replaceWith(e.container_div),this.changed()),n},remove_drawable:function(t){var e=this.drawables.indexOf(t);return-1!==e&&(this.drawables.splice(e,1),t.container=null,this.changed(),!0)},move_drawable:function(t,e){var i=this.drawables.indexOf(t);return-1!==i&&(this.drawables.splice(i,1),this.drawables.splice(e,0,t),this.changed(),!0)},get_drawables:function(){return this.drawables},get_tracks:function(t){for(var e,i=this.drawables.slice(0),n=[];0!==i.length;)e=i.shift(),e instanceof t?n.push(e):e.drawables&&(i=i.concat(e.drawables));return n}});var N=function(e,i,n){if(M(n,{obj_type:"DrawableGroup",drag_handle_class:"group-handle"}),I.call(this,e,i,n),this.content_div=t("<div/>").addClass("content-div").attr("id","group_"+this.id+"_content_div").appendTo(this.container_div),R(this.container_div,this),R(this.content_div,this),$(this.container_div,this.drag_handle_class,".group",this),this.filters_manager=new y.default.FiltersManager(this),this.header_div.after(this.filters_manager.parent_div),this.filters_manager.parent_div.after(t("<div style='clear: both'/>")),this.saved_filters_managers=[],"drawables"in n&&this.unpack_drawables(n.drawables),"filters"in n){var a=this.filters_manager;this.filters_manager=new y.default.FiltersManager(this,n.filters),a.parent_div.replaceWith(this.filters_manager.parent_div),n.filters.visible&&this.setup_multitrack_filtering()}};M(N.prototype,j.prototype,I.prototype,{action_icons_def:[j.prototype.action_icons_def[0],j.prototype.action_icons_def[1],{name:"composite_icon",title:"Show composite track",css_class:"layers-stack",on_click_fn:function(e){t(".tooltip").remove(),e.show_composite_track()}},{name:"filters_icon",title:"Filters",css_class:"ui-slider-050",on_click_fn:function(t){t.filters_manager.visible()?(t.filters_manager.clear_filters(),t._restore_filter_managers()):(t.setup_multitrack_filtering(),t.request_draw({clear_tile_cache:!0})),t.filters_manager.toggle()}},j.prototype.action_icons_def[2]],build_container_div:function(){var e=t("<div/>").addClass("group").attr("id","group_"+this.id);return this.container&&this.container.content_div.append(e),e},hide_contents:function(){this.tiles_div.hide()},show_contents:function(){this.tiles_div.show(),this.request_draw()},update_icons:function(){var e=this.drawables.length;if(0===e)this.action_icons.composite_icon.hide(),this.action_icons.filters_icon.hide();else if(1===e)this.action_icons.composite_icon.toggle(this.drawables[0]instanceof X),this.action_icons.filters_icon.hide();else{var i,n,a,s=this.drawables[0].get_type(),o=0;for(i=0;i<e;i++){if(a=this.drawables[i],a.get_type()!==s){can_composite=!1;break}a instanceof Z&&o++}if(this.drawables[0]instanceof J?this.action_icons.composite_icon.show():(this.action_icons.composite_icon.hide(),t(".tooltip").remove()),o>1&&o===this.drawables.length){var r,l={};for(a=this.drawables[0],n=0;n<a.filters_manager.filters.length;n++)r=a.filters_manager.filters[n],l[r.name]=[r];for(i=1;i<this.drawables.length;i++)for(a=this.drawables[i],n=0;n<a.filters_manager.filters.length;n++)r=a.filters_manager.filters[n],r.name in l&&l[r.name].push(r);this.filters_manager.remove_all();var h,c;for(var u in l)h=l[u],h.length===o&&(c=new y.default.NumberFilter({name:h[0].name,index:h[0].index}),this.filters_manager.add_filter(c));this.action_icons.filters_icon.toggle(this.filters_manager.filters.length>0)}else this.action_icons.filters_icon.hide()}},_restore_filter_managers:function(){for(var t=0;t<this.drawables.length;t++)this.drawables[t].filters_manager=this.saved_filters_managers[t];this.saved_filters_managers=[]},setup_multitrack_filtering:function(){if(this.filters_manager.filters.length>0){this.saved_filters_managers=[];for(var t=0;t<this.drawables.length;t++){var e=this.drawables[t];this.saved_filters_managers.push(e.filters_manager),e.filters_manager=this.filters_manager}}this.filters_manager.init_filters()},show_composite_track:function(){var t=new X(this.view,this.view,{name:this.config.get_value("name"),drawables:this.drawables});this.container.replace_drawable(this,t,!0);t.request_draw()},add_drawable:function(t){I.prototype.add_drawable.call(this,t),this.update_icons()},remove_drawable:function(t){I.prototype.remove_drawable.call(this,t),this.update_icons()},to_dict:function(){this.filters_manager.visible()&&this._restore_filter_managers();var t=M(I.prototype.to_dict.call(this),{filters:this.filters_manager.to_dict()});return this.filters_manager.visible()&&this.setup_multitrack_filtering(),t},request_draw:function(t){l.each(this.drawables,function(e){e.request_draw(t)})}});var L=n.View.extend({initialize:function(t){M(t,{obj_type:"View"}),I.call(this,"View",t.container,t),this.chrom=null,this.vis_id=t.vis_id,this.dbkey=t.dbkey,this.stand_alone=void 0===t.stand_alone||t.stand_alone,this.label_tracks=[],this.tracks_to_be_redrawn=[],this.max_low=0,this.max_high=0,this.zoom_factor=3,this.min_separation=30,this.has_changes=!1,this.load_chroms_deferred=null,this.render(),this.canvas_manager=new c.default.CanvasManager(this.container.get(0).ownerDocument),this.reset(),this.config=T.default.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"}],{name:t.name})},render:function(){this.requested_redraw=!1;var e=this.container,i=this;this.top_container=t("<div/>").addClass("top-container").appendTo(e),this.browser_content_div=t("<div/>").addClass("content").appendTo(e),this.bottom_container=t("<div/>").addClass("bottom-container").appendTo(e),this.top_labeltrack=t("<div/>").addClass("top-labeltrack").appendTo(this.top_container),this.viewport_container=t("<div/>").addClass("viewport-container").attr("id","viewport-container").appendTo(this.browser_content_div),this.content_div=this.viewport_container,R(this.viewport_container,i),this.intro_div=t("<div/>").addClass("intro").appendTo(this.viewport_container);t("<div/>").text("Add Datasets to Visualization").addClass("action-button").appendTo(this.intro_div).click(function(){c.default.select_datasets({dbkey:i.dbkey},function(t){l.each(t,function(t){i.add_drawable(nt(t,i,i))})})});this.nav_container=t("<div/>").addClass("trackster-nav-container").prependTo(this.top_container),this.nav=t("<div/>").addClass("trackster-nav").appendTo(this.nav_container),this.stand_alone&&(this.nav_container.addClass("stand-alone"),this.nav.addClass("stand-alone")),this.overview=t("<div/>").addClass("overview").appendTo(this.bottom_container),this.overview_viewport=t("<div/>").addClass("overview-viewport").appendTo(this.overview),this.overview_close=t("<a/>").attr("title","Close overview").addClass("icon-button overview-close tooltip").hide().appendTo(this.overview_viewport),this.overview_highlight=t("<div/>").addClass("overview-highlight").hide().appendTo(this.overview_viewport),this.overview_box_background=t("<div/>").addClass("overview-boxback").appendTo(this.overview_viewport),this.overview_box=t("<div/>").addClass("overview-box").appendTo(this.overview_viewport),this.default_overview_height=this.overview_box.height(),this.nav_controls=t("<div/>").addClass("nav-controls").appendTo(this.nav),this.chrom_select=t("<select/>").attr({name:"chrom"}).addClass("chrom-nav").append("<option value=''>Loading</option>").appendTo(this.nav_controls);var n=function(e){"focusout"!==e.type&&13!==(e.keyCode||e.which)&&27!==(e.keyCode||e.which)||(27!==(e.keyCode||e.which)&&i.go_to(t(this).val()),t(this).hide(),t(this).val(""),i.location_span.show(),i.chrom_select.show()),e.stopPropagation()};this.nav_input=t("<input/>").addClass("nav-input").hide().bind("keyup focusout",n).appendTo(this.nav_controls),this.location_span=t("<span/>").addClass("location").attr("title","Click to change location").tooltip({placement:"bottom"}).appendTo(this.nav_controls),this.location_span.click(function(){i.location_span.hide(),i.chrom_select.hide(),i.nav_input.val(i.chrom+":"+i.low+"-"+i.high),i.nav_input.css("display","inline-block"),i.nav_input.select(),i.nav_input.focus(),i.nav_input.autocomplete({source:function(e,n){var a=[],s=t.map(i.get_tracks(Z),function(t){return t.data_manager.search_features(e.term).success(function(t){a=a.concat(t)})});t.when.apply(t,s).done(function(){n(t.map(a,function(t){return{label:t[0],value:t[1]}}))})},minLength:2})}),void 0!==this.vis_id&&(this.hidden_input=t("<input/>").attr("type","hidden").val(this.vis_id).appendTo(this.nav_controls)),this.zo_link=t("<a/>").attr("id","zoom-out").attr("title","Zoom out").tooltip({placement:"bottom"}).click(function(){i.zoom_out()}).appendTo(this.nav_controls),this.zi_link=t("<a/>").attr("id","zoom-in").attr("title","Zoom in").tooltip({placement:"bottom"}).click(function(){i.zoom_in()}).appendTo(this.nav_controls),this.load_chroms_deferred=this.load_chroms({low:0}),this.chrom_select.bind("change",function(){i.change_chrom(i.chrom_select.val())}),this.browser_content_div.click(function(e){t(this).find("input").trigger("blur")}),this.browser_content_div.bind("dblclick",function(t){i.zoom_in(t.pageX,this.viewport_container)}),this.overview_box.bind("dragstart",function(t,e){this.current_x=e.offsetX}).bind("drag",function(t,e){var n=e.offsetX-this.current_x;this.current_x=e.offsetX;var a=Math.round(n/i.viewport_container.width()*(i.max_high-i.max_low));i.move_delta(-a)}),this.overview_close.click(function(){i.reset_overview()}),this.viewport_container.bind("draginit",function(t,e){if(t.clientX>i.viewport_container.width()-16)return!1}).bind("dragstart",function(t,e){e.original_low=i.low,e.current_height=t.clientY,e.current_x=e.offsetX}).bind("drag",function(e,n){var a=t(this),s=n.offsetX-n.current_x,o=a.scrollTop()-(e.clientY-n.current_height);a.scrollTop(o),n.current_height=e.clientY,n.current_x=n.offsetX;var r=Math.round(s/i.viewport_container.width()*(i.high-i.low));i.move_delta(r)}),this.top_labeltrack.bind("dragstart",function(e,n){return t("<div/>").addClass("zoom-area").css("height",i.browser_content_div.height()+i.top_labeltrack.height()+1).appendTo(t(this))}).bind("drag",function(e,n){t(n.proxy).css({left:Math.min(e.pageX,n.startX)-i.container.offset().left,width:Math.abs(e.pageX-n.startX)});var a=Math.min(e.pageX,n.startX)-i.container.offset().left,s=Math.max(e.pageX,n.startX)-i.container.offset().left,o=i.high-i.low,r=i.viewport_container.width();i.update_location(Math.round(a/r*o)+i.low,Math.round(s/r*o)+i.low)}).bind("dragend",function(e,n){var a=Math.min(e.pageX,n.startX),s=Math.max(e.pageX,n.startX),o=i.high-i.low,r=i.viewport_container.width(),l=i.low;i.low=Math.round(a/r*o)+l,i.high=Math.round(s/r*o)+l,t(n.proxy).remove(),i.request_redraw()}),this.add_label_track(new Y(this,{content_div:this.top_labeltrack})),t(window).bind("resize",function(){this.resize_timer&&clearTimeout(this.resize_timer),this.resize_timer=setTimeout(function(){i.resize_window()},500)}),t(document).bind("redraw",function(){i.redraw()}),this.reset(),t(window).trigger("resize")},get_base_color:function(t){return this.config.get_value(t.toLowerCase()+"_color")||this.config.get_value("n_color")}});M(L.prototype,I.prototype,{changed:function(){this.has_changes=!0},update_intro_div:function(){this.intro_div.toggle(0===this.drawables.length)},trigger_navigate:function(t,e,i,n){if(this.timer&&clearTimeout(this.timer),n){var a=this;this.timer=setTimeout(function(){a.trigger("navigate",t+":"+e+"-"+i)},500)}else view.trigger("navigate",t+":"+e+"-"+i)},update_location:function(t,e){this.location_span.text(p.default.commatize(t)+" - "+p.default.commatize(e)),this.nav_input.val(this.chrom+":"+p.default.commatize(t)+"-"+p.default.commatize(e));var i=this.chrom_select.val();""!==i&&this.trigger_navigate(i,this.low,this.high,!0)},load_chroms:function(e){e.num=100;var i=this,n=t.Deferred();return t.ajax({url:Galaxy.root+"api/genomes/"+this.dbkey,data:e,dataType:"json",success:function(e){if(0!==e.chrom_info.length){if(e.reference){var a=new K(i);i.add_label_track(a),i.reference_track=a}i.chrom_data=e.chrom_info,i.chrom_select.html(""),i.chrom_select.append(t('<option value="">Select Chrom/Contig</option>'));for(var s=0,o=i.chrom_data.length;s<o;s++){var r=i.chrom_data[s].chrom,l=t("<option>");l.text(r),l.val(r),i.chrom_select.append(l)}e.prev_chroms&&i.chrom_select.append(t('<option value="previous">Previous 100</option>')),e.next_chroms&&i.chrom_select.append(t('<option value="next">Next 100</option>')),i.chrom_start_index=e.start_index,n.resolve(e.chrom_info)}},error:function(){alert("Could not load chroms for this dbkey: "+i.dbkey)}}),n},change_chrom:function(e,i,n){var a=this;if(!a.chrom_data)return void a.load_chroms_deferred.then(function(){a.change_chrom(e,i,n)});if(e&&"None"!==e){if("previous"===e)return void a.load_chroms({low:this.chrom_start_index-100});if("next"===e)return void a.load_chroms({low:this.chrom_start_index+100});var s=t.grep(a.chrom_data,function(t,i){return t.chrom===e})[0];if(void 0===s)return void a.load_chroms({chrom:e},function(){a.change_chrom(e,i,n)});if(e!==a.chrom){a.chrom=e,a.chrom_select.val(a.chrom),a.max_high=s.len-1,a.reset();for(var o=0,r=a.drawables.length;o<r;o++){var l=a.drawables[o];l.init&&l.init()}a.reference_track&&a.reference_track.init()}void 0===i&&void 0===n?(a.low=0,a.high=a.max_high):(a.low=void 0!==i?Math.max(i,0):0,void 0===n?(a.low=Math.max(a.low-15,0),a.high=a.low+30):a.high=Math.min(n,a.max_high)),a.request_redraw()}},go_to:function(t){t=t.replace(/,/g,""),t=t.replace(/:|\-/g," ");var e=t.split(/\s+/),i=e[0],n=e[1]?parseInt(e[1],10):void 0,a=e[2]?parseInt(e[2],10):void 0;this.change_chrom(i,n,a)},move_fraction:function(t){var e=this,i=e.high-e.low;this.move_delta(t*i)},move_delta:function(t){var e=this,i=e.high-e.low;e.low-t<e.max_low?(e.low=e.max_low,e.high=e.max_low+i):e.high-t>e.max_high?(e.high=e.max_high,e.low=e.max_high-i):(e.high-=t,e.low-=t),e.request_redraw({data_fetch:!1}),this.redraw_on_move_fn&&clearTimeout(this.redraw_on_move_fn),this.redraw_on_move_fn=setTimeout(function(){e.request_redraw()},200);var n=e.chrom_select.val();this.trigger_navigate(n,e.low,e.high,!0)},add_drawable:function(t){I.prototype.add_drawable.call(this,t),t.init(),this.changed(),this.update_intro_div();var e=this;t.config.on("change",function(){e.changed()})},add_label_track:function(t){t.view=this,t.init(),this.label_tracks.push(t)},remove_drawable:function(e,i){if(I.prototype.remove_drawable.call(this,e),i){var n=this;e.container_div.hide(0,function(){t(this).remove(),n.update_intro_div()})}},reset:function(){this.low=this.max_low,this.high=this.max_high,this.viewport_container.find(".yaxislabel").remove()},request_redraw:function(t,e){var i=this,n=e?[e]:i.drawables;l.each(n,function(e){var n=l.find(i.tracks_to_be_redrawn,function(t){return t[0]===e});n?n[1]=t:i.tracks_to_be_redrawn.push([e,t])}),this.requested_redraw||(requestAnimationFrame(function(){i._redraw()}),this.requested_redraw=!0)},_redraw:function(){this.requested_redraw=!1;var t=this.low,e=this.high;t<this.max_low&&(t=this.max_low),e>this.max_high&&(e=this.max_high);var i=this.high-this.low;0!==this.high&&i<this.min_separation&&(e=t+this.min_separation),this.low=Math.floor(t),this.high=Math.ceil(e),this.update_location(this.low,this.high),this.resolution_px_b=this.viewport_container.width()/(this.high-this.low);var n=this.low/(this.max_high-this.max_low)*this.overview_viewport.width()||0,a=(this.high-this.low)/(this.max_high-this.max_low)*this.overview_viewport.width()||0;this.overview_box.css({left:n,width:Math.max(13,a)}).show(),a<13&&this.overview_box.css("left",n-(13-a)/2),this.overview_highlight&&this.overview_highlight.css({left:n,width:a}),l.each(this.tracks_to_be_redrawn,function(t){var e=t[0],i=t[1];e&&e._draw(i)}),this.tracks_to_be_redrawn=[],l.each(this.label_tracks,function(t){t._draw()})},zoom_in:function(t,e){if(!(0===this.max_high||this.high-this.low<=this.min_separation)){var i=this.high-this.low,n=i/2+this.low,a=i/this.zoom_factor/2;t&&(n=t/this.viewport_container.width()*(this.high-this.low)+this.low),this.low=Math.round(n-a),this.high=Math.round(n+a),this.changed(),this.request_redraw()}},zoom_out:function(){if(0!==this.max_high){var t=this.high-this.low,e=t/2+this.low,i=t*this.zoom_factor/2;this.low=Math.round(e-i),this.high=Math.round(e+i),this.changed(),this.request_redraw()}},resize_viewport:function(){this.viewport_container.height(this.container.height()-this.top_container.height()-this.bottom_container.height())},resize_window:function(){this.resize_viewport(),this.request_redraw()},set_overview:function(t){if(this.overview_drawable){if(this.overview_drawable.dataset.id===t.dataset.id)return;this.overview_viewport.find(".track").remove()}var e=t.copy({content_div:this.overview_viewport}),i=this;e.header_div.hide(),e.is_overview=!0,i.overview_drawable=e,this.overview_drawable.postdraw_actions=function(){i.overview_highlight.show().height(i.overview_drawable.content_div.height()),i.overview_viewport.height(i.overview_drawable.content_div.height()+i.overview_box.outerHeight()),i.overview_close.show(),i.resize_window()},i.overview_drawable.request_draw(),this.changed()},reset_overview:function(){t(".tooltip").remove(),this.overview_viewport.find(".track-tile").remove(),this.overview_viewport.height(this.default_overview_height),this.overview_box.height(this.default_overview_height),this.overview_close.hide(),this.overview_highlight.hide(),view.resize_window(),view.overview_drawable=null}});var z=C.default.Tool.extend({defaults:{track:null},initialize:function(t){C.default.Tool.prototype.initialize.call(this,t);var e=!0;void 0!==t.tool_state&&void 0!==t.tool_state.hidden&&(e=t.tool_state.hidden),this.set("hidden",e),this.remove_inputs(["data","hidden_data","conditional"])},state_dict:function(t){return l.extend(this.get_inputs_dict(),{hidden:!this.is_visible()})}}),H=n.View.extend({events:{"change :input":"update_value"},render:function(){var e=this.$el.addClass("param-row"),i=this.model;t("<div>").addClass("param-label").text(i.get("label")).appendTo(e);t("<div/>").addClass("param-input").html(i.get("html")).appendTo(e).find(":input").val(i.get("value")),t("<div style='clear: both;'/>").appendTo(e)},update_value:function(e){this.model.set_value(t(e.target).val())}}),q=n.View.extend({initialize:function(t){this.model.on("change:hidden",this.set_visible,this)},render:function(){var e=this,i=this.model,n=this.$el.addClass("dynamic-tool").hide();n.bind("drag",function(t){t.stopPropagation()}).click(function(t){t.stopPropagation()}).bind("dblclick",function(t){t.stopPropagation()}).keydown(function(t){t.stopPropagation()});t("<div class='tool-name'>").appendTo(n).text(i.get("name"));i.get("inputs").each(function(t){var e=new H({model:t});e.render(),n.append(e.$el)}),n.find("input").click(function(){t(this).select()});var a=t("<div>").addClass("param-row").appendTo(n),s=t("<input type='submit'>").attr("value","Run on complete dataset").appendTo(a);t("<input type='submit'>").attr("value","Run on visible region").appendTo(a).click(function(){e.run_on_region()}),s.click(function(){e.run_on_dataset()}),i.is_visible()&&this.$el.show()},set_visible:function(){this.$el.toggle(this.model.is_visible())},update_params:function(){for(var t=0;t<this.params.length;t++)this.params[t].update_value()},run_on_dataset:function(){var t=this.model;this.run({target_dataset_id:this.model.get("track").dataset.id,action:"rerun",tool_id:t.id},null,function(e){Galaxy.modal.show({title:t.get("name")+" is Running",body:t.get("name")+" is running on the complete dataset. Tool outputs are in dataset's history.",buttons:{Close:function(){Galaxy.modal.hide()}}})})},run_on_region:function(){var t,e=this.model.get("track"),i=this.model,n=new c.default.GenomeRegion({chrom:e.view.chrom,start:e.view.low,end:e.view.high}),a={target_dataset_id:e.dataset.id,action:"rerun",tool_id:i.id,regions:[n.toJSON()]},s=e,o=i.get("name")+s.tool_region_and_parameters_str(n);if(s.container===view){var r=new N(view,view,{name:e.config.get_value("name")}),l=s.container.replace_drawable(s,r,!1);r.container_div.insertBefore(s.view.content_div.children()[l]),r.add_drawable(s),s.container_div.appendTo(r.content_div),t=r}else t=s.container;var h=new s.constructor(view,t,{name:o,hda_ldda:"hda"});h.init_for_tool_data(),h.change_mode(s.mode),h.set_filters_manager(s.filters_manager.copy(h)),h.update_icons(),t.add_drawable(h),h.tiles_div.text("Starting job."),this.run(a,h,function(t){h.set_dataset(new x.default.Dataset(t)),h.tiles_div.text("Running job."),h.init()})},run:function(e,i,n){e.inputs=this.model.get_inputs_dict();var a=new p.default.ServerStateDeferred({ajax_settings:{url:Galaxy.root+"api/tools",data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(t){return"pending"!==t}});t.when(a.go()).then(function(t){"no converter"===t?(i.container_div.addClass("error"),i.content_div.text(D)):t.error?(i.container_div.addClass("error"),i.content_div.text("Tool cannot be rerun: "+t.message)):n(t)})}}),F=function(t,e){_.default.Scaler.call(this,e),this.filter=t};F.prototype.gen_val=function(t){return this.filter.high===Number.MAX_VALUE||this.filter.low===-Number.MAX_VALUE||this.filter.low===this.filter.high?this.default_val:(parseFloat(t[this.filter.index])-this.filter.low)/(this.filter.high-this.filter.low)};var V=function(e,i,n,a,s){this.track=e,this.region=i,this.low=i.get("start"),this.high=i.get("end"),this.w_scale=n,this.canvas=a,this.html_elt=t("<div class='track-tile'/>").append(a),this.data=s,this.stale=!1};V.prototype.predisplay_actions=function(){};var B=function(t,e,i,n,a){V.call(this,t,e,i,n,a)};B.prototype.predisplay_actions=function(){};var G=function(t,e,i,n,a,s,o,r,l,h,c){V.call(this,t,e,i,n,a),this.mode=s,this.all_slotted=r,this.feature_mapper=l,this.has_icons=!1,this.incomplete_features=h,this.other_tiles_features_drawn={},this.seq_data=c};M(G.prototype,V.prototype),G.prototype.predisplay_actions=function(){};var W=function(e,i,a){M(a,{drag_handle_class:"draghandle"}),j.call(this,e,i,a),this.dataset=null,a.dataset&&(this.dataset=a.dataset instanceof n.Model?a.dataset:new x.default.Dataset(a.dataset)),this.dataset_check_type="converted_datasets_state",this.data_url_extra_params={},this.data_query_wait="data_query_wait"in a?a.data_query_wait:5e3,this.data_manager="data_manager"in a?a.data_manager:new c.default.GenomeDataManager({dataset:this.dataset,genome:new c.default.Genome({key:e.dbkey,chroms_info:{chrom_info:e.chrom_data}}),data_mode_compatible:this.data_and_mode_compatible,can_subset:this.can_subset}),this.min_height_px=16,this.max_height_px=800,this.visible_height_px=this.config.get_value("height"),this.content_div=t("<div class='track-content'>").appendTo(this.container_div),this.container&&(this.container.content_div.append(this.container_div),"resize"in a&&!a.resize||this.add_resize_handle())};M(W.prototype,j.prototype,{action_icons_def:[{name:"mode_icon",title:"Set display mode",css_class:"chevron-expand",on_click_fn:function(){}},j.prototype.action_icons_def[0],{name:"overview_icon",title:"Set as overview",css_class:"application-dock-270",on_click_fn:function(t){t.view.set_overview(t)}},j.prototype.action_icons_def[1],{name:"filters_icon",title:"Filters",css_class:"ui-slider-050",on_click_fn:function(t){t.filters_manager.visible()?t.filters_manager.clear_filters():t.filters_manager.init_filters(),t.filters_manager.toggle()}},{name:"tools_icon",title:"Tool",css_class:"hammer",on_click_fn:function(e){e.tool.toggle(),e.tool.is_visible()?e.set_name(e.config.get_value("name")+e.tool_region_and_parameters_str()):e.revert_name(),t(".tooltip").remove()}},{name:"param_space_viz_icon",title:"Tool parameter space visualization",css_class:"arrow-split",on_click_fn:function(e){var i="<strong>Tool</strong>:"+e.tool.get("name")+"<br/><strong>Dataset</strong>:"+e.config.get_value("name")+'<br/><strong>Region(s)</strong>: <select name="regions"><option value="cur">current viewing area</option><option value="bookmarks">bookmarks</option><option value="both">current viewing area and bookmarks</option></select>',a=function(){Galaxy.modal.hide(),t(window).unbind("keypress.check_enter_esc")},s=function(){var i,a=t('select[name="regions"] option:selected').val(),s=new c.default.GenomeRegion({chrom:view.chrom,start:view.low,end:view.high}),o=l.map(t(".bookmark"),function(e){return new c.default.GenomeRegion({from_str:t(e).children(".position").text()})});i="cur"===a?[s]:"bookmarks"===a?o:[s].concat(o),Galaxy.modal.hide(),window.location.href=Galaxy.root+"visualization/sweepster?"+t.param({dataset_id:e.dataset.id,hda_ldda:e.dataset.get("hda_ldda"),regions:JSON.stringify(new n.Collection(i).toJSON())})};Galaxy.modal.show({title:"Visualize tool parameter space and output from different parameter settings?",body:i,buttons:{No:a,Yes:s}})}},j.prototype.action_icons_def[2]],can_draw:function(){return this.dataset&&j.prototype.can_draw.call(this)},build_container_div:function(){return t("<div/>").addClass("track").attr("id","track_"+this.id)},set_dataset:function(t){this.dataset=t,this.data_manager.set("dataset",t)},on_resize:function(){this.request_draw({clear_tile_cache:!0})},add_resize_handle:function(){var e=this,i=!1,n=!1,a=t("<div class='track-resize'>");t(e.container_div).hover(function(){e.config.get_value("content_visible")&&(i=!0,a.show())},function(){i=!1,n||a.hide()}),a.hide().bind("dragstart",function(i,a){n=!0,a.original_height=t(e.content_div).height()}).bind("drag",function(i,n){var a=Math.min(Math.max(n.original_height+n.deltaY,e.min_height_px),e.max_height_px);t(e.tiles_div).css("height",a),e.visible_height_px=e.max_height_px===a?0:a,e.on_resize()}).bind("dragend",function(t,s){e.tile_cache.clear(),n=!1,i||a.hide(),e.config.set_value("height",e.visible_height_px),e.changed()}).appendTo(e.container_div)},hide_contents:function(){this.tiles_div.hide(),this.container_div.find(".yaxislabel, .track-resize").hide()},show_contents:function(){this.tiles_div.show(),this.container_div.find(".yaxislabel, .track-resize").show(),this.request_draw()},get_type:function(){return this instanceof Y?"LabelTrack":this instanceof K?"ReferenceTrack":this instanceof J?"LineTrack":this instanceof et?"ReadTrack":this instanceof tt?"VariantTrack":this instanceof X?"CompositeTrack":this instanceof Z?"FeatureTrack":""},show_message:function(e){return this.tiles_div.remove(),t("<span/>").addClass("message").html(e).appendTo(this.content_div)},init:function(e){var i=this;if(i.enabled=!1,i.tile_cache.clear(),i.data_manager.clear(),i.content_div.children().remove(),i.container_div.removeClass("nodata error pending"),i.tiles_div=t("<div/>").addClass("tiles").appendTo(i.content_div),i.dataset.id){var n=t.Deferred(),a={hda_ldda:i.dataset.get("hda_ldda"),data_type:this.dataset_check_type,chrom:i.view.chrom,retry:e};return t.getJSON(this.dataset.url(),a,function(e){if(e&&"error"!==e&&"error"!==e.kind)"no converter"===e?(i.container_div.addClass("error"),i.show_message(D)):"no data"===e||void 0!==e.data&&(null===e.data||0===e.data.length)?(i.container_div.addClass("nodata"),i.show_message("No data for this chrom/contig.")):"pending"===e?(i.container_div.addClass("pending"),i.show_message("Preparing data. This can take a while for a large dataset. If the visualization is saved and closed, preparation will continue in the background."),setTimeout(function(){i.init()},i.data_query_wait)):"data"!==e&&"data"!==e.status||(e.valid_chroms&&(i.valid_chroms=e.valid_chroms,i.update_icons()),i.tiles_div.text("Ready for display"),i.view.chrom?(i.tiles_div.text(""),i.tiles_div.css("height",i.visible_height_px+"px"),i.enabled=!0,t.when.apply(t,i.predraw_init()).done(function(){n.resolve(),i.container_div.removeClass("nodata error pending"),i.request_draw()})):n.resolve());else{i.container_div.addClass("error");var a=i.show_message("Cannot display dataset due to an error. ");e.message&&(a.append(t("<a href='javascript:void(0);'></a>").text("View error").click(function(){Galaxy.modal.show({title:"Trackster Error",body:"<pre>"+e.message+"</pre>",buttons:{Close:function(){Galaxy.modal.hide()}}})})),a.append(t("<span/>").text(" ")),a.append(t("<a href='javascript:void(0);'></a>").text("Try again").click(function(){i.init(!0)})))}}),this.update_icons(),n}},predraw_init:function(){var e=this;return t.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},function(t){var i=t.data;if(i&&void 0!==i.min&&void 0!==i.max){var n=i.min,a=i.max;n=Math.floor(Math.min(0,Math.max(n,i.mean-2*i.sd))),a=Math.ceil(Math.max(0,Math.min(a,i.mean+2*i.sd))),e.config.set_default_value("min_value",n),e.config.set_default_value("max_value",a),e.config.set_value("min_value",n),e.config.set_value("max_value",a)}})},get_drawables:function(){return this}});var U=function(e,i,n){W.call(this,e,i,n);var a=this;if($(a.container_div,a.drag_handle_class,".group",a),this.filters_manager=new y.default.FiltersManager(this,"filters"in n?n.filters:null),this.data_manager.set("filters_manager",this.filters_manager),this.filters_available=!1,this.tool=n.tool?new z(l.extend(n.tool,{track:this,tool_state:n.tool_state})):null,this.tile_cache=new c.default.Cache(10),this.left_offset=0,this.header_div&&(this.set_filters_manager(this.filters_manager),this.tool)){var s=new q({model:this.tool});s.render(),this.dynamic_tool_div=s.$el,this.header_div.after(this.dynamic_tool_div)}this.tiles_div=t("<div/>").addClass("tiles").appendTo(this.content_div),this.config.get_value("content_visible")||this.tiles_div.hide(),this.overlay_div=t("<div/>").addClass("overlay").appendTo(this.content_div),n.mode&&this.change_mode(n.mode)};M(U.prototype,j.prototype,W.prototype,{action_icons_def:W.prototype.action_icons_def.concat([{name:"show_more_rows_icon",title:"To minimize track height, not all feature rows are displayed. Click to display more rows.",css_class:"exclamation",on_click_fn:function(e){t(".tooltip").remove(),e.slotters[e.view.resolution_px_b].max_rows*=2,e.request_draw({clear_tile_cache:!0})},hide:!0}]),copy:function(t){var e=this.to_dict();M(e,{data_manager:this.data_manager});var i=new this.constructor(this.view,t,e);return i.change_mode(this.mode),i.enabled=this.enabled,i},set_filters_manager:function(t){this.filters_manager=t,this.header_div.after(this.filters_manager.parent_div)},to_dict:function(){return{track_type:this.get_type(),dataset:{id:this.dataset.id,hda_ldda:this.dataset.get("hda_ldda")},prefs:this.config.to_key_value_dict(),mode:this.mode,filters:this.filters_manager.to_dict(),tool_state:this.tool?this.tool.state_dict():{}}},set_min_max:function(){var e=this;return t.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},function(t){var i=t.data;if(isNaN(parseFloat(e.config.get_value("min_value")))||isNaN(parseFloat(e.config.get_value("max_value")))){var n=i.min,a=i.max;n=Math.floor(Math.min(0,Math.max(n,i.mean-2*i.sd))),a=Math.ceil(Math.max(0,Math.min(a,i.mean+2*i.sd))),e.config.set_value("min_value",n),e.config.set_value("max_value",a)}})},change_mode:function(t){var e=this;return e.mode=t,e.config.set_value("mode",t),"Auto"===t&&this.data_manager.clear(),e.request_draw({clear_tile_cache:!0}),this.action_icons.mode_icon.attr("title","Set display mode (now: "+e.mode+")"),e},update_icons:function(){var t=this;t.action_icons.filters_icon.toggle(t.filters_available),t.action_icons.tools_icon.toggle(null!==t.tool),t.action_icons.param_space_viz_icon.toggle(null!==t.tool)},_gen_tile_cache_key:function(t,e){return t+"_"+e},request_draw:function(t){t&&t.clear_tile_cache&&this.tile_cache.clear(),this.view.request_redraw(t,this)},before_draw:function(){this.max_height_px=0},_draw:function(e){if(this.can_draw()){var i=e&&e.clear_after,n=this.view.low,a=this.view.high,s=this.view.container.width(),o=this.view.resolution_px_b,r=1/o;this.is_overview&&(n=this.view.max_low,a=this.view.max_high,o=s/(view.max_high-view.max_low),r=1/o),this.before_draw(),this.tiles_div.children().addClass("remove");for(var h,u,d=Math.floor(400*r),f=Math.floor(n/d),p=[],g=[];f*d<a;)h=new c.default.GenomeRegion({chrom:this.view.chrom,start:f*d,end:Math.min((f+1)*d,this.view.max_high)}),u=this.draw_helper(h,o,e),p.push(u),t.when(u).then(function(t){g.push(t)}),f+=1;i||this.tiles_div.children(".remove").removeClass("remove").remove();var m=this;t.when.apply(t,p).then(function(){m.tiles_div.children(".remove").remove(),g=l.filter(g,function(t){return null!==t}),0!==g.length&&m.postdraw_actions(g,s,o,i)})}},_add_yaxis_label:function(e,i){var n=this,a="max"===e?"top":"bottom",o="max"===e?"max":"min",r="max"===e?"max_value":"min_value",l=this.container_div.find(".yaxislabel."+a),h=s(n.config.get_value(r),1);i=i||function(){n.request_draw({clear_tile_cache:!0})},0!==l.length?l.text(h):(l=t("<div/>").text(h).make_text_editable({num_cols:12,on_finish:function(e){t(".tooltip").remove(),n.config.set_value(r,s(e,1)),i()},help_text:"Set "+o+" value"}).addClass("yaxislabel "+a).css("color",this.config.get_value("label_color")),this.container_div.prepend(l))},postdraw_actions:function(t,e,i,n){if(l.filter(t,function(t){return t instanceof B}).length>0){this.max_height_px=0;var a=this;l.each(t,function(t){t instanceof B||(t.html_elt.remove(),a.draw_helper(t.region,i,{force:!0,mode:"Coverage"}))}),a._add_yaxis_label("max")}else this.container_div.find(".yaxislabel").remove(),l.find(t,function(t){return t.has_icons})&&l.each(t,function(t){t.has_icons||t.html_elt.css("padding-top",20)})},get_mode:function(t){return this.mode},update_auto_mode:function(t){},_get_drawables:function(){return[this]},draw_helper:function(e,i,n){n||(n={});var a=n.force,s=n.mode||this.mode,o=1/i,r=this,h=this._get_drawables(),c=this._gen_tile_cache_key(i,e),u=a?void 0:r.tile_cache.get_elt(c);if(u)return function(t){return t&&"track"in t}(u)&&r.show_tile(u,i),u;if(!1===n.data_fetch)return null;var d=function(){var t=l.find(P,function(t){return t===s})?"Coverage":s,i=l.map(h,function(i){return i.data_manager.get_data(e,t,o,r.data_url_extra_params)});return view.reference_track&&i.push(view.reference_track.data_manager.get_data(e,s,o,view.reference_track.data_url_extra_params)),i},f=t.Deferred();return r.tile_cache.set_elt(c,f),t.when.apply(t,d()).then(function(){var a,s=d(),o=s;if(l.find(s,function(t){return p.default.is_deferred(t)}))return r.tile_cache.set_elt(c,void 0),void t.when(r.draw_helper(e,i,n)).then(function(t){f.resolve(t)});view.reference_track&&(a=view.reference_track.data_manager.subset_entry(s.pop(),e));var u=[],g=[];l.each(h,function(t,e){var n=t.mode,a=o[e];"Auto"===n&&(n=t.get_mode(a),t.update_auto_mode(n)),u.push(n),g.push(t.get_canvas_height(a,n,i,y))});var m,v=r.view.canvas_manager.new_canvas(),_=e.get("start"),b=e.get("end"),y=Math.ceil((b-_)*i)+r.left_offset,w=l.max(g);v.width=y,v.height=n.height||w;var x=v.getContext("2d");x.translate(r.left_offset,0),h.length>1&&(x.globalAlpha=.5,x.globalCompositeOperation="source-over"),l.each(h,function(t,n){m=t.draw_tile(o[n],x,u[n],e,i,a)}),void 0!==m&&(r.tile_cache.set_elt(c,m),r.show_tile(m,i)),f.resolve(m)}),f},get_canvas_height:function(t,e,i,n){return this.visible_height_px},_draw_line_track_tile:function(t,e,i,n,a){-1!==[void 0,null].indexOf(this.config.get_value("min_value"))&&this.config.set_value("min_value",0),-1!==[void 0,null,0].indexOf(this.config.get_value("max_value"))&&this.config.set_value("max_value",l.max(l.map(t.data,function(t){return t[1]}))||0);var s=e.canvas;return new _.default.LinePainter(t.data,n.get("start"),n.get("end"),this.config.to_key_value_dict(),i).draw(e,s.width,s.height,a),new B(this,n,a,s,t.data)},draw_tile:function(t,e,i,n,a,s){},show_tile:function(t,e){var i=t.html_elt;t.predisplay_actions();var n=Math.round((t.low-(this.is_overview?this.view.max_low:this.view.low))*e);this.left_offset&&(n-=this.left_offset),i.css("left",n),i.hasClass("remove")?i.removeClass("remove"):this.tiles_div.append(i),i.css("height","auto"),this.max_height_px=Math.max(this.max_height_px,i.height()-2),i.parent().children().css("height",this.max_height_px+"px");var a=this.max_height_px;0!==this.visible_height_px&&(a=Math.min(this.max_height_px,this.visible_height_px)),this.tiles_div.css("height",a+"px")},tool_region_and_parameters_str:function(t){var e=this;return" - region=["+(void 0!==t?t.toString():"all")+"], parameters=["+l.values(e.tool.get_inputs_dict()).join(", ")+"]"},data_and_mode_compatible:function(t,e){return"Auto"===e||("Coverage"===e?"bigwig"===t.dataset_type:"bigwig"!==t.dataset_type&&"no_detail"!==t.extra_info)},can_subset:function(t){return!t.message&&"no_detail"!==t.extra_info&&("bigwig"!==t.dataset_type||t.data[1][0]-t.data[0][0]==1)},init_for_tool_data:function(){this.data_manager.set("data_type","raw_data"),this.data_query_wait=1e3,this.dataset_check_type="state"}});var Y=function(t,e){W.call(this,t,e,{resize:!1,header:!1}),this.container_div.addClass("label-track")};M(Y.prototype,W.prototype,{init:function(){this.enabled=!0},predraw_init:function(){},_draw:function(e){for(var i=this.view,n=i.high-i.low,a=Math.floor(Math.pow(10,Math.floor(Math.log(n)/Math.log(10)))),s=Math.floor(i.low/a)*a,o=this.view.container.width(),r=t("<div/>").addClass("label-container");s<i.high;){var l=Math.floor((s-i.low)/n*o);r.append(t("<div/>").addClass("pos-label").text(p.default.commatize(s)).css({left:l})),s+=a}this.content_div.children(":first").remove(),this.content_div.append(r)}});var X=function(t,e,i){if(U.call(this,t,e,i),this.drawables=[],"drawables"in i){for(var n,a=0;a<i.drawables.length;a++)n=i.drawables[a],this.drawables[a]=nt(n,t,null),n.left_offset>this.left_offset&&(this.left_offset=n.left_offset);this.enabled=!0}l.each(this.drawables,function(t){(t instanceof Z||t instanceof et)&&t.change_mode("Coverage")}),this.update_icons(),this.obj_type="CompositeTrack"};M(X.prototype,U.prototype,{display_modes:P,build_config_params:function(){return l.union(j.prototype.config_params,[{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},action_icons_def:[{name:"composite_icon",title:"Show individual tracks",css_class:"layers-stack",on_click_fn:function(e){t(".tooltip").remove(),e.show_group()}}].concat(U.prototype.action_icons_def),to_dict:I.prototype.to_dict,add_drawable:I.prototype.add_drawable,unpack_drawables:I.prototype.unpack_drawables,config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},on_resize:function(){var t=this.visible_height_px;l.each(this.drawables,function(e){e.visible_height_px=t}),W.prototype.on_resize.call(this)},change_mode:function(t){U.prototype.change_mode.call(this,t);for(var e=0;e<this.drawables.length;e++)this.drawables[e].change_mode(t)},init:function(){for(var e=[],i=0;i<this.drawables.length;i++)e.push(this.drawables[i].init());var n=this;t.when.apply(t,e).then(function(){n.enabled=!0,n.request_draw()})},update_icons:function(){this.action_icons.filters_icon.hide(),this.action_icons.tools_icon.hide(),this.action_icons.param_space_viz_icon.hide()},can_draw:j.prototype.can_draw,_get_drawables:function(){return this.drawables},show_group:function(){for(var t,e=new N(this.view,this.container,{name:this.config.get_value("name")}),i=0;i<this.drawables.length;i++)t=this.drawables[i],t.update_icons(),e.add_drawable(t),t.container=e,e.content_div.append(t.container_div);this.container.replace_drawable(this,e,!0);e.request_draw({clear_tile_cache:!0})},before_draw:function(){var t=l.min(l.map(this.drawables,function(t){return t.config.get_value("min_value")})),e=l.max(l.map(this.drawables,function(t){return t.config.get_value("max_value")}));this.config.set_value("min_value",t),this.config.set_value("max_value",e),l.each(this.drawables,function(i){i.config.set_value("min_value",t),i.config.set_value("max_value",e)})},update_all_min_max:function(){var t=this.config.get_value("min_value"),e=this.config.get_value("max_value");l.each(this.drawables,function(i){i.config.set_value("min_value",t),i.config.set_value("max_value",e)}),this.request_draw({clear_tile_cache:!0})},postdraw_actions:function(t,e,i,n){var a,s=-1;for(a=0;a<t.length;a++){var o=t[a].html_elt.find("canvas").height();o>s&&(s=o)}for(a=0;a<t.length;a++){var r=t[a];r.html_elt.find("canvas").height()!==s&&(this.draw_helper(r.region,i,{force:!0,height:s}),r.html_elt.remove())}var l=this,h=function(){l.update_all_min_max()};this._add_yaxis_label("min",h),this._add_yaxis_label("max",h)}});var K=function(t){U.call(this,t,{content_div:t.top_labeltrack},{resize:!1,header:!1}),this.left_offset=t.canvas_manager.char_width_px,this.container_div.addClass("reference-track"),this.data_url=Galaxy.root+"api/genomes/"+this.view.dbkey,this.data_url_extra_params={reference:!0},this.data_manager=new c.default.GenomeReferenceDataManager({data_url:this.data_url,can_subset:this.can_subset}),this.hide_contents()};M(K.prototype,j.prototype,U.prototype,{build_config_params:function(){return l.union(j.prototype.config_params,[{key:"height",type:"int",default_value:13,hidden:!0}])},init:function(){this.data_manager.clear(),this.enabled=!0},predraw_init:function(){},can_draw:j.prototype.can_draw,draw_helper:function(t,e,i){var n,a=this.tiles_div.is(":visible"),s=null;return e>this.view.canvas_manager.char_width_px?(this.tiles_div.show(),n=!0,s=U.prototype.draw_helper.call(this,t,e,i)):(n=!1,this.tiles_div.hide()),a!==n&&this.view.resize_viewport(),s},can_subset:function(t){return!0},draw_tile:function(t,e,i,n,a){var s=this.data_manager.subset_entry(t,n),o=s.data,r=e.canvas;e.font=e.canvas.manager.default_font,e.textAlign="center";for(var l=0,h=o.length;l<h;l++)e.fillStyle=this.view.get_base_color(o[l]),e.fillText(o[l],Math.floor(l*a),10);return new V(this,n,a,r,s)}});var J=function(e,i,n){this.mode="Histogram",U.call(this,e,i,n),this.left_offset=30;var a=this;t.when(o(Galaxy.root+"datasets/"+this.dataset.id+"/display")).then(function(t){t&&(a.data_manager=new A.default.BBIDataManager({dataset:a.dataset}))})};M(J.prototype,j.prototype,U.prototype,{display_modes:P,build_config_params:function(){return l.union(j.prototype.config_params,[{key:"color",label:"Color",type:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},before_draw:function(){},draw_tile:function(t,e,i,n,a){return this._draw_line_track_tile(t,e,i,n,a)},can_subset:function(t){return t.data[1][0]-t.data[0][0]==1},postdraw_actions:function(t,e,i,n){this._add_yaxis_label("max"),this._add_yaxis_label("min")}});var Q=function(t,e,i){this.mode="Heatmap",U.call(this,t,e,i)};M(Q.prototype,j.prototype,U.prototype,{display_modes:["Heatmap"],build_config_params:function(){return l.union(j.prototype.config_params,[{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"min_value",label:"Min Value",type:"int",default_value:void 0},{key:"max_value",label:"Max Value",type:"int",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:500,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},predraw_init:function(){var e=this;return t.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},function(t){t.data})},draw_tile:function(t,e,i,n,a){var s=e.canvas;return new _.default.DiagonalHeatmapPainter(t.data,n.get("start"),n.get("end"),this.config.to_key_value_dict(),i).draw(e,s.width,s.height,a),new V(this,n,a,s,t.data)}});var Z=function(t,e,i){U.call(this,t,e,i),this.container_div.addClass("feature-track"),this.summary_draw_height=30,this.slotters={},this.start_end_dct={},this.left_offset=200,this.set_painter_from_config()};M(Z.prototype,j.prototype,U.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return l.union(j.prototype.config_params,[{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0,help:"Show the number of items in each bin when drawing summary histogram"},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"connector_style",label:"Connector style",type:"select",default_value:"fishbones",options:[{label:"Line with arrows",value:"fishbone"},{label:"Arcs",value:"arcs"}]},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.set_painter_from_config(),this.request_draw({clear_tile_cache:!0})},set_painter_from_config:function(){"arcs"===this.config.get_value("connector_style")?this.painter=_.default.ArcLinkedFeaturePainter:this.painter=_.default.LinkedFeaturePainter},postdraw_actions:function(e,i,n,a){U.prototype.postdraw_actions.call(this,e,i,n,a);var s,o=this;if(0===l.filter(e,function(t){return t instanceof B}).length){var r={};l.each(l.pluck(e,"incomplete_features"),function(t){l.each(t,function(t){r[t[0]]=t})});var h=this;l.each(e,function(e){var i=l.omit(r,l.map(e.incomplete_features,function(t){return t[0]}));if(i=l.omit(i,l.keys(e.other_tiles_features_drawn)),0!==l.size(i)){var n={data:l.values(i)},a=h.view.canvas_manager.new_canvas(),s=a.getContext("2d");a.height=Math.max(e.canvas.height,h.get_canvas_height(n,e.mode,e.w_scale,100)),a.width=e.canvas.width,s.drawImage(e.canvas,0,0),s.translate(o.left_offset,0);var c=h.draw_tile(n,s,e.mode,e.region,e.w_scale,e.seq_data);t(e.canvas).replaceWith(t(c.canvas)),e.canvas=a,l.extend(e.other_tiles_features_drawn,r)}})}if(o.filters_manager){var c,u=o.filters_manager.filters;for(c=0;c<u.length;c++)u[c].update_ui_elt();var d,f,p=!1;for(s=0;s<e.length;s++)if(e[s].data.length)for(d=e[s].data[0],c=0;c<u.length;c++)if(f=u[c],f.applies_to(d)&&f.min!==f.max){p=!0;break}o.filters_available!==p&&(o.filters_available=p,o.filters_available||o.filters_manager.hide(),o.update_icons())}if(e[0]instanceof G){var g=!0;for(s=0;s<e.length;s++)if(!e[s].all_slotted){g=!1;break}this.action_icons.show_more_rows_icon.toggle(!g)}else this.action_icons.show_more_rows_icon.hide()},update_auto_mode:function(t){"Auto"===this.mode&&("no_detail"===t&&(t="feature spans"),this.action_icons.mode_icon.attr("title","Set display mode (now: Auto/"+t+")"))},incremental_slots:function(t,e,i){var n=this.view.canvas_manager.dummy_context,a=this.slotters[t];return a&&a.mode===i||(a=new m.default.FeatureSlotter(t,i,100,function(t){return n.measureText(t)}),this.slotters[t]=a),a.slot_features(e)},get_mode:function(t){return"no_detail"===t.extra_info||this.is_overview?"no_detail":this.view.high-this.view.low>12e3?"Squish":"Pack"},get_canvas_height:function(t,e,i,n){if("Coverage"===e||"bigwig"===t.dataset_type)return this.summary_draw_height;var a=this.incremental_slots(i,t.data,e),s=new this.painter(null,null,null,this.config.to_key_value_dict(),e);return Math.max(this.min_height_px,s.get_required_height(a,n))},draw_tile:function(t,e,i,n,a,s,o){var r=this,l=e.canvas,h=n.get("start"),c=n.get("end"),u=this.left_offset;if("bigwig"===t.dataset_type)return this._draw_line_track_tile(t,e,i,n,a);var d=[],f=this.slotters[a].slots,p=!0;if(t.data)for(var g=this.filters_manager.filters,m=0,v=t.data.length;m<v;m++){for(var _,b=t.data[m],y=!1,w=0,x=g.length;w<x;w++)if(_=g[w],_.update_attrs(b),!_.keep(b)){y=!0;break}y||(d.push(b),b[0]in f||(p=!1))}var k=this.filters_manager.alpha_filter?new F(this.filters_manager.alpha_filter):null,C=this.filters_manager.height_filter?new F(this.filters_manager.height_filter):null,S=new this.painter(d,h,c,this.config.to_key_value_dict(),i,k,C,s,function(t){return r.view.get_base_color(t)}),T=null;if(e.fillStyle=this.config.get_value("block_color"),e.font=e.canvas.manager.default_font,e.textAlign="right",t.data){var E=S.draw(e,l.width,l.height,a,f);T=E.feature_mapper,incomplete_features=E.incomplete_features,T.translation=-u}return o?void 0:new G(r,n,a,l,t.data,i,t.message,p,T,incomplete_features,s)}});var tt=function(t,e,i){U.call(this,t,e,i),this.painter=_.default.VariantPainter,this.summary_draw_height=30,this.left_offset=30};M(tt.prototype,j.prototype,U.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return l.union(j.prototype.config_params,[{key:"color",label:"Histogram color",type:"color"},{key:"show_sample_data",label:"Show sample data",type:"bool",default_value:!0},{key:"show_labels",label:"Show summary and sample labels",type:"bool",default_value:!0},{key:"summary_height",label:"Locus summary height",type:"float",default_value:20},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},draw_tile:function(t,e,i,n,a){if("bigwig"===t.dataset_type)return this._draw_line_track_tile(t,e,"Histogram",n,a);var s=this.view;return new this.painter(t.data,n.get("start"),n.get("end"),this.config.to_key_value_dict(),i,function(t){return s.get_base_color(t)}).draw(e,e.canvas.width,e.canvas.height,a),new V(this,n,a,e.canvas,t.data)},get_canvas_height:function(t,e,i,n){if("bigwig"===t.dataset_type)return this.summary_draw_height;var a=this.dataset.get_metadata("sample_names")?this.dataset.get_metadata("sample_names").length:0;return 0===a&&0!==t.data.length&&(a=t.data[0][7].match(/,/g),a=null===a?1:a.length+1),new this.painter(null,null,null,this.config.to_key_value_dict(),e).get_required_height(a)},predraw_init:function(){var t=[W.prototype.predraw_init.call(this)];return this.dataset.get_metadata("sample_names")||t.push(this.dataset.fetch()),t},postdraw_actions:function(e,i,n,a){U.prototype.postdraw_actions.call(this,e,i,n,a);var s=l.filter(e,function(t){return t instanceof B}),o=this.dataset.get_metadata("sample_names");if(0===s.length&&this.config.get_value("show_labels")&&o&&o.length>1){var r;if(0===this.container_div.find(".yaxislabel.variant").length&&(r=this.config.get_value("summary_height")/2,this.tiles_div.prepend(t("<div/>").text("Summary").addClass("yaxislabel variant top").css({"font-size":r+"px",top:(this.config.get_value("summary_height")-r)/2+"px"})),this.config.get_value("show_sample_data"))){var h=o.join("<br/>");this.tiles_div.prepend(t("<div/>").html(h).addClass("yaxislabel variant top sample").css({top:this.config.get_value("summary_height")}))}r=("Squish"===this.mode?5:10)+"px",t(this.tiles_div).find(".sample").css({"font-size":r,"line-height":r}),t(this.tiles_div).find(".yaxislabel").css("color",this.config.get_value("label_color"))}else this.container_div.find(".yaxislabel.variant").remove()}});var et=function(t,e,i){Z.call(this,t,e,i),this.painter=_.default.ReadPainter,this.update_icons()};M(et.prototype,j.prototype,U.prototype,Z.prototype,{build_config_params:function(){return l.union(j.prototype.config_params,[{key:"block_color",label:"Histogram color",type:"color"},{key:"detail_block_color",label:"Sense strand block color",type:"color",default_value:"#AAAAAA"},{key:"reverse_strand_color",label:"Antisense strand block color",type:"color",default_value:"#DDDDDD"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})}});var it={CompositeTrack:X,DrawableGroup:N,DiagonalHeatmapTrack:Q,FeatureTrack:Z,LineTrack:J,ReadTrack:et,VariantTrack:tt,VcfTrack:tt},nt=function(t,e,i){if("copy"in t)return t.copy(i);var n=t.obj_type;return n||(n=t.track_type),new it[n](e,i,t)};e.default={TracksterView:L,DrawableGroup:N,LineTrack:J,FeatureTrack:Z,DiagonalHeatmapTrack:Q,ReadTrack:et,VariantTrack:tt,CompositeTrack:X,object_from_template:nt}}).call(e,i(0),i(2))},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),o=t.View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append(n("<div/>").addClass(this.model.drag_handle_class)),this.$el.append(n("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick(function(t){t.stopPropagation()}),this.$el.append(n("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var t=this;this.icons_div=n("<div/>").addClass("track-icons").hide().appendTo(this.$el),s.each(this.model.action_icons_def,function(e){t.add_action_icon(e.name,e.title,e.css_class,e.on_click_fn,e.prepend,e.hide)}),this.set_display_modes(this.model.display_modes)},add_action_icon:function(t,e,i,a,s,o){var r=this;this.action_icons[t]=n("<a/>").attr("title",e).addClass("icon-button").addClass(i).tooltip().click(function(){a(r.model)}).appendTo(this.icons_div),o&&this.action_icons[t].hide()},set_display_modes:function(t,e){if(t){this.model.display_modes=t,this.model.mode=e||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title","Set display mode (now: "+this.mode+")");for(var i=this.model,n={},a=0,s=i.display_modes.length;a<s;a++){var o=i.display_modes[a];n[o]=function(t){return function(){i.change_mode(t)}}(o)}make_popupmenu(this.action_icons.mode_icon,n)}}});e.default={TrackHeaderView:o}}).call(e,i(2),i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),s=a.extend,o=function(t,e){this.slot=t,this.feature=e},r=function(t,e,i,n){this.slots={},this.start_end_dct={},this.w_scale=t,this.mode=e,this.include_label="Pack"===e,this.max_rows=i,this.measureText=n};s(r.prototype,{_get_draw_coords:function(t){var e=Math.floor(t[1]*this.w_scale),i=Math.ceil(t[2]*this.w_scale),n=t[3];if(void 0!==n&&this.include_label){var a=this.measureText(n).width+7;e-a>=0?(e-=a,"left"):(i+=a,"right")}return[e,i]},_find_slot:function(t){for(var e=t[0],i=t[1],n=0;n<=this.max_rows;n++){var a=!1,s=this.start_end_dct[n];if(void 0!==s)for(var o=0,r=s.length;o<r;o++){var l=s[o];if(i>l[0]&&e<l[1]){a=!0;break}}if(!a)return n}return-1},slot_features:function(t){for(var e,i,n=this.start_end_dct,a=[],s=0,r=0,l=t.length;r<l;r++){e=t[r],i=e[0];var h=this.slots[i];if(h){if(e[1]<h.feature[1]||h.feature[2]<e[2])for(var c=this._get_draw_coords(h.feature),u=this._get_draw_coords(e),d=this.start_end_dct[h.slot],f=0;f<d.length;f++){var p=d[f];p[0]===c[0]&&p[1]===c[1]&&(d[f]=u)}s=Math.max(s,this.slots[i].slot)}else a.push(r)}for(var r=0,l=a.length;r<l;r++){e=t[a[r]],i=e[0];var g=this._get_draw_coords(e),m=this._find_slot(g);m>=0&&(void 0===n[m]&&(n[m]=[]),n[m].push(g),this.slots[i]=new o(m,e),s=Math.max(s,m))}return s+1}}),e.default={FeatureSlotter:r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),s=function(t,e){var i=t[0],n=t[1],a=e[0],s=e[1];return i<a?n<=a?1001:n<=s?1003:1002:i>s?1006:n<=s?1005:1004},o=function(t,e){var i=s(t,e);return 1001!==i&&1006!==i},r=function(t,e,i,n,a,s){void 0===s&&(s=4);var o,r=n-e,l=a-i,h=Math.floor(Math.sqrt(r*r+l*l)/s),c=r/h,u=l/h;for(o=0;o<h;o++,e+=c,i+=u)o%2==0&&t.fillRect(e,i,s,1)},l=function(t,e,i,n){var a=e-n/2,s=e+n/2,o=i-Math.sqrt(3*n/2);t.beginPath(),t.moveTo(a,o),t.lineTo(s,o),t.lineTo(e,i),t.lineTo(a,o),t.strokeStyle=this.fillStyle,t.fill(),t.stroke(),t.closePath()},h=function(t){this.default_val=t||1};h.prototype.gen_val=function(t){return this.default_val};var c=function(t){this.incomplete_features=t.incomplete_features,this.feature_mapper=t.feature_mapper},u=function(t,e,i,n,s){this.data=t,this.view_start=e,this.view_end=i,this.prefs=a.extend({},this.default_prefs,n),this.mode=s};u.prototype.default_prefs={},u.prototype.draw=function(t,e,i,n){},u.prototype.get_start_draw_pos=function(t,e){return this._chrom_pos_to_draw_pos(t,e,-.5)},u.prototype.get_end_draw_pos=function(t,e){return this._chrom_pos_to_draw_pos(t,e,.5)},u.prototype.get_draw_pos=function(t,e){return this._chrom_pos_to_draw_pos(t,e,0)},u.prototype._chrom_pos_to_draw_pos=function(t,e,i){return Math.floor(e*(Math.max(0,t-this.view_start)+i))};var d=function(t,e,i,n,a){u.call(this,t,e,i,n,a)};d.prototype.default_prefs={min_value:void 0,max_value:void 0,mode:"Histogram",color:"#000",overflow_color:"#F66"},d.prototype.draw=function(t,e,i,n){var s=!1,o=this.prefs.min_value,r=this.prefs.max_value,l=r-o,h=i,c=this.view_start,u=this.mode,d=this.data;t.save();var f=Math.round(i+o/l*i);"Intensity"!==u&&(t.fillStyle="#aaa",t.fillRect(0,f,e,1)),t.beginPath();var p,g,m;m=d.length>1?a.map(d.slice(0,-1),function(t,e){return Math.ceil((d[e+1][0]-d[e][0])*n)}):[10];for(var v,_=this.prefs.block_color||this.prefs.color,b=parseInt(_.slice(1),16),y=(16711680&b)>>16,w=(65280&b)>>8,x=255&b,k=!1,C=!1,S=0,T=d.length;S<T;S++)if(t.fillStyle=t.strokeStyle=_,k=C=!1,v=m[S],p=Math.floor((d[S][0]-c-.5)*n),null!==(g=d[S][1])){if(g<o?(C=!0,g=o):g>r&&(k=!0,g=r),"Histogram"===u)g=Math.round(g/l*h),t.fillRect(p,f,v,-g);else if("Intensity"===u){var E=(g-o)/l,A=Math.round(y+(255-y)*(1-E)),M=Math.round(w+(255-w)*(1-E)),O=Math.round(x+(255-x)*(1-E));t.fillStyle="rgb("+A+","+M+","+O+")",t.fillRect(p,0,v,h)}else g=Math.round(h-(g-o)/l*h),s?t.lineTo(p,g):(s=!0,"Filled"===u?(t.moveTo(p,h),t.lineTo(p,g)):t.moveTo(p,g));if(t.fillStyle=this.prefs.overflow_color,k||C){var R;"Histogram"===u||"Intensity"===u?R=v:(p-=2,R=4),k&&t.fillRect(p,0,R,3),C&&t.fillRect(p,h-3,R,3)}t.fillStyle=_}else s&&"Filled"===u&&t.lineTo(p,h),s=!1;"Filled"===u?(s&&(t.lineTo(p,f),t.lineTo(0,f)),t.fill()):t.stroke(),t.restore()};var f=function(t){this.feature_positions={},this.slot_height=t,this.translation=0,this.y_translation=0};f.prototype.map_feature_data=function(t,e,i,n){this.feature_positions[e]||(this.feature_positions[e]=[]),this.feature_positions[e].push({data:t,x_start:i,x_end:n})},f.prototype.get_feature_data=function(t,e){var i,n=Math.floor((e-this.y_translation)/this.slot_height);if(!this.feature_positions[n])return null;t+=this.translation;for(var a=0;a<this.feature_positions[n].length;a++)if(i=this.feature_positions[n][a],t>=i.x_start&&t<=i.x_end)return i.data};var p=function(t,e,i,n,a,s,o){u.call(this,t,e,i,n,a),this.alpha_scaler=s||new h,this.height_scaler=o||new h,this.max_label_length=200};p.prototype.default_prefs={block_color:"#FFF",connector_color:"#FFF"},a.extend(p.prototype,{get_required_height:function(t,e){var i=this.get_row_height(),n=i,a=this.mode;return"no_detail"!==a&&"Squish"!==a&&"Pack"!==a||(i=t*n),i+this.get_top_padding(e)},get_top_padding:function(t){return 0},draw:function(t,e,i,n,a){var s=this.data,o=this.view_start,r=this.view_end;t.save(),t.fillStyle=this.prefs.block_color,t.textAlign="right";for(var l,h=this.get_row_height(),u=new f(h),d=[],p=0,g=s.length;p<g;p++){var m=s[p],v=m[0],_=m[1],b=m[2],y=a&&void 0!==a[v]?a[v].slot:null;("Dense"===this.mode||null!==y)&&_<r&&b>o&&(l=this.draw_element(t,this.mode,m,y,o,r,n,h,e),u.map_feature_data(m,y,l[0],l[1]),(_<o||b>r)&&d.push(m))}return t.restore(),u.y_translation=this.get_top_padding(e),new c({incomplete_features:d,feature_mapper:u})},draw_element:function(t,e,i,n,a,s,o,r,l){return[0,0]}});var g=function(t,e,i,n,a,s,o){p.call(this,t,e,i,n,a,s,o),this.draw_background_connector=!0,this.draw_individual_connectors=!1};a.extend(g.prototype,p.prototype,{get_row_height:function(){var t=this.mode;return"Dense"===t?10:"no_detail"===t?3:"Squish"===t?5:10},draw_element:function(t,e,i,n,a,s,o,r,l){var h,c=(i[0],i[1]),u=i[2],d=i[3],f=i[4],p=Math.floor(Math.max(0,(c-a-.5)*o)),g=Math.ceil(Math.min(l,Math.max(0,(u-a-.5)*o))),m=p,v=g,h=("Dense"===e?0:0+n)*r+this.get_top_padding(l),_=null,b=null,y=f&&"+"!==f&&"."!==f?this.prefs.reverse_strand_color:this.prefs.block_color,w=this.prefs.label_color;if(t.globalAlpha=this.alpha_scaler.gen_val(i),"Dense"===e&&(n=1),"no_detail"===e)t.fillStyle=y,t.fillRect(p,h+5,g-p,1);else{var x=i[5],k=i[6],C=i[7],S=!0;x&&k&&(_=Math.floor(Math.max(0,(x-a)*o)),b=Math.ceil(Math.min(l,Math.max(0,(k-a)*o))));var T,E;if("Squish"===e?(T=1,E=3,S=!1):(T=5,E=9),C){var A,M;"Squish"===e||"Dense"===e?(A=h+Math.floor(1.5)+1,M=1):f?(A=h,M=E):(A+=2.5,M=1),this.draw_background_connector&&("Squish"===e||"Dense"===e?t.fillStyle="#ccc":f?"+"===f?t.fillStyle=t.canvas.manager.get_pattern("right_strand"):"-"===f&&(t.fillStyle=t.canvas.manager.get_pattern("left_strand")):t.fillStyle="#ccc",t.fillRect(p,A,g-p,M));for(var O=0,R=C.length;O<R;O++){var $,D,P=C[O],j=Math.floor(Math.max(0,(P[0]-a-.5)*o)),I=Math.ceil(Math.min(l,Math.max((P[1]-a-.5)*o)));if(!(j>I)){if(t.fillStyle=y,t.fillRect(j,h+(E-T)/2+1,I-j,T),void 0!==_&&k>x&&!(j>b||I<_)){var N=Math.max(j,_),L=Math.min(I,b);t.fillRect(N,h+1,L-N,E),1===C.length&&"Pack"===e&&("+"===f?t.fillStyle=t.canvas.manager.get_pattern("right_strand_inv"):"-"===f&&(t.fillStyle=t.canvas.manager.get_pattern("left_strand_inv")),N+14<L&&(N+=2,L-=2),t.fillRect(N,h+1,L-N,E))}this.draw_individual_connectors&&$&&this.draw_connector(t,$,D,j,I,h),$=j,D=I}}if("Pack"===e){t.globalAlpha=1,t.fillStyle="white";var z=this.height_scaler.gen_val(i),H=Math.ceil(E*z),q=Math.round((E-H)/2);1!==z&&(t.fillRect(p,A+1,g-p,q),t.fillRect(p,A+E-q+1,g-p,q))}}else t.fillStyle=y,t.fillRect(p,h+1,g-p,E),f&&S&&("+"===f?t.fillStyle=t.canvas.manager.get_pattern("right_strand_inv"):"-"===f&&(t.fillStyle=t.canvas.manager.get_pattern("left_strand_inv")),t.fillRect(p,h+1,g-p,E));t.globalAlpha=1,d&&"Pack"===e&&c>a&&(t.fillStyle=w,0===a&&p-t.measureText(d).width<0?(t.textAlign="left",t.fillText(d,g+2,h+8,this.max_label_length),v+=t.measureText(d).width+2):(t.textAlign="right",t.fillText(d,p-2,h+8,this.max_label_length),m-=t.measureText(d).width+2))}return t.globalAlpha=1,[m,v]}});var m=function(t,e,i,n,a,s,o,r,l){p.call(this,t,e,i,n,a,s,o),this.ref_seq=r?r.data:null,this.base_color_fn=l};a.extend(m.prototype,p.prototype,{get_row_height:function(){var t,e=this.mode;return"Dense"===e?t=10:"Squish"===e?t=5:(t=10,this.prefs.show_insertions&&(t*=2)),t},_parse_cigar:function(t){var e="MIDNSHP=X",i=[[0,0]],n=i[0],s=0,o=a.map(t.match(/[0-9]+[MIDNSHP=X]/g),function(t){var a=parseInt(t.slice(0,-1),10),o=t.slice(-1);return"N"===o?0!==n[1]&&(n=[s+a,s+a],i.push(n)):-1==="ISHP".indexOf(o)&&(n[1]+=a,s+=a),[e.indexOf(o),a]});return{blocks:i,cigar:o}},draw_read:function(t,e,i,n,a,r,h,c,u,d){var f=function(t){return Math.floor(Math.max(0,(t-a-.5)*i))};t.textAlign="center";var p,g,m=[a,r],v=0,_=0,b=Math.round(i/2),y=t.canvas.manager.char_width_px,w="+"===u?this.prefs.detail_block_color:this.prefs.reverse_strand_color,k="Pack"===e,C=k?9:3,S=n+1,T=new x(t,C,i,e),E=[],A=[],M=this._parse_cigar(c);c=M.cigar,E=M.blocks;for(var O=0;O<E.length;O++){var R=E[O];o([h+R[0],h+R[1]],m)&&(p=f(h+R[0]),g=f(h+R[1]),p===g&&(g+=1),t.fillStyle=w,t.fillRect(p,S,g-p,C))}for(var $=0,D=c.length;$<D;$++){var P=c[$],j="MIDNSHP=X"[P[0]],I=P[1],N=h+v;if(p=f(N),g=f(N+I),o([N,N+I],m))switch(p===g&&(g+=1),j){case"H":case"S":case"P":break;case"M":v+=I;break;case"=":case"X":var L="";"X"===j?L=d.slice(_,_+I):this.ref_seq&&(L=this.ref_seq.slice(Math.max(0,N-a),Math.min(N-a+I,r-a)));for(var z=Math.max(N,a),H=0;H<L.length;H++)if(L&&!this.prefs.show_differences||"X"===j){var q=Math.floor(Math.max(0,(z+H-a)*i));t.fillStyle=this.base_color_fn(L[H]),k&&i>y?t.fillText(L[H],q,n+9):i>.05&&t.fillRect(q-b,S,Math.max(1,Math.round(i)),C)}"X"===j&&(_+=I),v+=I;break;case"N":t.fillStyle="#ccc",t.fillRect(p,S+(C-1)/2,g-p,1),v+=I;break;case"D":T.draw_deletion(p,S,I),v+=I;break;case"I":var F=p-b;if(o([N,N+I],m)){var V=d.slice(_,_+I);if(this.prefs.show_insertions){var B=p-(g-p)/2;if(("Pack"===e||"Auto"===this.mode)&&void 0!==d&&i>y){switch(t.fillStyle="yellow",t.fillRect(B-b,n-9,g-p,9),A[A.length]={type:"triangle",data:[F,n+4,5]},t.fillStyle="#ccc",s([N,N+I],m)){case 1003:V=V.slice(a-N);break;case 1004:V=V.slice(0,N-r);break;case 1005:break;case 1002:V=V.slice(a-N,N-r)}for(var H=0,G=V.length;H<G;H++){var q=Math.floor(Math.max(0,(N+H-a)*i));t.fillText(V[H],q-(g-p)/2,n)}}else t.fillStyle="yellow",t.fillRect(B,n+("Dense"!==this.mode?2:5),g-p,"Dense"!==e?3:9)}else("Pack"===e||"Auto"===this.mode)&&void 0!==d&&i>y&&A.push({type:"text",data:[V.length,F,n+9]})}_+=I}else v=function(t,e,i){return-1!=="M=NXD".indexOf(e)&&(t+=i),t}(v,j,I),_=function(t,e,i){return-1!=="IX".indexOf(e)&&(t+=i),t}(_,j,I)}t.fillStyle="yellow";for(var W,U,Y,O=0;O<A.length;O++)W=A[O],U=W.type,Y=W.data,"text"===U?(t.save(),t.font="bold "+t.font,t.fillText(Y[0],Y[1],Y[2]),t.restore()):"triangle"===U&&l(t,Y[0],Y[1],Y[2])},draw_element:function(t,e,i,n,a,s,o,l,h){var c=(i[0],i[1]),u=i[2],d=i[3],f=Math.floor(Math.max(-.5*o,(c-a-.5)*o)),p=Math.ceil(Math.min(h,Math.max(0,(u-a-.5)*o))),g=("Dense"===e?0:0+n)*l,m="Pack"===e?9:3;this.prefs.label_color;if(i[5]instanceof Array){var v=!0;i[4][1]>=a&&i[4][0]<=s&&i[4][2]?this.draw_read(t,e,o,g,a,s,i[4][0],i[4][2],i[4][3],i[4][4]):v=!1,i[5][1]>=a&&i[5][0]<=s&&i[5][2]?this.draw_read(t,e,o,g,a,s,i[5][0],i[5][2],i[5][3],i[5][4]):v=!1;var _=Math.ceil(Math.min(h,Math.max(-.5*o,(i[4][1]-a-.5)*o))),b=Math.floor(Math.max(-.5*o,(i[5][0]-a-.5)*o));if(v&&b>_){t.fillStyle="#ccc";var y=g+1+(m-1)/2;r(t,_,y,b,y)}}else this.draw_read(t,e,o,g,a,s,c,i[4],i[5],i[6]);return"Pack"===e&&c>=a&&"."!==d&&(t.fillStyle=this.prefs.label_color,0===a&&f-t.measureText(d).width<0?(t.textAlign="left",t.fillText(d,p+2,g+9,this.max_label_length)):(t.textAlign="right",t.fillText(d,f-2,g+9,this.max_label_length))),[0,0]}});var v=function(t,e,i,n,a,s,o){g.call(this,t,e,i,n,a,s,o),this.longest_feature_length=this.calculate_longest_feature_length(),this.draw_background_connector=!1,this.draw_individual_connectors=!0};a.extend(v.prototype,p.prototype,g.prototype,{calculate_longest_feature_length:function(){for(var t=0,e=0,i=this.data.length;e<i;e++){var n=this.data[e],a=n[1],s=n[2];t=Math.max(t,s-a)}return t},get_top_padding:function(t){var e=this.view_end-this.view_start,i=t/e;return Math.min(128,Math.ceil(this.longest_feature_length/2*i))},draw_connector:function(t,e,i,n,a,s){var o=(i+n)/2,r=n-o;Math.PI;r>0&&(t.beginPath(),t.arc(o,s,n-o,Math.PI,0),t.stroke())}});var _=function(t,e){Array.isArray(t)?this.rgb=t:6==t.length?this.rgb=t.match(/.{2}/g).map(function(t){return parseInt(t,16)}):7==t.length?this.rgb=t.substring(1,7).match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=t.split("").map(function(t){return parseInt(t+t,16)}),this.alpha="number"==typeof e?e:1};_.prototype={eval:function(){return this},toCSS:function(){return this.alpha<1?"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(t){return t=Math.round(t),t=(t>255?255:t<0?0:t).toString(16),1===t.length?"0"+t:t}).join("")},toHSL:function(){var t,e,i=this.rgb[0]/255,n=this.rgb[1]/255,a=this.rgb[2]/255,s=this.alpha,o=Math.max(i,n,a),r=Math.min(i,n,a),l=(o+r)/2,h=o-r;if(o===r)t=e=0;else{switch(e=l>.5?h/(2-o-r):h/(o+r),o){case i:t=(n-a)/h+(n<a?6:0);break;case n:t=(a-i)/h+2;break;case a:t=(i-n)/h+4}t/=6}return{h:360*t,s:e,l:l,a:s}},toARGB:function(){return"#"+[Math.round(255*this.alpha)].concat(this.rgb).map(function(t){return t=Math.round(t),t=(t>255?255:t<0?0:t).toString(16),1===t.length?"0"+t:t}).join("")},mix:function(t,e){var i=this,n=e,a=2*n-1,s=i.toHSL().a-t.toHSL().a,o=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,r=1-o,l=[i.rgb[0]*o+t.rgb[0]*r,i.rgb[1]*o+t.rgb[1]*r,i.rgb[2]*o+t.rgb[2]*r],h=i.alpha*n+t.alpha*(1-n);return new _(l,h)}};var b=function(t,e,i,n){this.start_color=new _(t),this.end_color=new _(e),this.start_value=i,this.end_value=n,this.value_range=n-i};b.prototype.map_value=function(t){return t=Math.max(t,this.start_value),t=Math.min(t,this.end_value),t=(t-this.start_value)/this.value_range,this.start_color.mix(this.end_color,1-t).toCSS()};var y=function(t,e,i,n,a){this.positive_ramp=new b(e,i,0,a),this.negative_ramp=new b(e,t,0,-n),this.start_value=n,this.end_value=a};y.prototype.map_value=function(t){return t=Math.max(t,this.start_value),t=Math.min(t,this.end_value),t>=0?this.positive_ramp.map_value(t):this.negative_ramp.map_value(-t)};var w=function(t,e,i,n,a){u.call(this,t,e,i,n,a);var s,o;if(void 0===this.prefs.min_value){var r=1/0;for(s=0,o=this.data.length;s<o;s++)r=Math.min(r,this.data[s][6]);this.prefs.min_value=r}if(void 0===this.prefs.max_value){var l=-1/0;for(s=0,o=this.data.length;s<o;s++)l=Math.max(l,this.data[s][6]);this.prefs.max_value=l}};w.prototype.default_prefs={min_value:void 0,max_value:void 0,mode:"Heatmap",pos_color:"#FF8C00",neg_color:"#4169E1"},w.prototype.draw=function(t,e,i,n){var a,s,o,r,l,h,c=this.prefs.min_value,u=this.prefs.max_value,d=this.view_start,f=(this.mode,this.data),p=1/Math.sqrt(2),g=new y(this.prefs.neg_color,"#FFFFFF",this.prefs.pos_color,c,u),m=function(t){return(t-d)*n};t.save(),t.rotate(-45*Math.PI/180),t.scale(p,p);for(var v=0,_=f.length;v<_;v++)a=f[v],s=m(a[1]),o=m(a[2]),r=m(a[4]),l=m(a[5]),h=a[6],t.fillStyle=g.map_value(h),t.fillRect(s,r,o-s,l-r);t.restore()};var x=function(t,e,i,n){this.ctx=t,this.row_height=e,this.px_per_base=i,this.draw_details=("Pack"===n||"Auto"===n)&&i>=t.canvas.manager.char_width_px,this.delete_details_thickness=.2};a.extend(x.prototype,{draw_deletion:function(t,e,i){this.ctx.fillStyle="black";var n=(this.draw_details?this.delete_details_thickness:1)*this.row_height;e+=.5*(this.row_height-n),this.ctx.fillRect(t,e,i*this.px_per_base,n)}});var k=function(t,e,i,n,a,s){u.call(this,t,e,i,n,a),this.base_color_fn=s,this.divider_height=1};a.extend(k.prototype,u.prototype,{get_row_height:function(){var t=this.mode;return"Dense"===t?10:"Squish"===t?5:10},get_required_height:function(t){var e=this.prefs.summary_height;return t>1&&this.prefs.show_sample_data&&(e+=this.divider_height+t*this.get_row_height()),e},draw:function(t,e,i,n){t.save();var s,o,r,l,h,c,u,d,f,p,g,m=function(t,e){var i=t.length,n=e.length,a=0,s=1,o=null;return"-"===e?(o="deletion",s=t.length):0===t.indexOf(e)&&i>n?(o="deletion",s=i-n,a=n):0===e.indexOf(t)&&i<n&&(o="insertion",s=n-i,a=n),null!==o?{type:o,start:a,len:s}:{}},v=Math.max(1,Math.floor(n)),_=this.data.length?this.data[0][7].split(",").length:0,b="Squish"===this.mode?5:10,y=n<.1?b:"Squish"===this.mode?3:9,w=!0,k=new x(t,b,n,this.mode);1===_&&(b=y=n<t.canvas.manager.char_width_px?this.prefs.summary_height:b,k.row_height=b,w=!1),this.prefs.show_sample_data&&w&&(t.fillStyle="#F3F3F3",t.globalAlpha=1,t.fillRect(0,this.prefs.summary_height-this.divider_height,e,this.divider_height)),t.textAlign="center";for(var C=0;C<this.data.length;C++)if(s=this.data[C],o=s[1],r=s[3],l=[s[4].split(",")],h=s[7].split(","),c=s.slice(8),l=a.map(a.flatten(l),function(t){var e={type:"snp",value:t,start:0},i=m(r,t);return a.extend(e,i)}),!(o<this.view_start||o>this.view_end)){if(w)for(t.fillStyle="#999999",t.globalAlpha=1,g=0;g<l.length;g++)for(d=this.get_start_draw_pos(o+l[g].start,n),t.fillRect(d,0,v,this.prefs.summary_height),f=this.prefs.summary_height,g=0;g<l.length;g++){t.fillStyle="deletion"===l[g].type?"black":this.base_color_fn(l[g].value);var S=c/h.length,T=Math.ceil(this.prefs.summary_height*S);t.fillRect(d,f-T,v,T),f-=T}if(this.prefs.show_sample_data)for(f=w?this.prefs.summary_height+this.divider_height:0,g=0;g<h.length;g++,f+=b)if(p=h[g]?h[g].split(/\/|\|/):["0","0"],u=null,p[0]===p[1]?"."===p[0]||"0"!==p[0]&&(u=l[parseInt(p[0],10)-1],t.globalAlpha=1):(u="0"!==p[0]?p[0]:p[1],u=l[parseInt(u,10)-1],t.globalAlpha=.5),u)if(d=this.get_start_draw_pos(o+u.start,n),"snp"===u.type){var E=u.value;t.fillStyle=this.base_color_fn(E),k.draw_details?t.fillText(E,this.get_draw_pos(o,n),f+b):t.fillRect(d,f+1,v,y)}else"deletion"===u.type&&k.draw_deletion(d,f+1,u.len)}t.restore()}}),e.default={Scaler:h,LinePainter:d,LinkedFeaturePainter:g,ReadPainter:m,ArcLinkedFeaturePainter:v,DiagonalHeatmapPainter:w,VariantPainter:k}},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),s=a.extend,o=function(t){this.manager=null,this.name=t.name,this.index=t.index,this.tool_id=t.tool_id,this.tool_exp_name=t.tool_exp_name};s(o.prototype,{to_dict:function(){return{name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name}}});var r=function(e,i,n){return t("<a/>").attr("href","javascript:void(0);").attr("title",e).addClass("icon-button").addClass(i).tooltip().click(n)},l=function(e){o.call(this,e),this.low="low"in e?e.low:-Number.MAX_VALUE,this.high="high"in e?e.high:Number.MAX_VALUE,this.min="min"in e?e.min:Number.MAX_VALUE,this.max="max"in e?e.max:-Number.MAX_VALUE,this.container=null,this.slider=null,this.slider_label=null;var i=this;i.parent_div=t("<div/>").addClass("filter-row slider-row");var n=t("<div/>").addClass("elt-label").appendTo(i.parent_div),a=(t("<span/>").addClass("slider-name").text(i.name+"  ").appendTo(n),t("<span/>").text(this.low+"-"+this.high)),s=t("<span/>").addClass("slider-value").appendTo(n).append("[").append(a).append("]");i.values_span=a;var l=t("<div/>").addClass("slider").appendTo(i.parent_div);i.control_element=t("<div/>").attr("id",i.name+"-filter-control").appendTo(l),i.control_element.slider({range:!0,min:this.min,max:this.max,step:this.get_slider_step(this.min,this.max),values:[this.low,this.high],slide:function(t,e){i.slide(t,e)},change:function(t,e){i.control_element.slider("option","slide").call(i.control_element,t,e)}}),i.slider=i.control_element,i.slider_label=a,function(e,i,n){e.click(function(){var e=i.text(),a=parseFloat(n.slider("option","max")),s=a<=1?4:a<=1e6?a.toString().length:6,o=!1,r=t(this).parents(".slider-row");r.addClass("input"),n.slider("option","values")&&(s=2*s+1,o=!0),i.text(""),t("<input type='text'/>").attr("size",s).attr("maxlength",s).attr("value",e).appendTo(i).focus().select().click(function(t){t.stopPropagation()}).blur(function(){t(this).remove(),i.text(e),r.removeClass("input")}).keyup(function(e){if(27===e.keyCode)t(this).trigger("blur");else if(13===e.keyCode){var i=n.slider("option","min"),a=n.slider("option","max"),s=function(t){return isNaN(t)||t>a||t<i},l=t(this).val();if(o){if(l=l.split("-"),l=[parseFloat(l[0]),parseFloat(l[1])],s(l[0])||s(l[1]))return alert("Parameter value must be in the range ["+i+"-"+a+"]"),t(this)}else if(l=parseFloat(l),s(l))return alert("Parameter value must be in the range ["+i+"-"+a+"]"),t(this);n.slider(o?"values":"value",l),r.removeClass("input")}})})}(s,a,i.control_element);var h=t("<div/>").addClass("display-controls").appendTo(i.parent_div);this.transparency_icon=r("Use filter for data transparency","layer-transparent",function(){i.manager.alpha_filter!==i?(i.manager.alpha_filter=i,i.manager.parent_div.find(".layer-transparent").removeClass("active").hide(),i.transparency_icon.addClass("active").show()):(i.manager.alpha_filter=null,i.transparency_icon.removeClass("active")),i.manager.track.request_draw({force:!0,clear_after:!0})}).appendTo(h).hide(),this.height_icon=r("Use filter for data height","arrow-resize-090",function(){i.manager.height_filter!==i?(i.manager.height_filter=i,i.manager.parent_div.find(".arrow-resize-090").removeClass("active").hide(),i.height_icon.addClass("active").show()):(i.manager.height_filter=null,i.height_icon.removeClass("active")),i.manager.track.request_draw({force:!0,clear_after:!0})}).appendTo(h).hide(),i.parent_div.hover(function(){i.transparency_icon.show(),i.height_icon.show()},function(){i.manager.alpha_filter!==i&&i.transparency_icon.hide(),i.manager.height_filter!==i&&i.height_icon.hide()}),t("<div style='clear: both;'/>").appendTo(i.parent_div)};s(l.prototype,{to_dict:function(){var t=o.prototype.to_dict.call(this);return s(t,{type:"number",min:this.min,max:this.max,low:this.low,high:this.high})},copy:function(){return new l({name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name})},get_slider_step:function(t,e){return e-t<=2?.01:1},slide:function(t,e){var i=e.values;this.values_span.text(i[0]+"-"+i[1]),this.low=i[0],this.high=i[1];var n=this;setTimeout(function(){i[0]===n.low&&i[1]===n.high&&n.manager.track.request_draw({force:!0,clear_after:!0})},25)},applies_to:function(t){return t.length>this.index},_keep_val:function(t){return isNaN(t)||t>=this.low&&t<=this.high},keep:function(t){if(!this.applies_to(t))return!0;var e=t[this.index];if(e instanceof Array){for(var i=!0,n=0;n<e.length;n++)if(!this._keep_val(e[n])){i=!1;break}return i}return this._keep_val(t[this.index])},update_attrs:function(t){var e=!1;if(!this.applies_to(t))return e;var i=t[this.index];i instanceof Array||(i=[i]);for(var n=0;n<i.length;n++){var a=i[n];a<this.min&&(this.min=Math.floor(a),e=!0),a>this.max&&(this.max=Math.ceil(a),e=!0)}return e},update_ui_elt:function(){this.min<this.max?this.parent_div.show():this.parent_div.hide();var t=this.slider.slider("option","min"),e=this.slider.slider("option","max");(this.min<t||this.max>e)&&(this.slider.slider("option","min",this.min),this.slider.slider("option","max",this.max),this.slider.slider("option","step",this.get_slider_step(this.min,this.max)),this.slider.slider("option","values",[this.min,this.max]))}});var h=function(e,i){if(this.track=e,this.alpha_filter=null,this.height_filter=null,this.filters=[],this.parent_div=t("<div/>").addClass("filters").hide(),this.parent_div.bind("drag",function(t){t.stopPropagation()}).click(function(t){t.stopPropagation()}).bind("dblclick",function(t){t.stopPropagation()}).bind("keydown",function(t){t.stopPropagation()}),i&&"filters"in i){for(var n,a=("alpha_filter"in i?i.alpha_filter:null),s=("height_filter"in i?i.height_filter:null),o=i.filters,r=0;r<o.length;r++)"number"===o[r].type?(n=new l(o[r]),this.add_filter(n),n.name===a&&(this.alpha_filter=n,n.transparency_icon.addClass("active").show()),n.name===s&&(this.height_filter=n,n.height_icon.addClass("active").show())):console.log("ERROR: unsupported filter: ",name,type);"visible"in i&&i.visible&&this.parent_div.show()}if(0!==this.filters.length){var h=t("<div/>").addClass("param-row").appendTo(this.parent_div),c=this;t("<input type='submit'/>").attr("value","Run on complete dataset").appendTo(h).click(function(){c.run_on_dataset()})}};s(h.prototype,{show:function(){this.parent_div.show()},hide:function(){this.parent_div.hide()},toggle:function(){this.parent_div.toggle()},visible:function(){return this.parent_div.is(":visible")},to_dict:function(){for(var t,e={},i=[],n=0;n<this.filters.length;n++)t=this.filters[n],i.push(t.to_dict());return e.filters=i,e.alpha_filter=this.alpha_filter?this.alpha_filter.name:null,e.height_filter=this.height_filter?this.height_filter.name:null,e.visible=this.parent_div.is(":visible"),e},copy:function(t){for(var e=new h(t),i=0;i<this.filters.length;i++)e.add_filter(this.filters[i].copy());return e},add_filter:function(t){t.manager=this,this.parent_div.append(t.parent_div),this.filters.push(t)},remove_all:function(){this.filters=[],this.parent_div.children().remove()},init_filters:function(){for(var t=0;t<this.filters.length;t++){this.filters[t].update_ui_elt()}},clear_filters:function(){for(var t=0;t<this.filters.length;t++){var e=this.filters[t];e.slider.slider("option","values",[e.min,e.max])}this.alpha_filter=null,this.height_filter=null,this.parent_div.find(".icon-button").hide()},run_on_dataset:function(){for(var e,i,n=(function(t,e,i){return e in t||(t[e]=i),t[e]}),a={},s=0;s<this.filters.length;s++)e=this.filters[s],e.tool_id&&(e.min!==e.low&&(i=n(a,e.tool_id,[]),i[i.length]=e.tool_exp_name+" >= "+e.low),e.max!==e.high&&(i=n(a,e.tool_id,[]),i[i.length]=e.tool_exp_name+" <= "+e.high));var o=[];for(var r in a)o[o.length]=[r,a[r]];!function e(i,n){var a=n[0],s=a[0],o=a[1],r="("+o.join(") and (")+")",l={cond:r,input:i,target_dataset_id:i,tool_id:s};n=n.slice(1),t.getJSON(run_tool_url,l,function(t){t.error?Galaxy.modal.show({title:"Filter Dataset",body:"Error running tool "+s,buttons:{Close:Galaxy.modal.hide()}}):0===n.length?Galaxy.modal.show({title:"Filtering Dataset",body:"Filter(s) are running on the complete dataset. Outputs are in dataset's history.",buttons:{Close:Galaxy.modal.hide()}}):e(t.dataset_id,n)})}(this.track.dataset_id,o)}}),e.default={FiltersManager:h,NumberFilter:l}}).call(e,i(0))},function(t,e,i){"use strict";(function(t,n,a,s){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),l=o(r),h=i(6),c=(o(h),i(21)),u=o(c),d=i(120),f=o(d),p=i(121),g=o(p),m=i(122),v=o(m),_=t.View.extend({initialize:function(t,e){this.app=t,this.inputs=e.inputs,this.parameters=new v.default,this.setElement(n("<div/>")),this.render()},render:function(){var t=this;this.$el.empty(),a.each(this.inputs,function(e){t.add(e)})},add:function(t){var e=s.extend(!0,{},t);switch(e.id=t.id=l.default.uid(),this.app.input_list[e.id]=e,e.type){case"conditional":this._addConditional(e);break;case"repeat":this._addRepeat(e);break;case"section":this._addSection(e);break;default:this._addRow(e)}},_addConditional:function(t){var e=this;t.test_param.id=t.id,this.app.model.get("sustain_conditionals")&&(t.test_param.disabled=!0);var i=this._addRow(t.test_param);i.model&&i.model.set("onchange",function(i){var n=e.app.data.matchCase(t,i);for(var a in t.cases){var s=t.cases[a],o=e.$("#"+t.id+"-section-"+a),r=!1;for(var l in s.inputs)if(!s.inputs[l].hidden){r=!0;break}a==n&&r?o.fadeIn("fast"):o.hide()}e.app.trigger("change")});for(var n in t.cases){var a=new _(this.app,{inputs:t.cases[n].inputs});this._append(a.$el.addClass("ui-form-section"),t.id+"-section-"+n)}i.trigger("change")},_addRepeat:function(t){function e(e){var a=t.id+"-section-"+n++,o=new _(i.app,{inputs:e});s.add({id:a,$el:o.$el,ondel:function(){s.del(a),i.app.trigger("change")}})}for(var i=this,n=0,s=new f.default.View({title:t.title||"Repeat",min:t.min,max:t.max,onnew:function(){e(t.inputs),i.app.trigger("change")}}),o=a.size(t.cache),r=0;r<Math.max(Math.max(o,t.min||0),t.default||0);r++)e(r<o?t.cache[r]:t.inputs);this.app.model.get("sustain_repeats")&&s.hideOptions();var l=new g.default(this.app,{label:t.title||t.name,help:t.help,field:s});this._append(l.$el,t.id)},_addSection:function(t){var e=new u.default.View({title:t.title||t.name,cls:"ui-portlet-section",collapsible:!0,collapsible_button:!0,collapsed:!t.expanded});e.append(new _(this.app,{inputs:t.inputs}).$el),e.append(n("<div/>").addClass("ui-form-info").html(t.help)),this.app.on("expand",function(t){e.$("#"+t).length>0&&e.expand()}),this._append(e.$el,t.id)},_addRow:function(t){var e=this,i=t.id;t.onchange=t.onchange||function(){e.app.trigger("change",i)};var n=this.parameters.create(t);this.app.field_list[i]=n;var a=new g.default(this.app,{name:t.name,label:t.hide_label?"":t.label||t.name,value:t.value,text_value:t.text_value,collapsible_value:t.collapsible_value,collapsible_preview:t.collapsible_preview,help:t.help,argument:t.argument,disabled:t.disabled,color:t.color,style:t.style,backdrop:t.backdrop,hidden:t.hidden,fixed:t.fixed,field:n});return this.app.element_list[i]=a,this._append(a.$el,t.id),n},_append:function(t,e){this.$el.append(t.addClass("section-row").attr("id",e))}});e.default={View:_}}).call(e,i(2),i(0),i(1),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(21),h=s(l),c=i(6),u=s(c),d=t.View.extend({initialize:function(t){this.list={},this.options=r.default.merge(t,{title:"Repeat",empty_text:"Not available.",max:null,min:null}),this.button_new=new u.default.ButtonIcon({icon:"fa-plus",title:"Insert "+this.options.title,tooltip:"Add new "+this.options.title+" block",cls:"ui-button-icon ui-clear-float form-repeat-add",onclick:function(){t.onnew&&t.onnew()}}),this.setElement(n("<div/>").append(this.$list=n("<div/>")).append(n("<div/>").append(this.button_new.$el)))},size:function(){return a.size(this.list)},add:function(t){if(!t.id||this.list[t.id])return void Galaxy.emit.debug("form-repeat::add()","Duplicate or invalid repeat block id.");var e=new u.default.ButtonIcon({icon:"fa-trash-o",tooltip:"Delete this repeat block",cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){t.ondel&&t.ondel()}}),i=new h.default.View({id:t.id,title:"placeholder",cls:t.cls||"ui-portlet-repeat",operations:{button_delete:e}});i.append(t.$el),i.$el.addClass("section-row").hide(),this.list[t.id]=i,this.$list.append(i.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()},del:function(t){if(!this.list[t])return void Galaxy.emit.debug("form-repeat::del()","Invalid repeat block id.");this.$list.find("#"+t).remove(),delete this.list[t],this.button_new.enable(),this._refresh()},delAll:function(){for(var t in this.list)this.del(t)},hideOptions:function(){this.button_new.$el.hide(),a.each(this.list,function(t){t.hideOperation("button_delete")}),a.isEmpty(this.list)&&this.$el.append(n("<div/>").addClass("ui-form-info").html(this.options.empty_text))},_refresh:function(){var t=0;for(var e in this.list){var i=this.list[e];i.title(++t+": "+this.options.title),i[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}});e.default={View:d}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,i,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.View.extend({initialize:function(e,i){this.app=e,this.app_options=e.model?e.model.attributes:{},this.field=i&&i.field||new t.View,this.model=i&&i.model||new t.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(i),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var n=this.model.get("collapsible_value");this.field.collapsed=void 0!==n&&JSON.stringify(this.model.get("value"))==JSON.stringify(n),this.listenTo(this.model,"change",this.render,this),this.render();var a=this;this.$collapsible.on("click",function(){a.field.collapsed=!a.field.collapsed,e.trigger&&e.trigger("change"),a.render()}),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",function(){a.reset()})},backdrop:function(){this.model.set("backdrop",!0)},error:function(t){this.model.set("error_text",t)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){i(".tooltip").hide();var t=this.model.get("help",""),e=this.model.get("argument");e&&-1==t.indexOf("("+e+")")&&(t+=" ("+e+")"),this.$info.html(t),this.$el[this.model.get("hidden")?"hide":"show"](),this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(n.escape(this.model.get("text_value")));var a=this.model.get("error_text");if(this.$error[a?"show":"hide"](),this.$el[a?"addClass":"removeClass"]("ui-error"),this.$error_text.html(a),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")}),this.model.get("disabled")||void 0===this.model.get("collapsible_value"))this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide();else{var s=this.field.collapsed?"enable":"disable";this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),this.$collapsible_icon.removeClass().addClass("icon").addClass(this.model.get("cls_"+s)).attr("data-original-title",this.model.get("text_"+s)).tooltip({placement:"bottom"})}},_template:function(){return i("<div/>").addClass("ui-form-element").append(i("<div/>").addClass("ui-form-error ui-error").append(i("<span/>").addClass("fa fa-arrow-down")).append(i("<span/>").addClass("ui-form-error-text"))).append(i("<div/>").addClass("ui-form-title").append(i("<div/>").addClass("ui-form-collapsible").append(i("<i/>").addClass("ui-form-collapsible-icon")).append(i("<span/>").addClass("ui-form-collapsible-text"))).append(i("<span/>").addClass("ui-form-title-text"))).append(i("<div/>").addClass("ui-form-field").append(i("<span/>").addClass("ui-form-info")).append(i("<div/>").addClass("ui-form-backdrop"))).append(i("<div/>").addClass("ui-form-preview"))}})}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(6),h=s(l),c=i(123),u=s(c),d=i(124),f=s(d),p=i(125),g=s(p),m=i(126),v=s(m),_=i(128),b=s(_);e.default=t.Model.extend({types:{text:"_fieldText",password:"_fieldText",select:"_fieldSelect",data_column:"_fieldSelect",genomebuild:"_fieldSelect",data:"_fieldData",data_collection:"_fieldData",integer:"_fieldSlider",float:"_fieldSlider",boolean:"_fieldBoolean",drill_down:"_fieldDrilldown",color:"_fieldColor",hidden:"_fieldHidden",hidden_data:"_fieldHidden",baseurl:"_fieldHidden",library_data:"_fieldLibrary",ftpfile:"_fieldFtp",upload:"_fieldUpload",genomespacefile:"_fieldGenomeSpace"},create:function(t){var e=this.types[t.type],i="function"==typeof this[e]?this[e].call(this,t):null;return i||(i=t.options?this._fieldSelect(t):this._fieldText(t),Galaxy.emit.debug("form-parameters::_addRow()","Auto matched field type ("+t.type+").")),void 0===t.value&&(t.value=null),i.value(t.value),i},_fieldData:function(t){return new u.default.View({id:"field-"+t.id,extensions:t.extensions,optional:t.optional,multiple:t.multiple,type:t.type,flavor:t.flavor,data:t.options,onchange:t.onchange})},_fieldSelect:function(t){if(t.is_workflow)return this._fieldText(t);"data_column"==t.type&&(t.error_text="Missing columns in referenced dataset.");var e=t.data;e||(e=[],n.each(t.options,function(t){e.push({label:t[0],value:t[1]})}));var i=h.default.Select;switch(t.display){case"checkboxes":i=h.default.Checkbox;break;case"radio":i=h.default.Radio;break;case"radiobutton":i=h.default.RadioButton}return new i.View({id:"field-"+t.id,data:e,error_text:t.error_text||"No options available",readonly:t.readonly,multiple:t.multiple,optional:t.optional,onchange:t.onchange,individual:t.individual,searchable:"workflow"!==t.flavor})},_fieldDrilldown:function(t){return t.is_workflow?this._fieldText(t):new h.default.Drilldown.View({id:"field-"+t.id,data:t.options,display:t.display,optional:t.optional,onchange:t.onchange})},_fieldText:function(t){if(t.options&&t.data)if(t.area=t.multiple,r.default.isEmpty(t.value))t.value=null;else if(a.isArray(t.value)){var e="";for(var i in t.value){if(e+=String(t.value[i]),!t.multiple)break;e+="\n"}t.value=e}return new h.default.Input({id:"field-"+t.id,type:t.type,area:t.area,readonly:t.readonly,placeholder:t.placeholder,datalist:t.datalist,onchange:t.onchange})},_fieldSlider:function(t){return new h.default.Slider.View({id:"field-"+t.id,precise:"float"==t.type,is_workflow:t.is_workflow,min:t.min,max:t.max,onchange:t.onchange})},_fieldHidden:function(t){return new h.default.Hidden({id:"field-"+t.id,info:t.info})},_fieldBoolean:function(t){return new h.default.RadioButton.View({id:"field-"+t.id,data:[{label:"Yes",value:"true"},{label:"No",value:"false"}],onchange:t.onchange})},_fieldColor:function(t){return new b.default({id:"field-"+t.id,onchange:t.onchange})},_fieldLibrary:function(t){return new f.default.View({id:"field-"+t.id,optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldFtp:function(t){return new g.default.View({id:"field-"+t.id,optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldGenomeSpace:function(t){var e=this;return new v.default.View({id:"field-"+t.id,onchange:function(){e.app.trigger("change")}})},_fieldUpload:function(t){return new h.default.Upload({id:"field-"+t.id,onchange:t.onchange})}})}).call(e,i(2),i(1),i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=s(o),l=i(6),h=s(l),c=i(62),u=s(c),d={DISABLED:"disabled",ENABLED:"enabled",LINKED:"linked"},f={data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:d.DISABLED},{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:d.LINKED},{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:d.LINKED}],data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:d.DISABLED},{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collections",multiple:!0,batch:d.DISABLED}],data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:d.DISABLED}],workflow_data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:d.DISABLED}],workflow_data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:d.DISABLED}],workflow_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:d.DISABLED}],module_data:[{src:"hda",icon:"fa-file-o",tooltip:"Single dataset",multiple:!1,batch:d.DISABLED},{src:"hda",icon:"fa-files-o",tooltip:"Multiple datasets",multiple:!0,batch:d.ENABLED}],module_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:"Dataset collection",multiple:!1,batch:d.DISABLED},{src:"hdca",icon:"fa-folder",tooltip:"Multiple collections",multiple:!0,batch:d.ENABLED}]},p=t.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new t.Model({src_labels:{hda:"dataset",hdca:"dataset collection"},pagelimit:100,statustimer:1e3}).set(e),this.setElement(n("<div/>").addClass("ui-select-content")),this.button_product=new h.default.RadioButton.View({value:"false",data:[{icon:"fa fa-chain",value:"false",tooltip:"Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads."},{icon:"fa fa-chain-broken",value:"true",tooltip:"Unlinked dataset inputs will be run against *all* other inputs."}]});var a=n("<div/>").addClass("ui-form-info").append(n("<i/>").addClass("fa fa-sitemap")).append(n("<span/>").html("This is a batch mode input field. Separate jobs will be triggered for each dataset selection."));this.$batch={linked:a.clone(),enabled:a.clone().append(n("<div/>").append(n("<div/>").addClass("ui-form-title").html("Batch options:")).append(this.button_product.$el)).append(n("<div/>").css("clear","both"))},this.$el.on("dragenter",function(t){this.lastenter=t.target,i.$el.addClass("ui-dragover")}).on("dragover",function(t){t.preventDefault()}).on("dragleave",function(t){this.lastenter===t.target&&i.$el.removeClass("ui-dragover")}).on("drop",function(t){i._handleDrop(t)}),this.history={},this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:current",this._changeCurrent,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:type change:optional change:multiple change:extensions",this._changeType,this),this.render(),this.on("change",function(){e.onchange&&e.onchange(i.value())})},render:function(){this._changeType(),this._changeValue(),this._changeWait()},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},update:function(t){this.model.set("data",t)},value:function(t){void 0!==t&&this.model.set("value",t);var e=this.model.get("current");if(this.config[e]){var i=this.fields[e].value();if(null!==i&&(i=n.isArray(i)?i:[i],i.length>0)){var a=this._batch({values:[]});for(var s in i){var o=this.history[i[s]+"_"+this.config[e].src];if(!o)return Galaxy.emit.debug("ui-select-content::value()","Requested details not found for '"+i[s]+"'."),null;a.values.push(o)}return a.values.sort(function(t,e){return t.hid-e.hid}),a}}else Galaxy.emit.debug("ui-select-content::value()","Invalid value/source '"+t+"'.");return null},_changeCurrent:function(){var t=this;a.each(this.fields,function(e,i){t.model.get("current")==i?(e.$el.show(),a.each(t.$batch,function(e,n){e[t.config[i].batch==n?"show":"hide"]()}),t.button_type.value(i)):e.$el.hide()})},_changeType:function(){var t=this,e=(this.model.get("flavor")?this.model.get("flavor")+"_":"")+String(this.model.get("type"))+(this.model.get("multiple")?"_multiple":"");f[e]?this.config=f[e]:(this.config=f.data,Galaxy.emit.debug("ui-select-content::_changeType()","Invalid configuration/type id '"+e+"'."));var i=t.model.get("data"),n=r.default.textify(this.model.get("extensions")),s=this.model.get("src_labels");this.fields=[],this.button_data=[],a.each(this.config,function(e,a){t.button_data.push({value:a,icon:e.icon,tooltip:e.tooltip}),t.fields.push(new u.default.View({optional:t.model.get("optional"),multiple:e.multiple,searchable:!e.multiple||i&&i[e.src]&&i[e.src].length>t.model.get("pagelimit"),individual:!0,error_text:"No "+(n?n+" ":"")+(s[e.src]||"content")+" available.",onchange:function(){t.trigger("change")}}))}),this.button_type=new h.default.RadioButton.View({value:this.model.get("current"),data:this.button_data,onchange:function(e){t.model.set("current",e),t.trigger("change")}}),this.$el.empty();var o=0;this.fields.length>1&&(this.$el.append(this.button_type.$el),o=Math.max(0,36*this.fields.length)+"px"),a.each(this.fields,function(e){t.$el.append(e.$el.css({"margin-left":o}))}),a.each(this.$batch,function(e,i){t.$el.append(e.css({"margin-left":o}))}),this.model.set("current",0),this._changeCurrent(),this._changeData()},_changeWait:function(){var t=this;a.each(this.fields,function(e){e[t.model.get("wait")?"wait":"unwait"]()})},_changeData:function(){var t=this.model.get("data"),e=this,i={};a.each(t,function(t,n){i[n]=[],a.each(t,function(t){i[n].push({hid:t.hid,keep:t.keep,label:t.hid+": "+t.name,value:t.id,tags:t.tags}),e.history[t.id+"_"+n]=t})}),a.each(this.config,function(t,n){i[t.src]&&e.fields[n].add(i[t.src],function(t,e){return e.hid-t.hid})})},_changeValue:function(){var t=this.model.get("value");if(t&&t.values&&t.values.length>0){var e=[];a.each(t.values,function(t){e.push(t.id)});for(var i=t.values[0].src,n=t.values.length>1,s=0;s<this.config.length;s++){var o=this.fields[s],r=this.config[s];if(r.src==i&&-1!==[n,!0].indexOf(r.multiple)){this.model.set("current",s),o.value(e);break}}}else a.each(this.fields,function(t){t.value(null)})},_handleDrop:function(t){try{var e=this.model.get("data"),i=this.model.get("current"),n=this.config[i],s=this.fields[i],o=JSON.parse(t.originalEvent.dataTransfer.getData("text"))[0],r=o.id,l="dataset"==o.history_content_type?"hda":"hdca",h={id:r,src:l};if(e&&a.findWhere(e[l],h)){if(n.src==l){var c=s.value();c&&n.multiple?-1==c.indexOf(r)&&c.push(r):c=r,s.value(c)}else this.model.set("value",{values:[h]}),this.model.trigger("change:value");this.trigger("change"),this._handleDropStatus("success")}else this._handleDropStatus("danger")}catch(t){this._handleDropStatus("danger")}t.preventDefault()},_handleDropStatus:function(t){var e=this;this.$el.removeClass("ui-dragover").addClass("ui-dragover-"+t),setTimeout(function(){e.$el.removeClass("ui-dragover-"+t)},this.model.get("statustimer"))},_batch:function(t){t.batch=!1;var e=this.model.get("current"),i=this.config[e];if("hdca"==i.src&&!i.multiple){var n=this.history[this.fields[e].value()+"_hdca"];n&&n.map_over_type&&(t.batch=!0)}return i.batch!=d.LINKED&&i.batch!=d.ENABLED||(t.batch=!0,i.batch==d.ENABLED&&"true"===this.button_product.value()&&(t.product=!0)),t}});e.default={View:p}}).call(e,i(2),i(0),i(1))},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=(n(a),i(6)),o=n(s),r=i(68),l=(n(r),i(69)),h=n(l),c=t.Collection.extend({url:Galaxy.root+"api/libraries?deleted=false"}),u=t.Collection.extend({initialize:function(){var e=this;this.config=new t.Model({library_id:null}),this.config.on("change",function(){e.fetch({reset:!0})})},url:function(){return Galaxy.root+"api/libraries/"+this.config.get("library_id")+"/contents"}}),d=t.View.extend({initialize:function(t){var e=this;this.libraries=new c,this.datasets=new u,this.options=t,this.library_select=new o.default.Select.View({onchange:function(t){e.datasets.config.set("library_id",t)}}),this.dataset_list=new h.default.View({name:"dataset",optional:t.optional,multiple:t.multiple,onchange:function(){e.trigger("change")}}),this.libraries.on("reset",function(){var t=[];e.libraries.each(function(e){t.push({value:e.id,label:e.get("name")})}),e.library_select.update(t)}),this.datasets.on("reset",function(){var t=[];null!==e.library_select.text()&&e.datasets.each(function(e){"file"===e.get("type")&&t.push({value:e.id,label:e.get("name")})}),e.dataset_list.update(t)}),this.on("change",function(){t.onchange&&t.onchange(e.value())}),this.setElement(this._template()),this.$(".library-select").append(this.library_select.$el),this.$el.append(this.dataset_list.$el),this.libraries.fetch({reset:!0,success:function(){e.library_select.trigger("change"),void 0!==e.options.value&&e.value(e.options.value)}})},value:function(t){return this.dataset_list.value(t)},_template:function(){return'<div class="ui-select-library"><div class="library ui-margin-bottom"><span class="library-title">Select Library</span><span class="library-select"/></div></div>'}});e.default={View:d}}).call(e,i(2))},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=n(a),o=i(69),r=n(o),l=t.View.extend({initialize:function(t){var e=this;this.ftpfile_list=new r.default.View({name:"file",optional:t.optional,multiple:t.multiple,onchange:function(){t.onchange&&t.onchange(e.value())}}),this.setElement(this.ftpfile_list.$el),s.default.get({url:Galaxy.root+"api/remote_files",success:function(t){var i=[];for(var n in t)i.push({value:t[n].path,label:t[n].path});e.ftpfile_list.update(i)}})},value:function(t){return this.ftpfile_list.value(t)}});e.default={View:l}}).call(e,i(2))},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=(n(a),i(6)),o=n(s),r=i(127),l=n(r),h=t.View.extend({initialize:function(t){var e=this;this.browse_button=new o.default.ButtonIcon({title:"Browse",icon:"fa fa-sign-in",tooltip:"Browse GenomeSpace",onclick:function(){e.browseGenomeSpace()}}),this.filename_textbox=new o.default.Input,this.token_textbox=new o.default.Input({type:"password"}),this.setElement(this._template(t)),this.$(".ui-gs-browse-button").append(this.browse_button.$el),this.$(".ui-gs-filename-textbox").append(this.filename_textbox.$el),this.$(".ui-gs-token-textbox").append(this.token_textbox.$el)},browseGenomeSpace:function(t){var e=this;l.default.openFileBrowser({successCallback:function(t){e.value(t.destination+"^"+t.token)}})},_template:function(t){return'<div class="ui-gs-select-file"><div class="ui-gs-browse-field"><span class="ui-gs-browse-button" /><span class="ui-gs-filename-textbox" /></div><div class="ui-gs-token-field"><span class=ui-gs-label"><div class="ui-gs-token-label">Token</div></span><span class="ui-gs-token-textbox" /></div></div>'},value:function(t){if(void 0===t)return this._getValue();this._setValue(t)},_getValue:function(){return this.filename_textbox.value()+"^"+this.token_textbox.value()},_setValue:function(t){t&&(values=t.split("^"),this.filename_textbox.value(values[0]),this.token_textbox.value(values[1]))}});e.default={View:h}}).call(e,i(2))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={openFileBrowser:function(t){var e=window.Galaxy.config.genomespace_ui_url,i=e+"upload/loadUrlToGenomespace.html?getLocation=true",n=window.open(i,"GenomeSpace File Browser","height=360px,width=600px");successCalBack=t.successCallback,window.addEventListener("message",function(t){successCalBack(t.data)},!1),n.focus(),null!=t.errorCallback&&(n.setCallbackOnGSUploadError=config.errorCallback)}}},function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=t.View.extend({colors:{standard:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],base:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],theme:[["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada"],["d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5"],["bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f"],["a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09"],["7f7f7e","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"]]},initialize:function(t){this.options=s.default.merge(t,{}),this.setElement(this._template()),this.$panel=this.$(".ui-color-picker-panel"),this.$view=this.$(".ui-color-picker-view"),this.$value=this.$(".ui-color-picker-value"),this.$header=this.$(".ui-color-picker-header"),this._build(),this.visible=!1,this.value(this.options.value),this.$boxes=this.$(".ui-color-picker-box");var e=this;this.$boxes.on("click",function(){e.value(n(this).css("background-color")),e.$header.trigger("click")}),this.$header.on("click",function(){e.visible=!e.visible,e.visible?e.$view.fadeIn("fast"):e.$view.fadeOut("fast")})},value:function(t){return void 0!==t&&null!==t&&(this.$value.css("background-color",t),this.$(".ui-color-picker-box").empty(),this.$(this._getValue()).html(this._templateCheck()),this.options.onchange&&this.options.onchange(t)),this._getValue()},_getValue:function(){var t=this.$value.css("background-color");if(t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)){var e=function(t){return("0"+parseInt(t).toString(16)).slice(-2)};return"#"+e(t[1])+e(t[2])+e(t[3])}return null},_build:function(){this._content({colors:this.colors.base});for(var t in this.colors.theme){var e={};0==t?e.bottom=!0:t!=this.colors.theme.length-1?(e.top=!0,e.bottom=!0):e.top=!0,e.colors=this.colors.theme[t],this._content(e)}this._content({colors:this.colors.standard})},_content:function(t){var e=t.colors,i=n(this._templateContent()),a=i.find(".line");this.$panel.append(i);for(var s in e){var o=n(this._templateBox(e[s]));t.top&&(o.css("border-top","none"),o.css("border-top-left-radius","0px"),o.css("border-top-right-radius","0px")),t.bottom&&(o.css("border-bottom","none"),o.css("border-bottom-left-radius","0px"),o.css("border-bottom-right-radius","0px")),a.append(o)}return i},_templateCheck:function(){return'<div class="ui-color-picker-check fa fa-check"/>'},_templateContent:function(){return'<div class="ui-color-picker-content"><div class="line"/></div>'},_templateBox:function(t){return'<div id="'+t+'" class="ui-color-picker-box" style="background-color: #'+t+';"/>'},_template:function(){return'<div class="ui-color-picker"><div class="ui-color-picker-header"><div class="ui-color-picker-value"/><div class="ui-color-picker-label">Select a color</div></div><div class="ui-color-picker-view ui-input"><div class="ui-color-picker-panel"/></div>'}})}).call(e,i(2),i(0))},function(t,e){function i(t){function e(t){a.push(t)}if("string"==typeof t){var n={},a=[],s=i.call(n,e);return s.parse(t),{entries:a,errors:s.getErrors()}}if("function"!=typeof t)throw"Invalid parser construction.";return this.STATES_={ENTRY_OR_JUNK:0,OBJECT_TYPE:1,ENTRY_KEY:2,KV_KEY:3,EQUALS:4,KV_VALUE:5},this.DATA_={},this.CALLBACK_=t,this.CHAR_=0,this.LINE_=1,this.CHAR_IN_LINE_=0,this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.PARSETMP_={},this.SKIPTILLEOL_=!1,this.VALBRACES_=null,this.BRACETYPE_=null,this.BRACECOUNT_=0,this.STATE_=this.STATES_.ENTRY_OR_JUNK,this.ERRORS_=[],this.ENTRY_TYPES_={inproceedings:1,proceedings:2,article:3,techreport:4,misc:5,mastersthesis:6,book:7,phdthesis:8,incollection:9,unpublished:10,inbook:11,manual:12,periodical:13,booklet:14,masterthesis:15,conference:16},this.MACROS_={jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December",Jan:"January",Feb:"February",Mar:"March",Apr:"April",May:"May",Jun:"June",Jul:"July",Aug:"August",Sep:"September",Oct:"October",Nov:"November",Dec:"December"},this.getErrors=function(){return this.ERRORS_},this.parse=function(t){for(var e=0;e<t.length;e++)this.processCharacter_(t[e])},this.error_=function(t){this.ERRORS_.push([this.LINE_,this.CHAR_IN_LINE_,this.CHAR_,t])},this.processEntry_=function(){var t=this.DATA_;if(t.Fields)for(var e in t.Fields){for(var i=t.Fields[e],n=0;n<this.CHARCONV_.length;n++){var a=this.CHARCONV_[n][0],s=this.CHARCONV_[n][1];i=i.replace(a,s)}i=i.replace(/[\n\r\t]/g," ").replace(/\s\s+/g," ").replace(/^\s+|\s+$/g,"");for(var o=i.length,r="",n=0;n<o;n++){var l=i[n],h=!1;"\\"==l&&n<o-1?l=i[++n]:"{"!=l&&"}"!=l||(h=!0),h||(r+=l)}t.Fields[e]=r}if("string"==t.ObjectType)for(var e in t.Fields)this.MACROS_[e]=t.Fields[e];else this.CALLBACK_(t)},this.processCharacter_=function(t){if(this.CHAR_++,this.CHAR_IN_LINE_++,"\n"==t&&(this.LINE_++,this.CHAR_IN_LINE_=1),this.SKIPTILLEOL_)return void("\n"==t&&(this.SKIPTILLEOL_=!1));if(this.SKIPCOMMENT_&&"%"==t)return void(this.SKIPTILLEOL_=!0);if(!this.SKIPWS_||!/\s/.test(t)){this.SKIPWS_=!1,this.SKIPCOMMENT_=!1,this.SKIPTILLEOL_=!1;for(var e=!0;e;)switch(e=!1,this.STATE_){case this.STATES_.ENTRY_OR_JUNK:"@"==t&&(this.STATE_=this.STATES_.OBJECT_TYPE,this.DATA_={ObjectType:""}),this.BRACETYPE_=null,this.SKIPWS_=!0,this.SKIPCOMMENT_=!0;break;case this.STATES_.OBJECT_TYPE:if(/[A-Za-z]/.test(t))this.DATA_.ObjectType+=t.toLowerCase(),this.SKIPWS_=!0,this.SKIPCOMMENT_=!0;else{var i=this.DATA_.ObjectType;"comment"==i?this.STATE_=this.STATES_.ENTRY_OR_JUNK:"string"==i?(this.DATA_.ObjectType=i,this.DATA_.Fields={},this.BRACETYPE_=t,this.BRACECOUNT_=1,this.STATE_=this.STATES_.KV_KEY,this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.PARSETMP_={Key:""}):"preamble"==i?this.STATE_=this.STATES_.ENTRY_OR_JUNK:i in this.ENTRY_TYPES_?(this.DATA_.ObjectType="entry",this.DATA_.EntryType=i,this.DATA_.EntryKey="",this.STATE_=this.STATES_.ENTRY_KEY,e=!0):(this.error_('Unrecognized object type: "'+this.DATA_.ObjectType+'"'),this.STATE_=this.STATES_.ENTRY_OR_JUNK)}break;case this.STATES_.ENTRY_KEY:if(("{"===t||"("===t)&&null==this.BRACETYPE_){this.BRACETYPE_=t,this.BRACECOUNT_=1,this.SKIPWS_=!0,this.SKIPCOMMENT_=!0;break}/[,%\s]/.test(t)?this.DATA_.EntryKey.length<1?(this.SKIPWS_=!0,this.SKIPCOMMENT_=!0):null==this.BRACETYPE_?(this.error_("No opening brace for object."),this.STATE_=this.STATES_.ENTRY_OR_JUNK):(this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,e=!0,this.STATE_=this.STATES_.KV_KEY,this.PARSETMP_.Key="",this.DATA_.Fields={}):(this.DATA_.EntryKey+=t,this.SKIPWS_=!1,this.SKIPCOMMENT_=!1);break;case this.STATES_.KV_KEY:if("}"==t&&"{"==this.BRACETYPE_||")"==t&&"("==this.BRACETYPE_){this.processEntry_(),this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.STATE_=this.STATES_.ENTRY_OR_JUNK;break}/[\-A-Za-z:]/.test(t)?(this.PARSETMP_.Key+=t,this.SKIPWS_=!1,this.SKIPCOMMENT_=!1):this.PARSETMP_.Key.length<1?(this.SKIPWS_=!0,this.SKIPCOMMENT_=!0):(this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.STATE_=this.STATES_.EQUALS,e=!0);break;case this.STATES_.EQUALS:if("}"==t&&"{"==this.BRACETYPE_||")"==t&&"("==this.BRACETYPE_){this.error_('Key-value pair has key "'+this.PARSETMP_.Key+'", but no value.'),this.processEntry_(),this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.STATE_=this.STATES_.ENTRY_OR_JUNK;break}"="==t&&(this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.STATE_=this.STATES_.KV_VALUE,this.PARSETMP_.Value="",this.VALBRACES_={'"':[],"{":[]});break;case this.STATES_.KV_VALUE:var n=this.VALBRACES_,a=this.PARSETMP_.Value,s=!1;if('"'==t||"{"==t||"}"==t||","==t){if(","==t&&0===n['"'].length+n["{"].length){var o=this.PARSETMP_.Value.trim();o in this.MACROS_?this.PARSETMP_.Value=this.MACROS_[o]:this.error_("Reference to an undefined macro: "+o),s=!0}if('"'==t){if(0===n['"'].length+n["{"].length){n['"'].push(this.CHAR_),this.SKIPWS_=!1,this.SKIPCOMMENT_=!1;break}1!=n['"'].length||0!=n["{"].length||0!=a.length&&"\\"==a[a.length-1]||(s=!0)}if("{"==t&&(0!=a.length&&"\\"==a[a.length-1]||(n["{"].push(this.CHAR_),this.SKIPWS_=!1,this.SKIPCOMMENT_=!1)),"}"==t)if(0===n['"'].length+n["{"].length){var o=this.PARSETMP_.Value.trim();o in this.MACROS_?this.PARSETMP_.Value=this.MACROS_[o]:this.error_("Reference to an undefined macro: "+o),e=!0,s=!0}else 0!=a.length&&"\\"==a[a.length-1]||n["{"].length>0&&(n["{"].splice(n["{"].length-1,1),0==n["{"].length+n['"'].length&&(s=!0))}s?(this.SKIPWS_=!0,this.SKIPCOMMENT_=!0,this.STATE_=this.STATES_.KV_KEY,this.DATA_.Fields[this.PARSETMP_.Key]=this.PARSETMP_.Value,this.PARSETMP_={Key:""},this.VALBRACES_=null):this.PARSETMP_.Value+=t}}},this.CHARCONV_=[[/\\space /g," "],[/\\textdollar /g,"$"],[/\\textquotesingle /g,"'"],[/\\ast /g,"*"],[/\\textbackslash /g,"\\"],[/\\\^\{\}/g,"^"],[/\\textasciigrave /g,"`"],[/\\lbrace /g,"{"],[/\\vert /g,"|"],[/\\rbrace /g,"}"],[/\\textasciitilde /g,"~"],[/\\textexclamdown /g,""],[/\\textcent /g,""],[/\\textsterling /g,""],[/\\textcurrency /g,""],[/\\textyen /g,""],[/\\textbrokenbar /g,""],[/\\textsection /g,""],[/\\textasciidieresis /g,""],[/\\textcopyright /g,""],[/\\textordfeminine /g,""],[/\\guillemotleft /g,""],[/\\lnot /g,""],[/\\textregistered /g,""],[/\\textasciimacron /g,""],[/\\textdegree /g,""],[/\\pm /g,""],[/\\textasciiacute /g,""],[/\\mathrm\{\\mu\}/g,""],[/\\textparagraph /g,""],[/\\cdot /g,""],[/\\c\{\}/g,""],[/\\textordmasculine /g,""],[/\\guillemotright /g,""],[/\\textonequarter /g,""],[/\\textonehalf /g,""],[/\\textthreequarters /g,""],[/\\textquestiondown /g,""],[/\\`\{A\}/g,""],[/\\'\{A\}/g,""],[/\\\^\{A\}/g,""],[/\\~\{A\}/g,""],[/\\"\{A\}/g,""],[/\\AA /g,""],[/\\AE /g,""],[/\\c\{C\}/g,""],[/\\`\{E\}/g,""],[/\\'\{E\}/g,""],[/\\\^\{E\}/g,""],[/\\"\{E\}/g,""],[/\\`\{I\}/g,""],[/\\'\{I\}/g,""],[/\\\^\{I\}/g,""],[/\\"\{I\}/g,""],[/\\DH /g,""],[/\\~\{N\}/g,""],[/\\`\{O\}/g,""],[/\\'\{O\}/g,""],[/\\\^\{O\}/g,""],[/\\~\{O\}/g,""],[/\\"\{O\}/g,""],[/\\texttimes /g,""],[/\\O /g,""],[/\\`\{U\}/g,""],[/\\'\{U\}/g,""],[/\\\^\{U\}/g,""],[/\\"\{U\}/g,""],[/\\'\{Y\}/g,""],[/\\TH /g,""],[/\\ss /g,""],[/\\`\{a\}/g,""],[/\\'\{a\}/g,""],[/\\\^\{a\}/g,""],[/\\~\{a\}/g,""],[/\\"\{a\}/g,""],[/\\aa /g,""],[/\\ae /g,""],[/\\c\{c\}/g,""],[/\\`\{e\}/g,""],[/\\'\{e\}/g,""],[/\\\^\{e\}/g,""],[/\\"\{e\}/g,""],[/\\`\{\\i\}/g,""],[/\\'\{\\i\}/g,""],[/\\\^\{\\i\}/g,""],[/\\"\{\\i\}/g,""],[/\\dh /g,""],[/\\~\{n\}/g,""],[/\\`\{o\}/g,""],[/\\'\{o\}/g,""],[/\\\^\{o\}/g,""],[/\\~\{o\}/g,""],[/\\"\{o\}/g,""],[/\\div /g,""],[/\\o /g,""],[/\\`\{u\}/g,""],[/\\'\{u\}/g,""],[/\\\^\{u\}/g,""],[/\\"\{u\}/g,""],[/\\'\{y\}/g,""],[/\\th /g,""],[/\\"\{y\}/g,""],[/\\=\{A\}/g,""],[/\\=\{a\}/g,""],[/\\u\{A\}/g,""],[/\\u\{a\}/g,""],[/\\k\{A\}/g,""],[/\\k\{a\}/g,""],[/\\'\{C\}/g,""],[/\\'\{c\}/g,""],[/\\\^\{C\}/g,""],[/\\\^\{c\}/g,""],[/\\.\{C\}/g,""],[/\\.\{c\}/g,""],[/\\v\{C\}/g,""],[/\\v\{c\}/g,""],[/\\v\{D\}/g,""],[/\\v\{d\}/g,""],[/\\DJ /g,""],[/\\dj /g,""],[/\\=\{E\}/g,""],[/\\=\{e\}/g,""],[/\\u\{E\}/g,""],[/\\u\{e\}/g,""],[/\\.\{E\}/g,""],[/\\.\{e\}/g,""],[/\\k\{E\}/g,""],[/\\k\{e\}/g,""],[/\\v\{E\}/g,""],[/\\v\{e\}/g,""],[/\\\^\{G\}/g,""],[/\\\^\{g\}/g,""],[/\\u\{G\}/g,""],[/\\u\{g\}/g,""],[/\\.\{G\}/g,""],[/\\.\{g\}/g,""],[/\\c\{G\}/g,""],[/\\c\{g\}/g,""],[/\\\^\{H\}/g,""],[/\\\^\{h\}/g,""],[/\\Elzxh /g,""],[/\\~\{I\}/g,""],[/\\~\{\\i\}/g,""],[/\\=\{I\}/g,""],[/\\=\{\\i\}/g,""],[/\\u\{I\}/g,""],[/\\u\{\\i\}/g,""],[/\\k\{I\}/g,""],[/\\k\{i\}/g,""],[/\\.\{I\}/g,""],[/\\i /g,""],[/\\\^\{J\}/g,""],[/\\\^\{\\j\}/g,""],[/\\c\{K\}/g,""],[/\\c\{k\}/g,""],[/\\'\{L\}/g,""],[/\\'\{l\}/g,""],[/\\c\{L\}/g,""],[/\\c\{l\}/g,""],[/\\v\{L\}/g,""],[/\\v\{l\}/g,""],[/\\L /g,""],[/\\l /g,""],[/\\'\{N\}/g,""],[/\\'\{n\}/g,""],[/\\c\{N\}/g,""],[/\\c\{n\}/g,""],[/\\v\{N\}/g,""],[/\\v\{n\}/g,""],[/\\NG /g,""],[/\\ng /g,""],[/\\=\{O\}/g,""],[/\\=\{o\}/g,""],[/\\u\{O\}/g,""],[/\\u\{o\}/g,""],[/\\H\{O\}/g,""],[/\\H\{o\}/g,""],[/\\OE /g,""],[/\\oe /g,""],[/\\'\{R\}/g,""],[/\\'\{r\}/g,""],[/\\c\{R\}/g,""],[/\\c\{r\}/g,""],[/\\v\{R\}/g,""],[/\\v\{r\}/g,""],[/\\'\{S\}/g,""],[/\\'\{s\}/g,""],[/\\\^\{S\}/g,""],[/\\\^\{s\}/g,""],[/\\c\{S\}/g,""],[/\\c\{s\}/g,""],[/\\v\{S\}/g,""],[/\\v\{s\}/g,""],[/\\c\{T\}/g,""],[/\\c\{t\}/g,""],[/\\v\{T\}/g,""],[/\\v\{t\}/g,""],[/\\~\{U\}/g,""],[/\\~\{u\}/g,""],[/\\=\{U\}/g,""],[/\\=\{u\}/g,""],[/\\u\{U\}/g,""],[/\\u\{u\}/g,""],[/\\r\{U\}/g,""],[/\\r\{u\}/g,""],[/\\H\{U\}/g,""],[/\\H\{u\}/g,""],[/\\k\{U\}/g,""],[/\\k\{u\}/g,""],[/\\\^\{W\}/g,""],[/\\\^\{w\}/g,""],[/\\\^\{Y\}/g,""],[/\\\^\{y\}/g,""],[/\\"\{Y\}/g,""],[/\\'\{Z\}/g,""],[/\\'\{z\}/g,""],[/\\.\{Z\}/g,""],[/\\.\{z\}/g,""],[/\\v\{Z\}/g,""],[/\\v\{z\}/g,""],[/\\texthvlig /g,""],[/\\textnrleg /g,""],[/\\eth /g,""],[/\\textdoublepipe /g,""],[/\\'\{g\}/g,""],[/\\Elztrna /g,""],[/\\Elztrnsa /g,""],[/\\Elzopeno /g,""],[/\\Elzrtld /g,""],[/\\Elzschwa /g,""],[/\\varepsilon /g,""],[/\\Elzpgamma /g,""],[/\\Elzpbgam /g,""],[/\\Elztrnh /g,""],[/\\Elzbtdl /g,""],[/\\Elzrtll /g,""],[/\\Elztrnm /g,""],[/\\Elztrnmlr /g,""],[/\\Elzltlmr /g,""],[/\\Elzltln /g,""],[/\\Elzrtln /g,""],[/\\Elzclomeg /g,""],[/\\textphi /g,""],[/\\Elztrnr /g,""],[/\\Elztrnrl /g,""],[/\\Elzrttrnr /g,""],[/\\Elzrl /g,""],[/\\Elzrtlr /g,""],[/\\Elzfhr /g,""],[/\\Elzrtls /g,""],[/\\Elzesh /g,""],[/\\Elztrnt /g,""],[/\\Elzrtlt /g,""],[/\\Elzpupsil /g,""],[/\\Elzpscrv /g,""],[/\\Elzinvv /g,""],[/\\Elzinvw /g,""],[/\\Elztrny /g,""],[/\\Elzrtlz /g,""],[/\\Elzyogh /g,""],[/\\Elzglst /g,""],[/\\Elzreglst /g,""],[/\\Elzinglst /g,""],[/\\textturnk /g,""],[/\\Elzdyogh /g,""],[/\\Elztesh /g,""],[/\\textasciicaron /g,""],[/\\Elzverts /g,""],[/\\Elzverti /g,""],[/\\Elzlmrk /g,""],[/\\Elzhlmrk /g,""],[/\\Elzsbrhr /g,""],[/\\Elzsblhr /g,""],[/\\Elzrais /g,""],[/\\Elzlow /g,""],[/\\textasciibreve /g,""],[/\\textperiodcentered /g,""],[/\\r\{\}/g,""],[/\\k\{\}/g,""],[/\\texttildelow /g,""],[/\\H\{\}/g,""],[/\\tone\{55\}/g,""],[/\\tone\{44\}/g,""],[/\\tone\{33\}/g,""],[/\\tone\{22\}/g,""],[/\\tone\{11\}/g,""],[/\\cyrchar\\C/g,""],[/\\Elzpalh /g,""],[/\\Elzrh /g,""],[/\\Elzsbbrg /g,""],[/\\Elzxl /g,""],[/\\Elzbar /g,""],[/\\'\{A\}/g,""],[/\\'\{E\}/g,""],[/\\'\{H\}/g,""],[/\\'\{\}\{I\}/g,""],[/\\'\{\}O/g,""],[/\\mathrm\{'Y\}/g,""],[/\\mathrm\{'\\Omega\}/g,""],[/\\acute\{\\ddot\{\\iota\}\}/g,""],[/\\Alpha /g,""],[/\\Beta /g,""],[/\\Gamma /g,""],[/\\Delta /g,""],[/\\Epsilon /g,""],[/\\Zeta /g,""],[/\\Eta /g,""],[/\\Theta /g,""],[/\\Iota /g,""],[/\\Kappa /g,""],[/\\Lambda /g,""],[/\\Xi /g,""],[/\\Pi /g,""],[/\\Rho /g,""],[/\\Sigma /g,""],[/\\Tau /g,""],[/\\Upsilon /g,""],[/\\Phi /g,""],[/\\Chi /g,""],[/\\Psi /g,""],[/\\Omega /g,""],[/\\mathrm\{\\ddot\{I\}\}/g,""],[/\\mathrm\{\\ddot\{Y\}\}/g,""],[/\\'\{\$\\alpha\$\}/g,""],[/\\acute\{\\epsilon\}/g,""],[/\\acute\{\\eta\}/g,""],[/\\acute\{\\iota\}/g,""],[/\\acute\{\\ddot\{\\upsilon\}\}/g,""],[/\\alpha /g,""],[/\\beta /g,""],[/\\gamma /g,""],[/\\delta /g,""],[/\\epsilon /g,""],[/\\zeta /g,""],[/\\eta /g,""],[/\\texttheta /g,""],[/\\iota /g,""],[/\\kappa /g,""],[/\\lambda /g,""],[/\\mu /g,""],[/\\nu /g,""],[/\\xi /g,""],[/\\pi /g,""],[/\\rho /g,""],[/\\varsigma /g,""],[/\\sigma /g,""],[/\\tau /g,""],[/\\upsilon /g,""],[/\\varphi /g,""],[/\\chi /g,""],[/\\psi /g,""],[/\\omega /g,""],[/\\ddot\{\\iota\}/g,""],[/\\ddot\{\\upsilon\}/g,""],[/\\'\{o\}/g,""],[/\\acute\{\\upsilon\}/g,""],[/\\acute\{\\omega\}/g,""],[/\\Pisymbol\{ppi022\}\{87\}/g,""],[/\\textvartheta /g,""],[/\\Upsilon /g,""],[/\\phi /g,""],[/\\varpi /g,""],[/\\Stigma /g,""],[/\\Digamma /g,""],[/\\digamma /g,""],[/\\Koppa /g,""],[/\\Sampi /g,""],[/\\varkappa /g,""],[/\\varrho /g,""],[/\\textTheta /g,""],[/\\backepsilon /g,""],[/\\cyrchar\\CYRYO /g,""],[/\\cyrchar\\CYRDJE /g,""],[/\\cyrchar\{\\'\\CYRG\}/g,""],[/\\cyrchar\\CYRIE /g,""],[/\\cyrchar\\CYRDZE /g,""],[/\\cyrchar\\CYRII /g,""],[/\\cyrchar\\CYRYI /g,""],[/\\cyrchar\\CYRJE /g,""],[/\\cyrchar\\CYRLJE /g,""],[/\\cyrchar\\CYRNJE /g,""],[/\\cyrchar\\CYRTSHE /g,""],[/\\cyrchar\{\\'\\CYRK\}/g,""],[/\\cyrchar\\CYRUSHRT /g,""],[/\\cyrchar\\CYRDZHE /g,""],[/\\cyrchar\\CYRA /g,""],[/\\cyrchar\\CYRB /g,""],[/\\cyrchar\\CYRV /g,""],[/\\cyrchar\\CYRG /g,""],[/\\cyrchar\\CYRD /g,""],[/\\cyrchar\\CYRE /g,""],[/\\cyrchar\\CYRZH /g,""],[/\\cyrchar\\CYRZ /g,""],[/\\cyrchar\\CYRI /g,""],[/\\cyrchar\\CYRISHRT /g,""],[/\\cyrchar\\CYRK /g,""],[/\\cyrchar\\CYRL /g,""],[/\\cyrchar\\CYRM /g,""],[/\\cyrchar\\CYRN /g,""],[/\\cyrchar\\CYRO /g,""],[/\\cyrchar\\CYRP /g,""],[/\\cyrchar\\CYRR /g,""],[/\\cyrchar\\CYRS /g,""],[/\\cyrchar\\CYRT /g,""],[/\\cyrchar\\CYRU /g,""],[/\\cyrchar\\CYRF /g,""],[/\\cyrchar\\CYRH /g,""],[/\\cyrchar\\CYRC /g,""],[/\\cyrchar\\CYRCH /g,""],[/\\cyrchar\\CYRSH /g,""],[/\\cyrchar\\CYRSHCH /g,""],[/\\cyrchar\\CYRHRDSN /g,""],[/\\cyrchar\\CYRERY /g,""],[/\\cyrchar\\CYRSFTSN /g,""],[/\\cyrchar\\CYREREV /g,""],[/\\cyrchar\\CYRYU /g,""],[/\\cyrchar\\CYRYA /g,""],[/\\cyrchar\\cyra /g,""],[/\\cyrchar\\cyrb /g,""],[/\\cyrchar\\cyrv /g,""],[/\\cyrchar\\cyrg /g,""],[/\\cyrchar\\cyrd /g,""],[/\\cyrchar\\cyre /g,""],[/\\cyrchar\\cyrzh /g,""],[/\\cyrchar\\cyrz /g,""],[/\\cyrchar\\cyri /g,""],[/\\cyrchar\\cyrishrt /g,""],[/\\cyrchar\\cyrk /g,""],[/\\cyrchar\\cyrl /g,""],[/\\cyrchar\\cyrm /g,""],[/\\cyrchar\\cyrn /g,""],[/\\cyrchar\\cyro /g,""],[/\\cyrchar\\cyrp /g,""],[/\\cyrchar\\cyrr /g,""],[/\\cyrchar\\cyrs /g,""],[/\\cyrchar\\cyrt /g,""],[/\\cyrchar\\cyru /g,""],[/\\cyrchar\\cyrf /g,""],[/\\cyrchar\\cyrh /g,""],[/\\cyrchar\\cyrc /g,""],[/\\cyrchar\\cyrch /g,""],[/\\cyrchar\\cyrsh /g,""],[/\\cyrchar\\cyrshch /g,""],[/\\cyrchar\\cyrhrdsn /g,""],[/\\cyrchar\\cyrery /g,""],[/\\cyrchar\\cyrsftsn /g,""],[/\\cyrchar\\cyrerev /g,""],[/\\cyrchar\\cyryu /g,""],[/\\cyrchar\\cyrya /g,""],[/\\cyrchar\\cyryo /g,""],[/\\cyrchar\\cyrdje /g,""],[/\\cyrchar\{\\'\\cyrg\}/g,""],[/\\cyrchar\\cyrie /g,""],[/\\cyrchar\\cyrdze /g,""],[/\\cyrchar\\cyrii /g,""],[/\\cyrchar\\cyryi /g,""],[/\\cyrchar\\cyrje /g,""],[/\\cyrchar\\cyrlje /g,""],[/\\cyrchar\\cyrnje /g,""],[/\\cyrchar\\cyrtshe /g,""],[/\\cyrchar\{\\'\\cyrk\}/g,""],[/\\cyrchar\\cyrushrt /g,""],[/\\cyrchar\\cyrdzhe /g,""],[/\\cyrchar\\CYROMEGA /g,""],[/\\cyrchar\\cyromega /g,""],[/\\cyrchar\\CYRYAT /g,""],[/\\cyrchar\\CYRIOTE /g,""],[/\\cyrchar\\cyriote /g,""],[/\\cyrchar\\CYRLYUS /g,""],[/\\cyrchar\\cyrlyus /g,""],[/\\cyrchar\\CYRIOTLYUS /g,""],[/\\cyrchar\\cyriotlyus /g,""],[/\\cyrchar\\CYRBYUS /g,""],[/\\cyrchar\\CYRIOTBYUS /g,""],[/\\cyrchar\\cyriotbyus /g,""],[/\\cyrchar\\CYRKSI /g,""],[/\\cyrchar\\cyrksi /g,""],[/\\cyrchar\\CYRPSI /g,""],[/\\cyrchar\\cyrpsi /g,""],[/\\cyrchar\\CYRFITA /g,""],[/\\cyrchar\\CYRIZH /g,""],[/\\cyrchar\\CYRUK /g,""],[/\\cyrchar\\cyruk /g,""],[/\\cyrchar\\CYROMEGARND /g,""],[/\\cyrchar\\cyromegarnd /g,""],[/\\cyrchar\\CYROMEGATITLO /g,""],[/\\cyrchar\\cyromegatitlo /g,""],[/\\cyrchar\\CYROT /g,""],[/\\cyrchar\\cyrot /g,""],[/\\cyrchar\\CYRKOPPA /g,""],[/\\cyrchar\\cyrkoppa /g,""],[/\\cyrchar\\cyrthousands /g,""],[/\\cyrchar\\cyrhundredthousands /g,""],[/\\cyrchar\\cyrmillions /g,""],[/\\cyrchar\\CYRSEMISFTSN /g,""],[/\\cyrchar\\cyrsemisftsn /g,""],[/\\cyrchar\\CYRRTICK /g,""],[/\\cyrchar\\cyrrtick /g,""],[/\\cyrchar\\CYRGUP /g,""],[/\\cyrchar\\cyrgup /g,""],[/\\cyrchar\\CYRGHCRS /g,""],[/\\cyrchar\\cyrghcrs /g,""],[/\\cyrchar\\CYRGHK /g,""],[/\\cyrchar\\cyrghk /g,""],[/\\cyrchar\\CYRZHDSC /g,""],[/\\cyrchar\\cyrzhdsc /g,""],[/\\cyrchar\\CYRZDSC /g,""],[/\\cyrchar\\cyrzdsc /g,""],[/\\cyrchar\\CYRKDSC /g,""],[/\\cyrchar\\cyrkdsc /g,""],[/\\cyrchar\\CYRKVCRS /g,""],[/\\cyrchar\\cyrkvcrs /g,""],[/\\cyrchar\\CYRKHCRS /g,""],[/\\cyrchar\\cyrkhcrs /g,""],[/\\cyrchar\\CYRKBEAK /g,""],[/\\cyrchar\\cyrkbeak /g,""],[/\\cyrchar\\CYRNDSC /g,""],[/\\cyrchar\\cyrndsc /g,""],[/\\cyrchar\\CYRNG /g,""],[/\\cyrchar\\cyrng /g,""],[/\\cyrchar\\CYRPHK /g,""],[/\\cyrchar\\cyrphk /g,""],[/\\cyrchar\\CYRABHHA /g,""],[/\\cyrchar\\cyrabhha /g,""],[/\\cyrchar\\CYRSDSC /g,""],[/\\cyrchar\\cyrsdsc /g,""],[/\\cyrchar\\CYRTDSC /g,""],[/\\cyrchar\\cyrtdsc /g,""],[/\\cyrchar\\CYRY /g,""],[/\\cyrchar\\cyry /g,""],[/\\cyrchar\\CYRYHCRS /g,""],[/\\cyrchar\\cyryhcrs /g,""],[/\\cyrchar\\CYRHDSC /g,""],[/\\cyrchar\\cyrhdsc /g,""],[/\\cyrchar\\CYRTETSE /g,""],[/\\cyrchar\\cyrtetse /g,""],[/\\cyrchar\\CYRCHRDSC /g,""],[/\\cyrchar\\cyrchrdsc /g,""],[/\\cyrchar\\CYRCHVCRS /g,""],[/\\cyrchar\\cyrchvcrs /g,""],[/\\cyrchar\\CYRSHHA /g,""],[/\\cyrchar\\cyrshha /g,""],[/\\cyrchar\\CYRABHCH /g,""],[/\\cyrchar\\cyrabhch /g,""],[/\\cyrchar\\CYRABHCHDSC /g,""],[/\\cyrchar\\cyrabhchdsc /g,""],[/\\cyrchar\\CYRpalochka /g,""],[/\\cyrchar\\CYRKHK /g,""],[/\\cyrchar\\cyrkhk /g,""],[/\\cyrchar\\CYRNHK /g,""],[/\\cyrchar\\cyrnhk /g,""],[/\\cyrchar\\CYRCHLDSC /g,""],[/\\cyrchar\\cyrchldsc /g,""],[/\\cyrchar\\CYRAE /g,""],[/\\cyrchar\\cyrae /g,""],[/\\cyrchar\\CYRSCHWA /g,""],[/\\cyrchar\\cyrschwa /g,""],[/\\cyrchar\\CYRABHDZE /g,""],[/\\cyrchar\\cyrabhdze /g,""],[/\\cyrchar\\CYROTLD /g,""],[/\\cyrchar\\cyrotld /g,""],[/\\hspace\{0.6em\}/g,""],[/\\hspace\{1em\}/g,""],[/\\hspace\{0.33em\}/g,""],[/\\hspace\{0.25em\}/g,""],[/\\hspace\{0.166em\}/g,""],[/\\hphantom\{0\}/g,""],[/\\hphantom\{,\}/g,""],[/\\hspace\{0.167em\}/g,""],[/\\mkern1mu /g,""],[/\\textendash /g,""],[/\\textemdash /g,""],[/\\rule\{1em\}\{1pt\}/g,""],[/\\Vert /g,""],[/\\Elzreapos /g,""],[/\\textquotedblleft /g,""],[/\\textquotedblright /g,""],[/\\textdagger /g,""],[/\\textdaggerdbl /g,""],[/\\textbullet /g,""],[/\\ldots /g,""],[/\\textperthousand /g,""],[/\\textpertenthousand /g,""],[/\\backprime /g,""],[/\\guilsinglleft /g,""],[/\\guilsinglright /g,""],[/\\mkern4mu /g,""],[/\\nolinebreak /g,""],[/\\ensuremath\{\\Elzpes\}/g,""],[/\\mbox\{\\texteuro\} /g,""],[/\\dddot /g,""],[/\\ddddot /g,""],[/\\mathbb\{C\}/g,""],[/\\mathscr\{g\}/g,""],[/\\mathscr\{H\}/g,""],[/\\mathfrak\{H\}/g,""],[/\\mathbb\{H\}/g,""],[/\\hslash /g,""],[/\\mathscr\{I\}/g,""],[/\\mathfrak\{I\}/g,""],[/\\mathscr\{L\}/g,""],[/\\mathscr\{l\}/g,""],[/\\mathbb\{N\}/g,""],[/\\cyrchar\\textnumero /g,""],[/\\wp /g,""],[/\\mathbb\{P\}/g,""],[/\\mathbb\{Q\}/g,""],[/\\mathscr\{R\}/g,""],[/\\mathfrak\{R\}/g,""],[/\\mathbb\{R\}/g,""],[/\\Elzxrat /g,""],[/\\texttrademark /g,""],[/\\mathbb\{Z\}/g,""],[/\\Omega /g,""],[/\\mho /g,""],[/\\mathfrak\{Z\}/g,""],[/\\ElsevierGlyph\{2129\}/g,""],[/\\AA /g,""],[/\\mathscr\{B\}/g,""],[/\\mathfrak\{C\}/g,""],[/\\mathscr\{e\}/g,""],[/\\mathscr\{E\}/g,""],[/\\mathscr\{F\}/g,""],[/\\mathscr\{M\}/g,""],[/\\mathscr\{o\}/g,""],[/\\aleph /g,""],[/\\beth /g,""],[/\\gimel /g,""],[/\\daleth /g,""],[/\\textfrac\{1\}\{3\}/g,""],[/\\textfrac\{2\}\{3\}/g,""],[/\\textfrac\{1\}\{5\}/g,""],[/\\textfrac\{2\}\{5\}/g,""],[/\\textfrac\{3\}\{5\}/g,""],[/\\textfrac\{4\}\{5\}/g,""],[/\\textfrac\{1\}\{6\}/g,""],[/\\textfrac\{5\}\{6\}/g,""],[/\\textfrac\{1\}\{8\}/g,""],[/\\textfrac\{3\}\{8\}/g,""],[/\\textfrac\{5\}\{8\}/g,""],[/\\textfrac\{7\}\{8\}/g,""],[/\\leftarrow /g,""],[/\\uparrow /g,""],[/\\rightarrow /g,""],[/\\downarrow /g,""],[/\\leftrightarrow /g,""],[/\\updownarrow /g,""],[/\\nwarrow /g,""],[/\\nearrow /g,""],[/\\searrow /g,""],[/\\swarrow /g,""],[/\\nleftarrow /g,""],[/\\nrightarrow /g,""],[/\\arrowwaveright /g,""],[/\\arrowwaveright /g,""],[/\\twoheadleftarrow /g,""],[/\\twoheadrightarrow /g,""],[/\\leftarrowtail /g,""],[/\\rightarrowtail /g,""],[/\\mapsto /g,""],[/\\hookleftarrow /g,""],[/\\hookrightarrow /g,""],[/\\looparrowleft /g,""],[/\\looparrowright /g,""],[/\\leftrightsquigarrow /g,""],[/\\nleftrightarrow /g,""],[/\\Lsh /g,""],[/\\Rsh /g,""],[/\\ElsevierGlyph\{21B3\}/g,""],[/\\curvearrowleft /g,""],[/\\curvearrowright /g,""],[/\\circlearrowleft /g,""],[/\\circlearrowright /g,""],[/\\leftharpoonup /g,""],[/\\leftharpoondown /g,""],[/\\upharpoonright /g,""],[/\\upharpoonleft /g,""],[/\\rightharpoonup /g,""],[/\\rightharpoondown /g,""],[/\\downharpoonright /g,""],[/\\downharpoonleft /g,""],[/\\rightleftarrows /g,""],[/\\dblarrowupdown /g,""],[/\\leftrightarrows /g,""],[/\\leftleftarrows /g,""],[/\\upuparrows /g,""],[/\\rightrightarrows /g,""],[/\\downdownarrows /g,""],[/\\leftrightharpoons /g,""],[/\\rightleftharpoons /g,""],[/\\nLeftarrow /g,""],[/\\nLeftrightarrow /g,""],[/\\nRightarrow /g,""],[/\\Leftarrow /g,""],[/\\Uparrow /g,""],[/\\Rightarrow /g,""],[/\\Downarrow /g,""],[/\\Leftrightarrow /g,""],[/\\Updownarrow /g,""],[/\\Lleftarrow /g,""],[/\\Rrightarrow /g,""],[/\\rightsquigarrow /g,""],[/\\DownArrowUpArrow /g,""],[/\\forall /g,""],[/\\complement /g,""],[/\\partial /g,""],[/\\exists /g,""],[/\\nexists /g,""],[/\\varnothing /g,""],[/\\nabla /g,""],[/\\in /g,""],[/\\not\\in /g,""],[/\\ni /g,""],[/\\not\\ni /g,""],[/\\prod /g,""],[/\\coprod /g,""],[/\\sum /g,""],[/\\mp /g,""],[/\\dotplus /g,""],[/\\setminus /g,""],[/\\circ /g,""],[/\\bullet /g,""],[/\\surd /g,""],[/\\propto /g,""],[/\\infty /g,""],[/\\rightangle /g,""],[/\\angle /g,""],[/\\measuredangle /g,""],[/\\sphericalangle /g,""],[/\\mid /g,""],[/\\nmid /g,""],[/\\parallel /g,""],[/\\nparallel /g,""],[/\\wedge /g,""],[/\\vee /g,""],[/\\cap /g,""],[/\\cup /g,""],[/\\int /g,""],[/\\int\\!\\int /g,""],[/\\int\\!\\int\\!\\int /g,""],[/\\oint /g,""],[/\\surfintegral /g,""],[/\\volintegral /g,""],[/\\clwintegral /g,""],[/\\ElsevierGlyph\{2232\}/g,""],[/\\ElsevierGlyph\{2233\}/g,""],[/\\therefore /g,""],[/\\because /g,""],[/\\Colon /g,""],[/\\ElsevierGlyph\{2238\}/g,""],[/\\mathbin\{\{:\}\\!\\!\{\-\}\\!\\!\{:\}\}/g,""],[/\\homothetic /g,""],[/\\sim /g,""],[/\\backsim /g,""],[/\\lazysinv /g,""],[/\\wr /g,""],[/\\not\\sim /g,""],[/\\ElsevierGlyph\{2242\}/g,""],[/\\NotEqualTilde /g,"-00338"],[/\\simeq /g,""],[/\\not\\simeq /g,""],[/\\cong /g,""],[/\\approxnotequal /g,""],[/\\not\\cong /g,""],[/\\approx /g,""],[/\\not\\approx /g,""],[/\\approxeq /g,""],[/\\tildetrpl /g,""],[/\\not\\apid /g,"-00338"],[/\\allequal /g,""],[/\\asymp /g,""],[/\\Bumpeq /g,""],[/\\NotHumpDownHump /g,"-00338"],[/\\bumpeq /g,""],[/\\NotHumpEqual /g,"-00338"],[/\\doteq /g,""],[/\\not\\doteq/g,"-00338"],[/\\doteqdot /g,""],[/\\fallingdotseq /g,""],[/\\risingdotseq /g,""],[/\\eqcirc /g,""],[/\\circeq /g,""],[/\\estimates /g,""],[/\\ElsevierGlyph\{225A\}/g,""],[/\\starequal /g,""],[/\\triangleq /g,""],[/\\ElsevierGlyph\{225F\}/g,""],[/\\not =/g,""],[/\\equiv /g,""],[/\\not\\equiv /g,""],[/\\leq /g,""],[/\\geq /g,""],[/\\leqq /g,""],[/\\geqq /g,""],[/\\lneqq /g,""],[/\\lvertneqq /g,"-0FE00"],[/\\gneqq /g,""],[/\\gvertneqq /g,"-0FE00"],[/\\ll /g,""],[/\\NotLessLess /g,"-00338"],[/\\gg /g,""],[/\\NotGreaterGreater /g,"-00338"],[/\\between /g,""],[/\\not\\kern\-0.3em\\times /g,""],[/\\not</g,""],[/\\not>/g,""],[/\\not\\leq /g,""],[/\\not\\geq /g,""],[/\\lessequivlnt /g,""],[/\\greaterequivlnt /g,""],[/\\ElsevierGlyph\{2274\}/g,""],[/\\ElsevierGlyph\{2275\}/g,""],[/\\lessgtr /g,""],[/\\gtrless /g,""],[/\\notlessgreater /g,""],[/\\notgreaterless /g,""],[/\\prec /g,""],[/\\succ /g,""],[/\\preccurlyeq /g,""],[/\\succcurlyeq /g,""],[/\\precapprox /g,""],[/\\NotPrecedesTilde /g,"-00338"],[/\\succapprox /g,""],[/\\NotSucceedsTilde /g,"-00338"],[/\\not\\prec /g,""],[/\\not\\succ /g,""],[/\\subset /g,""],[/\\supset /g,""],[/\\not\\subset /g,""],[/\\not\\supset /g,""],[/\\subseteq /g,""],[/\\supseteq /g,""],[/\\not\\subseteq /g,""],[/\\not\\supseteq /g,""],[/\\subsetneq /g,""],[/\\varsubsetneqq /g,"-0FE00"],[/\\supsetneq /g,""],[/\\varsupsetneq /g,"-0FE00"],[/\\uplus /g,""],[/\\sqsubset /g,""],[/\\NotSquareSubset /g,"-00338"],[/\\sqsupset /g,""],[/\\NotSquareSuperset /g,"-00338"],[/\\sqsubseteq /g,""],[/\\sqsupseteq /g,""],[/\\sqcap /g,""],[/\\sqcup /g,""],[/\\oplus /g,""],[/\\ominus /g,""],[/\\otimes /g,""],[/\\oslash /g,""],[/\\odot /g,""],[/\\circledcirc /g,""],[/\\circledast /g,""],[/\\circleddash /g,""],[/\\boxplus /g,""],[/\\boxminus /g,""],[/\\boxtimes /g,""],[/\\boxdot /g,""],[/\\vdash /g,""],[/\\dashv /g,""],[/\\top /g,""],[/\\perp /g,""],[/\\truestate /g,""],[/\\forcesextra /g,""],[/\\Vdash /g,""],[/\\Vvdash /g,""],[/\\VDash /g,""],[/\\nvdash /g,""],[/\\nvDash /g,""],[/\\nVdash /g,""],[/\\nVDash /g,""],[/\\vartriangleleft /g,""],[/\\vartriangleright /g,""],[/\\trianglelefteq /g,""],[/\\trianglerighteq /g,""],[/\\original /g,""],[/\\image /g,""],[/\\multimap /g,""],[/\\hermitconjmatrix /g,""],[/\\intercal /g,""],[/\\veebar /g,""],[/\\rightanglearc /g,""],[/\\ElsevierGlyph\{22C0\}/g,""],[/\\ElsevierGlyph\{22C1\}/g,""],[/\\bigcap /g,""],[/\\bigcup /g,""],[/\\diamond /g,""],[/\\cdot /g,""],[/\\star /g,""],[/\\divideontimes /g,""],[/\\bowtie /g,""],[/\\ltimes /g,""],[/\\rtimes /g,""],[/\\leftthreetimes /g,""],[/\\rightthreetimes /g,""],[/\\backsimeq /g,""],[/\\curlyvee /g,""],[/\\curlywedge /g,""],[/\\Subset /g,""],[/\\Supset /g,""],[/\\Cap /g,""],[/\\Cup /g,""],[/\\pitchfork /g,""],[/\\lessdot /g,""],[/\\gtrdot /g,""],[/\\verymuchless /g,""],[/\\verymuchgreater /g,""],[/\\lesseqgtr /g,""],[/\\gtreqless /g,""],[/\\curlyeqprec /g,""],[/\\curlyeqsucc /g,""],[/\\not\\sqsubseteq /g,""],[/\\not\\sqsupseteq /g,""],[/\\Elzsqspne /g,""],[/\\lnsim /g,""],[/\\gnsim /g,""],[/\\precedesnotsimilar /g,""],[/\\succnsim /g,""],[/\\ntriangleleft /g,""],[/\\ntriangleright /g,""],[/\\ntrianglelefteq /g,""],[/\\ntrianglerighteq /g,""],[/\\vdots /g,""],[/\\cdots /g,""],[/\\upslopeellipsis /g,""],[/\\downslopeellipsis /g,""],[/\\barwedge /g,""],[/\\perspcorrespond /g,""],[/\\lceil /g,""],[/\\rceil /g,""],[/\\lfloor /g,""],[/\\rfloor /g,""],[/\\recorder /g,""],[/\\mathchar"2208/g,""],[/\\ulcorner /g,""],[/\\urcorner /g,""],[/\\llcorner /g,""],[/\\lrcorner /g,""],[/\\frown /g,""],[/\\smile /g,""],[/\\langle /g,""],[/\\rangle /g,""],[/\\ElsevierGlyph\{E838\}/g,""],[/\\Elzdlcorn /g,""],[/\\lmoustache /g,""],[/\\rmoustache /g,""],[/\\textvisiblespace /g,""],[/\\ding\{172\}/g,""],[/\\ding\{173\}/g,""],[/\\ding\{174\}/g,""],[/\\ding\{175\}/g,""],[/\\ding\{176\}/g,""],[/\\ding\{177\}/g,""],[/\\ding\{178\}/g,""],[/\\ding\{179\}/g,""],[/\\ding\{180\}/g,""],[/\\ding\{181\}/g,""],[/\\circledS /g,""],[/\\Elzdshfnc /g,""],[/\\Elzsqfnw /g,""],[/\\diagup /g,""],[/\\ding\{110\}/g,""],[/\\square /g,""],[/\\blacksquare /g,""],[/\\fbox\{~~\}/g,""],[/\\Elzvrecto /g,""],[/\\ElsevierGlyph\{E381\}/g,""],[/\\ding\{115\}/g,""],[/\\bigtriangleup /g,""],[/\\blacktriangle /g,""],[/\\vartriangle /g,""],[/\\blacktriangleright /g,""],[/\\triangleright /g,""],[/\\ding\{116\}/g,""],[/\\bigtriangledown /g,""],[/\\blacktriangledown /g,""],[/\\triangledown /g,""],[/\\blacktriangleleft /g,""],[/\\triangleleft /g,""],[/\\ding\{117\}/g,""],[/\\lozenge /g,""],[/\\bigcirc /g,""],[/\\ding\{108\}/g,""],[/\\Elzcirfl /g,""],[/\\Elzcirfr /g,""],[/\\Elzcirfb /g,""],[/\\ding\{119\}/g,""],[/\\Elzrvbull /g,""],[/\\Elzsqfl /g,""],[/\\Elzsqfr /g,""],[/\\Elzsqfse /g,""],[/\\bigcirc /g,""],[/\\ding\{72\}/g,""],[/\\ding\{73\}/g,""],[/\\ding\{37\}/g,""],[/\\ding\{42\}/g,""],[/\\ding\{43\}/g,""],[/\\rightmoon /g,""],[/\\mercury /g,""],[/\\venus /g,""],[/\\male /g,""],[/\\jupiter /g,""],[/\\saturn /g,""],[/\\uranus /g,""],[/\\neptune /g,""],[/\\pluto /g,""],[/\\aries /g,""],[/\\taurus /g,""],[/\\gemini /g,""],[/\\cancer /g,""],[/\\leo /g,""],[/\\virgo /g,""],[/\\libra /g,""],[/\\scorpio /g,""],[/\\sagittarius /g,""],[/\\capricornus /g,""],[/\\aquarius /g,""],[/\\pisces /g,""],[/\\ding\{171\}/g,""],[/\\diamond /g,""],[/\\ding\{168\}/g,""],[/\\ding\{170\}/g,""],[/\\ding\{169\}/g,""],[/\\quarternote /g,""],[/\\eighthnote /g,""],[/\\flat /g,""],[/\\natural /g,""],[/\\sharp /g,""],[/\\ding\{33\}/g,""],[/\\ding\{34\}/g,""],[/\\ding\{35\}/g,""],[/\\ding\{36\}/g,""],[/\\ding\{38\}/g,""],[/\\ding\{39\}/g,""],[/\\ding\{40\}/g,""],[/\\ding\{41\}/g,""],[/\\ding\{44\}/g,""],[/\\ding\{45\}/g,""],[/\\ding\{46\}/g,""],[/\\ding\{47\}/g,""],[/\\ding\{48\}/g,""],[/\\ding\{49\}/g,""],[/\\ding\{50\}/g,""],[/\\ding\{51\}/g,""],[/\\ding\{52\}/g,""],[/\\ding\{53\}/g,""],[/\\ding\{54\}/g,""],[/\\ding\{55\}/g,""],[/\\ding\{56\}/g,""],[/\\ding\{57\}/g,""],[/\\ding\{58\}/g,""],[/\\ding\{59\}/g,""],[/\\ding\{60\}/g,""],[/\\ding\{61\}/g,""],[/\\ding\{62\}/g,""],[/\\ding\{63\}/g,""],[/\\ding\{64\}/g,""],[/\\ding\{65\}/g,""],[/\\ding\{66\}/g,""],[/\\ding\{67\}/g,""],[/\\ding\{68\}/g,""],[/\\ding\{69\}/g,""],[/\\ding\{70\}/g,""],[/\\ding\{71\}/g,""],[/\\ding\{73\}/g,""],[/\\ding\{74\}/g,""],[/\\ding\{75\}/g,""],[/\\ding\{76\}/g,""],[/\\ding\{77\}/g,""],[/\\ding\{78\}/g,""],[/\\ding\{79\}/g,""],[/\\ding\{80\}/g,""],[/\\ding\{81\}/g,""],[/\\ding\{82\}/g,""],[/\\ding\{83\}/g,""],[/\\ding\{84\}/g,""],[/\\ding\{85\}/g,""],[/\\ding\{86\}/g,""],[/\\ding\{87\}/g,""],[/\\ding\{88\}/g,""],[/\\ding\{89\}/g,""],[/\\ding\{90\}/g,""],[/\\ding\{91\}/g,""],[/\\ding\{92\}/g,""],[/\\ding\{93\}/g,""],[/\\ding\{94\}/g,""],[/\\ding\{95\}/g,""],[/\\ding\{96\}/g,""],[/\\ding\{97\}/g,""],[/\\ding\{98\}/g,""],[/\\ding\{99\}/g,""],[/\\ding\{100\}/g,""],[/\\ding\{101\}/g,""],[/\\ding\{102\}/g,""],[/\\ding\{103\}/g,""],[/\\ding\{104\}/g,""],[/\\ding\{105\}/g,""],[/\\ding\{106\}/g,""],[/\\ding\{107\}/g,""],[/\\ding\{109\}/g,""],[/\\ding\{111\}/g,""],[/\\ding\{112\}/g,""],[/\\ding\{113\}/g,""],[/\\ding\{114\}/g,""],[/\\ding\{118\}/g,""],[/\\ding\{120\}/g,""],[/\\ding\{121\}/g,""],[/\\ding\{122\}/g,""],[/\\ding\{123\}/g,""],[/\\ding\{124\}/g,""],[/\\ding\{125\}/g,""],[/\\ding\{126\}/g,""],[/\\ding\{161\}/g,""],[/\\ding\{162\}/g,""],[/\\ding\{163\}/g,""],[/\\ding\{164\}/g,""],[/\\ding\{165\}/g,""],[/\\ding\{166\}/g,""],[/\\ding\{167\}/g,""],[/\\ding\{182\}/g,""],[/\\ding\{183\}/g,""],[/\\ding\{184\}/g,""],[/\\ding\{185\}/g,""],[/\\ding\{186\}/g,""],[/\\ding\{187\}/g,""],[/\\ding\{188\}/g,""],[/\\ding\{189\}/g,""],[/\\ding\{190\}/g,""],[/\\ding\{191\}/g,""],[/\\ding\{192\}/g,""],[/\\ding\{193\}/g,""],[/\\ding\{194\}/g,""],[/\\ding\{195\}/g,""],[/\\ding\{196\}/g,""],[/\\ding\{197\}/g,""],[/\\ding\{198\}/g,""],[/\\ding\{199\}/g,""],[/\\ding\{200\}/g,""],[/\\ding\{201\}/g,""],[/\\ding\{202\}/g,""],[/\\ding\{203\}/g,""],[/\\ding\{204\}/g,""],[/\\ding\{205\}/g,""],[/\\ding\{206\}/g,""],[/\\ding\{207\}/g,""],[/\\ding\{208\}/g,""],[/\\ding\{209\}/g,""],[/\\ding\{210\}/g,""],[/\\ding\{211\}/g,""],[/\\ding\{212\}/g,""],[/\\ding\{216\}/g,""],[/\\ding\{217\}/g,""],[/\\ding\{218\}/g,""],[/\\ding\{219\}/g,""],[/\\ding\{220\}/g,""],[/\\ding\{221\}/g,""],[/\\ding\{222\}/g,""],[/\\ding\{223\}/g,""],[/\\ding\{224\}/g,""],[/\\ding\{225\}/g,""],[/\\ding\{226\}/g,""],[/\\ding\{227\}/g,""],[/\\ding\{228\}/g,""],[/\\ding\{229\}/g,""],[/\\ding\{230\}/g,""],[/\\ding\{231\}/g,""],[/\\ding\{232\}/g,""],[/\\ding\{233\}/g,""],[/\\ding\{234\}/g,""],[/\\ding\{235\}/g,""],[/\\ding\{236\}/g,""],[/\\ding\{237\}/g,""],[/\\ding\{238\}/g,""],[/\\ding\{239\}/g,""],[/\\ding\{241\}/g,""],[/\\ding\{242\}/g,""],[/\\ding\{243\}/g,""],[/\\ding\{244\}/g,""],[/\\ding\{245\}/g,""],[/\\ding\{246\}/g,""],[/\\ding\{247\}/g,""],[/\\ding\{248\}/g,""],[/\\ding\{249\}/g,""],[/\\ding\{250\}/g,""],[/\\ding\{251\}/g,""],[/\\ding\{252\}/g,""],[/\\ding\{253\}/g,""],[/\\ding\{254\}/g,""],[/\\longleftarrow /g,""],[/\\longrightarrow /g,""],[/\\longleftrightarrow /g,""],[/\\Longleftarrow /g,""],[/\\Longrightarrow /g,""],[/\\Longleftrightarrow /g,""],[/\\longmapsto /g,""],[/\\sim\\joinrel\\leadsto/g,""],[/\\ElsevierGlyph\{E212\}/g,""],[/\\UpArrowBar /g,""],[/\\DownArrowBar /g,""],[/\\ElsevierGlyph\{E20C\}/g,""],[/\\ElsevierGlyph\{E20D\}/g,""],[/\\ElsevierGlyph\{E20B\}/g,""],[/\\ElsevierGlyph\{E20A\}/g,""],[/\\ElsevierGlyph\{E211\}/g,""],[/\\ElsevierGlyph\{E20E\}/g,""],[/\\ElsevierGlyph\{E20F\}/g,""],[/\\ElsevierGlyph\{E210\}/g,""],[/\\ElsevierGlyph\{E21C\}/g,""],[/\\ElsevierGlyph\{E21D\}/g,"-00338"],[/\\ElsevierGlyph\{E21A\}/g,""],[/\\ElsevierGlyph\{E219\}/g,""],[/\\Elolarr /g,""],[/\\Elorarr /g,""],[/\\ElzRlarr /g,""],[/\\ElzrLarr /g,""],[/\\Elzrarrx /g,""],[/\\LeftRightVector /g,""],[/\\RightUpDownVector /g,""],[/\\DownLeftRightVector /g,""],[/\\LeftUpDownVector /g,""],[/\\LeftVectorBar /g,""],[/\\RightVectorBar /g,""],[/\\RightUpVectorBar /g,""],[/\\RightDownVectorBar /g,""],[/\\DownLeftVectorBar /g,""],[/\\DownRightVectorBar /g,""],[/\\LeftUpVectorBar /g,""],[/\\LeftDownVectorBar /g,""],[/\\LeftTeeVector /g,""],[/\\RightTeeVector /g,""],[/\\RightUpTeeVector /g,""],[/\\RightDownTeeVector /g,""],[/\\DownLeftTeeVector /g,""],[/\\DownRightTeeVector /g,""],[/\\LeftUpTeeVector /g,""],[/\\LeftDownTeeVector /g,""],[/\\UpEquilibrium /g,""],[/\\ReverseUpEquilibrium /g,""],[/\\RoundImplies /g,""],[/\\ElsevierGlyph\{E214\}/g,""],[/\\ElsevierGlyph\{E215\}/g,""],[/\\Elztfnc /g,""],[/\\ElsevierGlyph\{3018\}/g,""],[/\\Elroang /g,""],[/\\ElsevierGlyph\{E291\}/g,""],[/\\Elzddfnc /g,""],[/\\Angle /g,""],[/\\Elzlpargt /g,""],[/\\ElsevierGlyph\{E260\}/g,""],[/\\ElsevierGlyph\{E61B\}/g,""],[/\\ElzLap /g,""],[/\\Elzdefas /g,""],[/\\LeftTriangleBar /g,""],[/\\NotLeftTriangleBar /g,"-00338"],[/\\RightTriangleBar /g,""],[/\\NotRightTriangleBar /g,"-00338"],[/\\ElsevierGlyph\{E372\}/g,""],[/\\blacklozenge /g,""],[/\\RuleDelayed /g,""],[/\\Elxuplus /g,""],[/\\ElzThr /g,""],[/\\Elxsqcup /g,""],[/\\ElzInf /g,""],[/\\ElzSup /g,""],[/\\ElzCint /g,""],[/\\clockoint /g,""],[/\\ElsevierGlyph\{E395\}/g,""],[/\\sqrint /g,""],[/\\ElsevierGlyph\{E25A\}/g,""],[/\\ElsevierGlyph\{E25B\}/g,""],[/\\ElsevierGlyph\{E25C\}/g,""],[/\\ElsevierGlyph\{E25D\}/g,""],[/\\ElzTimes /g,""],[/\\ElsevierGlyph\{E25E\}/g,""],[/\\ElsevierGlyph\{E25E\}/g,""],[/\\ElsevierGlyph\{E259\}/g,""],[/\\amalg /g,""],[/\\ElzAnd /g,""],[/\\ElzOr /g,""],[/\\ElsevierGlyph\{E36E\}/g,""],[/\\ElOr /g,""],[/\\perspcorrespond /g,""],[/\\Elzminhat /g,""],[/\\ElsevierGlyph\{225A\}/g,""],[/\\stackrel\{*\}\{=\}/g,""],[/\\Equal /g,""],[/\\leqslant /g,""],[/\\nleqslant /g,"-00338"],[/\\geqslant /g,""],[/\\ngeqslant /g,"-00338"],[/\\lessapprox /g,""],[/\\gtrapprox /g,""],[/\\lneq /g,""],[/\\gneq /g,""],[/\\lnapprox /g,""],[/\\gnapprox /g,""],[/\\lesseqqgtr /g,""],[/\\gtreqqless /g,""],[/\\eqslantless /g,""],[/\\eqslantgtr /g,""],[/\\Pisymbol\{ppi020\}\{117\}/g,""],[/\\Pisymbol\{ppi020\}\{105\}/g,""],[/\\NestedLessLess /g,""],[/\\NotNestedLessLess /g,"-00338"],[/\\NestedGreaterGreater /g,""],[/\\NotNestedGreaterGreater /g,"-00338"],[/\\preceq /g,""],[/\\not\\preceq /g,"-00338"],[/\\succeq /g,""],[/\\not\\succeq /g,"-00338"],[/\\precneqq /g,""],[/\\succneqq /g,""],[/\\precapprox /g,""],[/\\succapprox /g,""],[/\\precnapprox /g,""],[/\\succnapprox /g,""],[/\\subseteqq /g,""],[/\\nsubseteqq /g,"-00338"],[/\\supseteqq /g,""],[/\\nsupseteqq/g,"-00338"],[/\\subsetneqq /g,""],[/\\supsetneqq /g,""],[/\\ElsevierGlyph\{E30D\}/g,""],[/\\Elztdcol /g,""],[/\\ElsevierGlyph\{300A\}/g,""],[/\\ElsevierGlyph\{300B\}/g,""],[/\\ElsevierGlyph\{3018\}/g,""],[/\\ElsevierGlyph\{3019\}/g,""],[/\\openbracketleft /g,""],[/\\openbracketright /g,""]],this}void 0!==t&&t.exports&&(t.exports=i)},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(5),s=(n(a),i(71)),o=(n(s),i(4)),r=n(o),l=t.View.extend({tagName:"div",className:"citations",render:function(){return this.$el.append("<p>"+this.formattedReference()+"</p>"),this},formattedReference:function(){var t=this.model,e=t.entryType(),i=t.fields(),n="",a=this._asSentence((i.author?i.author:"")+(i.year?" ("+i.year+")":""))+" ",s=i.title||"",o=i.pages?"pp. "+i.pages:"",r=i.address;if("article"==e){var l=(i.volume?i.volume:"")+(i.number?" ("+i.number+")":"")+(o?", "+o:"");n=a+this._asSentence(s)+(i.journal?"In <em>"+i.journal+", ":"")+this._asSentence(l)+this._asSentence(i.address)+"</em>"}else n="inproceedings"==e||"proceedings"==e?a+this._asSentence(s)+(i.booktitle?"In <em>"+i.booktitle+", ":"")+(o||"")+(r?", "+r:"")+".</em>":"mastersthesis"==e||"phdthesis"==e?a+this._asSentence(s)+(i.howpublished?i.howpublished+". ":"")+(i.note?i.note+".":""):"techreport"==e?a+this._asSentence(s)+this._asSentence(i.institution)+this._asSentence(i.number)+this._asSentence(i.type):"book"==e||"inbook"==e||"incollection"==e?a+" "+this._formatBookInfo(i):a+" "+this._asSentence(s)+this._asSentence(i.howpublished)+this._asSentence(i.note);var h="";i.doi&&(h="http://dx.doi.org/"+i.doi,n+='[<a href="'+h+'" target="_blank">doi:'+i.doi+"</a>]");var c=i.url||h;return c&&(n+='[<a href="'+c+'" target="_blank">Link</a>]'),n},_formatBookInfo:function(t){var e="";return t.chapter&&(e+=t.chapter+" in "),t.title&&(e+="<em>"+t.title+"</em>"),t.editor&&(e+=", Edited by "+t.editor+", "),t.publisher&&(e+=", "+t.publisher),t.pages&&(e+=", pp. "+t.pages),t.series&&(e+=", <em>"+t.series+"</em>"),t.volume&&(e+=", Vol."+t.volume),t.issn&&(e+=", ISBN: "+t.issn),e+"."},_asSentence:function(t){return t&&t.trim()?t+". ":""}}),h=t.View.extend({el:"#citations",initialize:function(){this.listenTo(this.collection,"add",this.renderCitation)},events:{"click .citations-to-bibtex":"showBibtex","click .citations-to-formatted":"showFormatted"},renderCitation:function(t){var e=new l({model:t});this.$(".citations-formatted").append(e.render().el);var i=this.$(".citations-bibtex-text");i.val(i.val()+"\n\r"+t.attributes.content)},render:function(){this.$el.html(this.citationsElement()),this.collection.each(function(t){this.renderCitation(t)},this),this.showFormatted()},showBibtex:function(){this.$(".citations-to-formatted").show(),this.$(".citations-to-bibtex").hide(),this.$(".citations-bibtex").show(),this.$(".citations-formatted").hide(),this.$(".citations-bibtex-text").select()},showFormatted:function(){this.$(".citations-to-formatted").hide(),this.$(".citations-to-bibtex").show(),this.$(".citations-bibtex").hide(),this.$(".citations-formatted").show()},partialWarningElement:function(){return this.collection.partial?['<div style="padding:5px 10px">',"<b>Warning: This is a experimental feature.</b> Most Galaxy tools will not annotate"," citations explicitly at this time. When writing up your analysis, please manually"," review your histories and find all references"," that should be cited in order to completely describe your work. Also, please remember to",' <a href="https://galaxyproject.org/citing-galaxy">cite Galaxy</a>.',"</div>"].join(""):""},citationsElement:function(){return['<div class="toolForm">','<div class="toolFormTitle">',(0,r.default)("Citations"),' <button type="button" class="btn btn-xs citations-to-bibtex" title="Show all in BibTeX format."><i class="fa fa-pencil-square-o"></i> Show BibTeX</button>',' <button type="button" class="btn btn-xs citations-to-formatted" title="Return to formatted citation list."><i class="fa fa-times"></i> Hide BibTeX</button>',"</div>",'<div class="toolFormBody" style="padding:5px 10px">',this.partialWarningElement(),'<span class="citations-formatted" style="word-wrap: break-word;"></span>',"</div>",'<div class="citations-bibtex toolFormBody" style="padding:5px 10px">','<textarea style="width: 100%; height: 500px;" class="citations-bibtex-text"></textarea>',"</div>","</div>"].join("")}});e.default={CitationView:l,CitationListView:h}}).call(e,i(2))},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i(19),a=function(t){return t&&t.__esModule?t:{default:t}}(n),s=i(132),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),r=a.default.GenomeDataManager.extend({load_data:function(e,i,n,a){var s=t.Deferred();this.set_data(e,s);var r=Galaxy.root+"datasets/"+this.get("dataset").id+"/display",l=this;new t.Deferred;return t.when(o.makeBwg(r)).then(function(i,n){t.when(i.readWigData(e.get("chrom"),e.get("start"),e.get("end"))).then(function(t){var i=[],n={max:Number.MIN_VALUE};t.forEach(function(t){n.max!==t.min-1&&(i.push([n.max+1,0]),i.push([t.min-2,0])),i.push([t.min-1,t.score]),i.push([t.max,t.score]),n=t});var a={data:i,region:e,dataset_type:"bigwig"};l.set_data(e,a),s.resolve(a)})}),s}});e.default={BBIDataManager:r}}).call(e,i(0))},function(t,e,i){(function(n){var a,s;a=[i(133),i(134),i(135)],void 0!==(s=function(t,e){"use strict";function i(){}function a(t){t&&(this.id=t)}function s(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function o(t,e,i){Math.pow(10,6);return n.ajax({type:"GET",dataType:"native",url:t,timeout:5e3,beforeSend:function(t){t.setRequestHeader("Range","bytes="+e+"-"+(e+(i-1)))},xhrFields:{responseType:"arraybuffer"}})}function r(t,e){return t[e]+t[e+1]*w+t[e+2]*x+t[e+3]*k+t[e+4]*C}function l(){}function h(t,e,i,n){this.bwg=t,this.cirTreeOffset=e,this.cirTreeLength=i,this.isSummary=n}function c(t){var e=n.Deferred(),i=new l;return i.url=t,n.when(o(i.url,0,512)).then(function(t){if(!t)return e.resolve(null,"Couldn't fetch file");var a=t,s=new Uint8Array(a),o=new Int16Array(a),l=new Int32Array(a),h=s[0]+w*s[1]+x*s[2]+k*s[3];if(h==v)i.type="bigwig";else{if(h!=b)return h==_||h==y?e.resolve(null,"Currently don't support big-endian BBI files"):e.resolve(null,"Not a supported format, magic=0x"+h.toString(16));i.type="bigbed"}i.version=o[2],i.numZoomLevels=o[3],i.chromTreeOffset=r(s,8),i.unzoomedDataOffset=r(s,16),i.unzoomedIndexOffset=r(s,24),i.fieldCount=o[16],i.definedFieldCount=o[17],i.asOffset=r(s,36),i.totalSummaryOffset=r(s,44),i.uncompressBufSize=l[13],i.extHeaderOffset=r(s,56),i.zoomLevels=[];for(var c=0;c<i.numZoomLevels;++c){var u=l[6*c+16],d=r(s,24*c+72),f=r(s,24*c+80);i.zoomLevels.push({reduction:u,dataOffset:d,indexOffset:f})}n.when(i.readChromTree()).then(function(){i.getAutoSQL(function(t){return i.schema=t,e.resolve(i)})})}),e}function u(t,e,i,n,a){this.bbi=t,this.type=e,this.fieldCount=i,this.offset=n,this.field=a}var d=t.Range,f=t.union,p=t.intersection,g=e.inflateBuffer,m=e.arrayCopy,v=2291137574,_=654086024,b=2273964779,y=3958540679,w=256,x=65536,k=16777216,C=4294967296,S=new RegExp("^[0-9]+,[0-9]+,[0-9]+");return l.prototype.readChromTree=function(){var t=this;this.chromsToIDs={},this.idsToChroms={},this.maxID=0;var e=this.unzoomedDataOffset;return e=e+4-(e-this.chromTreeOffset&3),n.when(o(this.url,this.chromTreeOffset,e-this.chromTreeOffset)).then(function(e){var i=new Uint8Array(e),n=new Int16Array(e),a=new Int32Array(e),s=(a[0],a[1],a[2]),o=(a[3],r(i,16),function(e){var a=i[e],l=n[e/2+1];e+=4;for(var h=0;h<l;++h)if(0===a){e+=s;var c=r(i,e);e+=8,c-=t.chromTreeOffset,o(c)}else{for(var u="",d=0;d<s;++d){var f=i[e++];0!==f&&(u+=String.fromCharCode(f))}var p=i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e+0];i[e+7],i[e+6],i[e+5],i[e+4],e+=8,t.chromsToIDs[u]=p,0===u.indexOf("chr")&&(t.chromsToIDs[u.substr(3)]=p),t.idsToChroms[p]=u,t.maxID=Math.max(t.maxID,p)}});o(32)})},h.prototype.readWigData=function(t,e,i){var n=this.bwg.chromsToIDs[t];return void 0===n?[]:this.readWigDataById(n,e,i)},h.prototype.readWigDataById=function(t,e,i){var a=this,s=n.Deferred();if(!this.cirHeader)return n.when(o(a.bwg.url,this.cirTreeOffset,48)).then(function(o){a.cirHeader=o;var r=new Int32Array(a.cirHeader);a.cirBlockSize=r[1],n.when(a.readWigDataById(t,e,i)).then(function(t){s.resolve(t)})}),s;var l=[],h=0,c=(Date.now(),function(n,a,s,o){return(t<0||n==t)&&a<=i&&s>=e}),u=function(t,e){if(a.bwg.instrument&&console.log("level="+e+"; offset="+t+"; time="+(0|Date.now())),h+=t.length,1==t.length&&t[0]-a.cirTreeOffset==48&&a.cachedCirRoot)return g(a.cachedCirRoot,0,e),void(0===--h&&n.when(a.fetchFeatures(c,l)).then(function(t){s.resolve(t)}));for(var i,o=4+32*a.cirBlockSize,r=0;r<t.length;++r){var u=new d(t[r],t[r]+o);i=i?f(i,u):u}for(var m=i.ranges(),v=0;v<m.length;++v){var _=m[v];p(t,_,e)}},p=function(t,e,i,r){e.max(),e.min();n.when(o(a.bwg.url,e.min(),e.max()-e.min())).then(function(o){for(var r=0;r<t.length;++r)e.contains(t[r])&&(g(o,t[r]-e.min(),i),t[r]-a.cirTreeOffset==48&&t[r]-e.min()==0&&(a.cachedCirRoot=o),0===--h&&n.when(a.fetchFeatures(c,l)).then(function(t){s.resolve(t)}))})},g=function(n,a,s){var o=new Uint8Array(n),h=new Int16Array(n),c=new Int32Array(n),d=o[a],f=h[a/2+1];if(a+=4,0!==d)for(var p=0;p<f;++p){var g=a/4,m=c[g],v=c[g+1],_=c[g+2],b=c[g+3],y=r(o,a+16),w=r(o,a+24);(t<0||m<t||m==t&&v<=i)&&(t<0||_>t||_==t&&b>=e)&&l.push({offset:y,size:w}),a+=32}else{for(var x=[],p=0;p<f;++p){var g=a/4,m=c[g],v=c[g+1],_=c[g+2],b=c[g+3],y=r(o,a+16);(t<0||m<t||m==t&&v<=i)&&(t<0||_>t||_==t&&b>=e)&&x.push(y),a+=24}x.length>0&&u(x,s+1)}};return u([a.cirTreeOffset+48],1),s},h.prototype.fetchFeatures=function(t,e){var a=this,s=n.Deferred();if(e.sort(function(t,e){return(0|t.offset)-(0|e.offset)}),0===e.length)return[];var r=[],l=function(t,e,n,s){s||(s={});var o=new i;o._chromId=t,o.segment=a.bwg.idsToChroms[t],o.min=e,o.max=n,o.type=a.bwg.type;for(var l in s)o[l]=s[l];r.push(o)},h=function(){if(0===e.length){Date.now();return s.resolve(r)}var i=e[0];if(i.data)a.parseFeatures(i.data,l,t),e.splice(0,1),h();else{for(var c=i.offset,u=i.size,d=1;d<e.length&&e[d].offset==c+u;)u+=e[d].size,++d;n.when(o(a.bwg.url,c,u)).then(function(t){for(var i=0,n=0;i<u;){var s,o=e[n];if(a.bwg.uncompressBufSize>0)s=g(t,i+2,o.size-2);else{var r=new Uint8Array(o.size);m(new Uint8Array(t,i,o.size),0,r,0,o.size),s=r.buffer}o.data=s,i+=o.size,++n}h()})}};return h(),s},h.prototype.parseFeatures=function(t,e,i){var s=new Uint8Array(t);if(this.isSummary)for(var o=new Int16Array(t),r=new Int32Array(t),l=new Float32Array(t),h=t.byteLength/32,c=0;c<h;++c){var u=r[8*c],g=r[8*c+1],m=r[8*c+2],v=r[8*c+3],_=(l[8*c+4],l[8*c+5]),b=l[8*c+6];l[8*c+7];if(i(u,g+1,m)){var y={type:"bigwig",score:b/v,maxScore:_};"bigbed"==this.bwg.type&&(y.type="density"),e(u,g+1,m,y)}}else if("bigwig"==this.bwg.type){var o=new Int16Array(t),r=new Int32Array(t),l=new Float32Array(t),u=r[0],w=r[1],x=(r[2],r[3]),k=r[4],C=s[20],h=o[11];if(3==C)for(var c=0;c<h;++c){var T=l[c+6],E=w+c*x+1,A=w+c*x+k;i(u,E,A)&&e(u,E,A,{score:T})}else if(2==C)for(var c=0;c<h;++c){var g=r[2*c+6]+1,m=g+k-1,T=l[2*c+7];i(u,g,m)&&e(u,g,m,{score:T})}else if(1==C)for(var c=0;c<h;++c){var g=r[3*c+6]+1,m=r[3*c+7],T=l[3*c+8];g>m&&(g=m),i(u,g,m)&&e(u,g,m,{score:T})}else console.log("Currently not handling bwgType="+C)}else{if("bigbed"!=this.bwg.type)throw Error("Don't know what to do with "+this.bwg.type);for(var M=0,O=this.bwg.definedFieldCount,R=this.bwg.schema;M<s.length;){var u=s[M+3]<<24|s[M+2]<<16|s[M+1]<<8|s[M+0],g=s[M+7]<<24|s[M+6]<<16|s[M+5]<<8|s[M+4],m=s[M+11]<<24|s[M+10]<<16|s[M+9]<<8|s[M+8];M+=12;for(var $="";;){var D=s[M++];if(0==D)break;$+=String.fromCharCode(D)}var P,j={};if(P=$.length>0?$.split("\t"):[],P.length>0&&O>3&&(j.label=P[0]),P.length>1&&O>4){var T=parseInt(P[1]);isNaN(T)||(j.score=T)}if(P.length>2&&O>5&&(j.orientation=P[2]),P.length>5&&O>8){var I=P[5];S.test(I)&&(j.itemRgb="rgb("+I+")")}if(P.length>O-3&&R)for(var N=O-3;N<P.length;++N)j[R.fields[N+3].name]=P[N];if(i(u,g+1,m,P))if(O<12)e(u,g+1,m,j);else{var L=0|P[3],z=0|P[4],H=0|P[6],q=P[7].split(","),F=P[8].split(",");if(j.exonFrames){var V=j.exonFrames.split(",");j.exonFrames=void 0}j.type="transcript";var B=new a;for(var G in j)B[G]=j[G];if(B.id=P[0],B.segment=this.bwg.idsToChroms[u],B.min=g+1,B.max=m,B.notes=[],j.groups=[B],P.length>9){var W=j.geneName||P[9],U=W;P.length>10&&(U=P[10]),j.geneName2&&(U=j.geneName2);var Y=n.extend({},B);Y.id=W,Y.label=U,Y.type="gene",j.groups.push(Y)}for(var X=[],K=0;K<H;++K){var J=(0|F[K])+g,Q=J+(0|q[K]),Z=new d(J,Q);X.push(Z)}for(var tt=f(X),et=tt.ranges(),it=0;it<et.length;++it){var nt=et[it];e(u,nt.min()+1,nt.max(),j)}if(z>L){var at="+"==j.orientation?new d(L,z+3):new d(L-3,z),st=p(tt,at);if(st){j.type="translation";for(var ot=st.ranges(),rt=0,lt=0;ot[0].min()>et[lt].max();)lt++;for(var it=0;it<ot.length;++it){var ht=it;"-"==j.orientation&&(ht=ot.length-it-1);var nt=ot[ht];if(j.readframe=rt,V){var ct=parseInt(V[ht+lt]);"number"==typeof ct&&ct>=0&&ct<=2&&(j.readframe=ct,j.readframeExplicit=!0)}var ut=nt.max()-nt.min();rt=(rt+ut)%3,e(u,nt.min()+1,nt.max(),j)}}}}}}},h.prototype.getFirstAdjacent=function(t,e,i,n){var a=this.bwg.chromsToIDs[t];if(void 0===a)return n([]);this.getFirstAdjacentById(a,e,i,n)},h.prototype.getFirstAdjacentById=function(t,e,i,n){var a=this;if(!this.cirHeader)return void this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(s){a.cirHeader=s;var o=new Int32Array(a.cirHeader);a.cirBlockSize=o[1],a.getFirstAdjacentById(t,e,i,n)});var s=null,o=-1,l=-1,h=0,c=(Date.now(),function(t,e){h+=t.length;for(var i,n=4+32*a.cirBlockSize,s=0;s<t.length;++s){var o=new d(t[s],t[s]+n);i=i?f(i,o):o}for(var r=i.ranges(),l=0;l<r.length;++l){var c=r[l];u(t,c,e)}}),u=function(o,r,l,c){r.max(),r.min();a.bwg.data.slice(r.min(),r.max()-r.min()).fetch(function(c){for(var u=0;u<o.length;++u)if(r.contains(o[u])&&(p(c,o[u]-r.min(),l),0==--h)){if(!s)return i>0&&(0!=t||e>0)?a.getFirstAdjacentById(0,0,i,n):i<0&&(t!=a.bwg.maxID||e<1e9)?a.getFirstAdjacentById(a.bwg.maxID,1e9,i,n):n([]);a.fetchFeatures(function(n,a,s,o){return i<0&&(n<t||s<e)||i>0&&(n>t||a>e)},[s],function(t){for(var e=null,a=-1,s=-1,o=0;o<t.length;++o){var r=t[o],l=r._chromId,h=r.min,c=r.max;(null==e||i<0&&(l>a||c>s)||i>0&&(l<a||h<s))&&(e=r,s=i<0?c:h,a=l)}return n(null!=e?[e]:[])})}})},p=function(n,h,u){var d=new Uint8Array(n),f=new Int16Array(n),p=new Int32Array(n),g=d[h],m=f[h/2+1];if(h+=4,0!=g)for(var v=0;v<m;++v){var _=h/4,b=p[_],y=p[_+1],w=p[_+2],x=p[_+3],k=r(d,h+16),C=r(d,h+24);(i<0&&(b<t||b==t&&y<=e)||i>0&&(w>t||w==t&&x>=e))&&(/_random/.exec(a.bwg.idsToChroms[b])||(null==s||i<0&&(w>o||w==o&&x>l)||i>0&&(b<o||b==o&&y<l))&&(s={offset:k,size:C},l=i<0?x:y,o=i<0?w:b)),h+=32}else{for(var S=-1,T=-1,v=0;v<m;++v){var _=h/4,b=p[_],y=p[_+1],w=p[_+2],x=p[_+3],k=p[_+4]<<32|p[_+5];(i<0&&(b<t||b==t&&y<=e)&&w>=t||i>0&&(w>t||w==t&&x>=e)&&b<=t)&&(S<0||x>T)&&(S=k,T=i<0?x:y,i<0?w:b),h+=24}S>=0&&c([S],u+1)}};c([a.cirTreeOffset+48],1)},l.prototype.readWigData=function(t,e,i){var n,a=i-e;if(a<=25e3||0===this.zoomLevels.length)n=this.getUnzoomedView();else for(var s=0;s<this.zoomLevels.length;s++)if(a/this.zoomLevels[s].reduction<25e3){n=this.getZoomedView(s);break}return n.readWigData(t,e,i)},l.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var t=4e3;this.zoomLevels[0]&&(t=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset),this.unzoomedView=new h(this,this.unzoomedIndexOffset,t,!1)}return this.unzoomedView},l.prototype.getZoomedView=function(t){var e=this.zoomLevels[t];return e.view||(e.view=new h(this,e.indexOffset,4e3,!0)),e.view},l.prototype._tsFetch=function(t,e,i,n,a){var s=this;if(!(t>=this.zoomLevels.length-1)){var o;return o=t<0?this.getUnzoomedView():this.getZoomedView(t),o.readWigDataById(e,i,n,a)}if(this.topLevelReductionCache){for(var r=[],l=this.topLevelReductionCache,h=0;h<l.length;++h)l[h]._chromId==e&&r.push(l[h]);return a(r)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3e8,function(o){return s.topLevelReductionCache=o,s._tsFetch(t,e,i,n,a)})},l.prototype.thresholdSearch=function(t,e,i,n,a){function s(){if(0==l.length)return a(null);l.sort(function(t,e){var n=t.zoom-e.zoom;return 0!=n?n:(n=t.chrOrd-e.chrOrd,0!=n?n:t.min-e.min*i)});var t=l.splice(0,1)[0];o._tsFetch(t.zoom,t.chr,t.min,t.max,function(o){var r=i>0?0:3e8;t.fromRef&&(r=e);for(var h=0;h<o.length;++h){var c,u=o[h];if(c=void 0!=u.maxScore?u.maxScore:u.score,i>0){if(c>n)if(t.zoom<0){if(u.min>r)return a(u)}else u.max>r&&l.push({chr:t.chr,chrOrd:t.chrOrd,zoom:t.zoom-2,min:u.min,max:u.max,fromRef:t.fromRef})}else if(c>n)if(t.zoom<0){if(u.max<r)return a(u)}else u.min<r&&l.push({chr:t.chr,chrOrd:t.chrOrd,zoom:t.zoom-2,min:u.min,max:u.max,fromRef:t.fromRef})}s()})}i=i<0?-1:1;for(var o=this,r=this.chromsToIDs[t],l=[{chrOrd:0,chr:r,zoom:o.zoomLevels.length-4,min:0,max:3e8,fromRef:!0}],h=1;h<=this.maxID+1;++h){var c=(r+i*h)%(this.maxID+1);c<0&&(c+=this.maxID+1),l.push({chrOrd:h,chr:c,zoom:o.zoomLevels.length-1,min:0,max:3e8})}s()},l.prototype.getAutoSQL=function(t){if(!this.asOffset)return t(null);n.when(o(this.url,this.asOffset,2048)).then(function(e){for(var i=new Uint8Array(e),n="",a=0;a<i.length&&0!=i[a];++a)n+=String.fromCharCode(i[a]);var s=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/,o=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,r=s.exec(n);if(r){var l={declType:r[1],name:r[2],comment:r[4],fields:[]};n=n.substring(r[0]);for(var h=o.exec(n);null!=h;h=o.exec(n))l.fields.push({type:h[1],name:h[2],comment:h[4]});return t(l)}})},l.prototype.getExtraIndices=function(t){var e=this;if(this.version<4||0==this.extHeaderOffset||"bigbed"!=this.type)return t(null);this.data.slice(this.extHeaderOffset,64).fetch(function(i){if(!i)return t(null,"Couldn't fetch extension header");var n=new Uint8Array(i),a=new Int16Array(i),s=(new Int32Array(i),a[0],a[1]),o=r(n,4);if(0==s)return t(null);e.data.slice(o,20*s).fetch(function(i){if(!i)return t(null,"Couldn't fetch index info");for(var n=new Uint8Array(i),a=new Int16Array(i),o=(new Int32Array(i),[]),l=0;l<s;++l){var h=a[10*l],c=a[10*l+1],d=r(n,20*l+4),f=a[10*l+8],p=new u(e,h,c,d,f);o.push(p)}t(o)})})},u.prototype.lookup=function(t,e){var i=this;this.bbi.data.slice(this.offset,32).fetch(function(n){function a(n){i.bbi.data.slice(n,4+h*(c+u)).fetch(function(n){var o=new Uint8Array(n),l=new Uint16Array(n),h=(new Uint32Array(n),o[0]),d=l[1],f=4;if(0!=h){for(var p=0;p<d;++p){for(var g="",m=0;m<c;++m){var v=o[f++];0!=v&&(g+=String.fromCharCode(v))}if(g==t){var _=r(o,f),b=s(o,f+8);return i.bbi.getUnzoomedView().fetchFeatures(function(e,n,a,s){if(s&&s.length>i.field-3)return s[i.field-3]==t},[{offset:_,size:b}],e)}f+=u}return e([])}for(var y=null,p=0;p<d;++p){for(var g="",m=0;m<c;++m){var v=o[f++];0!=v&&(g+=String.fromCharCode(v))}var w=r(o,f);if(f+=8,t.localeCompare(g)<0&&y)return void a(y);y=w}a(y)})}var o=new Uint8Array(n),l=(new Int16Array(n),new Int32Array(n)),h=(l[0],l[1]),c=l[2],u=l[3];r(o,16);a(i.offset+32)})},{makeBwg:c}}.apply(e,a))&&(t.exports=s)}).call(e,i(0))},function(t,e,i){var n,a;n=[],void 0!==(a=function(){"use strict";function t(t,e){if("number"!=typeof t||"number"!=typeof e)throw"Bad range "+t+","+e;this._min=t,this._max=e}function e(t){var e=t.sort(o),i=[],n=e.shift();e.forEach(function(t){t._min<=n._max?t._max>n._max&&(n._max=t._max):(i.push(n),n=t)}),i.push(n),this._ranges=i}function i(t,i){return t instanceof e||(t instanceof Array||(t=[t]),t=new e(t)),i&&t.insertRange(i),t}function n(i,n){for(var a=i.ranges(),s=n.ranges(),o=a.length,r=s.length,l=0,h=0,c=[];l<o&&h<r;){var i=a[l],n=s[h],u=Math.max(i.min(),n.min()),d=Math.min(i.max(),n.max());d>=u&&c.push(new t(u,d)),i.max()>n.max()?++h:++l}return 0==c.length?null:1==c.length?c[0]:new e(c)}function a(t){for(var e=0,i=t.ranges(),n=0;n<i.length;++n){var a=i[n];e+=a.max()-a.min()+1}return e}function s(t,e){return t.min()<e.min()?-1:t.min()>e.min()?1:t.max()<e.max()?-1:e.max()>t.max()?1:0}function o(t,e){return t._min<e._min?-1:t._min>e._min?1:t._max<e._max?-1:e._max>t._max?1:0}return t.prototype.min=function(){return this._min},t.prototype.max=function(){return this._max},t.prototype.contains=function(t){return t>=this._min&&t<=this._max},t.prototype.isContiguous=function(){return!0},t.prototype.ranges=function(){return[this]},t.prototype._pushRanges=function(t){t.push(this)},t.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"},e.prototype.min=function(){return this._ranges[0].min()},e.prototype.max=function(){return this._ranges[this._ranges.length-1].max()},e.prototype.lower_bound=function(t){var e=this.ranges();if(t>this.max())return e.length;if(t<this.min())return 0;for(var i=0,n=e.length-1;i<=n;){var a=Math.floor((i+n)/2);if(t>e[a]._max)i=a+1;else{if(!(t<e[a]._min))return a;n=a-1}}return i},e.prototype.contains=function(t){var e=this.lower_bound(t);return!!(e<this._ranges.length&&this._ranges[e].contains(t))},e.prototype.insertRange=function(t){var e=this.lower_bound(t._min);if(e===this._ranges.length)return void this._ranges.push(t);var i=this.ranges();if(t._max<i[e]._min)return void this._ranges.splice(e,0,t);i[e]._min<t._min&&(t._min=i[e]._min);for(var n=e+1;n<i.length&&i[n]._min<=t._max;)n++;n--,i[n]._max>t._max&&(t._max=i[n]._max),this._ranges.splice(e,n-e+1,t)},e.prototype.isContiguous=function(){return this._ranges.length>1},e.prototype.ranges=function(){return this._ranges},e.prototype._pushRanges=function(t){for(var e=0;e<this._ranges.length;++e)t.push(this._ranges[e])},e.prototype.toString=function(){for(var t="",e=0;e<this._ranges.length;++e)e>0&&(t+=","),t+=this._ranges[e].toString();return t},{Range:t,union:i,intersection:n,coverage:a,rangeOver:s,_rangeOrder:o}}.apply(e,n))&&(t.exports=a)},function(t,e,i){var n,a;n=[],void 0!==(a=function(){function t(){}function e(){this.was=[0]}function i(t,e,i){this.hufts=new Int32Array(3*u),this.window=new Uint8Array(i),this.end=i,this.checkfn=e,this.mode=v,this.reset(t,null),this.left=0,this.table=0,this.index=0,this.blens=null,this.bb=new Int32Array(1),this.tb=new Int32Array(1),this.codes=new n,this.last=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.check=0,this.inftree=new a}function n(){}function a(){}function s(t,e,i,n,a){return t[0]=_,e[0]=b,i[0]=y,n[0]=w,f}function o(t,e,i,n,a){if(0!=a){if(!t)throw"Undef src";if(!i)throw"Undef dest";0==e&&a==t.length?l(t,i,n):M?l(t.subarray(e,e+a),i,n):1==t.BYTES_PER_ELEMENT&&a>100?l(new Uint8Array(t.buffer,t.byteOffset+e,a),i,n):r(t,e,i,n,a)}}function r(t,e,i,n,a){for(var s=0;s<a;++s)i[n+s]=t[e+s]}function l(t,e,i){e.set(t,i)}function h(e,i,n,a){e=i?n?new Uint8Array(e,i,n):new Uint8Array(e,i,e.byteLength-i):new Uint8Array(e);var s=new t;s.inflateInit(c,!0),s.next_in=e,s.next_in_index=0,s.avail_in=e.length;for(var r=[],l=0;;){var h=new Uint8Array(32e3);s.next_out=h,s.next_out_index=0,s.avail_out=h.length;var u=s.inflate(d);if(u!=f&&u!=p&&u!=g)throw s.msg;if(0!=s.avail_out){var m=new Uint8Array(h.length-s.avail_out);o(h,0,m,0,h.length-s.avail_out),h=m}if(r.push(h),l+=h.length,u==p||u==g)break}if(a&&(a[0]=(i||0)+s.next_in_index),1==r.length)return r[0].buffer;for(var v=new Uint8Array(l),_=0,b=0;b<r.length;++b){var y=r[b];o(y,0,v,_,y.length),_+=y.length}return v.buffer}var c=15,u=1440,d=0,f=0,p=1,g=-5,m=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],v=0,_=9,b=5,y=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],w=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];t.prototype.inflateInit=function(t,i){return t||(t=c),i&&(i=!1),this.istate=new e,this.istate.inflateInit(this,i?-t:t)},t.prototype.inflate=function(t){return null==this.istate?-2:this.istate.inflate(this,t)},t.prototype.inflateEnd=function(){if(null==this.istate)return-2;var t=istate.inflateEnd(this);return this.istate=null,t},t.prototype.inflateSync=function(){return istate.inflateSync(this)},t.prototype.inflateSetDictionary=function(t,e){return istate.inflateSetDictionary(this,t,e)},e.prototype.inflateReset=function(t){return null==t||null==t.istate?-2:(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=0!=t.istate.nowrap?7:0,t.istate.blocks.reset(t,null),f)},e.prototype.inflateEnd=function(t){return null!=this.blocks&&this.blocks.free(t),this.blocks=null,f},e.prototype.inflateInit=function(t,e){return t.msg=null,this.blocks=null,nowrap=0,e<0&&(e=-e,nowrap=1),e<8||e>15?(this.inflateEnd(t),-2):(this.wbits=e,t.istate.blocks=new i(t,0!=t.istate.nowrap?null:this,1<<e),this.inflateReset(t),f)},e.prototype.inflate=function(t,e){var i,n;if(null==t||null==t.istate||null==t.next_in)return-2;for(e=4==e?g:f,i=g;;)switch(t.istate.mode){case 0:if(0==t.avail_in)return i;if(i=e,t.avail_in--,t.total_in++,8!=(15&(t.istate.method=t.next_in[t.next_in_index++]))){t.istate.mode=13,t.msg="unknown compression method",t.istate.marker=5;break}if(8+(t.istate.method>>4)>t.istate.wbits){t.istate.mode=13,t.msg="invalid window size",t.istate.marker=5;break}t.istate.mode=1;case 1:if(0==t.avail_in)return i;if(i=e,t.avail_in--,t.total_in++,n=255&t.next_in[t.next_in_index++],((t.istate.method<<8)+n)%31!=0){t.istate.mode=13,t.msg="incorrect header check",t.istate.marker=5;break}if(0==(32&n)){t.istate.mode=7;break}t.istate.mode=2;case 2:if(0==t.avail_in)return i;i=e,t.avail_in--,t.total_in++,t.istate.need=(255&t.next_in[t.next_in_index++])<<24&4278190080,t.istate.mode=3;case 3:if(0==t.avail_in)return i;i=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<16&16711680,t.istate.mode=4;case 4:if(0==t.avail_in)return i;i=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<8&65280,t.istate.mode=5;case 5:return 0==t.avail_in?i:(i=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.next_in[t.next_in_index++],t.adler=t.istate.need,t.istate.mode=6,2);case 6:return t.istate.mode=13,t.msg="need dictionary",t.istate.marker=0,-2;case 7:if(-3==(i=t.istate.blocks.proc(t,i))){t.istate.mode=13,t.istate.marker=0;break}if(i==f&&(i=e),i!=p)return i;if(i=e,t.istate.blocks.reset(t,t.istate.was),0!=t.istate.nowrap){t.istate.mode=12;break}t.istate.mode=8;case 8:if(0==t.avail_in)return i;i=e,t.avail_in--,t.total_in++,t.istate.need=(255&t.next_in[t.next_in_index++])<<24&4278190080,t.istate.mode=9;case 9:if(0==t.avail_in)return i;i=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<16&16711680,t.istate.mode=10;case 10:if(0==t.avail_in)return i;i=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<8&65280,t.istate.mode=11;case 11:if(0==t.avail_in)return i;if(i=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.next_in[t.next_in_index++],t.istate.was[0]!=t.istate.need){t.istate.mode=13,t.msg="incorrect data check",t.istate.marker=5;break}t.istate.mode=12;case 12:return p;case 13:return-3;default:return-2}},e.prototype.inflateSetDictionary=function(t,e,i){var n=0,a=i;return null==t||null==t.istate||6!=t.istate.mode?-2:t._adler.adler32(1,e,0,i)!=t.adler?-3:(t.adler=t._adler.adler32(0,null,0,0),a>=1<<t.istate.wbits&&(a=(1<<t.istate.wbits)-1,n=i-a),t.istate.blocks.set_dictionary(e,n,a),t.istate.mode=7,f)};var T=[0,0,255,255];e.prototype.inflateSync=function(t){var e,i,n,a,s;if(null==t||null==t.istate)return-2;if(13!=t.istate.mode&&(t.istate.mode=13,t.istate.marker=0),0==(e=t.avail_in))return g;for(i=t.next_in_index,n=t.istate.marker;0!=e&&n<4;)t.next_in[i]==T[n]?n++:n=0!=t.next_in[i]?0:4-n,i++,e--;return t.total_in+=i-t.next_in_index,t.next_in_index=i,t.avail_in=e,t.istate.marker=n,4!=n?-3:(a=t.total_in,s=t.total_out,this.inflateReset(t),t.total_in=a,t.total_out=s,t.istate.mode=7,f)},e.prototype.inflateSyncPoint=function(t){return null==t||null==t.istate||null==t.istate.blocks?-2:t.istate.blocks.sync_point()};var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];i.prototype.reset=function(t,e){e&&(e[0]=this.check),6==this.mode&&this.codes.free(t),this.mode=v,this.bitk=0,this.bitb=0,this.read=this.write=0,this.checkfn&&(t.adler=this.check=t._adler.adler32(0,null,0,0))},i.prototype.proc=function(t,e){var i,n,a,r,l,h,c;for(r=t.next_in_index,l=t.avail_in,n=this.bitb,a=this.bitk,h=this.write,c=h<this.read?this.read-h-1:this.end-h;;)switch(this.mode){case v:for(;a<3;){if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);e=f,l--,n|=(255&t.next_in[r++])<<a,a+=8}switch(i=7&n,this.last=1&i,i>>>1){case 0:n>>>=3,a-=3,i=7&a,n>>>=i,a-=i,this.mode=1;break;case 1:var u=new Int32Array(1),d=new Int32Array(1),g=[],_=[];s(u,d,g,_,t),this.codes.init(u[0],d[0],g[0],0,_[0],0,t),n>>>=3,a-=3,this.mode=6;break;case 2:n>>>=3,a-=3,this.mode=3;break;case 3:return n>>>=3,a-=3,this.mode=13,t.msg="invalid block type",e=-3,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e)}break;case 1:for(;a<32;){if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);e=f,l--,n|=(255&t.next_in[r++])<<a,a+=8}if((~n>>>16&65535)!=(65535&n))return this.mode=13,t.msg="invalid stored block lengths",e=-3,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);this.left=65535&n,n=a=0,this.mode=0!=this.left?2:0!=this.last?7:v;break;case 2:if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,write=h,this.inflate_flush(t,e);if(0==c&&(h==end&&0!=read&&(h=0,c=h<this.read?this.read-h-1:this.end-h),0==c&&(this.write=h,e=this.inflate_flush(t,e),h=this.write,c=h<this.read?this.read-h-1:this.end-h,h==this.end&&0!=this.read&&(h=0,c=h<this.read?this.read-h-1:this.end-h),0==c)))return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);if(e=f,i=this.left,i>l&&(i=l),i>c&&(i=c),o(t.next_in,r,this.window,h,i),r+=i,l-=i,h+=i,c-=i,0!=(this.left-=i))break;this.mode=0!=this.last?7:v;break;case 3:for(;a<14;){if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);e=f,l--,n|=(255&t.next_in[r++])<<a,a+=8}if(this.table=i=16383&n,(31&i)>29||(i>>5&31)>29)return this.mode=9,t.msg="too many length or distance symbols",e=-3,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);if(i=258+(31&i)+(i>>5&31),null==this.blens||this.blens.length<i)this.blens=new Int32Array(i);else for(var b=0;b<i;b++)this.blens[b]=0;n>>>=14,a-=14,this.index=0,mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;a<3;){if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);e=f,l--,n|=(255&t.next_in[r++])<<a,a+=8}this.blens[E[this.index++]]=7&n,n>>>=3,a-=3}for(;this.index<19;)this.blens[E[this.index++]]=0;if(this.bb[0]=7,(i=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,t))!=f)return e=i,-3==e&&(this.blens=null,this.mode=9),this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,write=h,this.inflate_flush(t,e);this.index=0,this.mode=5;case 5:for(;;){if(i=this.table,!(this.index<258+(31&i)+(i>>5&31)))break;var b,y,w;for(i=this.bb[0];a<i;){if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);e=f,l--,n|=(255&t.next_in[r++])<<a,a+=8}if(i=this.hufts[3*(this.tb[0]+(n&m[i]))+1],(w=this.hufts[3*(this.tb[0]+(n&m[i]))+2])<16)n>>>=i,a-=i,this.blens[this.index++]=w;else{for(b=18==w?7:w-14,y=18==w?11:3;a<i+b;){if(0==l)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);e=f,l--,n|=(255&t.next_in[r++])<<a,a+=8}if(n>>>=i,a-=i,y+=n&m[b],n>>>=b,a-=b,b=this.index,i=this.table,b+y>258+(31&i)+(i>>5&31)||16==w&&b<1)return this.blens=null,this.mode=9,t.msg="invalid bit length repeat",e=-3,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);w=16==w?this.blens[b-1]:0;do{this.blens[b++]=w}while(0!=--y);this.index=b}}this.tb[0]=-1;var u=new Int32Array(1),d=new Int32Array(1),g=new Int32Array(1),_=new Int32Array(1);if(u[0]=9,d[0]=6,i=this.table,(i=this.inftree.inflate_trees_dynamic(257+(31&i),1+(i>>5&31),this.blens,u,d,g,_,this.hufts,t))!=f)return-3==i&&(this.blens=null,this.mode=13),e=i,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);this.codes.init(u[0],d[0],this.hufts,g[0],this.hufts,_[0],t),this.mode=6;case 6:if(this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,(e=this.codes.proc(this,t,e))!=p)return this.inflate_flush(t,e);if(e=f,this.codes.free(t),r=t.next_in_index,l=t.avail_in,n=this.bitb,a=this.bitk,h=this.write,c=h<this.read?this.read-h-1:this.end-h,0==this.last){this.mode=v;break}this.mode=7;case 7:if(this.write=h,e=this.inflate_flush(t,e),h=this.write,c=h<this.read?this.read-h-1:this.end-h,this.read!=this.write)return this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);mode=12;case 8:return e=p,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);case 9:return e=-3,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e);default:return e=-2,this.bitb=n,this.bitk=a,t.avail_in=l,t.total_in+=r-t.next_in_index,t.next_in_index=r,this.write=h,this.inflate_flush(t,e)}},i.prototype.free=function(t){this.reset(t,null),this.window=null,this.hufts=null},i.prototype.set_dictionary=function(t,e,i){o(t,e,window,0,i),this.read=this.write=i},i.prototype.sync_point=function(){return 1==this.mode},i.prototype.inflate_flush=function(t,e){var i,n,a;return n=t.next_out_index,a=this.read,i=(a<=this.write?this.write:this.end)-a,i>t.avail_out&&(i=t.avail_out),0!=i&&e==g&&(e=f),t.avail_out-=i,t.total_out+=i,null!=this.checkfn&&(t.adler=this.check=t._adler.adler32(this.check,this.window,a,i)),o(this.window,a,t.next_out,n,i),n+=i,a+=i,a==this.end&&(a=0,this.write==this.end&&(this.write=0),i=this.write-a,i>t.avail_out&&(i=t.avail_out),0!=i&&e==g&&(e=f),t.avail_out-=i,t.total_out+=i,null!=this.checkfn&&(t.adler=this.check=t._adler.adler32(this.check,this.window,a,i)),o(this.window,a,t.next_out,n,i),n+=i,a+=i),t.next_out_index=n,this.read=a,e};n.prototype.init=function(t,e,i,n,a,s,o){this.mode=0,this.lbits=t,this.dbits=e,this.ltree=i,this.ltree_index=n,this.dtree=a,this.dtree_index=s,this.tree=null},n.prototype.proc=function(t,e,i){var n,a,s,o,r,l,h,c=0,u=0,d=0;for(d=e.next_in_index,o=e.avail_in,c=t.bitb,u=t.bitk,r=t.write,l=r<t.read?t.read-r-1:t.end-r;;)switch(this.mode){case 0:if(l>=258&&o>=10&&(t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,i=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,t,e),d=e.next_in_index,o=e.avail_in,c=t.bitb,u=t.bitk,r=t.write,l=r<t.read?t.read-r-1:t.end-r,i!=f)){this.mode=i==p?7:9;break}this.need=this.lbits,this.tree=this.ltree,this.tree_index=this.ltree_index,this.mode=1;case 1:for(n=this.need;u<n;){if(0==o)return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);i=f,o--,c|=(255&e.next_in[d++])<<u,u+=8}if(a=3*(this.tree_index+(c&m[n])),c>>>=this.tree[a+1],u-=this.tree[a+1],0==(s=this.tree[a])){this.lit=this.tree[a+2],this.mode=6;break}if(0!=(16&s)){this.get=15&s,this.len=this.tree[a+2],this.mode=2;break}if(0==(64&s)){this.need=s,this.tree_index=a/3+this.tree[a+2];break}if(0!=(32&s)){this.mode=7;break}return this.mode=9,e.msg="invalid literal/length code",i=-3,t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);case 2:for(n=this.get;u<n;){if(0==o)return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);i=f,o--,c|=(255&e.next_in[d++])<<u,u+=8}this.len+=c&m[n],c>>=n,u-=n,this.need=this.dbits,this.tree=this.dtree,this.tree_index=this.dtree_index,this.mode=3;case 3:for(n=this.need;u<n;){if(0==o)return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);i=f,o--,c|=(255&e.next_in[d++])<<u,u+=8}if(a=3*(this.tree_index+(c&m[n])),c>>=this.tree[a+1],u-=this.tree[a+1],0!=(16&(s=this.tree[a]))){this.get=15&s,this.dist=this.tree[a+2],this.mode=4;break}if(0==(64&s)){this.need=s,this.tree_index=a/3+this.tree[a+2];break}return this.mode=9,e.msg="invalid distance code",i=-3,t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);case 4:for(n=this.get;u<n;){if(0==o)return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);i=f,o--,c|=(255&e.next_in[d++])<<u,u+=8}this.dist+=c&m[n],c>>=n,u-=n,this.mode=5;case 5:for(h=r-this.dist;h<0;)h+=t.end;for(;0!=this.len;){if(0==l&&(r==t.end&&0!=t.read&&(r=0,l=r<t.read?t.read-r-1:t.end-r),0==l&&(t.write=r,i=t.inflate_flush(e,i),r=t.write,l=r<t.read?t.read-r-1:t.end-r,r==t.end&&0!=t.read&&(r=0,l=r<t.read?t.read-r-1:t.end-r),0==l)))return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);t.window[r++]=t.window[h++],l--,h==t.end&&(h=0),this.len--}this.mode=0;break;case 6:if(0==l&&(r==t.end&&0!=t.read&&(r=0,l=r<t.read?t.read-r-1:t.end-r),0==l&&(t.write=r,i=t.inflate_flush(e,i),r=t.write,l=r<t.read?t.read-r-1:t.end-r,r==t.end&&0!=t.read&&(r=0,l=r<t.read?t.read-r-1:t.end-r),0==l)))return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);i=f,t.window[r++]=this.lit,l--,this.mode=0;break;case 7:if(u>7&&(u-=8,o++,d--),t.write=r,i=t.inflate_flush(e,i),r=t.write,l=r<t.read?t.read-r-1:t.end-r,t.read!=t.write)return t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);this.mode=8;case 8:return i=p,t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);case 9:return i=-3,t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i);default:return i=-2,t.bitb=c,t.bitk=u,e.avail_in=o,e.total_in+=d-e.next_in_index,e.next_in_index=d,t.write=r,t.inflate_flush(e,i)}},n.prototype.free=function(t){},n.prototype.inflate_fast=function(t,e,i,n,a,s,r,l){var h,c,u,d,g,v,_,b,y,w,x,k,C,S,T,E;_=l.next_in_index,b=l.avail_in,g=r.bitb,v=r.bitk,y=r.write,w=y<r.read?r.read-y-1:r.end-y,x=m[t],k=m[e];do{for(;v<20;)b--,g|=(255&l.next_in[_++])<<v,v+=8;if(h=g&x,c=i,u=n,E=3*(u+h),0!=(d=c[E]))for(;;){if(g>>=c[E+1],v-=c[E+1],0!=(16&d)){for(d&=15,C=c[E+2]+(g&m[d]),g>>=d,v-=d;v<15;)b--,g|=(255&l.next_in[_++])<<v,v+=8;for(h=g&k,c=a,u=s,E=3*(u+h),d=c[E];;){if(g>>=c[E+1],v-=c[E+1],0!=(16&d)){for(d&=15;v<d;)b--,g|=(255&l.next_in[_++])<<v,v+=8;if(S=c[E+2]+(g&m[d]),g>>=d,v-=d,w-=C,y>=S)T=y-S,r.window[y++]=r.window[T++],r.window[y++]=r.window[T++],C-=2;else{T=y-S;do{T+=r.end}while(T<0);if(d=r.end-T,C>d){if(C-=d,y-T>0&&d>y-T)do{r.window[y++]=r.window[T++]}while(0!=--d);else o(r.window,T,r.window,y,d),y+=d,T+=d,d=0;T=0}}do{r.window[y++]=r.window[T++]}while(0!=--C);break}if(0!=(64&d))return l.msg="invalid distance code",C=l.avail_in-b,C=v>>3<C?v>>3:C,b+=C,_-=C,v-=C<<3,r.bitb=g,r.bitk=v,l.avail_in=b,l.total_in+=_-l.next_in_index,l.next_in_index=_,r.write=y,-3;h+=c[E+2],h+=g&m[d],E=3*(u+h),d=c[E]}break}if(0!=(64&d))return 0!=(32&d)?(C=l.avail_in-b,C=v>>3<C?v>>3:C,b+=C,_-=C,v-=C<<3,r.bitb=g,r.bitk=v,l.avail_in=b,l.total_in+=_-l.next_in_index,l.next_in_index=_,r.write=y,p):(l.msg="invalid literal/length code",C=l.avail_in-b,C=v>>3<C?v>>3:C,b+=C,_-=C,v-=C<<3,r.bitb=g,r.bitk=v,l.avail_in=b,l.total_in+=_-l.next_in_index,l.next_in_index=_,r.write=y,-3);if(h+=c[E+2],h+=g&m[d],E=3*(u+h),0==(d=c[E])){g>>=c[E+1],v-=c[E+1],r.window[y++]=c[E+2],w--;break}}else g>>=c[E+1],v-=c[E+1],r.window[y++]=c[E+2],w--}while(w>=258&&b>=10);return C=l.avail_in-b,C=v>>3<C?v>>3:C,b+=C,_-=C,v-=C<<3,r.bitb=g,r.bitk=v,l.avail_in=b,l.total_in+=_-l.next_in_index,l.next_in_index=_,r.write=y,f},a.prototype.huft_build=function(t,e,i,n,a,s,r,l,h,c,d){var p,m,v,_,b,y,w,x,k,C,S,T,E,A,M;C=0,b=i;do{this.c[t[e+C]]++,C++,b--}while(0!=b);if(this.c[0]==i)return r[0]=-1,l[0]=0,f;for(x=l[0],y=1;y<=15&&0==this.c[y];y++);for(w=y,x<y&&(x=y),b=15;0!=b&&0==this.c[b];b--);for(v=b,x>b&&(x=b),l[0]=x,A=1<<y;y<b;y++,A<<=1)if((A-=this.c[y])<0)return-3;if((A-=this.c[b])<0)return-3;for(this.c[b]+=A,this.x[1]=y=0,C=1,E=2;0!=--b;)this.x[E]=y+=this.c[C],E++,C++;b=0,C=0;do{0!=(y=t[e+C])&&(this.v[this.x[y]++]=b),C++}while(++b<i);for(i=this.x[v],this.x[0]=b=0,C=0,_=-1,T=-x,this.u[0]=0,S=0,M=0;w<=v;w++)for(p=this.c[w];0!=p--;){for(;w>T+x;){if(_++,T+=x,M=v-T,M=M>x?x:M,(m=1<<(y=w-T))>p+1&&(m-=p+1,E=w,y<M))for(;++y<M&&!((m<<=1)<=this.c[++E]);)m-=this.c[E];if(M=1<<y,this.hn[0]+M>u)return-3;this.u[_]=S=this.hn[0],this.hn[0]+=M,0!=_?(this.x[_]=b,this.r[0]=y,this.r[1]=x,y=b>>>T-x,this.r[2]=S-this.u[_-1]-y,o(this.r,0,h,3*(this.u[_-1]+y),3)):r[0]=S}for(this.r[1]=w-T,C>=i?this.r[0]=192:d[C]<n?(this.r[0]=this.v[C]<256?0:96,this.r[2]=this.v[C++]):(this.r[0]=s[this.v[C]-n]+16+64,this.r[2]=a[this.v[C++]-n]),m=1<<w-T,y=b>>>T;y<M;y+=m)o(this.r,0,h,3*(S+y),3);for(y=1<<w-1;0!=(b&y);y>>>=1)b^=y;for(b^=y,k=(1<<T)-1;(b&k)!=this.x[_];)_--,T-=x,k=(1<<T)-1}return 0!=A&&1!=v?g:f},a.prototype.inflate_trees_bits=function(t,e,i,n,a){var s;return this.initWorkArea(19),this.hn[0]=0,s=this.huft_build(t,0,19,19,null,null,i,e,n,this.hn,this.v),-3==s?a.msg="oversubscribed dynamic bit lengths tree":s!=g&&0!=e[0]||(a.msg="incomplete dynamic bit lengths tree",s=-3),s},a.prototype.inflate_trees_dynamic=function(t,e,i,n,a,s,o,r,l){var h;return this.initWorkArea(288),this.hn[0]=0,(h=this.huft_build(i,0,t,257,x,k,s,n,r,this.hn,this.v))!=f||0==n[0]?(-3==h?l.msg="oversubscribed literal/length tree":-4!=h&&(l.msg="incomplete literal/length tree",h=-3),h):(this.initWorkArea(288),h=this.huft_build(i,t,e,0,C,S,o,a,r,this.hn,this.v),h!=f||0==a[0]&&t>257?(-3==h?l.msg="oversubscribed distance tree":h==g?(l.msg="incomplete distance tree",h=-3):-4!=h&&(l.msg="empty distance tree with lengths",h=-3),h):f)},a.prototype.initWorkArea=function(t){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(t),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16)),this.v.length<t&&(this.v=new Int32Array(t));for(var e=0;e<t;e++)this.v[e]=0;for(var e=0;e<16;e++)this.c[e]=0;for(var e=0;e<3;e++)this.r[e]=0;o(this.c,0,this.u,0,15),o(this.c,0,this.x,0,16)};var A=new Uint8Array(1),M="function"==typeof A.subarray;return{inflateBuffer:h,arrayCopy:o}}.apply(e,n))&&(t.exports=a)},function(t,e,i){(function(n){var a,s,o;!function(n,r){s=[i(0)],a=r,void 0!==(o="function"==typeof a?a.apply(e,s):a)&&(t.exports=o)}(0,function(t){var e=t.ajaxSettings;e.responseFields.native="responseNative",e.converters["* native"]=!0;var i={},a=0,s={0:200,1223:204},o={},r=n.ajaxSettings.xhr();window.ActiveXObject&&t(window).on("unload",function(){for(var t in o)o[t]()}),i.cors=!!r&&"withCredentials"in r,i.ajax=r=!!r,t.ajaxTransport("native",function(t){var e;if(i.cors||r&&!t.crossDomain)return{send:function(i,n){var r,l=t.xhr(),h=++a,c={};if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)l[r]=t.xhrFields[r];t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)l.setRequestHeader(r,i[r]);e=function(t){return function(){e&&(delete o[h],e=l.onload=l.onerror=null,"abort"===t?l.abort():"error"===t?n(l.status,l.statusText):(l.response&&(c.native=l.response),n(s[l.status]||l.status,l.statusText,c,l.getAllResponseHeaders())))}},l.onload=e(),l.onerror=e("error"),e=o[h]=e("abort");try{l.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),t.getNative=function(e,i){return t.ajax({dataType:"native",url:e,xhrFields:{responseType:"arraybuffer"},success:i})}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t,n,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),r=s(o),l=i(4),h=s(l),c=t.View.extend(r.default.LoggableMixin).extend({_logNamespace:"user",options:{warnAtPercent:85,errorAtPercent:100},initialize:function(t){this.log(this+".initialize:",t),n.extend(this.options,t),this.listenTo(this.model,"change:quota_percent change:total_disk_usage",this.render)},update:function(t){return this.log(this+" updating user data...",t),this.model.loadFromApi(this.model.get("id"),t),this},isOverQuota:function(){return null!==this.model.get("quota_percent")&&this.model.get("quota_percent")>=this.options.errorAtPercent},_render_quota:function(){var t=this.model.toJSON(),e=t.quota_percent,i=a(this._templateQuotaMeter(t)),n=i.find(".progress-bar");return this.isOverQuota()?(n.attr("class","progress-bar progress-bar-danger"),i.find(".quota-meter-text").css("color","white"),this.trigger("quota:over",t)):e>=this.options.warnAtPercent?(n.attr("class","progress-bar progress-bar-warning"),this.trigger("quota:under quota:under:approaching",t)):(n.attr("class","progress-bar progress-bar-success"),this.trigger("quota:under quota:under:ok",t)),i},_render_usage:function(){var t=a(this._templateUsage(this.model.toJSON()));return this.log(this+".rendering usage:",t),t},render:function(){var t=null;return this.log(this+".model.quota_percent:",this.model.get("quota_percent")),t=null===this.model.get("quota_percent")||void 0===this.model.get("quota_percent")?this._render_usage():this._render_quota(),this.$el.html(t),this.$el.find(".quota-meter-text").tooltip(),this},_templateQuotaMeter:function(t){return['<div id="quota-meter" class="quota-meter progress">','<div class="progress-bar" style="width: ',t.quota_percent,'%"></div>','<div class="quota-meter-text" data-placement="left" style="top: 6px"',t.nice_total_disk_usage?' title="Using '+t.nice_total_disk_usage+'.  This value is recalculated when you log out.">':">",(0,h.default)("Using")," ",t.quota_percent,"%","</div>","</div>"].join("")},_templateUsage:function(t){return['<div id="quota-meter" class="quota-meter" style="background-color: transparent">','<div class="quota-meter-text" data-placement="left" data-original-title="This value is recalculated when you log out." style="top: 6px; color: white">',t.nice_total_disk_usage?(0,h.default)("Using ")+t.nice_total_disk_usage:"","</div>","</div>"].join("")},toString:function(){return"UserQuotaMeter("+this.model+")"}});e.default={UserQuotaMeter:c}}).call(e,i(2),i(1),i(0))}]);
//# sourceMappingURL=libs.bundled.js.map