define("mvc/collection/collection-li",["exports","mvc/list/list-item","mvc/dataset/dataset-li","mvc/base-mvc","utils/localization"],function(e,t,i,l,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=s(t),n=s(i),r=s(l),d=s(a),c=o.default.FoldoutListItemView,m=o.default.ListItemView,p=c.extend({className:c.prototype.className+" dataset-collection",id:function(){return["dataset_collection",this.model.get("id")].join("-")},initialize:function(e){this.linkTarget=e.linkTarget||"_blank",this.hasUser=e.hasUser,c.prototype.initialize.call(this,e)},_setUpListeners:function(){c.prototype._setUpListeners.call(this),this.listenTo(this.model,"change",function(e,t){_.has(e.changed,"deleted")?this.render():_.has(e.changed,"element_count")&&this.$("> .title-bar .subtitle").replaceWith(this._renderSubtitle())})},_renderSubtitle:function(){return $(this.templates.subtitle(this.model.toJSON(),this))},_getFoldoutPanelOptions:function(){var e=c.prototype._getFoldoutPanelOptions.call(this);return _.extend(e,{linkTarget:this.linkTarget,hasUser:this.hasUser})},$selector:function(){return this.$("> .selector")},toString:function(){return"DCListItemView("+(this.model?""+this.model:"(no model)")+")"}});p.prototype.templates=function(){var e=_.extend({},c.prototype.templates.warnings,{error:r.default.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',(0,d.default)("There was an error getting the data for this collection"),": <%- model.error %>","</div>","<% } %>"]),purged:r.default.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',(0,d.default)("This collection has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:r.default.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',(0,d.default)("This collection has been deleted"),"</div>","<% } %>"])}),t=r.default.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- collection.element_identifier || collection.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"collection"),i=r.default.wrapTemplate(['<div class="subtitle">','<% var countText = collection.element_count? ( collection.element_count + " " ) : ""; %>','<%        if( collection.collection_type === "list" ){ %>',(0,d.default)("a list of <%- countText %>datasets"),'<% } else if( collection.collection_type === "paired" ){ %>',(0,d.default)("a pair of datasets"),'<% } else if( collection.collection_type === "list:paired" ){ %>',(0,d.default)("a list of <%- countText %>dataset pairs"),'<% } else if( collection.collection_type === "list:list" ){ %>',(0,d.default)("a list of <%- countText %>dataset lists"),"<% } %>","</div>"],"collection");return _.extend({},c.prototype.templates,{warnings:e,titleBar:t,subtitle:i})}();var u=m.extend({className:m.prototype.className+" dataset-collection-element",initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("DCEListItemView.initialize:",e),m.prototype.initialize.call(this,e)},toString:function(){return"DCEListItemView("+(this.model?""+this.model:"(no model)")+")"}});u.prototype.templates=function(){var e=r.default.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element");return _.extend({},m.prototype.templates,{titleBar:e})}();var f=n.default.DatasetListItemView.extend({className:n.default.DatasetListItemView.prototype.className+" dataset-collection-element",initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("DatasetDCEListItemView.initialize:",e),n.default.DatasetListItemView.prototype.initialize.call(this,e)},_fetchModelDetails:function(){var e=this;return e.model.inReadyState()&&!e.model.hasDetails()?e.model.fetch({silent:!0}):jQuery.when()},toString:function(){return"DatasetDCEListItemView("+(this.model?""+this.model:"(no model)")+")"}});f.prototype.templates=function(){var e=r.default.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>","</div>"],"element");return _.extend({},n.default.DatasetListItemView.prototype.templates,{titleBar:e})}();var h=p.extend({className:p.prototype.className+" dataset-collection-element",_swapNewRender:function(e){p.prototype._swapNewRender.call(this,e);var t=this.model.get("state")||"ok";return this.$el.addClass("state-"+t),this.$el},toString:function(){return"NestedDCDCEListItemView("+(this.model?""+this.model:"(no model)")+")"}});e.default={DCListItemView:p,DCEListItemView:u,DatasetDCEListItemView:f,NestedDCDCEListItemView:h}});
//# sourceMappingURL=../../../maps/mvc/collection/collection-li.js.map
